import{$ as Yi,$a as Wi,$b as r1,A as Sw,Aa as jw,Ab as tf,B as V0,Ba as Y0,Bb as pn,C as Ew,Ca as Uw,Cb as lm,D as zl,Da as nd,Db as cm,E as Iw,Ea as X0,Eb as n1,F as Dw,Fa as Ys,Fb as i1,G as ch,Ga as Gw,Gb as um,H as uh,Ha as Kp,Hb as dm,I as j0,Ia as ln,Ib as Ll,J as Bl,Ja as Ai,Jb as eC,K as kw,Ka as Hw,Kb as od,L as U0,La as Q0,Lb as tC,M as Rw,Ma as $w,Mb as mh,N as qp,Na as ph,Nb as nC,O as Ic,Oa as Fr,Ob as iC,P as G0,Pa as Ww,Pb as sa,Q as zw,Qa as K0,Qb as oC,R as Bw,Ra as J0,Rb as _h,S as Yp,Sa as wo,Sb as rC,T as oa,Ta as fh,Tb as o1,U as Dc,Ua as Zw,Ub as nf,V as Wo,Va as e1,Vb as aC,W as eo,Wa as qw,Wb as hm,X as Xp,Xa as Pr,Xb as sC,Y as pi,Ya as t1,Yb as yi,Z as Mr,Za as Yw,Zb as lC,_ as Fw,_a as Xw,_b as cC,a as Et,aa as H0,ab as _i,ac as uC,b as $i,ba as ji,bb as Qw,bc as dC,c as bw,ca as Wt,cb as id,d as ww,da as $0,db as Lr,e as B0,ea as Lw,eb as gh,f as Rl,fa as Qp,fb as Jp,g as Cw,ga as cr,gb as Fl,h as Mw,ha as sn,hb as Nr,i as im,ia as Ar,ib as Vr,j as F0,ja as Do,jb as re,k as L0,ka as W0,kb as se,l as ds,la as Nw,lb as _t,m as bo,ma as dh,mb as Xs,n as Zs,na as kc,nb as rm,o as lr,oa as Vw,ob as Kw,p as Pn,pa as Rc,pb as Jw,q as Wp,qa as hs,qb as Xi,r as Aw,ra as ps,rb as ur,s as Pw,sa as Ra,sb as am,t as mi,ta as ko,tb as sm,u as td,ua as Z0,ub as ef,v as Br,va as hh,vb as Qs,w as Zp,wa as q0,wb as ra,x as Ow,xa as om,xb as aa,y as N0,ya as qs,yb as _e,z as Tw,za as Ro,zb as Zo}from"./chunk-MBR2AIPK.js";var py=ww((dy,hy)=>{"use strict";(function(x,g){typeof dy=="object"&&typeof hy<"u"?hy.exports=g():typeof define=="function"&&define.amd?define(g):(x=typeof globalThis<"u"?globalThis:x||self,x.mapboxgl=g())})(dy,function(){"use strict";var x,g,P;function v(r,j){if(!x)x=j;else if(!g)g=j;else{var ce="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+x+")(sharedChunk); ("+g+")(sharedChunk); self.onerror = null;",we={};x(we),P=j(we),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(P.workerUrl=window.URL.createObjectURL(new Blob([ce],{type:"text/javascript"})))}}v(["exports"],function(r){"use strict";var j="3.3.0";let ce,we={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ce==null){let t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ce=process.env.API_URL_REGEX!=null?new RegExp(process.env.API_URL_REGEX):t}catch{ce=t}}return ce},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!we.API_URL)return null;try{let t=new URL(we.API_URL);return t.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":t.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"};function Oe(t){return we.API_URL_REGEX.test(t)}function Qe(t){return t.indexOf("mapbox:")===0}function zt(t){return we.API_CDN_URL_REGEX.test(t)}function jt(t){return we.API_SPRITE_REGEX.test(t)}function Wn(t){return we.API_STYLE_REGEX.test(t)&&!jt(t)}let Ui={create:"create",load:"load",fullLoad:"fullLoad"};function Bo(t){let e=t.name.split("?")[0];return zt(e)&&e.includes("mapbox-gl.js")?"javascript":zt(e)&&e.includes("mapbox-gl.css")?"css":function(n){return we.API_FONTS_REGEX.test(n)}(e)?"fontRange":jt(e)?"sprite":Wn(e)?"style":function(n){return we.API_TILEJSON_REGEX.test(n)}(e)?"tilejson":"other"}function lo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Po=jr;function jr(t,e,n,o){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=o}jr.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,o=0;o<8;o++){var s=this.sampleCurveX(n)-t;if(Math.abs(s)<e)return n;var l=this.sampleCurveDerivativeX(n);if(Math.abs(l)<1e-6)break;n-=s/l}var d=0,p=1;for(n=t,o=0;o<20&&(s=this.sampleCurveX(n),!(Math.abs(s-t)<e));o++)t>s?d=n:p=n,n=.5*(p-d)+d;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var dr=lo(Po),da=Ur;function Ur(t,e){this.x=t,this.y=e}Ur.prototype={clone:function(){return new Ur(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),o=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=o,this},_rotateAround:function(t,e){var n=Math.cos(t),o=Math.sin(t),s=e.y+o*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-o*(this.y-e.y),this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ur.convert=function(t){return t instanceof Ur?t:Array.isArray(t)?new Ur(t[0],t[1]):t};var ut=lo(da);let La=Math.PI/180,ol=180/Math.PI;function mn(t){return t*La}function Qi(t){return t*ol}let Nl=[[0,0],[1,0],[1,1],[0,1]];function ft(t){if(t<=0)return 0;if(t>=1)return 1;let e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function hr(t,e,n,o){let s=new dr(t,e,n,o);return function(l){return s.solve(l)}}let Co=hr(.25,.1,.25,1);function on(t,e,n){return Math.min(n,Math.max(e,t))}function On(t,e,n){return(n=on((n-t)/(e-t),0,1))*n*(3-2*n)}function ha(t,e,n){let o=n-e,s=((t-e)%o+o)%o+e;return s===e?n:s}function pr(t,e,n){if(!t.length)return n(null,[]);let o=t.length,s=new Array(t.length),l=null;t.forEach((d,p)=>{e(d,(m,_)=>{m&&(l=m),s[p]=_,--o==0&&n(l,s)})})}function to(t,...e){for(let n of e)for(let o in n)t[o]=n[o];return t}let Na=1;function We(){return Na++}function rl(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function pa(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function gs(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function Gr(t,e){t.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function Fi(t,e){return t.indexOf(e,t.length-e.length)!==-1}function ki(t,e,n){let o={};for(let s in t)o[s]=e.call(n||this,t[s],s,t);return o}function Fo(t,e,n){let o={};for(let s in t)e.call(n||this,t[s],s,t)&&(o[s]=t[s]);return o}function Lo(t){return Array.isArray(t)?t.map(Lo):typeof t=="object"&&t?ki(t,Lo):t}let Vl={};function ci(t){Vl[t]||(typeof console<"u"&&console.warn(t),Vl[t]=!0)}function Oo(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function fr(t){let e=0;for(let n,o,s=0,l=t.length,d=l-1;s<l;d=s++)n=t[s],o=t[d],e+=(o.x-n.x)*(n.y+o.y);return e}function gr([t,e,n]){let o=mn(e+90),s=mn(n);return{x:t*Math.cos(o)*Math.sin(s),y:t*Math.sin(o)*Math.sin(s),z:t*Math.cos(s),azimuthal:e,polar:n}}function Ri(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function mr(t){let e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,o,s,l)=>{let d=s||l;return e[o]=!d||d.toLowerCase(),""}),e["max-age"]){let n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let qn,Xn,Or,qo,Tr,Sr,Ve=null;function Q(t){try{let e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function oe(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function pe(t,e,n,o){for(;e<n;){let s=e+n>>1;t[s]<o?e=s+1:n=s}return e}function ze(t,e,n,o){for(;e<n;){let s=e+n>>1;t[s]<=o?e=s+1:n=s}return e}function Le(){return qn==null&&(qn=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),qn}let Ke={now:()=>qo!==void 0?qo:performance.now(),setNow(t){qo=t},restoreNow(){qo=void 0},frame(t){let e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){let{width:n,height:o}=t;Tr||(Tr=document.createElement("canvas"));let s=Tr.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return(n>Tr.width||o>Tr.height)&&(Tr.width=n,Tr.height=o),s.clearRect(-e,-e,n+2*e,o+2*e),s.drawImage(t,0,0,n,o),s.getImageData(-e,-e,n+2*e,o+2*e)},resolveURL:t=>(Xn||(Xn=document.createElement("a")),Xn.href=t,Xn.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Or==null&&(Or=window.matchMedia("(prefers-reduced-motion: reduce)")),Or.matches)},hasCanvasFingerprintNoise(){if(Sr!==void 0)return Sr;if(!Le())return Sr=!1,!1;let t=new OffscreenCanvas(85,1),e=t.getContext("2d",{willReadFrequently:!0}),n=0;for(let s=0;s<t.width;++s)e.fillStyle=`rgba(${n++},${n++},${n++}, 255)`,e.fillRect(s,0,1,1);let o=e.getImageData(0,0,t.width,t.height);n=0;for(let s=0;s<o.data.length;++s)if(s%4!=3&&n++!==o.data[s])return Sr=!0,!0;return Sr=!1,!1}},yt="mapbox-tiles",Fe=500,wt=50,gt,At;function rn(){try{return caches}catch{}}function Un(){let t=rn();t&&!gt&&(gt=t.open(yt))}function ti(t){let e=t.indexOf("?");if(e<0)return t;let n=["language","worldview"],o=new URLSearchParams,s=new URLSearchParams(t.slice(e));for(let l of n){let d=s.get(l);d&&o.set(l,d)}return`${t.slice(0,e)}?${o.toString()}`}function Vn(t,e){let n=t.indexOf("?");if(n<0)return`${t}?${new URLSearchParams(e).toString()}`;let o=new URLSearchParams(t.slice(n));for(let s in e)o.set(s,e[s]);return`${t.slice(0,n)}?${o.toString()}`}let Bn=1/0,Jt={supported:!1,testSupport:function(t){!oi&&ni&&(Qn?co(t):vn=t)}},vn,ni,oi=!1,Qn=!1,yo=typeof self<"u"?self:{};function co(t){let e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ni),t.isContextLost())return;Jt.supported=!0}catch{}t.deleteTexture(e),oi=!0}yo.document&&(ni=yo.document.createElement("img"),ni.onload=function(){vn&&co(vn),vn=null,Qn=!0},ni.onerror=function(){oi=!0,vn=null},ni.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");let bn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(bn);class ri extends Error{constructor(e,n,o){n===401&&Oe(o)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=n,this.url=o}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}let ai=Ri()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Re=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(ai())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(o,s){let l=new AbortController,d=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:ai(),referrerPolicy:o.referrerPolicy,signal:l.signal}),p=!1,m=!1,_=(b=d.url).indexOf("sku=")>0&&Oe(b);var b;o.type==="json"&&d.headers.set("Accept","application/json");let C=(E,k,R)=>{if(m)return;if(E&&E.message!=="SecurityError"&&ci(E.toString()),k&&R)return O(k);let L=Date.now();fetch(d).then(V=>{if(V.ok){let Y=_?V.clone():null;return O(V,Y,L)}return s(new ri(V.statusText,V.status,o.url))}).catch(V=>{V.name!=="AbortError"&&s(new Error(`${V.message} ${o.url}`))})},O=(E,k,R)=>{(o.type==="arrayBuffer"?E.arrayBuffer():o.type==="json"?E.json():E.text()).then(L=>{m||(k&&R&&function(V,Y,J){if(Un(),!gt)return;let K=mr(Y.headers.get("Cache-Control")||"");if(K["no-store"])return;let ae={status:Y.status,statusText:Y.statusText,headers:new Headers};Y.headers.forEach((me,ve)=>ae.headers.set(ve,me)),K["max-age"]&&ae.headers.set("Expires",new Date(J+1e3*K["max-age"]).toUTCString());let ie=ae.headers.get("Expires");if(!ie||new Date(ie).getTime()-J<42e4)return;let de=ti(V.url);if(Y.status===206){let me=V.headers.get("Range");if(!me)return;ae.status=200,de=Vn(de,{range:me})}(function(me,ve){if(At===void 0)try{new Response(new ReadableStream),At=!0}catch{At=!1}At?ve(me.body):me.blob().then(ve)})(Y,me=>{let ve=new Response(me,ae);Un(),gt&&gt.then(Pe=>Pe.put(de,ve)).catch(Pe=>ci(Pe.message))})}(d,k,R),p=!0,s(null,L,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(L=>{m||s(new Error(L.message))})};return _?function(E,k){if(Un(),!gt)return k(null);gt.then(R=>{let L=ti(E.url),V=E.headers.get("Range");V&&(L=Vn(L,{range:V})),R.match(L).then(Y=>{let J=function(K){if(!K)return!1;let ae=new Date(K.headers.get("Expires")||0),ie=mr(K.headers.get("Cache-Control")||"");return ae>Date.now()&&!ie["no-cache"]}(Y);R.delete(L),J&&R.put(L,Y.clone()),k(null,Y,J)}).catch(k)}).catch(k)}(d,C):C(null,null),{cancel:()=>{m=!0,p||l.abort()}}}(t,e);if(Ri()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(o,s){let l=new XMLHttpRequest;l.open(o.method||"GET",o.url,!0),o.type==="arrayBuffer"&&(l.responseType="arraybuffer");for(let d in o.headers)l.setRequestHeader(d,o.headers[d]);return o.type==="json"&&(l.responseType="text",l.setRequestHeader("Accept","application/json")),l.withCredentials=o.credentials==="include",l.onerror=()=>{s(new Error(l.statusText))},l.onload=()=>{if((l.status>=200&&l.status<300||l.status===0)&&l.response!==null){let d=l.response;if(o.type==="json")try{d=JSON.parse(l.response)}catch(p){return s(p)}s(null,d,l.getResponseHeader("Cache-Control"),l.getResponseHeader("Expires"))}else s(new ri(l.statusText,l.status,o.url))},l.send(o.body),{cancel:()=>l.abort()}}(t,e)},De=function(t,e){return Re(to(t,{type:"arrayBuffer"}),e)};function He(t){let e=document.createElement("a");return e.href=t,e.protocol===location.protocol&&e.host===location.host}let ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",et,ct;et=[],ct=0;let tt=function(t,e){if(Jt.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ct>=we.MAX_PARALLEL_IMAGE_REQUESTS){let l={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return et.push(l),l}ct++;let n=!1,o=()=>{if(!n)for(n=!0,ct--;et.length&&ct<we.MAX_PARALLEL_IMAGE_REQUESTS;){let l=et.shift(),{requestParameters:d,callback:p,cancelled:m}=l;m||(l.cancel=tt(d,p).cancel)}},s=De(t,(l,d,p,m)=>{o(),l?e(l):d&&(self.createImageBitmap?function(_,b){let C=new Blob([new Uint8Array(_)],{type:"image/png"});createImageBitmap(C).then(O=>{b(null,O)}).catch(O=>{b(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(d,(_,b)=>e(_,b,p,m)):function(_,b){let C=new Image;C.onload=()=>{b(null,C),URL.revokeObjectURL(C.src),C.onload=null,requestAnimationFrame(()=>{C.src=ot})},C.onerror=()=>b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let O=new Blob([new Uint8Array(_)],{type:"image/png"});C.src=_.byteLength?URL.createObjectURL(O):ot}(d,(_,b)=>e(_,b,p,m)))});return{cancel:()=>{s.cancel(),o()}}},rt="01",pt="NO_ACCESS_TOKEN",lt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lt(t){let e=t.match(lt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function fn(t){let e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}let Pt="mapbox.eventData";function Yn(t){if(!t)return null;let e=t.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(e[1]).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ui{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){let n=Yn(we.ACCESS_TOKEN),o="";return o=n&&n.u?btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(s,l)=>String.fromCharCode(+("0x"+l)))):we.ACCESS_TOKEN||"",e?`${Pt}.${e}:${o}`:`${Pt}:${o}`}fetchEventData(){let e=Q("localStorage"),n=this.getStorageKey(),o=this.getStorageKey("uuid");if(e)try{let s=localStorage.getItem(n);s&&(this.eventData=JSON.parse(s));let l=localStorage.getItem(o);l&&(this.anonId=l)}catch{ci("Unable to read from LocalStorage")}}saveEventData(){let e=Q("localStorage"),n=this.getStorageKey(),o=this.getStorageKey("uuid"),s=this.anonId;if(e&&s)try{localStorage.setItem(o,s),Object.keys(this.eventData).length>=1&&localStorage.setItem(n,JSON.stringify(this.eventData))}catch{ci("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,n,o,s){if(!we.EVENTS_URL)return;let l=Lt(we.EVENTS_URL);l.params.push(`access_token=${s||we.ACCESS_TOKEN||""}`);let d={event:this.type,created:new Date(e).toISOString()},p=n?to(d,n):d,m={url:fn(l),headers:{"Content-Type":"text/plain"},body:JSON.stringify([p])};this.pendingRequest=function(_,b){return Re(to(_,{method:"POST"}),b)}(m,_=>{this.pendingRequest=null,o(_),this.saveEventData(),this.processRequests(s)})}queueRequest(e,n){this.queue.push(e),this.processRequests(n)}}let Kn=new class extends ui{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){we.EVENTS_URL&&we.ACCESS_TOKEN&&Array.isArray(t)&&t.some(n=>Qe(n)||Oe(n))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();let e=Yn(we.ACCESS_TOKEN),n=e?e.u:we.ACCESS_TOKEN,o=n!==this.eventData.tokenU;gs(this.anonId)||(this.anonId=rl(),o=!0);let s=this.queue.shift();if(this.eventData.lastSuccess){let l=new Date(this.eventData.lastSuccess),d=new Date(s),p=(s-this.eventData.lastSuccess)/864e5;o=o||p>=1||p<-1||l.getDate()!==d.getDate()}else o=!0;o?this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:j,skuId:rt,"enabled.telemetry":!1,userId:this.anonId},l=>{l||(this.eventData.lastSuccess=s,this.eventData.tokenU=n)},t):this.processRequests()}},Li=Kn.postTurnstileEvent.bind(Kn),no=new class extends ui{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,o){this.skuToken=e,this.errorCb=o,we.EVENTS_URL&&(n||we.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(pt)))}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;let{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),gs(this.anonId)||(this.anonId=rl()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:j,skuId:rt,skuToken:this.skuToken,userId:this.anonId},o=>{o?this.errorCb(o):e&&(this.success[e]=!0)},t))}remove(){this.errorCb=null}},Sn=no.postMapLoadEvent.bind(no),No=new class extends ui{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){we.EVENTS_URL&&(t||we.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;let{timestamp:e,performanceData:n}=this.queue.shift(),o=function(s){let l=performance.getEntriesByType("resource"),d=performance.getEntriesByType("mark"),p=function(E){let k={};if(E){for(let R in E)if(R!=="other")for(let L of E[R]){let V=`${R}ResolveRangeMin`,Y=`${R}ResolveRangeMax`,J=`${R}RequestCount`,K=`${R}RequestCachedCount`;k[V]=Math.min(k[V]||1/0,L.startTime),k[Y]=Math.max(k[Y]||-1/0,L.responseEnd);let ae=ie=>{k[ie]===void 0&&(k[ie]=0),++k[ie]};L.transferSize!==void 0&&L.transferSize===0&&ae(K),ae(J)}}return k}(function(E,k){let R={};if(E)for(let L of E){let V=k(L);R[V]===void 0&&(R[V]=[]),R[V].push(L)}return R}(l,Bo)),m=window.devicePixelRatio,_=navigator.connection||navigator.mozConnection||navigator.webkitConnection,b=_?_.effectiveType:void 0,C={counters:[],metadata:[],attributes:[]},O=(E,k,R)=>{R!=null&&E.push({name:k,value:R.toString()})};for(let E in p)O(C.counters,E,p[E]);if(s.interactionRange[0]!==1/0&&s.interactionRange[1]!==-1/0&&(O(C.counters,"interactionRangeMin",s.interactionRange[0]),O(C.counters,"interactionRangeMax",s.interactionRange[1])),d)for(let E of Object.keys(Ui)){let k=Ui[E],R=d.find(L=>L.name===k);R&&O(C.counters,k,R.startTime)}return O(C.counters,"visibilityHidden",s.visibilityHidden),O(C.attributes,"style",function(E){if(E)for(let k of E){let R=k.name.split("?")[0];if(Wn(R)){let L=R.split("/").slice(-2);if(L.length===2)return`mapbox://styles/${L[0]}/${L[1]}`}}}(l)),O(C.attributes,"terrainEnabled",s.terrainEnabled?"true":"false"),O(C.attributes,"fogEnabled",s.fogEnabled?"true":"false"),O(C.attributes,"projection",s.projection),O(C.attributes,"zoom",s.zoom),O(C.metadata,"devicePixelRatio",m),O(C.metadata,"connectionEffectiveType",b),O(C.metadata,"navigatorUserAgent",navigator.userAgent),O(C.metadata,"screenWidth",window.screen.width),O(C.metadata,"screenHeight",window.screen.height),O(C.metadata,"windowWidth",window.innerWidth),O(C.metadata,"windowHeight",window.innerHeight),O(C.metadata,"mapWidth",s.width/m),O(C.metadata,"mapHeight",s.height/m),O(C.metadata,"webglRenderer",s.renderer),O(C.metadata,"webglVendor",s.vendor),O(C.metadata,"sdkVersion",j),O(C.metadata,"sdkIdentifier","mapbox-gl-js"),C}(n);for(let s of o.metadata);for(let s of o.counters);for(let s of o.attributes);this.postEvent(e,o,()=>{},t)}},_r=No.postPerformanceEvent.bind(No),Zi=new class extends ui{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,o){if(!we.API_URL||!we.SESSION_PATH)return;let s=Lt(we.API_URL+we.SESSION_PATH);s.params.push(`sku=${e||""}`),s.params.push(`access_token=${o||we.ACCESS_TOKEN||""}`);let l={url:fn(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(d,p){return Re(to(d,{method:"GET"}),p)}(l,d=>{this.pendingRequest=null,n(d),this.saveEventData(),this.processRequests(o)})}getSessionAPI(t,e,n,o){this.skuToken=e,this.errorCb=o,we.SESSION_PATH&&we.API_URL&&(n||we.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(pt)))}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;let{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,o=>{o?this.errorCb(o):e&&(this.success[e]=!0)},t)}remove(){this.errorCb=null}},al=Zi.getSessionAPI.bind(Zi),fa=new Set;function Yo(t,e,n){n[t]&&n[t].indexOf(e)!==-1||(n[t]=n[t]||[],n[t].push(e))}function Uc(t,e,n){if(n&&n[t]){let o=n[t].indexOf(e);o!==-1&&n[t].splice(o,1)}}class Va{constructor(e,n={}){to(this,n),this.type=e}}class Gc extends Va{constructor(e,n={}){super("error",to({error:e},n))}}class ga{on(e,n){return this._listeners=this._listeners||{},Yo(e,n,this._listeners),this}off(e,n){return Uc(e,n,this._listeners),Uc(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},Yo(e,n,this._oneTimeListeners),this):new Promise(o=>this.once(e,o))}fire(e,n){typeof e=="string"&&(e=new Va(e,n||{}));let o=e.type;if(this.listens(o)){e.target=this;let s=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(let p of s)p.call(this,e);let l=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(let p of l)Uc(o,p,this._oneTimeListeners),p.call(this,e);let d=this._eventedParent;d&&(to(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),d.fire(e))}else e instanceof Gc&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}r.y=void 0;var ld={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jl(t){return(t=Math.round(t))<0?0:t>255?255:t}function Hc(t){return jl(t[t.length-1]==="%"?parseFloat(t)/100*255:parseInt(t))}function Ul(t){return(e=t[t.length-1]==="%"?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function $c(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{r.y={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in ld)return ld[n].slice();if(n[0]==="#")return n.length===4?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:n.length===7&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var o=n.indexOf("("),s=n.indexOf(")");if(o!==-1&&s+1===n.length){var l=n.substr(0,o),d=n.substr(o+1,s-(o+1)).split(","),p=1;switch(l){case"rgba":if(d.length!==4)return null;p=Ul(d.pop());case"rgb":return d.length!==3?null:[Hc(d[0]),Hc(d[1]),Hc(d[2]),p];case"hsla":if(d.length!==4)return null;p=Ul(d.pop());case"hsl":if(d.length!==3)return null;var m=(parseFloat(d[0])%360+360)%360/360,_=Ul(d[1]),b=Ul(d[2]),C=b<=.5?b*(_+1):b+_-b*_,O=2*b-C;return[jl(255*$c(O,C,m+1/3)),jl(255*$c(O,C,m)),jl(255*$c(O,C,m-1/3)),p];default:return null}}return null}}catch{}class jn{constructor(e,n,o,s=1){this.r=e,this.g=n,this.b=o,this.a=s}static parse(e){if(!e)return;if(e instanceof jn)return e;if(typeof e!="string")return;let n=r.y(e);return n?new jn(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){let[e,n,o,s]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(o)},${s})`}toArray(){let{r:e,g:n,b:o,a:s}=this;return s===0?[0,0,0,0]:[255*e/s,255*n/s,255*o/s,s]}toArray01(){let{r:e,g:n,b:o,a:s}=this;return s===0?[0,0,0,0]:[e/s,n/s,o/s,s]}toArray01Scaled(e){let{r:n,g:o,b:s,a:l}=this;return l===0?[0,0,0]:[n/l*e,o/l*e,s/l*e]}toArray01PremultipliedAlpha(){let{r:e,g:n,b:o,a:s}=this;return[e,n,o,s]}toArray01Linear(){let{r:e,g:n,b:o,a:s}=this;return s===0?[0,0,0,0]:[Math.pow(e/s,2.2),Math.pow(n/s,2.2),Math.pow(o/s,2.2),s]}}jn.black=new jn(0,0,0,1),jn.white=new jn(1,1,1,1),jn.transparent=new jn(0,0,0,0),jn.red=new jn(1,0,0,1),jn.blue=new jn(0,0,1,1);var zi=jn;function gn(t,e,n){return t*(1-n)+e*n}function cd(t,e,n){return t.map((o,s)=>gn(o,e[s],n))}var Gl=Object.freeze({__proto__:null,array:cd,color:function(t,e,n){return new zi(gn(t.r,e.r,n),gn(t.g,e.g,n),gn(t.b,e.b,n),gn(t.a,e.a,n))},number:gn});function Wc(t,...e){for(let n of e)for(let o in n)t[o]=n[o];return t}class kh extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}var Xo=kh;class ja{constructor(e,n=[]){this.parent=e,this.bindings={};for(let[o,s]of n)this.bindings[o]=s}concat(e){return new ja(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var ud=ja;let Hr={kind:"null"},nt={kind:"number"},kn={kind:"string"},Rn={kind:"boolean"},Qo={kind:"color"},Ua={kind:"object"},wn={kind:"value"},Hl={kind:"collator"},ms={kind:"formatted"},_s={kind:"resolvedImage"};function To(t,e){return{kind:"array",itemType:t,N:e}}function Oi(t){if(t.kind==="array"){let e=Oi(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}let kt=[Hr,nt,kn,Rn,Qo,ms,Ua,To(wn),_s];function Ga(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ga(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(let n of kt)if(!Ga(n,e))return null}}return`Expected ${Oi(t)} but found ${Oi(e)} instead.`}function Ut(t,e){return e.some(n=>n.kind===t.kind)}function ma(t,e){return e.some(n=>n==="null"?t===null:n==="array"?Array.isArray(t):n==="object"?t&&!Array.isArray(t)&&typeof t=="object":n===typeof t)}class an{constructor(e,n,o){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ys{constructor(e,n,o,s,l){this.text=e.normalize?e.normalize():e,this.image=n,this.scale=o,this.fontStack=s,this.textColor=l}}class io{constructor(e){this.sections=e}static fromString(e){return new io([new ys(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.namePrimary.length!==0)}static factory(e){return e instanceof io?e:io.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){let e=["format"];for(let n of this.sections){if(n.image){e.push(["image",n.image.namePrimary]);continue}e.push(n.text);let o={};n.fontStack&&(o["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(o["font-scale"]=n.scale),n.textColor&&(o["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(o)}return e}}class Dt{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,n){return e?new Dt({namePrimary:e,nameSecondary:n,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function dd(t,e,n,o){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[t,e,n,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[t,e,n,o]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _a(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof zi||t instanceof an||t instanceof io||t instanceof Dt)return!0;if(Array.isArray(t)){for(let e of t)if(!_a(e))return!1;return!0}if(typeof t=="object"){for(let e in t)if(!_a(t[e]))return!1;return!0}return!1}function Ni(t){if(t===null)return Hr;if(typeof t=="string")return kn;if(typeof t=="boolean")return Rn;if(typeof t=="number")return nt;if(t instanceof zi)return Qo;if(t instanceof an)return Hl;if(t instanceof io)return ms;if(t instanceof Dt)return _s;if(Array.isArray(t)){let e=t.length,n;for(let o of t){let s=Ni(o);if(n){if(n===s)continue;n=wn;break}n=s}return To(n||wn,e)}return Ua}function Ko(t){let e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof zi||t instanceof io||t instanceof Dt?t.toString():JSON.stringify(t)}class Vo{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!_a(e[1]))return n.error("invalid value");let o=e[1],s=Ni(o),l=n.expectedType;return s.kind!=="array"||s.N!==0||!l||l.kind!=="array"||typeof l.N=="number"&&l.N!==0||(s=l),new Vo(s,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zi?["rgba"].concat(this.value.toArray()):this.value instanceof io?this.value.serialize():this.value}}var Er=Vo,Vi=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};let sl={string:kn,number:nt,boolean:Rn,object:Ua};class $l{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o,s=1,l=e[0];if(l==="array"){let p,m;if(e.length>2){let _=e[1];if(typeof _!="string"||!(_ in sl)||_==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);p=sl[_],s++}else p=wn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);m=e[2],s++}o=To(p,m)}else o=sl[l];let d=[];for(;s<e.length;s++){let p=n.parse(e[s],s,wn);if(!p)return null;d.push(p)}return new $l(o,d)}evaluate(e){for(let n=0;n<this.args.length;n++){let o=this.args[n].evaluate(e);if(!Ga(this.type,Ni(o)))return o;if(n===this.args.length-1)throw new Vi(`Expected value to be of type ${Oi(this.type)}, but found ${Oi(Ni(o))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){let e=this.type,n=[e.kind];if(e.kind==="array"){let o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){n.push(o.kind);let s=e.N;(typeof s=="number"||this.args.length>1)&&n.push(s)}}return n.concat(this.args.map(o=>o.serialize()))}}var $r=$l;class xs{constructor(e){this.type=ms,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o=e[1];if(!Array.isArray(o)&&typeof o=="object")return n.error("First argument must be an image or text section.");let s=[],l=!1;for(let d=1;d<=e.length-1;++d){let p=e[d];if(l&&typeof p=="object"&&!Array.isArray(p)){l=!1;let m=null;if(p["font-scale"]&&(m=n.parse(p["font-scale"],1,nt),!m))return null;let _=null;if(p["text-font"]&&(_=n.parse(p["text-font"],1,To(kn)),!_))return null;let b=null;if(p["text-color"]&&(b=n.parse(p["text-color"],1,Qo),!b))return null;let C=s[s.length-1];C.scale=m,C.font=_,C.textColor=b}else{let m=n.parse(e[d],1,wn);if(!m)return null;let _=m.type.kind;if(_!=="string"&&_!=="value"&&_!=="null"&&_!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,s.push({content:m,scale:null,font:null,textColor:null})}}return new xs(s)}evaluate(e){return new io(this.sections.map(n=>{let o=n.content.evaluate(e);return Ni(o)===_s?new ys("",o,null,null,null):new ys(Ko(o),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(let n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}serialize(){let e=["format"];for(let n of this.sections){e.push(n.content.serialize());let o={};n.scale&&(o["font-scale"]=n.scale.serialize()),n.font&&(o["text-font"]=n.font.serialize()),n.textColor&&(o["text-color"]=n.textColor.serialize()),e.push(o)}return e}}class Ha{constructor(e,n){this.type=_s,this.inputPrimary=e,this.inputSecondary=n}static parse(e,n){if(e.length<2)return n.error("Expected two or more arguments.");let o=n.parse(e[1],1,kn);if(!o)return n.error("No image name provided.");if(e.length===2)return new Ha(o);let s=n.parse(e[2],1,kn);return s?new Ha(o,s):n.error("Secondary image variant is not a string.")}evaluate(e){let n=Dt.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(n.namePrimary)>-1,n.nameSecondary&&n.available&&e.availableImages&&(n.available=e.availableImages.indexOf(n.nameSecondary)>-1)),n}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function vs(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}let yr={"to-boolean":Rn,"to-color":Qo,"to-number":nt,"to-string":kn};class Wl{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o=e[0],s=[],l=Hr;if(o==="to-array"){if(!Array.isArray(e[1]))return null;let d=e[1].length;if(n.expectedType){if(n.expectedType.kind!=="array")return n.error(`Expected ${n.expectedType.kind} but found array.`);l=To(n.expectedType.itemType,d)}else{if(!(d>0&&_a(e[1][0])))return null;l=To(Ni(e[1][0]),d)}for(let p=0;p<d;p++){let m=e[1][p],_;if(vs(m)==="array")_=n.parse(m,void 0,l.itemType);else{let b=vs(m);if(b!==l.itemType.kind)return n.error(`Expected ${l.itemType.kind} but found ${b}.`);_=n.registry.literal.parse(["literal",m===void 0?null:m],n)}if(!_)return null;s.push(_)}}else{if((o==="to-boolean"||o==="to-string")&&e.length!==2)return n.error("Expected one argument.");l=yr[o];for(let d=1;d<e.length;d++){let p=n.parse(e[d],d,wn);if(!p)return null;s.push(p)}}return new Wl(l,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let n,o;for(let s of this.args){if(n=s.evaluate(e),o=null,n instanceof zi)return n;if(typeof n=="string"){let l=e.parseColor(n);if(l)return l}else if(Array.isArray(n)&&(o=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:dd(n[0],n[1],n[2],n[3]),!o))return new zi(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Vi(o||`Could not parse color from value '${typeof n=="string"?n:String(JSON.stringify(n))}'`)}if(this.type.kind==="number"){let n=null;for(let o of this.args){if(n=o.evaluate(e),n===null)return 0;let s=Number(n);if(!isNaN(s))return s}throw new Vi(`Could not convert ${JSON.stringify(n)} to number.`)}return this.type.kind==="formatted"?io.fromString(Ko(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Dt.fromString(Ko(this.args[0].evaluate(e))):this.type.kind==="array"?this.args.map(n=>n.evaluate(e)):Ko(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new xs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ha(this.args[0]).serialize();let e=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(n=>{e.push(n.serialize())}),e}}var So=Wl;let ll=["Unknown","Point","LineString","Polygon"];var Zc=class{constructor(t,e){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=t,this.options=e}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ll[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(t){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){let t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:o}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(o*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=zi.parse(t)),e}getConfig(t){return this.options?this.options.get(t):null}};class ya{constructor(e,n,o,s,l){this.name=e,this.type=n,this._evaluate=o,this.args=s,this._overloadIndex=l}evaluate(e){if(!this._evaluate){let n=ya.definitions[this.name];this._evaluate=Array.isArray(n)?n[2]:n.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,n){let o=e[0],s=ya.definitions[o];if(!s)return n.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);let l=Array.isArray(s)?s[0]:s.type,d=Array.isArray(s)?[[s[1],s[2]]]:s.overloads,p=[],m=null,_=-1;for(let[b,C]of d){if(Array.isArray(b)&&b.length!==e.length-1)continue;p.push(b),_++,m=new bd(n.registry,n.path,null,n.scope,void 0,n._scope,n.options);let O=[],E=!1;for(let k=1;k<e.length;k++){let R=e[k],L=Array.isArray(b)?b[k-1]:b.type,V=m.parse(R,1+O.length,L);if(!V){E=!0;break}O.push(V)}if(!E)if(Array.isArray(b)&&b.length!==O.length)m.error(`Expected ${b.length} arguments, but found ${O.length} instead.`);else{for(let k=0;k<O.length;k++){let R=Array.isArray(b)?b[k]:b.type,L=O[k];m.concat(k+1).checkSubtype(R,L.type)}if(m.errors.length===0)return new ya(o,l,C,O,_)}}if(p.length===1)n.errors.push(...m.errors);else{let b=(p.length?p:d.map(([O])=>O)).map(hd).join(" | "),C=[];for(let O=1;O<e.length;O++){let E=n.parse(e[O],1+C.length);if(!E)return null;C.push(Oi(E.type))}n.error(`Expected arguments of type ${b}, but found (${C.join(", ")}) instead.`)}return null}static register(e,n){ya.definitions=n;for(let o in n)e[o]=ya}}function hd(t){return Array.isArray(t)?`(${t.map(Oi).join(", ")})`:`(${Oi(t.type)}...)`}var _n=ya;class cl{constructor(e,n,o){this.type=Hl,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");let o=e[1];if(typeof o!="object"||Array.isArray(o))return n.error("Collator options argument must be an object.");let s=n.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,Rn);if(!s)return null;let l=n.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,Rn);if(!l)return null;let d=null;return o.locale&&(d=n.parse(o.locale,1,kn),!d)?null:new cl(s,l,d)}evaluate(e){return new an(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){let e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}var qc={exports:{}};qc.exports=function(){function t(o,s,l,d,p){for(;d>l;){if(d-l>600){var m=d-l+1,_=s-l+1,b=Math.log(m),C=.5*Math.exp(2*b/3),O=.5*Math.sqrt(b*C*(m-C)/m)*(_-m/2<0?-1:1);t(o,s,Math.max(l,Math.floor(s-_*C/m+O)),Math.min(d,Math.floor(s+(m-_)*C/m+O)),p)}var E=o[s],k=l,R=d;for(e(o,l,s),p(o[d],E)>0&&e(o,l,d);k<R;){for(e(o,k,R),k++,R--;p(o[k],E)<0;)k++;for(;p(o[R],E)>0;)R--}p(o[l],E)===0?e(o,l,R):e(o,++R,d),R<=s&&(l=R+1),s<=R&&(d=R-1)}}function e(o,s,l){var d=o[s];o[s]=o[l],o[l]=d}function n(o,s){return o<s?-1:o>s?1:0}return function(o,s,l,d,p){t(o,s,l||0,d||o.length-1,p||n)}}();var Rh=lo(qc.exports);function zh(t){let e=0;for(let n,o,s=0,l=t.length,d=l-1;s<l;d=s++)n=t[s],o=t[d],e+=(o.x-n.x)*(n.y+o.y);return e}function xa(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function jo(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Zl(t,e,n){let o=t[0]-e[0],s=t[1]-e[1],l=t[0]-n[0],d=t[1]-n[1];return o*d-l*s==0&&o*l<=0&&s*d<=0}function bs(t,e,n=!1){let o=!1;for(let p=0,m=e.length;p<m;p++){let _=e[p];for(let b=0,C=_.length,O=C-1;b<C;O=b++){let E=_[O],k=_[b];if(Zl(t,E,k))return n;(l=E)[1]>(s=t)[1]!=(d=k)[1]>s[1]&&s[0]<(d[0]-l[0])*(s[1]-l[1])/(d[1]-l[1])+l[0]&&(o=!o)}}var s,l,d;return o}function ql(t,e,n,o){let s=o[0]-n[0],l=o[1]-n[1],d=(t[0]-n[0])*l-s*(t[1]-n[1]),p=(e[0]-n[0])*l-s*(e[1]-n[1]);return d>0&&p<0||d<0&&p>0}function Wr(t,e,n,o){return(s=[o[0]-n[0],o[1]-n[1]])[0]*(l=[e[0]-t[0],e[1]-t[1]])[1]-s[1]*l[0]!=0&&!(!ql(t,e,n,o)||!ql(n,o,t,e));var s,l}let Mo=8192;function ul(t,e){let n=(180+t[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,s=Math.pow(2,e.z);return[Math.round(n*s*Mo),Math.round(o*s*Mo)]}function Yl(t,e){for(let n=0;n<e.length;n++)if(bs(t,e[n]))return!0;return!1}function $a(t,e,n){for(let o of n)for(let s=0,l=o.length,d=l-1;s<l;d=s++)if(Wr(t,e,o[d],o[s]))return!0;return!1}function Jo(t,e){for(let n=0;n<t.length;++n)if(!bs(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if($a(t[n],t[n+1],e))return!1;return!0}function pd(t,e){for(let n=0;n<e.length;n++)if(Jo(t,e[n]))return!0;return!1}function Yc(t,e,n){let o=[];for(let s=0;s<t.length;s++){let l=[];for(let d=0;d<t[s].length;d++){let p=ul(t[s][d],n);xa(e,p),l.push(p)}o.push(l)}return o}function Xl(t,e,n){let o=[];for(let s=0;s<t.length;s++){let l=Yc(t[s],e,n);o.push(l)}return o}function va(t,e,n,o){if(t[0]<n[0]||t[0]>n[2]){let s=.5*o,l=t[0]-n[0]>s?-o:n[0]-t[0]>s?o:0;l===0&&(l=t[0]-n[2]>s?-o:n[2]-t[0]>s?o:0),t[0]+=l}xa(e,t)}function Xc(t,e,n,o){let s=Math.pow(2,o.z)*Mo,l=[o.x*Mo,o.y*Mo],d=[];if(!t)return d;for(let p of t)for(let m of p){let _=[m.x+l[0],m.y+l[1]];va(_,e,n,s),d.push(_)}return d}function Qc(t,e,n,o){let s=Math.pow(2,o.z)*Mo,l=[o.x*Mo,o.y*Mo],d=[];if(!t)return d;for(let m of t){let _=[];for(let b of m){let C=[b.x+l[0],b.y+l[1]];xa(e,C),_.push(C)}d.push(_)}if(e[2]-e[0]<=s/2){(p=e)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(let m of d)for(let _ of m)va(_,e,n,s)}var p;return d}class ws{constructor(e,n){this.type=Rn,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(_a(e[1])){let o=e[1];if(o.type==="FeatureCollection")for(let s=0;s<o.features.length;++s){let l=o.features[s].geometry.type;if(l==="Polygon"||l==="MultiPolygon")return new ws(o,o.features[s].geometry)}else if(o.type==="Feature"){let s=o.geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new ws(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new ws(o,o)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(n,o){let s=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],d=n.canonicalID();if(!d)return!1;if(o.type==="Polygon"){let p=Yc(o.coordinates,l,d),m=Xc(n.geometry(),s,l,d);if(!jo(s,l))return!1;for(let _ of m)if(!bs(_,p))return!1}if(o.type==="MultiPolygon"){let p=Xl(o.coordinates,l,d),m=Xc(n.geometry(),s,l,d);if(!jo(s,l))return!1;for(let _ of m)if(!Yl(_,p))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(n,o){let s=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],d=n.canonicalID();if(!d)return!1;if(o.type==="Polygon"){let p=Yc(o.coordinates,l,d),m=Qc(n.geometry(),s,l,d);if(!jo(s,l))return!1;for(let _ of m)if(!Jo(_,p))return!1}if(o.type==="MultiPolygon"){let p=Xl(o.coordinates,l,d),m=Qc(n.geometry(),s,l,d);if(!jo(s,l))return!1;for(let _ of m)if(!pd(_,p))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ql=ws,dl={exports:{}};dl.exports=function(){var t={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},e=1/298.257223563,n=e*(2-e),o=Math.PI/180,s=function(_,b){if(_===void 0)throw new Error("No latitude given.");if(b&&!t[b])throw new Error("Unknown unit "+b+". Use one of: "+Object.keys(t).join(", "));var C=6378.137*o*(b?t[b]:1),O=Math.cos(_*o),E=1/(1-n*(1-O*O)),k=Math.sqrt(E);this.kx=C*k*O,this.ky=C*k*E*(1-n)},l={units:{configurable:!0}};function d(_,b){return _[0]===b[0]&&_[1]===b[1]}function p(_,b,C){var O=m(b[0]-_[0]);return[_[0]+O*C,_[1]+(b[1]-_[1])*C]}function m(_){for(;_<-180;)_+=360;for(;_>180;)_-=360;return _}return s.fromTile=function(_,b,C){var O=Math.PI*(1-2*(_+.5)/Math.pow(2,b)),E=Math.atan(.5*(Math.exp(O)-Math.exp(-O)))/o;return new s(E,C)},l.units.get=function(){return t},s.prototype.distance=function(_,b){var C=m(_[0]-b[0])*this.kx,O=(_[1]-b[1])*this.ky;return Math.sqrt(C*C+O*O)},s.prototype.bearing=function(_,b){var C=m(b[0]-_[0])*this.kx;return Math.atan2(C,(b[1]-_[1])*this.ky)/o},s.prototype.destination=function(_,b,C){var O=C*o;return this.offset(_,Math.sin(O)*b,Math.cos(O)*b)},s.prototype.offset=function(_,b,C){return[_[0]+b/this.kx,_[1]+C/this.ky]},s.prototype.lineDistance=function(_){for(var b=0,C=0;C<_.length-1;C++)b+=this.distance(_[C],_[C+1]);return b},s.prototype.area=function(_){for(var b=0,C=0;C<_.length;C++)for(var O=_[C],E=0,k=O.length,R=k-1;E<k;R=E++)b+=m(O[E][0]-O[R][0])*(O[E][1]+O[R][1])*(C?-1:1);return Math.abs(b)/2*this.kx*this.ky},s.prototype.along=function(_,b){var C=0;if(b<=0)return _[0];for(var O=0;O<_.length-1;O++){var E=_[O],k=_[O+1],R=this.distance(E,k);if((C+=R)>b)return p(E,k,(b-(C-R))/R)}return _[_.length-1]},s.prototype.pointToSegmentDistance=function(_,b,C){var O=b[0],E=b[1],k=m(C[0]-O)*this.kx,R=(C[1]-E)*this.ky,L=0;return k===0&&R===0||((L=(m(_[0]-O)*this.kx*k+(_[1]-E)*this.ky*R)/(k*k+R*R))>1?(O=C[0],E=C[1]):L>0&&(O+=k/this.kx*L,E+=R/this.ky*L)),k=m(_[0]-O)*this.kx,R=(_[1]-E)*this.ky,Math.sqrt(k*k+R*R)},s.prototype.pointOnLine=function(_,b){for(var C,O,E,k,R=1/0,L=0;L<_.length-1;L++){var V=_[L][0],Y=_[L][1],J=m(_[L+1][0]-V)*this.kx,K=(_[L+1][1]-Y)*this.ky,ae=0;J===0&&K===0||((ae=(m(b[0]-V)*this.kx*J+(b[1]-Y)*this.ky*K)/(J*J+K*K))>1?(V=_[L+1][0],Y=_[L+1][1]):ae>0&&(V+=J/this.kx*ae,Y+=K/this.ky*ae));var ie=(J=m(b[0]-V)*this.kx)*J+(K=(b[1]-Y)*this.ky)*K;ie<R&&(R=ie,C=V,O=Y,E=L,k=ae)}return{point:[C,O],index:E,t:Math.max(0,Math.min(1,k))}},s.prototype.lineSlice=function(_,b,C){var O=this.pointOnLine(C,_),E=this.pointOnLine(C,b);if(O.index>E.index||O.index===E.index&&O.t>E.t){var k=O;O=E,E=k}var R=[O.point],L=O.index+1,V=E.index;!d(C[L],R[0])&&L<=V&&R.push(C[L]);for(var Y=L+1;Y<=V;Y++)R.push(C[Y]);return d(C[V],E.point)||R.push(E.point),R},s.prototype.lineSliceAlong=function(_,b,C){for(var O=0,E=[],k=0;k<C.length-1;k++){var R=C[k],L=C[k+1],V=this.distance(R,L);if((O+=V)>_&&E.length===0&&E.push(p(R,L,(_-(O-V))/V)),O>=b)return E.push(p(R,L,(b-(O-V))/V)),E;O>_&&E.push(L)}return E},s.prototype.bufferPoint=function(_,b){var C=b/this.ky,O=b/this.kx;return[_[0]-O,_[1]-C,_[0]+O,_[1]+C]},s.prototype.bufferBBox=function(_,b){var C=b/this.ky,O=b/this.kx;return[_[0]-O,_[1]-C,_[2]+O,_[3]+C]},s.prototype.insideBBox=function(_,b){return m(_[0]-b[0])>=0&&m(_[0]-b[2])<=0&&_[1]>=b[1]&&_[1]<=b[3]},Object.defineProperties(s,l),s}();var ba=lo(dl.exports),Kc={exports:{}};Kc.exports=function(){var t=function(n,o){if(n===void 0&&(n=[]),o===void 0&&(o=e),this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function e(n,o){return n<o?-1:n>o?1:0}return t.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},t.prototype.pop=function(){if(this.length!==0){var n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}},t.prototype.peek=function(){return this.data[0]},t.prototype._up=function(n){for(var o=this.data,s=this.compare,l=o[n];n>0;){var d=n-1>>1,p=o[d];if(s(l,p)>=0)break;o[n]=p,n=d}o[n]=l},t.prototype._down=function(n){for(var o=this.data,s=this.compare,l=this.length>>1,d=o[n];n<l;){var p=1+(n<<1),m=o[p],_=p+1;if(_<this.length&&s(o[_],m)<0&&(p=_,m=o[_]),s(m,d)>=0)break;o[n]=m,n=p}o[n]=d},t}();var er=lo(Kc.exports),ht=8192;function Kl(t,e){return e.dist-t.dist}let Jl=100,Cs=50;function Ms(t){let e=[1/0,1/0,-1/0,-1/0];if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function wa(t){return t[1]-t[0]+1}function xr(t,e){let n=t[1]>=t[0]&&t[1]<e;return n||console.warn("Distance Expression: Index is out of range"),n}function Jc(t,e){if(t[0]>t[1])return[null,null];let n=wa(t);if(e){if(n===2)return[t,null];let o=Math.floor(n/2);return[[t[0],t[0]+o],[t[0]+o,t[1]]]}{if(n===1)return[t,null];let o=Math.floor(n/2)-1;return[[t[0],t[0]+o],[t[0]+o+1,t[1]]]}}function Ca(t,e){let n=[1/0,1/0,-1/0,-1/0];if(!xr(e,t.length))return n;for(let o=e[0];o<=e[1];++o)xa(n,t[o]);return n}function ec(t){let e=[1/0,1/0,-1/0,-1/0];for(let n=0;n<t.length;++n)for(let o=0;o<t[n].length;++o)xa(e,t[n][o]);return e}function Zr(t,e,n){if(Ms(t)||Ms(e))return NaN;let o=0,s=0;return t[2]<e[0]&&(o=e[0]-t[2]),t[0]>e[2]&&(o=t[0]-e[2]),t[1]>e[3]&&(s=t[1]-e[3]),t[3]<e[1]&&(s=e[1]-t[3]),n.distance([0,0],[o,s])}function tc(t){return 360*t-180}function fd(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Ma(t,e){let n=Math.pow(2,e.z),o=(t.y/ht+e.y)/n;return[tc((t.x/ht+e.x)/n),fd(o)]}function nc(t,e){let n=[];for(let o=0;o<t.length;++o)n.push(Ma(t[o],e));return n}function gd(t,e,n){let o=n.pointOnLine(e,t).point;return n.distance(t,o)}function eu(t,e,n,o,s){let l=n.slice(o[0],o[1]+1),d=1/0;for(let p=e[0];p<=e[1];++p)if((d=Math.min(d,gd(t[p],l,s)))===0)return 0;return d}function ic(t,e,n,o,s){let l=Math.min(s.pointToSegmentDistance(t,n,o),s.pointToSegmentDistance(e,n,o)),d=Math.min(s.pointToSegmentDistance(n,t,e),s.pointToSegmentDistance(o,t,e));return Math.min(l,d)}function md(t,e,n,o,s){if(!xr(e,t.length)||!xr(o,n.length))return NaN;let l=1/0;for(let d=e[0];d<e[1];++d)for(let p=o[0];p<o[1];++p){if(Wr(t[d],t[d+1],n[p],n[p+1]))return 0;l=Math.min(l,ic(t[d],t[d+1],n[p],n[p+1],s))}return l}function _d(t,e,n,o,s){if(!xr(e,t.length)||!xr(o,n.length))return NaN;let l=1/0;for(let d=e[0];d<=e[1];++d)for(let p=o[0];p<=o[1];++p)if((l=Math.min(l,s.distance(t[d],n[p])))===0)return l;return l}function yd(t,e,n){if(bs(t,e,!0))return 0;let o=1/0;for(let s of e){let l=s.length;if(l<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(s[0]!==s[l-1]&&(o=Math.min(o,n.pointToSegmentDistance(t,s[l-1],s[0])))===0||(o=Math.min(o,gd(t,s,n)))===0)return o}return o}function tu(t,e,n,o){if(!xr(e,t.length))return NaN;for(let l=e[0];l<=e[1];++l)if(bs(t[l],n,!0))return 0;let s=1/0;for(let l=e[0];l<e[1];++l)for(let d of n)for(let p=0,m=d.length,_=m-1;p<m;_=p++){if(Wr(t[l],t[l+1],d[_],d[p]))return 0;s=Math.min(s,ic(t[l],t[l+1],d[_],d[p],o))}return s}function As(t,e){for(let n of t)for(let o=0;o<=n.length-1;++o)if(bs(n[o],e,!0))return!0;return!1}function xd(t,e,n,o=1/0){let s=ec(t),l=ec(e);if(o!==1/0&&Zr(s,l,n)>=o)return o;if(jo(s,l)){if(As(t,e))return 0}else if(As(e,t))return 0;let d=o;for(let p of t)for(let m=0,_=p.length,b=_-1;m<_;b=m++)for(let C of e)for(let O=0,E=C.length,k=E-1;O<E;k=O++){if(Wr(p[b],p[m],C[k],C[O]))return 0;d=Math.min(d,ic(p[b],p[m],C[k],C[O],n))}return d}function hl(t,e,n,o,s,l,d){if(l===null||d===null)return;let p=Zr(Ca(o,l),Ca(s,d),n);p<e&&t.push({dist:p,range1:l,range2:d})}function Aa(t,e,n,o,s=1/0){let l=Math.min(o.distance(t[0],n[0][0]),s);if(l===0)return l;let d=new er([{dist:0,range1:[0,t.length-1],range2:[0,0]}],Kl),p=e?Cs:Jl,m=ec(n);for(;d.length;){let _=d.pop();if(_.dist>=l)continue;let b=_.range1;if(wa(b)<=p){if(!xr(b,t.length))return NaN;if(e){let C=tu(t,b,n,o);if((l=Math.min(l,C))===0)return l}else for(let C=b[0];C<=b[1];++C){let O=yd(t[C],n,o);if((l=Math.min(l,O))===0)return l}}else{let C=Jc(b,e);if(C[0]!==null){let O=Zr(Ca(t,C[0]),m,o);O<l&&d.push({dist:O,range1:C[0],range2:[0,0]})}if(C[1]!==null){let O=Zr(Ca(t,C[1]),m,o);O<l&&d.push({dist:O,range1:C[1],range2:[0,0]})}}}return l}function vd(t,e,n,o,s,l=1/0){let d=Math.min(l,s.distance(t[0],n[0]));if(d===0)return d;let p=new er([{dist:0,range1:[0,t.length-1],range2:[0,n.length-1]}],Kl),m=e?Cs:Jl,_=o?Cs:Jl;for(;p.length;){let b=p.pop();if(b.dist>=d)continue;let C=b.range1,O=b.range2;if(wa(C)<=m&&wa(O)<=_){if(!xr(C,t.length)||!xr(O,n.length))return NaN;if(e&&o?d=Math.min(d,md(t,C,n,O,s)):e||o?e&&!o?d=Math.min(d,eu(n,O,t,C,s)):!e&&o&&(d=Math.min(d,eu(t,C,n,O,s))):d=Math.min(d,_d(t,C,n,O,s)),d===0)return d}else{let E=Jc(C,e),k=Jc(O,o);hl(p,d,s,t,n,E[0],k[0]),hl(p,d,s,t,n,E[0],k[1]),hl(p,d,s,t,n,E[1],k[0]),hl(p,d,s,t,n,E[1],k[1])}}return d}function nu(t,e,n,o,s=1/0){let l=s,d=Ca(t,[0,t.length-1]);for(let p of n)if(!(l!==1/0&&Zr(d,Ca(p,[0,p.length-1]),o)>=l)&&(l=Math.min(l,vd(t,e,p,!0,o,l)),l===0))return l;return l}function oc(t,e,n,o,s=1/0){let l=s,d=Ca(t,[0,t.length-1]);for(let p of n){if(l!==1/0&&Zr(d,ec(p),o)>=l)continue;let m=Aa(t,e,p,o,l);if(isNaN(m))return m;if((l=Math.min(l,m))===0)return l}return l}function rc(t){return t==="Point"||t==="MultiPoint"||t==="LineString"||t==="MultiLineString"||t==="Polygon"||t==="MultiPolygon"}class Pa{constructor(e,n){this.type=nt,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(_a(e[1])){let o=e[1];if(o.type==="FeatureCollection"){for(let s=0;s<o.features.length;++s)if(rc(o.features[s].geometry.type))return new Pa(o,o.features[s].geometry)}else if(o.type==="Feature"){if(rc(o.geometry.type))return new Pa(o,o.geometry)}else if(rc(o.type))return new Pa(o,o)}return n.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){let n=e.geometry(),o=e.canonicalID();if(n!=null&&o!=null){if(e.geometryType()==="Point")return function(s,l,d){let p=[];for(let _ of s)for(let b of _)p.push(Ma(b,l));let m=new ba(p[0][1],"meters");return d.type==="Point"||d.type==="MultiPoint"||d.type==="LineString"?vd(p,!1,d.type==="Point"?[d.coordinates]:d.coordinates,d.type==="LineString",m):d.type==="MultiLineString"?nu(p,!1,d.coordinates,m):d.type==="Polygon"||d.type==="MultiPolygon"?oc(p,!1,d.type==="Polygon"?[d.coordinates]:d.coordinates,m):null}(n,o,this.geometries);if(e.geometryType()==="LineString")return function(s,l,d){let p=[];for(let _ of s){let b=[];for(let C of _)b.push(Ma(C,l));p.push(b)}let m=new ba(p[0][0][1],"meters");if(d.type==="Point"||d.type==="MultiPoint"||d.type==="LineString")return nu(d.type==="Point"?[d.coordinates]:d.coordinates,d.type==="LineString",p,m);if(d.type==="MultiLineString"){let _=1/0;for(let b=0;b<d.coordinates.length;b++){let C=nu(d.coordinates[b],!0,p,m,_);if(isNaN(C))return C;if((_=Math.min(_,C))===0)return _}return _}if(d.type==="Polygon"||d.type==="MultiPolygon"){let _=1/0;for(let b=0;b<p.length;b++){let C=oc(p[b],!0,d.type==="Polygon"?[d.coordinates]:d.coordinates,m,_);if(isNaN(C))return C;if((_=Math.min(_,C))===0)return _}return _}return null}(n,o,this.geometries);if(e.geometryType()==="Polygon")return function(s,l,d){let p=[];for(let _ of function(b,C){let O=b.length;if(O<=1)return[b];let E=[],k,R;for(let L=0;L<O;L++){let V=zh(b[L]);V!==0&&(b[L].area=Math.abs(V),R===void 0&&(R=V<0),R===V<0?(k&&E.push(k),k=[b[L]]):k.push(b[L]))}return k&&E.push(k),E}(s)){let b=[];for(let C=0;C<_.length;++C)b.push(nc(_[C],l));p.push(b)}let m=new ba(p[0][0][0][1],"meters");if(d.type==="Point"||d.type==="MultiPoint"||d.type==="LineString")return oc(d.type==="Point"?[d.coordinates]:d.coordinates,d.type==="LineString",p,m);if(d.type==="MultiLineString"){let _=1/0;for(let b=0;b<d.coordinates.length;b++){let C=oc(d.coordinates[b],!0,p,m,_);if(isNaN(C))return C;if((_=Math.min(_,C))===0)return _}return _}return d.type==="Polygon"||d.type==="MultiPolygon"?function(_,b,C){let O=1/0;for(let E of _)for(let k of b){let R=xd(E,k,C,O);if(isNaN(R))return R;if((O=Math.min(O,R))===0)return O}return O}(d.type==="Polygon"?[d.coordinates]:d.coordinates,p,m):null}(n,o,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var pl=Pa;function fl(t,e){switch(t){case"string":return Ko(e);case"number":return+e;case"boolean":return!!e;case"color":return zi.parse(e);case"formatted":return io.fromString(Ko(e));case"resolvedImage":return Dt.fromString(Ko(e))}return e}function iu(t,e,n,o){return o!==void 0&&(t=o*Math.round(t/o)),e!==void 0&&t<e&&(t=e),n!==void 0&&t>n&&(t=n),t}class gl{constructor(e,n,o){this.type=e,this.key=n,this.scope=o}static parse(e,n){let o=n.expectedType;if(o==null&&(o=wn),e.length<2||e.length>3)return n.error("Invalid number of arguments for 'config' expression.");let s=n.parse(e[1],1);if(!(s instanceof Er))return n.error("Key name of 'config' expression must be a string literal.");if(e.length>=3){let l=n.parse(e[2],2);return l instanceof Er?new gl(o,Ko(s.value),Ko(l.value)):n.error("Scope of 'config' expression must be a string literal.")}return new gl(o,Ko(s.value))}evaluate(e){let n=[this.key,this.scope,e.scope].filter(Boolean).join(""),o=e.getConfig(n);if(!o)return null;let{type:s,value:l,values:d,minValue:p,maxValue:m,stepValue:_}=o,b=o.default.evaluate(e),C=b;if(l){let O=e.scope;e.scope=(O||"").split("").slice(1).join(""),C=l.evaluate(e),e.scope=O}return s&&(C=fl(s,C)),C===void 0||p===void 0&&m===void 0&&_===void 0||(typeof C=="number"?C=iu(C,p,m,_):Array.isArray(C)&&(C=C.map(O=>typeof O=="number"?iu(O,p,m,_):O))),l!==void 0&&C!==void 0&&d&&!d.includes(C)&&(C=b,s&&(C=fl(s,C))),(s&&s!==this.type||C!==void 0&&Ni(C)!==this.type)&&(C=fl(this.type.kind,C)),C}eachChild(){}outputDefined(){return!1}serialize(){let e=["config",this.key];return this.scope&&e.concat(this.key),e}}var Ps=gl;function Wa(t){if(t instanceof _n&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof Ql||t instanceof pl)return!1;let e=!0;return t.eachChild(n=>{e&&!Wa(n)&&(e=!1)}),e}function ml(t){if(t instanceof _n&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(n=>{e&&!ml(n)&&(e=!1)}),e}function Os(t){if(t instanceof Ps)return!1;let e=!0;return t.eachChild(n=>{e&&!Os(n)&&(e=!1)}),e}function oo(t,e){if(t instanceof _n&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(o=>{n&&!oo(o,e)&&(n=!1)}),n}class qr{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");let o=e[1];return n.scope.has(o)?new qr(o,n.scope.get(o)):n.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var uo=qr;class ou{constructor(e,n=[],o,s=new ud,l=[],d,p){this.registry=e,this.path=n,this.key=n.map(m=>`[${m}]`).join(""),this.scope=s,this.errors=l,this.expectedType=o,this._scope=d,this.options=p}parse(e,n,o,s,l={}){return n||o?this.concat(n,o,s)._parse(e,l):this._parse(e,l)}_parse(e,n){function o(s,l,d){return d==="assert"?new $r(l,[s]):d==="coerce"?new So(l,[s]):s}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let s=typeof e[0]=="string"?this.registry[e[0]]:void 0;if(s){let l=s.parse(e,this);if(!l)return null;if(this.expectedType){let d=this.expectedType,p=l.type;if(d.kind!=="string"&&d.kind!=="number"&&d.kind!=="boolean"&&d.kind!=="object"&&d.kind!=="array"||p.kind!=="value")if(d.kind!=="color"&&d.kind!=="formatted"&&d.kind!=="resolvedImage"||p.kind!=="value"&&p.kind!=="string"){if(this.checkSubtype(d,p))return null}else l=o(l,d,n.typeAnnotation||"coerce");else l=o(l,d,n.typeAnnotation||"assert")}if(!(l instanceof Er)&&l.type.kind!=="resolvedImage"&&ru(l)){let d=new Zc(this._scope,this.options);try{l=new Er(l.type,l.evaluate(d))}catch(p){return this.error(p.message),null}}return l}return So.parse(["to-array",e],this)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,o){let s=typeof e=="number"?this.path.concat(e):this.path,l=o?this.scope.concat(o):this.scope;return new ou(this.registry,s,n||null,l,this.errors,this._scope,this.options)}error(e,...n){let o=`${this.key}${n.map(s=>`[${s}]`).join("")}`;this.errors.push(new Xo(o,e))}checkSubtype(e,n){let o=Ga(e,n);return o&&this.error(o),o}}var bd=ou;function ru(t){if(t instanceof uo)return ru(t.boundExpression);if(t instanceof _n&&t.name==="error"||t instanceof cl||t instanceof Ql||t instanceof pl||t instanceof Ps)return!1;let e=t instanceof So||t instanceof $r,n=!0;return t.eachChild(o=>{n=e?n&&ru(o):n&&o instanceof Er}),!!n&&Wa(t)&&oo(t,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Za(t,e){let n=t.length-1,o,s,l=0,d=n,p=0;for(;l<=d;)if(p=Math.floor((l+d)/2),o=t[p],s=t[p+1],o<=e){if(p===n||e<s)return p;l=p+1}else{if(!(o>e))throw new Vi("Input is not a number.");d=p-1}return 0}class qa{constructor(e,n,o){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(let[s,l]of o)this.labels.push(s),this.outputs.push(l)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");let o=n.parse(e[1],1,nt);if(!o)return null;let s=[],l=null;n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);for(let d=1;d<e.length;d+=2){let p=d===1?-1/0:e[d],m=e[d+1],_=d,b=d+1;if(typeof p!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(s.length&&s[s.length-1][0]>=p)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);let C=n.parse(m,b,l);if(!C)return null;l=l||C.type,s.push([p,C])}return new qa(l,o,s)}evaluate(e){let n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);let s=this.input.evaluate(e);if(s<=n[0])return o[0].evaluate(e);let l=n.length;return s>=n[l-1]?o[l-1].evaluate(e):o[Za(n,s)].evaluate(e)}eachChild(e){e(this.input);for(let n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e=["step",this.input.serialize()];for(let n=0;n<this.labels.length;n++)n>0&&e.push(this.labels[n]),e.push(this.outputs[n].serialize());return e}}var _l=qa;let wd=.95047,Oa=1.08883,Cd=4/29,Ya=6/29,au=3*Ya*Ya,Md=Ya*Ya*Ya,Bh=Math.PI/180,vr=180/Math.PI;function yl(t){return t>Md?Math.pow(t,1/3):t/au+Cd}function xl(t){return t>Ya?t*t*t:au*(t-Cd)}function ac(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function sc(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function su(t){let e=sc(t.r),n=sc(t.g),o=sc(t.b),s=yl((.4124564*e+.3575761*n+.1804375*o)/wd),l=yl((.2126729*e+.7151522*n+.072175*o)/1);return{l:116*l-16,a:500*(s-l),b:200*(l-yl((.0193339*e+.119192*n+.9503041*o)/Oa)),alpha:t.a}}function lc(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,o=isNaN(t.b)?e:e-t.b/200;return e=1*xl(e),n=wd*xl(n),o=Oa*xl(o),new zi(ac(3.2404542*n-1.5371385*e-.4985314*o),ac(-.969266*n+1.8760108*e+.041556*o),ac(.0556434*n-.2040259*e+1.0572252*o),t.alpha)}function cc(t,e,n){let o=e-t;return t+n*(o>180||o<-180?o-360*Math.round(o/360):o)}let Ts={forward:su,reverse:lc,interpolate:function(t,e,n){return{l:gn(t.l,e.l,n),a:gn(t.a,e.a,n),b:gn(t.b,e.b,n),alpha:gn(t.alpha,e.alpha,n)}}},Ss={forward:function(t){let{l:e,a:n,b:o}=su(t),s=Math.atan2(o,n)*vr;return{h:s<0?s+360:s,c:Math.sqrt(n*n+o*o),l:e,alpha:t.a}},reverse:function(t){let e=t.h*Bh,n=t.c;return lc({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:cc(t.h,e.h,n),c:gn(t.c,e.c,n),l:gn(t.l,e.l,n),alpha:gn(t.alpha,e.alpha,n)}}};var lu=Object.freeze({__proto__:null,hcl:Ss,lab:Ts});class vl{constructor(e,n,o,s,l){this.type=e,this.operator=n,this.interpolation=o,this.input=s,this.labels=[],this.outputs=[];for(let[d,p]of l)this.labels.push(d),this.outputs.push(p)}static interpolationFactor(e,n,o,s){let l=0;if(e.name==="exponential")l=Xa(n,e.base,o,s);else if(e.name==="linear")l=Xa(n,1,o,s);else if(e.name==="cubic-bezier"){let d=e.controlPoints;l=new dr(d[0],d[1],d[2],d[3]).solve(Xa(n,1,o,s))}return l}static parse(e,n){let[o,s,l,...d]=e;if(!Array.isArray(s)||s.length===0)return n.error("Expected an interpolation type expression.",1);if(s[0]==="linear")s={name:"linear"};else if(s[0]==="exponential"){let _=s[1];if(typeof _!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);s={name:"exponential",base:_}}else{if(s[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(s[0])}`,1,0);{let _=s.slice(1);if(_.length!==4||_.some(b=>typeof b!="number"||b<0||b>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);s={name:"cubic-bezier",controlPoints:_}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(l=n.parse(l,2,nt),!l)return null;let p=[],m=null;o==="interpolate-hcl"||o==="interpolate-lab"?m=Qo:n.expectedType&&n.expectedType.kind!=="value"&&(m=n.expectedType);for(let _=0;_<d.length;_+=2){let b=d[_],C=d[_+1],O=_+3,E=_+4;if(typeof b!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(p.length&&p[p.length-1][0]>=b)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);let k=n.parse(C,E,m);if(!k)return null;m=m||k.type,p.push([b,k])}return m.kind==="number"||m.kind==="color"||m.kind==="array"&&m.itemType.kind==="number"&&typeof m.N=="number"?new vl(m,o,s,l,p):n.error(`Type ${Oi(m)} is not interpolatable.`)}evaluate(e){let n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);let s=this.input.evaluate(e);if(s<=n[0])return o[0].evaluate(e);let l=n.length;if(s>=n[l-1])return o[l-1].evaluate(e);let d=Za(n,s),p=vl.interpolationFactor(this.interpolation,s,n[d],n[d+1]),m=o[d].evaluate(e),_=o[d+1].evaluate(e);return this.operator==="interpolate"?Gl[this.type.kind.toLowerCase()](m,_,p):this.operator==="interpolate-hcl"?Ss.reverse(Ss.interpolate(Ss.forward(m),Ss.forward(_),p)):Ts.reverse(Ts.interpolate(Ts.forward(m),Ts.forward(_),p))}eachChild(e){e(this.input);for(let n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);let n=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)n.push(this.labels[o],this.outputs[o].serialize());return n}}function Xa(t,e,n,o){let s=o-n,l=t-n;return s===0?0:e===1?l/s:(Math.pow(e,l)-1)/(Math.pow(e,s)-1)}var Uo=vl;class Es{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let o=null,s=n.expectedType;s&&s.kind!=="value"&&(o=s);let l=[];for(let p of e.slice(1)){let m=n.parse(p,1+l.length,o,void 0,{typeAnnotation:"omit"});if(!m)return null;o=o||m.type,l.push(m)}let d=s&&l.some(p=>Ga(s,p.type));return new Es(d?wn:o,l)}evaluate(e){let n,o=null,s=0;for(let l of this.args){if(s++,o=l.evaluate(e),o&&o instanceof Dt&&!o.available&&(n||(n=o),o=null,s===this.args.length))return n;if(o!==null)break}return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){let e=["coalesce"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var cu=Es;class uc{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let o=[];for(let l=1;l<e.length-1;l+=2){let d=e[l];if(typeof d!="string")return n.error(`Expected string, but found ${typeof d} instead.`,l);if(/[^a-zA-Z0-9_]/.test(d))return n.error("Variable names must contain only alphanumeric characters or '_'.",l);let p=n.parse(e[l+1],l+1);if(!p)return null;o.push([d,p])}let s=n.parse(e[e.length-1],e.length-1,n.expectedType,o);return s?new uc(o,s):null}outputDefined(){return this.result.outputDefined()}serialize(){let e=["let"];for(let[n,o]of this.bindings)e.push(n,o.serialize());return e.push(this.result.serialize()),e}}var uu=uc;class Ta{constructor(e,n,o){this.type=e,this.index=n,this.input=o}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let o=n.parse(e[1],1,nt),s=n.parse(e[2],2,To(n.expectedType||wn));return o&&s?new Ta(s.type.itemType,o,s):null}evaluate(e){let n=this.index.evaluate(e),o=this.input.evaluate(e);if(n<0)throw new Vi(`Array index out of bounds: ${n} < 0.`);if(n>=o.length)throw new Vi(`Array index out of bounds: ${n} > ${o.length-1}.`);if(n!==Math.floor(n))throw new Vi(`Array index must be an integer, but found ${n} instead.`);return o[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Cn=Ta;class du{constructor(e,n){this.type=Rn,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let o=n.parse(e[1],1,wn),s=n.parse(e[2],2,wn);return o&&s?Ut(o.type,[Rn,kn,nt,Hr,wn])?new du(o,s):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oi(o.type)} instead`):null}evaluate(e){let n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(o==null)return!1;if(!ma(n,["boolean","string","number","null"]))throw new Vi(`Expected first argument to be of type boolean, string, number or null, but found ${Oi(Ni(n))} instead.`);if(!ma(o,["string","array"]))throw new Vi(`Expected second argument to be of type array or string, but found ${Oi(Ni(o))} instead.`);return o.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Fh=du;class Ir{constructor(e,n,o){this.type=nt,this.needle=e,this.haystack=n,this.fromIndex=o}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let o=n.parse(e[1],1,wn),s=n.parse(e[2],2,wn);if(!o||!s)return null;if(!Ut(o.type,[Rn,kn,nt,Hr,wn]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Oi(o.type)} instead`);if(e.length===4){let l=n.parse(e[3],3,nt);return l?new Ir(o,s,l):null}return new Ir(o,s)}evaluate(e){let n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!ma(n,["boolean","string","number","null"]))throw new Vi(`Expected first argument to be of type boolean, string, number or null, but found ${Oi(Ni(n))} instead.`);if(!ma(o,["string","array"]))throw new Vi(`Expected second argument to be of type array or string, but found ${Oi(Ni(o))} instead.`);if(this.fromIndex){let s=this.fromIndex.evaluate(e);return o.indexOf(n,s)}return o.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){let e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var hu=Ir;class pu{constructor(e,n,o,s,l,d){this.inputType=e,this.type=n,this.input=o,this.cases=s,this.outputs=l,this.otherwise=d}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let o,s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);let l={},d=[];for(let _=2;_<e.length-1;_+=2){let b=e[_],C=e[_+1];Array.isArray(b)||(b=[b]);let O=n.concat(_);if(b.length===0)return O.error("Expected at least one branch label.");for(let k of b){if(typeof k!="number"&&typeof k!="string")return O.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return O.error("Numeric branch labels must be integer values.");if(o){if(O.checkSubtype(o,Ni(k)))return null}else o=Ni(k);if(l[String(k)]!==void 0)return O.error("Branch labels must be unique.");l[String(k)]=d.length}let E=n.parse(C,_,s);if(!E)return null;s=s||E.type,d.push(E)}let p=n.parse(e[1],1,wn);if(!p)return null;let m=n.parse(e[e.length-1],e.length-1,s);return m?p.type.kind!=="value"&&n.concat(1).checkSubtype(o,p.type)?null:new pu(o,s,p,l,d,m):null}evaluate(e){let n=this.input.evaluate(e);return(Ni(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){let e=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),o=[],s={};for(let d of n){let p=s[this.cases[d]];p===void 0?(s[this.cases[d]]=o.length,o.push([this.cases[d],[d]])):o[p][1].push(d)}let l=d=>this.inputType.kind==="number"?Number(d):d;for(let[d,p]of o)e.push(p.length===1?l(p[0]):p.map(l)),e.push(this.outputs[d].serialize());return e.push(this.otherwise.serialize()),e}}var Ad=pu;class dc{constructor(e,n,o){this.type=e,this.branches=n,this.otherwise=o}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);let s=[];for(let d=1;d<e.length-1;d+=2){let p=n.parse(e[d],d,Rn);if(!p)return null;let m=n.parse(e[d+1],d+1,o);if(!m)return null;s.push([p,m]),o=o||m.type}let l=n.parse(e[e.length-1],e.length-1,o);return l?new dc(o,s,l):null}evaluate(e){for(let[n,o]of this.branches)if(n.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[n,o]of this.branches)e(n),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){let e=["case"];return this.eachChild(n=>{e.push(n.serialize())}),e}}var Pd=dc;class bl{constructor(e,n,o,s){this.type=e,this.input=n,this.beginIndex=o,this.endIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let o=n.parse(e[1],1,wn),s=n.parse(e[2],2,nt);if(!o||!s)return null;if(!Ut(o.type,[To(wn),kn,wn]))return n.error(`Expected first argument to be of type array or string, but found ${Oi(o.type)} instead`);if(e.length===4){let l=n.parse(e[3],3,nt);return l?new bl(o.type,o,s,l):null}return new bl(o.type,o,s)}evaluate(e){let n=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!ma(n,["string","array"]))throw new Vi(`Expected first argument to be of type array or string, but found ${Oi(Ni(n))} instead.`);if(this.endIndex){let s=this.endIndex.evaluate(e);return n.slice(o,s)}return n.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){let e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Qa=bl;function fu(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function gu(t,e,n,o){return o.compare(e,n)===0}function Is(t,e,n){let o=t!=="=="&&t!=="!=";return class w2{constructor(l,d,p){this.type=Rn,this.lhs=l,this.rhs=d,this.collator=p,this.hasUntypedArgument=l.type.kind==="value"||d.type.kind==="value"}static parse(l,d){if(l.length!==3&&l.length!==4)return d.error("Expected two or three arguments.");let p=l[0],m=d.parse(l[1],1,wn);if(!m)return null;if(!fu(p,m.type))return d.concat(1).error(`"${p}" comparisons are not supported for type '${Oi(m.type)}'.`);let _=d.parse(l[2],2,wn);if(!_)return null;if(!fu(p,_.type))return d.concat(2).error(`"${p}" comparisons are not supported for type '${Oi(_.type)}'.`);if(m.type.kind!==_.type.kind&&m.type.kind!=="value"&&_.type.kind!=="value")return d.error(`Cannot compare types '${Oi(m.type)}' and '${Oi(_.type)}'.`);o&&(m.type.kind==="value"&&_.type.kind!=="value"?m=new $r(_.type,[m]):m.type.kind!=="value"&&_.type.kind==="value"&&(_=new $r(m.type,[_])));let b=null;if(l.length===4){if(m.type.kind!=="string"&&_.type.kind!=="string"&&m.type.kind!=="value"&&_.type.kind!=="value")return d.error("Cannot use collator to compare non-string types.");if(b=d.parse(l[3],3,Hl),!b)return null}return new w2(m,_,b)}evaluate(l){let d=this.lhs.evaluate(l),p=this.rhs.evaluate(l);if(o&&this.hasUntypedArgument){let m=Ni(d),_=Ni(p);if(m.kind!==_.kind||m.kind!=="string"&&m.kind!=="number")throw new Vi(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${m.kind}, ${_.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){let m=Ni(d),_=Ni(p);if(m.kind!=="string"||_.kind!=="string")return e(l,d,p)}return this.collator?n(l,d,p,this.collator.evaluate(l)):e(l,d,p)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}serialize(){let l=[t];return this.eachChild(d=>{l.push(d.serialize())}),l}}}let tr=Is("==",function(t,e,n){return e===n},gu),Ds=Is("!=",function(t,e,n){return e!==n},function(t,e,n,o){return!gu(0,e,n,o)}),Gi=Is("<",function(t,e,n){return e<n},function(t,e,n,o){return o.compare(e,n)<0}),Lh=Is(">",function(t,e,n){return e>n},function(t,e,n,o){return o.compare(e,n)>0}),Od=Is("<=",function(t,e,n){return e<=n},function(t,e,n,o){return o.compare(e,n)<=0}),Nh=Is(">=",function(t,e,n){return e>=n},function(t,e,n,o){return o.compare(e,n)>=0});class mu{constructor(e,n,o,s,l,d){this.type=kn,this.number=e,this.locale=n,this.currency=o,this.unit=s,this.minFractionDigits=l,this.maxFractionDigits=d}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");let o=n.parse(e[1],1,nt);if(!o)return null;let s=e[2];if(typeof s!="object"||Array.isArray(s))return n.error("NumberFormat options argument must be an object.");let l=null;if(s.locale&&(l=n.parse(s.locale,1,kn),!l))return null;let d=null;if(s.currency&&(d=n.parse(s.currency,1,kn),!d))return null;let p=null;if(s.unit&&(p=n.parse(s.unit,1,kn),!p))return null;let m=null;if(s["min-fraction-digits"]&&(m=n.parse(s["min-fraction-digits"],1,nt),!m))return null;let _=null;return s["max-fraction-digits"]&&(_=n.parse(s["max-fraction-digits"],1,nt),!_)?null:new mu(o,l,d,p,m,_)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){let e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class _u{constructor(e){this.type=nt,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);let o=n.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Oi(o.type)} instead.`):new _u(o):null}evaluate(e){let n=this.input.evaluate(e);if(typeof n=="string"||Array.isArray(n))return n.length;throw new Vi(`Expected value to be of type string or array, but found ${Oi(Ni(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){let e=["length"];return this.eachChild(n=>{e.push(n.serialize())}),e}}function Td(t){return function(){t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}let yu={"==":tr,"!=":Ds,">":Lh,"<":Gi,">=":Nh,"<=":Od,array:$r,at:Cn,boolean:$r,case:Pd,coalesce:cu,collator:cl,format:xs,image:Ha,in:Fh,"index-of":hu,interpolate:Uo,"interpolate-hcl":Uo,"interpolate-lab":Uo,length:_u,let:uu,literal:Er,match:Ad,number:$r,"number-format":mu,object:$r,slice:Qa,step:_l,string:$r,"to-boolean":So,"to-color":So,"to-number":So,"to-string":So,var:uo,within:Ql,distance:pl,config:Ps};function hc(t,[e,n,o,s]){e=e.evaluate(t),n=n.evaluate(t),o=o.evaluate(t);let l=s?s.evaluate(t):1,d=dd(e,n,o,l);if(d)throw new Vi(d);return new zi(e/255*l,n/255*l,o/255*l,l)}function xu(t,[e,n,o,s]){e=e.evaluate(t),n=n.evaluate(t),o=o.evaluate(t);let l=s?s.evaluate(t):1,d=function(_,b,C,O){return typeof _=="number"&&_>=0&&_<=360?typeof b=="number"&&b>=0&&b<=100&&typeof C=="number"&&C>=0&&C<=100?O===void 0||typeof O=="number"&&O>=0&&O<=1?null:`Invalid hsla value [${[_,b,C,O].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof O=="number"?[_,b,C,O]:[_,b,C]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof O=="number"?[_,b,C,O]:[_,b,C]).join(", ")}]: 'h' must be between 0 and 360.`}(e,n,o,l);if(d)throw new Vi(d);let p=`hsla(${e}, ${n}%, ${o}%, ${l})`,m=zi.parse(p);if(!m)throw new Vi(`Failed to parse HSLA color: ${p}`);return m}function ks(t,e){return t in e}function W(t,e){let n=e[t];return n===void 0?null:n}function I(t){return{type:t}}_n.register(yu,{error:[{kind:"error"},[kn],(t,[e])=>{throw new Vi(e.evaluate(t))}],typeof:[kn,[wn],(t,[e])=>Oi(Ni(e.evaluate(t)))],"to-rgba":[To(nt,4),[Qo],(t,[e])=>e.evaluate(t).toArray()],rgb:[Qo,[nt,nt,nt],hc],rgba:[Qo,[nt,nt,nt,nt],hc],hsl:[Qo,[nt,nt,nt],xu],hsla:[Qo,[nt,nt,nt,nt],xu],has:{type:Rn,overloads:[[[kn],(t,[e])=>ks(e.evaluate(t),t.properties())],[[kn,Ua],(t,[e,n])=>ks(e.evaluate(t),n.evaluate(t))]]},get:{type:wn,overloads:[[[kn],(t,[e])=>W(e.evaluate(t),t.properties())],[[kn,Ua],(t,[e,n])=>W(e.evaluate(t),n.evaluate(t))]]},"feature-state":[wn,[kn],(t,[e])=>W(e.evaluate(t),t.featureState||{})],properties:[Ua,[],t=>t.properties()],"geometry-type":[kn,[],t=>t.geometryType()],id:[wn,[],t=>t.id()],zoom:[nt,[],t=>t.globals.zoom],pitch:[nt,[],t=>t.globals.pitch||0],"distance-from-center":[nt,[],t=>t.distanceFromCenter()],"measure-light":[nt,[kn],(t,[e])=>t.measureLight(e.evaluate(t))],"heatmap-density":[nt,[],t=>t.globals.heatmapDensity||0],"line-progress":[nt,[],t=>t.globals.lineProgress||0],"raster-value":[nt,[],t=>t.globals.rasterValue||0],"raster-particle-speed":[nt,[],t=>t.globals.rasterParticleSpeed||0],"sky-radial-progress":[nt,[],t=>t.globals.skyRadialProgress||0],accumulated:[wn,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[nt,I(nt),(t,e)=>{let n=0;for(let o of e)n+=o.evaluate(t);return n}],"*":[nt,I(nt),(t,e)=>{let n=1;for(let o of e)n*=o.evaluate(t);return n}],"-":{type:nt,overloads:[[[nt,nt],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[nt],(t,[e])=>-e.evaluate(t)]]},"/":[nt,[nt,nt],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[nt,[nt,nt],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[nt,[nt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[nt,[nt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[nt,[nt],(t,[e])=>Math.log(e.evaluate(t))],log2:[nt,[nt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[nt,[nt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[nt,[nt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[nt,[nt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[nt,[nt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[nt,[nt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[nt,[nt],(t,[e])=>Math.atan(e.evaluate(t))],min:[nt,I(nt),(t,e)=>Math.min(...e.map(n=>n.evaluate(t)))],max:[nt,I(nt),(t,e)=>Math.max(...e.map(n=>n.evaluate(t)))],abs:[nt,[nt],(t,[e])=>Math.abs(e.evaluate(t))],round:[nt,[nt],(t,[e])=>{let n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[nt,[nt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[nt,[nt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Rn,[kn,wn],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Rn,[wn],(t,[e])=>t.id()===e.value],"filter-type-==":[Rn,[kn],(t,[e])=>t.geometryType()===e.value],"filter-<":[Rn,[kn,wn],(t,[e,n])=>{let o=t.properties()[e.value],s=n.value;return typeof o==typeof s&&o<s}],"filter-id-<":[Rn,[wn],(t,[e])=>{let n=t.id(),o=e.value;return typeof n==typeof o&&n<o}],"filter->":[Rn,[kn,wn],(t,[e,n])=>{let o=t.properties()[e.value],s=n.value;return typeof o==typeof s&&o>s}],"filter-id->":[Rn,[wn],(t,[e])=>{let n=t.id(),o=e.value;return typeof n==typeof o&&n>o}],"filter-<=":[Rn,[kn,wn],(t,[e,n])=>{let o=t.properties()[e.value],s=n.value;return typeof o==typeof s&&o<=s}],"filter-id-<=":[Rn,[wn],(t,[e])=>{let n=t.id(),o=e.value;return typeof n==typeof o&&n<=o}],"filter->=":[Rn,[kn,wn],(t,[e,n])=>{let o=t.properties()[e.value],s=n.value;return typeof o==typeof s&&o>=s}],"filter-id->=":[Rn,[wn],(t,[e])=>{let n=t.id(),o=e.value;return typeof n==typeof o&&n>=o}],"filter-has":[Rn,[wn],(t,[e])=>e.value in t.properties()],"filter-has-id":[Rn,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[Rn,[To(kn)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Rn,[To(wn)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Rn,[kn,To(wn)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Rn,[kn,To(wn)],(t,[e,n])=>function(o,s,l,d){for(;l<=d;){let p=l+d>>1;if(s[p]===o)return!0;s[p]>o?d=p-1:l=p+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Rn,overloads:[[[Rn,Rn],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[I(Rn),(t,e)=>{for(let n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Rn,overloads:[[[Rn,Rn],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[I(Rn),(t,e)=>{for(let n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Rn,[Rn],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Rn,[kn],(t,[e])=>{let n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[kn,[kn],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[kn,[kn],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[kn,I(wn),(t,e)=>e.map(n=>Ko(n.evaluate(t))).join("")],"resolved-locale":[kn,[Hl],(t,[e])=>e.evaluate(t).resolvedLocale()],random:[nt,[nt,nt,wn],(t,e)=>{let[n,o,s]=e.map(d=>d.evaluate(t));if(n>o||n===o)return n;let l;if(typeof s=="string")l=function(d){let p=0;if(d.length===0)return p;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return p}(s);else{if(typeof s!="number")throw new Vi(`Invalid seed input: ${s}`);l=s}return n+Td(l)()*(o-n)}]});var B=yu;function H(t){return{result:"success",value:t}}function ge(t){return{result:"error",value:t}}function Xe(t,e){return!!t&&!!t.parameters&&t.parameters.indexOf(e)>-1}function Ft(t){return t["property-type"]==="data-driven"}function Ln(t){return Xe(t.expression,"measure-light")}function Gn(t){return Xe(t.expression,"zoom")}function Ei(t){return!!t.expression&&t.expression.interpolated}function Sa(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Rf(t){return t}function Vh(t,e){let n=e.type==="color",o=t.stops&&typeof t.stops[0][0]=="object",s=o||!(o||t.property!==void 0),l=t.type||(Ei(e)?"exponential":"interval");if(n&&((t=Wc({},t)).stops&&(t.stops=t.stops.map(_=>[_[0],zi.parse(_[1])])),t.default=zi.parse(t.default?t.default:e.default)),t.colorSpace&&t.colorSpace!=="rgb"&&!lu[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let d,p,m;if(l==="exponential")d=zf;else if(l==="interval")d=a_;else if(l==="categorical"){d=r_,p=Object.create(null);for(let _ of t.stops)p[_[0]]=_[1];m=typeof t.stops[0][0]}else{if(l!=="identity")throw new Error(`Unknown function type "${l}"`);d=Bf}if(o){let _={},b=[];for(let E=0;E<t.stops.length;E++){let k=t.stops[E],R=k[0].zoom;_[R]===void 0&&(_[R]={zoom:R,type:t.type,property:t.property,default:t.default,stops:[]},b.push(R)),_[R].stops.push([k[0].value,k[1]])}let C=[];for(let E of b)C.push([_[E].zoom,Vh(_[E],e)]);let O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:Uo.interpolationFactor.bind(void 0,O),zoomStops:C.map(E=>E[0]),evaluate:({zoom:E},k)=>zf({stops:C,base:t.base},e,E).evaluate(E,k)}}if(s){let _=l==="exponential"?{name:"exponential",base:t.base!==void 0?t.base:1}:null;return{kind:"camera",interpolationType:_,interpolationFactor:Uo.interpolationFactor.bind(void 0,_),zoomStops:t.stops.map(b=>b[0]),evaluate:({zoom:b})=>d(t,e,b,p,m)}}return{kind:"source",evaluate(_,b){let C=b&&b.properties?b.properties[t.property]:void 0;return C===void 0?vu(t.default,e.default):d(t,e,C,p,m)}}}function vu(t,e,n){return t!==void 0?t:e!==void 0?e:n!==void 0?n:void 0}function r_(t,e,n,o,s){return vu(typeof n===s?o[n]:void 0,t.default,e.default)}function a_(t,e,n){if(vs(n)!=="number")return vu(t.default,e.default);let o=t.stops.length;if(o===1||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[o-1][0])return t.stops[o-1][1];let s=Za(t.stops.map(l=>l[0]),n);return t.stops[s][1]}function zf(t,e,n){let o=t.base!==void 0?t.base:1;if(vs(n)!=="number")return vu(t.default,e.default);let s=t.stops.length;if(s===1||n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[s-1][0])return t.stops[s-1][1];let l=Za(t.stops.map(b=>b[0]),n),d=function(b,C,O,E){let k=E-O,R=b-O;return k===0?0:C===1?R/k:(Math.pow(C,R)-1)/(Math.pow(C,k)-1)}(n,o,t.stops[l][0],t.stops[l+1][0]),p=t.stops[l][1],m=t.stops[l+1][1],_=Gl[e.type]||Rf;if(t.colorSpace&&t.colorSpace!=="rgb"){let b=lu[t.colorSpace];_=(C,O)=>b.reverse(b.interpolate(b.forward(C),b.forward(O),d))}return typeof p.evaluate=="function"?{evaluate(...b){let C=p.evaluate.apply(void 0,b),O=m.evaluate.apply(void 0,b);if(C!==void 0&&O!==void 0)return _(C,O,d)}}:_(p,m,d)}function Bf(t,e,n){return e.type==="color"?n=zi.parse(n):e.type==="formatted"?n=io.fromString(n.toString()):e.type==="resolvedImage"?n=Dt.fromString(n.toString()):vs(n)===e.type||e.type==="enum"&&e.values[n]||(n=void 0),vu(n,t.default,e.default)}class Sd{constructor(e,n,o,s){this.expression=e,this._warningHistory={},this._evaluator=new Zc(o,s),this._defaultValue=n?function(l){return l.type==="color"&&(Sa(l.default)||Array.isArray(l.default))?new zi(0,0,0,0):l.type==="color"?zi.parse(l.default)||null:l.default===void 0?null:l.default}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,o,s,l,d,p,m){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=o,this._evaluator.canonical=s||null,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=d,this._evaluator.featureTileCoord=p||null,this._evaluator.featureDistanceData=m||null,this.expression.evaluate(this._evaluator)}evaluate(e,n,o,s,l,d,p,m){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=o||null,this._evaluator.canonical=s||null,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=d||null,this._evaluator.featureTileCoord=p||null,this._evaluator.featureDistanceData=m||null;try{let _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new Vi(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(_)} instead.`);return _}catch(_){return this._warningHistory[_.message]||(this._warningHistory[_.message]=!0,typeof console<"u"&&console.warn(_.message)),this._defaultValue}}}function bu(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in B}function Ed(t,e,n,o){let s=new bd(B,[],e?function(d){let p={color:Qo,string:kn,number:nt,enum:kn,boolean:Rn,formatted:ms,resolvedImage:_s};return d.type==="array"?To(p[d.value]||wn,d.length):p[d.type]}(e):void 0,void 0,void 0,n,o),l=s.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?H(new Sd(l,e,n,o)):ge(s.errors)}class jh{constructor(e,n,o){this.kind=e,this._styleExpression=n,this.isLightConstant=o,this.isStateDependent=e!=="constant"&&!ml(n.expression),this.isConfigDependent=!Os(n.expression)}evaluateWithoutErrorHandling(e,n,o,s,l,d){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,s,l,d)}evaluate(e,n,o,s,l,d){return this._styleExpression.evaluate(e,n,o,s,l,d)}}class wu{constructor(e,n,o,s,l){this.kind=e,this.zoomStops=o,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!ml(n.expression),this.isLightConstant=l,this.isConfigDependent=!Os(n.expression),this.interpolationType=s}evaluateWithoutErrorHandling(e,n,o,s,l,d){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,s,l,d)}evaluate(e,n,o,s,l,d){return this._styleExpression.evaluate(e,n,o,s,l,d)}interpolationFactor(e,n,o){return this.interpolationType?Uo.interpolationFactor(this.interpolationType,e,n,o):0}}function Id(t,e,n,o){if((t=Ed(t,e,n,o)).result==="error")return t;let s=t.value.expression,l=Wa(s);if(!l&&!Ft(e))return ge([new Xo("","data expressions not supported")]);let d=oo(s,["zoom","pitch","distance-from-center"]);if(!d&&!Gn(e))return ge([new Xo("","zoom expressions not supported")]);let p=oo(s,["measure-light"]);if(!p&&!Ln(e))return ge([new Xo("","measure-light expression not supported")]);let m=e.expression&&e.expression.relaxZoomRestriction,_=Mu(s);return _||d||m?_ instanceof Xo?ge([_]):_ instanceof Uo&&!Ei(e)?ge([new Xo("",'"interpolate" expressions cannot be used with this property')]):H(_?new wu(l?"camera":"composite",t.value,_.labels,_ instanceof Uo?_.interpolation:void 0,p):new jh(l?"constant":"source",t.value,p)):ge([new Xo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Cu{constructor(e,n){this._parameters=e,this._specification=n,Wc(this,Vh(this._parameters,this._specification))}static deserialize(e){return new Cu(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Mu(t){let e=null;if(t instanceof uu)e=Mu(t.result);else if(t instanceof cu){for(let n of t.args)if(e=Mu(n),e)break}else(t instanceof _l||t instanceof Uo)&&t.input instanceof _n&&t.input.name==="zoom"&&(e=t);return e instanceof Xo||t.eachChild(n=>{let o=Mu(n);o instanceof Xo?e=o:e&&o&&e!==o&&(e=new Xo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}var s_=Xr,Yr=3;function Xr(t,e,n){var o=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var s=new Int32Array(this.arrayBuffer);t=s[0],this.d=(e=s[1])+2*(n=s[2]);for(var l=0;l<this.d*this.d;l++){var d=s[Yr+l],p=s[Yr+l+1];o.push(d===p?null:s.subarray(d,p))}var m=s[Yr+o.length+1];this.keys=s.subarray(s[Yr+o.length],m),this.bboxes=s.subarray(m),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var _=0;_<this.d*this.d;_++)o.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var b=n/e*t;this.min=-b,this.max=t+b}Xr.prototype.insert=function(t,e,n,o,s){this._forEachCell(e,n,o,s,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(s)},Xr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Xr.prototype._insertCell=function(t,e,n,o,s,l){this.cells[s].push(l)},Xr.prototype.query=function(t,e,n,o,s){var l=this.min,d=this.max;if(t<=l&&e<=l&&d<=n&&d<=o&&!s)return Array.prototype.slice.call(this.keys);var p=[];return this._forEachCell(t,e,n,o,this._queryCell,p,{},s),p},Xr.prototype._queryCell=function(t,e,n,o,s,l,d,p){var m=this.cells[s];if(m!==null)for(var _=this.keys,b=this.bboxes,C=0;C<m.length;C++){var O=m[C];if(d[O]===void 0){var E=4*O;(p?p(b[E+0],b[E+1],b[E+2],b[E+3]):t<=b[E+2]&&e<=b[E+3]&&n>=b[E+0]&&o>=b[E+1])?(d[O]=!0,l.push(_[O])):d[O]=!1}}},Xr.prototype._forEachCell=function(t,e,n,o,s,l,d,p){for(var m=this._convertToCellCoord(t),_=this._convertToCellCoord(e),b=this._convertToCellCoord(n),C=this._convertToCellCoord(o),O=m;O<=b;O++)for(var E=_;E<=C;E++){var k=this.d*E+O;if((!p||p(this._convertFromCellCoord(O),this._convertFromCellCoord(E),this._convertFromCellCoord(O+1),this._convertFromCellCoord(E+1)))&&s.call(this,t,e,n,o,k,l,d,p))return}},Xr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Xr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Xr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Yr+this.cells.length+1+1,n=0,o=0;o<this.cells.length;o++)n+=this.cells[o].length;var s=new Int32Array(e+n+this.keys.length+this.bboxes.length);s[0]=this.extent,s[1]=this.n,s[2]=this.padding;for(var l=e,d=0;d<t.length;d++){var p=t[d];s[Yr+d]=l,s.set(p,l),l+=p.length}return s[Yr+t.length]=l,s.set(this.keys,l),s[Yr+t.length+1]=l+=this.keys.length,s.set(this.bboxes,l),l+=this.bboxes.length,s.buffer};var Ka=lo(s_);let Au={};function xt(t,e,n={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Au[e]={klass:t,omit:n.omit||[]}}xt(Object,"Object"),Ka.serialize=function(t,e){let n=t.toArrayBuffer();return e&&e.add(n),{buffer:n}},Ka.deserialize=function(t){return new Ka(t.buffer)},Object.defineProperty(Ka,"name",{value:"Grid"}),xt(Ka,"Grid"),xt(zi,"Color"),xt(Error,"Error"),xt(io,"Formatted"),xt(ys,"FormattedSection"),xt(ri,"AJAXError"),xt(Dt,"ResolvedImage"),xt(Cu,"StylePropertyFunction"),xt(Sd,"StyleExpression",{omit:["_evaluator"]}),xt(wu,"ZoomDependentExpression"),xt(jh,"ZoomConstantExpression"),xt(_n,"CompoundExpression",{omit:["_evaluate"]});for(let t in B)Au[B[t]._classRegistryKey]||xt(B[t],`Expression${t}`);function Ff(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}function Dd(t){return self.ImageBitmap&&t instanceof ImageBitmap}function Rs(t,e){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Ff(t)||Dd(t))return e&&e.add(t),t;if(ArrayBuffer.isView(t)){let n=t;return e&&e.add(n.buffer),n}if(t instanceof ImageData)return e&&e.add(t.data.buffer),t;if(Array.isArray(t)){let n=[];for(let o of t)n.push(Rs(o,e));return n}if(t instanceof Map){let n={$name:"Map"};for(let[o,s]of t.entries())n[o]=Rs(s);return n}if(typeof t=="object"){let n=t.constructor,o=n._classRegistryKey;if(!o)throw new Error(`can't serialize object of unregistered class ${o}`);let s=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(let l in t)t.hasOwnProperty(l)&&(Au[o].omit.indexOf(l)>=0||(s[l]=Rs(t[l],e)));t instanceof Error&&(s.message=t.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(s.$name=o),s}throw new Error("can't serialize object of type "+typeof t)}function wl(t){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Ff(t)||Dd(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(wl);if(typeof t=="object"){let e=t.$name||"Object";if(e==="Map"){let s=new Map;for(let l of Object.keys(t))l!=="$name"&&s.set(l,wl(t[l]));return s}let{klass:n}=Au[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);let o=Object.create(n.prototype);for(let s of Object.keys(t))s!=="$name"&&(o[s]=wl(t[s]));return o}throw new Error("can't deserialize object of type "+typeof t)}let Mt={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519,"CJK Unified Ideographs Extension B":t=>t>=131072&&t<=173791};function zs(t){for(let e of t)if(Uh(e.charCodeAt(0)))return!0;return!1}function l_(t){for(let e of t)if(!c_(e.charCodeAt(0)))return!1;return!0}function c_(t){return!(Mt.Arabic(t)||Mt["Arabic Supplement"](t)||Mt["Arabic Extended-A"](t)||Mt["Arabic Presentation Forms-A"](t)||Mt["Arabic Presentation Forms-B"](t))}function Uh(t){return!(t!==746&&t!==747&&(t<4352||!(Mt["Bopomofo Extended"](t)||Mt.Bopomofo(t)||Mt["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Mt["CJK Compatibility Ideographs"](t)||Mt["CJK Compatibility"](t)||Mt["CJK Radicals Supplement"](t)||Mt["CJK Strokes"](t)||!(!Mt["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||t===12336)||Mt["CJK Unified Ideographs Extension A"](t)||Mt["CJK Unified Ideographs"](t)||Mt["Enclosed CJK Letters and Months"](t)||Mt["Hangul Compatibility Jamo"](t)||Mt["Hangul Jamo Extended-A"](t)||Mt["Hangul Jamo Extended-B"](t)||Mt["Hangul Jamo"](t)||Mt["Hangul Syllables"](t)||Mt.Hiragana(t)||Mt["Ideographic Description Characters"](t)||Mt.Kanbun(t)||Mt["Kangxi Radicals"](t)||Mt["Katakana Phonetic Extensions"](t)||Mt.Katakana(t)&&t!==12540||!(!Mt["Halfwidth and Fullwidth Forms"](t)||t===65288||t===65289||t===65293||t>=65306&&t<=65310||t===65339||t===65341||t===65343||t>=65371&&t<=65503||t===65507||t>=65512&&t<=65519)||!(!Mt["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Mt["Unified Canadian Aboriginal Syllabics"](t)||Mt["Unified Canadian Aboriginal Syllabics Extended"](t)||Mt["Vertical Forms"](t)||Mt["Yijing Hexagram Symbols"](t)||Mt["Yi Syllables"](t)||Mt["Yi Radicals"](t))))}function Lf(t){return!(Uh(t)||function(e){return!!(Mt["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||Mt["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||Mt["Letterlike Symbols"](e)||Mt["Number Forms"](e)||Mt["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||Mt["Control Pictures"](e)&&e!==9251||Mt["Optical Character Recognition"](e)||Mt["Enclosed Alphanumerics"](e)||Mt["Geometric Shapes"](e)||Mt["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Mt["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Mt["CJK Symbols and Punctuation"](e)||Mt.Katakana(e)||Mt["Private Use Area"](e)||Mt["CJK Compatibility Forms"](e)||Mt["Small Form Variants"](e)||Mt["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(t))}function Nf(t){return t>=1424&&t<=2303||Mt["Arabic Presentation Forms-A"](t)||Mt["Arabic Presentation Forms-B"](t)}function Vf(t,e){return!(!e&&Nf(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Mt.Khmer(t))}function Gh(t){for(let e of t)if(Nf(e.charCodeAt(0)))return!0;return!1}let Hh="deferred",$h="loading",Wh="loaded",Zh=null,nr="unavailable",Bs=null,jf=function(t){t&&typeof t=="string"&&t.indexOf("NetworkError")>-1&&(nr="error"),Zh&&Zh(t)};function qh(){Yh.fire(new Va("pluginStateChange",{pluginStatus:nr,pluginURL:Bs}))}let Yh=new ga,Fs=function(){return nr},Xh=function(){if(nr!==Hh||!Bs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nr=$h,qh(),Bs&&De({url:Bs},t=>{t?jf(t):(nr=Wh,qh())})},br={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>nr===Wh||br.applyArabicShaping!=null,isLoading:()=>nr===$h,setState(t){nr=t.pluginStatus,Bs=t.pluginURL},isParsed:()=>br.applyArabicShaping!=null&&br.processBidirectionalText!=null&&br.processStyledBidirectionalText!=null,getPluginURL:()=>Bs};class vi{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch,this.brightness=n.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(n,o){for(let s of n)if(!Vf(s.charCodeAt(0),o))return!1;return!0}(e,br.isLoaded())}}class kd{constructor(e,n,o,s){this.property=e,this.value=n,this.expression=function(l,d,p,m){if(Sa(l))return new Cu(l,d);if(bu(l)||Array.isArray(l)&&l.length>0){let _=Id(l,d,p,m);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=l;return typeof l=="string"&&d.type==="color"&&(_=zi.parse(l)),{kind:"constant",isConfigDependent:!1,evaluate:()=>_}}}(n===void 0?e.specification.default:n,e.specification,o,s)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,n,o){return this.property.possiblyEvaluate(this,e,n,o)}}class Qh{constructor(e,n,o){this.property=e,this.value=new kd(e,void 0,n,o)}transitioned(e,n){return new Kh(this.property,this.value,n,to({},e.transition,this.transition),e.now)}untransitioned(){return new Kh(this.property,this.value,null,{},0)}}class Ja{constructor(e,n,o){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=n,this._options=o,this.isConfigDependent=!1}getValue(e){return Lo(this._values[e].value.value)}setValue(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new Qh(this._values[e].property,this._scope,this._options)),this._values[e].value=new kd(this._values[e].property,n===null?void 0:Lo(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,n){n&&(this._options=n);let o=this._properties.properties;if(e)for(let s in e){let l=e[s];if(Fi(s,"-transition")){let d=s.slice(0,-11);o[d]&&this.setTransition(d,l)}else o[s]&&this.setValue(s,l)}}getTransition(e){return Lo(this._values[e].transition)}setTransition(e,n){this._values.hasOwnProperty(e)||(this._values[e]=new Qh(this._values[e].property)),this._values[e].transition=Lo(n)||void 0}serialize(){let e={};for(let n of Object.keys(this._values)){let o=this.getValue(n);o!==void 0&&(e[n]=o);let s=this.getTransition(n);s!==void 0&&(e[`${n}-transition`]=s)}return e}transitioned(e,n){let o=new Cl(this._properties);for(let s of Object.keys(this._values))o._values[s]=this._values[s].transitioned(e,n._values[s]);return o}untransitioned(){let e=new Cl(this._properties);for(let n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class Kh{constructor(e,n,o,s,l){let d=s.delay||0,p=s.duration||0;l=l||0,this.property=e,this.value=n,this.begin=l+d,this.end=this.begin+p,e.specification.transition&&(s.delay||s.duration)&&(this.prior=o)}possiblyEvaluate(e,n,o){let s=e.now||0,l=this.value.possiblyEvaluate(e,n,o),d=this.prior;if(d){if(s>this.end)return this.prior=null,l;if(this.value.isDataDriven())return this.prior=null,l;if(s<this.begin)return d.possiblyEvaluate(e,n,o);{let p=(s-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(e,n,o),l,ft(p))}}return l}}class Cl{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,o){let s=new Pu(this._properties);for(let l of Object.keys(this._values))s._values[l]=this._values[l].possiblyEvaluate(e,n,o);return s}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class u_{constructor(e,n,o){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=n,this._options=o,this.isConfigDependent=!1}getValue(e){return Lo(this._values[e].value)}setValue(e,n){this._values[e]=new kd(this._values[e].property,n===null?void 0:Lo(n),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){let e={};for(let n of Object.keys(this._values)){let o=this.getValue(n);o!==void 0&&(e[n]=o)}return e}possiblyEvaluate(e,n,o){let s=new Pu(this._properties);for(let l of Object.keys(this._values))s._values[l]=this._values[l].possiblyEvaluate(e,n,o);return s}}class pc{constructor(e,n,o){this.property=e,this.value=n,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,n,o,s){return this.property.evaluate(this.value,this.parameters,e,n,o,s)}}class Pu{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class at{constructor(e){this.specification=e}possiblyEvaluate(e,n){return e.expression.evaluate(n)}interpolate(e,n,o){let s=Gl[this.specification.type];return s?s(e,n,o):e}}class Rt{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,o,s){return new pc(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(n,null,{},o,s)}:e.expression,n)}interpolate(e,n,o){if(e.value.kind!=="constant"||n.value.kind!=="constant")return e;if(e.value.value===void 0||n.value.value===void 0)return new pc(this,{kind:"constant",value:void 0},e.parameters);let s=Gl[this.specification.type];return s?new pc(this,{kind:"constant",value:s(e.value.value,n.value.value,o)},e.parameters):e}evaluate(e,n,o,s,l,d){return e.kind==="constant"?e.value:e.evaluate(n,o,s,l,d)}}class Ml{constructor(e){this.specification=e}possiblyEvaluate(e,n,o,s){return!!e.expression.evaluate(n,null,{},o,s)}interpolate(){return!1}}class bi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];let n=new vi(0,{});for(let o in e){let s=e[o];s.specification.overridable&&this.overridableProperties.push(o);let l=this.defaultPropertyValues[o]=new kd(s,void 0),d=this.defaultTransitionablePropertyValues[o]=new Qh(s);this.defaultTransitioningPropertyValues[o]=d.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=l.possiblyEvaluate(n)}}}function Ou(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Tu(t){if(Array.isArray(t))return t.map(Tu);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){let e={};for(let n in t)e[n]=Tu(t[n]);return e}return Ou(t)}xt(Rt,"DataDrivenProperty"),xt(at,"DataConstantProperty"),xt(Ml,"ColorRampProperty");var Me=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Jh(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(let e of t.slice(1))if(!Jh(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function wr(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Jh(t)||(t=Su(t));let n=t,o=!0;try{o=function(_){if(!fc(_))return _;let b=Tu(_);return ep(b),b=Uf(b),b}(n)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(n,null,2)}
        `)}let s=Me[`filter_${e}`],l=Ed(o,s),d=null;if(l.result==="error")throw new Error(l.value.map(_=>`${_.key}: ${_.message}`).join(", "));d=(_,b,C)=>l.value.evaluate(_,b,{},C);let p=null,m=null;if(o!==n){let _=Ed(n,s);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));p=(b,C,O,E,k)=>_.value.evaluate(b,C,{},O,void 0,void 0,E,k),m=!Wa(_.value.expression)}return{filter:d,dynamicFilter:p||void 0,needGeometry:Gf(o),needFeature:!!m}}function Uf(t){if(!Array.isArray(t))return t;let e=function(n){if(d_.has(n[0])){for(let o=1;o<n.length;o++)if(fc(n[o]))return!0}return n}(t);return e===!0?e:e.map(n=>Uf(n))}function ep(t){let e=!1,n=[];if(t[0]==="case"){for(let o=1;o<t.length-1;o+=2)e=e||fc(t[o]),n.push(t[o+1]);n.push(t[t.length-1])}else if(t[0]==="match"){e=e||fc(t[1]);for(let o=2;o<t.length-1;o+=2)n.push(t[o+1]);n.push(t[t.length-1])}else if(t[0]==="step"){e=e||fc(t[1]);for(let o=1;o<t.length-1;o+=2)n.push(t[o+1])}e&&(t.length=0,t.push("any",...n));for(let o=1;o<t.length;o++)ep(t[o])}function fc(t){if(!Array.isArray(t))return!1;if((e=t[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let n=1;n<t.length;n++)if(fc(t[n]))return!0;return!1}let d_=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function h_(t,e){return t<e?-1:t>e?1:0}function Gf(t){if(!Array.isArray(t))return!1;if(t[0]==="within"||t[0]==="distance")return!0;for(let e=1;e<t.length;e++)if(Gf(t[e]))return!0;return!1}function Su(t){if(!t)return!0;let e=t[0];return t.length<=1?e!=="any":e==="=="?Eu(t[1],t[2],"=="):e==="!="?Iu(Eu(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Eu(t[1],t[2],e):e==="any"?(n=t.slice(1),["any"].concat(n.map(Su))):e==="all"?["all"].concat(t.slice(1).map(Su)):e==="none"?["all"].concat(t.slice(1).map(Su).map(Iu)):e==="in"?tp(t[1],t.slice(2)):e==="!in"?Iu(tp(t[1],t.slice(2))):e==="has"?Hf(t[1]):e!=="!has"||Iu(Hf(t[1]));var n}function Eu(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function tp(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",t,["literal",e.sort(h_)]]:["filter-in-small",t,["literal",e]]}}function Hf(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Iu(t){return["!",t]}let Rd="";function np(t,e){return e?`${t}${Rd}${e}`:t}let Du="-transition";class ir extends ga{constructor(e,n,o,s){if(super(),this.id=e.id,this.fqid=np(this.id,o),this.type=e.type,this.scope=o,this.options=s,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&e.type!=="slot"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),e.slot&&(this.slot=e.slot),n.layout&&(this._unevaluatedLayout=new u_(n.layout,this.scope,s),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),n.paint)){this._transitionablePaint=new Ja(n.paint,this.scope,s);for(let l in e.paint)this.setPaintProperty(l,e.paint[l]);for(let l in e.layout)this.setLayoutProperty(l,e.layout[l]);this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Pu(n.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n){if(this.type==="custom"&&e==="visibility")return void(this.visibility=n);let o=this._unevaluatedLayout;o._properties.properties[e]&&(o.setValue(e,n),this.isConfigDependent=this.isConfigDependent||o.isConfigDependent,e==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return Fi(e,Du)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n){let o=this._transitionablePaint,s=o._properties.properties;if(Fi(e,Du)){let C=e.slice(0,-11);return s[C]&&o.setTransition(C,n||void 0),!1}if(!s[e])return!1;let l=o._values[e],d=l.value.isDataDriven(),p=l.value;o.setValue(e,n),this.isConfigDependent=this.isConfigDependent||o.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);let m=o._values[e].value,_=m.isDataDriven(),b=Fi(e,"pattern")||e==="line-dasharray";return _||d||b||this._handleOverridablePaintPropertyUpdate(e,p,m)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,n){return null}_handleOverridablePaintPropertyUpdate(e,n,o){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){return Fo({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,n)=>!(e===void 0||n==="layout"&&!Object.keys(e).length||n==="paint"&&!Object.keys(e).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(let e in this.paint._values){let n=this.paint.get(e);if(n instanceof pc&&Ft(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=wr(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(e){this._stats&&(e.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}}let p_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zd{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class di{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...e){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...e){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Hn(t,e=1){let n=0,o=0;return{members:t.map(s=>{let l=p_[s.type].BYTES_PER_ELEMENT,d=n=ku(n,Math.max(e,l)),p=s.components||1;return o=Math.max(o,l),n+=l*p,{name:s.name,type:s.type,components:p,offset:d}}),size:ku(n,Math.max(o,e)),alignment:e}}function ku(t,e){return Math.ceil(t/e)*e}class Qr extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){let o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){let s=2*e;return this.int16[s+0]=n,this.int16[s+1]=o,e}}Qr.prototype.bytesPerElement=4,xt(Qr,"StructArrayLayout2i4");class Go extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o){let s=this.length;return this.resize(s+1),this.emplace(s,e,n,o)}emplace(e,n,o,s){let l=3*e;return this.int16[l+0]=n,this.int16[l+1]=o,this.int16[l+2]=s,e}}Go.prototype.bytesPerElement=6,xt(Go,"StructArrayLayout3i6");class es extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,s){let l=this.length;return this.resize(l+1),this.emplace(l,e,n,o,s)}emplace(e,n,o,s,l){let d=4*e;return this.int16[d+0]=n,this.int16[d+1]=o,this.int16[d+2]=s,this.int16[d+3]=l,e}}es.prototype.bytesPerElement=8,xt(es,"StructArrayLayout4i8");class ip extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l){let d=this.length;return this.resize(d+1),this.emplace(d,e,n,o,s,l)}emplace(e,n,o,s,l,d){let p=5*e;return this.int16[p+0]=n,this.int16[p+1]=o,this.int16[p+2]=s,this.int16[p+3]=l,this.int16[p+4]=d,e}}ip.prototype.bytesPerElement=10,xt(ip,"StructArrayLayout5i10");class op extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p){let m=this.length;return this.resize(m+1),this.emplace(m,e,n,o,s,l,d,p)}emplace(e,n,o,s,l,d,p,m){let _=6*e,b=12*e,C=3*e;return this.int16[_+0]=n,this.int16[_+1]=o,this.uint8[b+4]=s,this.uint8[b+5]=l,this.uint8[b+6]=d,this.uint8[b+7]=p,this.float32[C+2]=m,e}}op.prototype.bytesPerElement=12,xt(op,"StructArrayLayout2i4ub1f12");class Ls extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s){let l=this.length;return this.resize(l+1),this.emplace(l,e,n,o,s)}emplace(e,n,o,s,l){let d=4*e;return this.float32[d+0]=n,this.float32[d+1]=o,this.float32[d+2]=s,this.float32[d+3]=l,e}}Ls.prototype.bytesPerElement=16,xt(Ls,"StructArrayLayout4f16");class Ns extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l){let d=this.length;return this.resize(d+1),this.emplace(d,e,n,o,s,l)}emplace(e,n,o,s,l,d){let p=6*e,m=3*e;return this.uint16[p+0]=n,this.uint16[p+1]=o,this.uint16[p+2]=s,this.uint16[p+3]=l,this.float32[m+2]=d,e}}Ns.prototype.bytesPerElement=12,xt(Ns,"StructArrayLayout4ui1f12");class gc extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,s){let l=this.length;return this.resize(l+1),this.emplace(l,e,n,o,s)}emplace(e,n,o,s,l){let d=4*e;return this.uint16[d+0]=n,this.uint16[d+1]=o,this.uint16[d+2]=s,this.uint16[d+3]=l,e}}gc.prototype.bytesPerElement=8,xt(gc,"StructArrayLayout4ui8");class Bd extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d){let p=this.length;return this.resize(p+1),this.emplace(p,e,n,o,s,l,d)}emplace(e,n,o,s,l,d,p){let m=6*e;return this.int16[m+0]=n,this.int16[m+1]=o,this.int16[m+2]=s,this.int16[m+3]=l,this.int16[m+4]=d,this.int16[m+5]=p,e}}Bd.prototype.bytesPerElement=12,xt(Bd,"StructArrayLayout6i12");class Ru extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p,m,_,b,C,O){let E=this.length;return this.resize(E+1),this.emplace(E,e,n,o,s,l,d,p,m,_,b,C,O)}emplace(e,n,o,s,l,d,p,m,_,b,C,O,E){let k=12*e;return this.int16[k+0]=n,this.int16[k+1]=o,this.int16[k+2]=s,this.int16[k+3]=l,this.uint16[k+4]=d,this.uint16[k+5]=p,this.uint16[k+6]=m,this.uint16[k+7]=_,this.int16[k+8]=b,this.int16[k+9]=C,this.int16[k+10]=O,this.int16[k+11]=E,e}}Ru.prototype.bytesPerElement=24,xt(Ru,"StructArrayLayout4i4ui4i24");class rp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d){let p=this.length;return this.resize(p+1),this.emplace(p,e,n,o,s,l,d)}emplace(e,n,o,s,l,d,p){let m=10*e,_=5*e;return this.int16[m+0]=n,this.int16[m+1]=o,this.int16[m+2]=s,this.float32[_+2]=l,this.float32[_+3]=d,this.float32[_+4]=p,e}}rp.prototype.bytesPerElement=20,xt(rp,"StructArrayLayout3i3f20");class ap extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}ap.prototype.bytesPerElement=4,xt(ap,"StructArrayLayout1ul4");class Ea extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){let o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){let s=2*e;return this.uint16[s+0]=n,this.uint16[s+1]=o,e}}Ea.prototype.bytesPerElement=4,xt(Ea,"StructArrayLayout2ui4");class sp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p,m,_,b,C,O,E){let k=this.length;return this.resize(k+1),this.emplace(k,e,n,o,s,l,d,p,m,_,b,C,O,E)}emplace(e,n,o,s,l,d,p,m,_,b,C,O,E,k){let R=20*e,L=10*e;return this.int16[R+0]=n,this.int16[R+1]=o,this.int16[R+2]=s,this.int16[R+3]=l,this.int16[R+4]=d,this.float32[L+3]=p,this.float32[L+4]=m,this.float32[L+5]=_,this.float32[L+6]=b,this.int16[R+14]=C,this.uint32[L+8]=O,this.uint16[R+18]=E,this.uint16[R+19]=k,e}}sp.prototype.bytesPerElement=40,xt(sp,"StructArrayLayout5i4f1i1ul2ui40");class zu extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p){let m=this.length;return this.resize(m+1),this.emplace(m,e,n,o,s,l,d,p)}emplace(e,n,o,s,l,d,p,m){let _=8*e;return this.int16[_+0]=n,this.int16[_+1]=o,this.int16[_+2]=s,this.int16[_+4]=l,this.int16[_+5]=d,this.int16[_+6]=p,this.int16[_+7]=m,e}}zu.prototype.bytesPerElement=16,xt(zu,"StructArrayLayout3i2i2i16");class Fd extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l){let d=this.length;return this.resize(d+1),this.emplace(d,e,n,o,s,l)}emplace(e,n,o,s,l,d){let p=4*e,m=8*e;return this.float32[p+0]=n,this.float32[p+1]=o,this.float32[p+2]=s,this.int16[m+6]=l,this.int16[m+7]=d,e}}Fd.prototype.bytesPerElement=16,xt(Fd,"StructArrayLayout2f1f2i16");class lp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s){let l=this.length;return this.resize(l+1),this.emplace(l,e,n,o,s)}emplace(e,n,o,s,l){let d=12*e,p=3*e;return this.uint8[d+0]=n,this.uint8[d+1]=o,this.float32[p+1]=s,this.float32[p+2]=l,e}}lp.prototype.bytesPerElement=12,xt(lp,"StructArrayLayout2ub2f12");class ro extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o){let s=this.length;return this.resize(s+1),this.emplace(s,e,n,o)}emplace(e,n,o,s){let l=3*e;return this.uint16[l+0]=n,this.uint16[l+1]=o,this.uint16[l+2]=s,e}}ro.prototype.bytesPerElement=6,xt(ro,"StructArrayLayout3ui6");class mc extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae){let ie=this.length;return this.resize(ie+1),this.emplace(ie,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae)}emplace(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae,ie){let de=30*e,me=15*e,ve=60*e;return this.int16[de+0]=n,this.int16[de+1]=o,this.int16[de+2]=s,this.float32[me+2]=l,this.float32[me+3]=d,this.uint16[de+8]=p,this.uint16[de+9]=m,this.uint32[me+5]=_,this.uint32[me+6]=b,this.uint32[me+7]=C,this.uint16[de+16]=O,this.uint16[de+17]=E,this.uint16[de+18]=k,this.float32[me+10]=R,this.float32[me+11]=L,this.uint8[ve+48]=V,this.uint8[ve+49]=Y,this.uint8[ve+50]=J,this.uint32[me+13]=K,this.int16[de+28]=ae,this.uint8[ve+58]=ie,e}}mc.prototype.bytesPerElement=60,xt(mc,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ld extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae,ie,de,me,ve,Pe,be,Be,Ue,Ie,je,Se){let Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae,ie,de,me,ve,Pe,be,Be,Ue,Ie,je,Se)}emplace(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae,ie,de,me,ve,Pe,be,Be,Ue,Ie,je,Se,Ne){let st=20*e,Ge=40*e,bt=80*e;return this.float32[st+0]=n,this.float32[st+1]=o,this.int16[Ge+4]=s,this.int16[Ge+5]=l,this.int16[Ge+6]=d,this.int16[Ge+7]=p,this.int16[Ge+8]=m,this.int16[Ge+9]=_,this.int16[Ge+10]=b,this.int16[Ge+11]=C,this.int16[Ge+12]=O,this.uint16[Ge+13]=E,this.uint16[Ge+14]=k,this.uint16[Ge+15]=R,this.uint16[Ge+16]=L,this.uint16[Ge+17]=V,this.uint16[Ge+18]=Y,this.uint16[Ge+19]=J,this.uint16[Ge+20]=K,this.uint16[Ge+21]=ae,this.uint16[Ge+22]=ie,this.uint16[Ge+23]=de,this.uint16[Ge+24]=me,this.uint16[Ge+25]=ve,this.uint16[Ge+26]=Pe,this.uint16[Ge+27]=be,this.uint32[st+14]=Be,this.float32[st+15]=Ue,this.float32[st+16]=Ie,this.float32[st+17]=je,this.float32[st+18]=Se,this.uint8[bt+76]=Ne,e}}Ld.prototype.bytesPerElement=80,xt(Ld,"StructArrayLayout2f9i15ui1ul4f1ub80");class Bu extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}Bu.prototype.bytesPerElement=4,xt(Bu,"StructArrayLayout1f4");class Vs extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l){let d=this.length;return this.resize(d+1),this.emplace(d,e,n,o,s,l)}emplace(e,n,o,s,l,d){let p=5*e;return this.float32[p+0]=n,this.float32[p+1]=o,this.float32[p+2]=s,this.float32[p+3]=l,this.float32[p+4]=d,e}}Vs.prototype.bytesPerElement=20,xt(Vs,"StructArrayLayout5f20");class cp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p){let m=this.length;return this.resize(m+1),this.emplace(m,e,n,o,s,l,d,p)}emplace(e,n,o,s,l,d,p,m){let _=7*e;return this.float32[_+0]=n,this.float32[_+1]=o,this.float32[_+2]=s,this.float32[_+3]=l,this.float32[_+4]=d,this.float32[_+5]=p,this.float32[_+6]=m,e}}cp.prototype.bytesPerElement=28,xt(cp,"StructArrayLayout7f28");class Fu extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,o,s){let l=this.length;return this.resize(l+1),this.emplace(l,e,n,o,s)}emplace(e,n,o,s,l){let d=6*e;return this.uint32[3*e+0]=n,this.uint16[d+2]=o,this.uint16[d+3]=s,this.uint16[d+4]=l,e}}Fu.prototype.bytesPerElement=12,xt(Fu,"StructArrayLayout1ul3ui12");class up extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}up.prototype.bytesPerElement=2,xt(up,"StructArrayLayout1ui2");class Al extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o){let s=this.length;return this.resize(s+1),this.emplace(s,e,n,o)}emplace(e,n,o,s){let l=3*e;return this.float32[l+0]=n,this.float32[l+1]=o,this.float32[l+2]=s,e}}Al.prototype.bytesPerElement=12,xt(Al,"StructArrayLayout3f12");class Lu extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){let o=this.length;return this.resize(o+1),this.emplace(o,e,n)}emplace(e,n,o){let s=2*e;return this.float32[s+0]=n,this.float32[s+1]=o,e}}Lu.prototype.bytesPerElement=8,xt(Lu,"StructArrayLayout2f8");class dp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L){let V=this.length;return this.resize(V+1),this.emplace(V,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L)}emplace(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V){let Y=16*e;return this.float32[Y+0]=n,this.float32[Y+1]=o,this.float32[Y+2]=s,this.float32[Y+3]=l,this.float32[Y+4]=d,this.float32[Y+5]=p,this.float32[Y+6]=m,this.float32[Y+7]=_,this.float32[Y+8]=b,this.float32[Y+9]=C,this.float32[Y+10]=O,this.float32[Y+11]=E,this.float32[Y+12]=k,this.float32[Y+13]=R,this.float32[Y+14]=L,this.float32[Y+15]=V,e}}dp.prototype.bytesPerElement=64,xt(dp,"StructArrayLayout16f64");class Nu extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,o,s,l,d,p){let m=this.length;return this.resize(m+1),this.emplace(m,e,n,o,s,l,d,p)}emplace(e,n,o,s,l,d,p,m){let _=10*e,b=5*e;return this.uint16[_+0]=n,this.uint16[_+1]=o,this.uint16[_+2]=s,this.uint16[_+3]=l,this.float32[b+2]=d,this.float32[b+3]=p,this.float32[b+4]=m,e}}Nu.prototype.bytesPerElement=20,xt(Nu,"StructArrayLayout4ui3f20");class hp extends di{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){let n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint8[1*e+0]=n,e}}hp.prototype.bytesPerElement=1,xt(hp,"StructArrayLayout1ub1");class $f extends zd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}$f.prototype.size=40;class Wf extends sp{get(e){return new $f(this,e)}}xt(Wf,"CollisionBoxArray");class Zf extends zd{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Zf.prototype.size=60;class qf extends mc{get(e){return new Zf(this,e)}}xt(qf,"PlacedSymbolArray");class Yf extends zd{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}Yf.prototype.size=80;class Xf extends Ld{get(e){return new Yf(this,e)}}xt(Xf,"SymbolInstanceArray");class Qf extends Bu{getoffsetX(e){return this.float32[1*e+0]}}xt(Qf,"GlyphOffsetArray");class Vu extends Qr{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}xt(Vu,"SymbolLineVertexArray");class Kf extends zd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Kf.prototype.size=12;class Jf extends Fu{get(e){return new Kf(this,e)}}xt(Jf,"FeatureIndexArray");class ju extends Ea{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}xt(ju,"FillExtrusionCentroidArray");let f_=Hn([{name:"a_pos",components:2,type:"Int16"}],4),eg=Hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ii{constructor(e=[]){this.segments=e}_prepareSegment(e,n,o,s){let l=this.segments[this.segments.length-1];return e>Ii.MAX_VERTEX_ARRAY_LENGTH&&ci(`Max vertices per segment is ${Ii.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!l||l.vertexLength+e>Ii.MAX_VERTEX_ARRAY_LENGTH||l.sortKey!==s)&&(l={vertexOffset:n,primitiveOffset:o,vertexLength:0,primitiveLength:0},s!==void 0&&(l.sortKey=s),this.segments.push(l)),l}prepareSegment(e,n,o,s){return this._prepareSegment(e,n.length,o.length,s)}get(){return this.segments}destroy(){for(let e of this.segments)for(let n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,o,s){return new Ii([{vertexOffset:e,primitiveOffset:n,vertexLength:o,primitiveLength:s,vaos:{},sortKey:0}])}}function pp(t,e){return 256*(t=on(Math.floor(t),0,255))+on(Math.floor(e),0,255)}Ii.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xt(Ii,"SegmentVector");let tg=Hn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ng=Hn([{name:"a_dash",components:4,type:"Uint16"}]);var Uu={exports:{}},Nd={exports:{}};(function(t){t.exports=function(e,n){var o,s,l,d,p,m,_,b;for(s=e.length-(o=3&e.length),l=n,p=3432918353,m=461845907,b=0;b<s;)_=255&e.charCodeAt(b)|(255&e.charCodeAt(++b))<<8|(255&e.charCodeAt(++b))<<16|(255&e.charCodeAt(++b))<<24,++b,l=27492+(65535&(d=5*(65535&(l=(l^=_=(65535&(_=(_=(65535&_)*p+(((_>>>16)*p&65535)<<16)&4294967295)<<15|_>>>17))*m+(((_>>>16)*m&65535)<<16)&4294967295)<<13|l>>>19))+((5*(l>>>16)&65535)<<16)&4294967295))+((58964+(d>>>16)&65535)<<16);switch(_=0,o){case 3:_^=(255&e.charCodeAt(b+2))<<16;case 2:_^=(255&e.charCodeAt(b+1))<<8;case 1:l^=_=(65535&(_=(_=(65535&(_^=255&e.charCodeAt(b)))*p+(((_>>>16)*p&65535)<<16)&4294967295)<<15|_>>>17))*m+(((_>>>16)*m&65535)<<16)&4294967295}return l^=e.length,l=2246822507*(65535&(l^=l>>>16))+((2246822507*(l>>>16)&65535)<<16)&4294967295,l=3266489909*(65535&(l^=l>>>13))+((3266489909*(l>>>16)&65535)<<16)&4294967295,(l^=l>>>16)>>>0}})(Nd);var fp=Nd.exports,ig={exports:{}};(function(t){t.exports=function(e,n){for(var o,s=e.length,l=n^s,d=0;s>=4;)o=1540483477*(65535&(o=255&e.charCodeAt(d)|(255&e.charCodeAt(++d))<<8|(255&e.charCodeAt(++d))<<16|(255&e.charCodeAt(++d))<<24))+((1540483477*(o>>>16)&65535)<<16),l=1540483477*(65535&l)+((1540483477*(l>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),s-=4,++d;switch(s){case 3:l^=(255&e.charCodeAt(d+2))<<16;case 2:l^=(255&e.charCodeAt(d+1))<<8;case 1:l=1540483477*(65535&(l^=255&e.charCodeAt(d)))+((1540483477*(l>>>16)&65535)<<16)}return l=1540483477*(65535&(l^=l>>>13))+((1540483477*(l>>>16)&65535)<<16),(l^=l>>>15)>>>0}})(ig);var og=fp,rg=ig.exports;Uu.exports=og,Uu.exports.murmur3=og,Uu.exports.murmur2=rg;var gp=lo(Uu.exports);class Gu{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,n,o,s){this.ids.push(ag(e)),this.positions.push(n,o,s)}eachPosition(e,n){let o=ag(e),s=0,l=this.ids.length-1;for(;s<l;){let d=s+l>>1;this.ids[d]>=o?l=d:s=d+1}for(;this.ids[s]===o;)n(this.positions[3*s],this.positions[3*s+1],this.positions[3*s+2]),s++}static serialize(e,n){let o=new Float64Array(e.ids),s=new Uint32Array(e.positions);return mp(o,s,0,o.length-1),n&&(n.add(o.buffer),n.add(s.buffer)),{ids:o,positions:s}}static deserialize(e){let n=new Gu,o;n.ids=e.ids,n.positions=e.positions;for(let s of n.ids)s!==o&&n.uniqueIds.push(s),o=s;return n.indexed=!0,n}}function ag(t){let e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:gp(String(t))}function mp(t,e,n,o){for(;n<o;){let s=t[n+o>>1],l=n-1,d=o+1;for(;;){do l++;while(t[l]<s);do d--;while(t[d]>s);if(l>=d)break;Vd(t,l,d),Vd(e,3*l,3*d),Vd(e,3*l+1,3*d+1),Vd(e,3*l+2,3*d+2)}d-n<o-d?(mp(t,e,n,d),n=d+1):(mp(t,e,d+1,o),o=d)}}function Vd(t,e,n){let o=t[e];t[e]=t[n],t[n]=o}xt(Gu,"FeaturePositionMap");class ts{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,n){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,n),this.initialized=!0),!!this.location}}class jd extends ts{constructor(e){super(e),this.current=0}set(e,n,o){this.fetchUniformLocation(e,n)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}}class Eo extends ts{constructor(e){super(e),this.current=0}set(e,n,o){this.fetchUniformLocation(e,n)&&this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class js extends ts{constructor(e){super(e),this.current=[0,0]}set(e,n,o){this.fetchUniformLocation(e,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}}class sg extends ts{constructor(e){super(e),this.current=[0,0,0]}set(e,n,o){this.fetchUniformLocation(e,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}}class c extends ts{constructor(e){super(e),this.current=[0,0,0,0]}set(e,n,o){this.fetchUniformLocation(e,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3])))}}class i extends ts{constructor(e){super(e),this.current=zi.transparent}set(e,n,o){this.fetchUniformLocation(e,n)&&(o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a)))}}let a=new Float32Array(16);class u extends ts{constructor(e){super(e),this.current=a}set(e,n,o){if(this.fetchUniformLocation(e,n)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let s=1;s<16;s++)if(o[s]!==this.current[s]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}}let h=new Float32Array(9),f=new Float32Array(4);class y extends ts{constructor(e){super(e),this.current=f}set(e,n,o){if(this.fetchUniformLocation(e,n)){for(let s=0;s<4;s++)if(o[s]!==this.current[s]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}}function w(t){return[pp(255*t.r,255*t.g),pp(255*t.b,255*t.a)]}class A{constructor(e,n,o){this.value=e,this.uniformNames=n.map(s=>`u_${s}`),this.type=o}setUniform(e,n,o,s,l){n.set(e,l,s.constantOr(this.value))}getBinding(e,n){return this.type==="color"?new i(e):new Eo(e)}}class T{constructor(e,n){this.uniformNames=n.map(o=>`u_${o}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,n,o,s,l){let d=l==="u_pattern"||l==="u_dash"?this.pattern:l==="u_pixel_ratio"?this.pixelRatio:null;d&&n.set(e,l,d)}getBinding(e,n){return n==="u_pattern"||n==="u_dash"?new c(e):new Eo(e)}}class S{constructor(e,n,o,s){this.expression=e,this.type=o,this.maxValue=0,this.paintVertexAttributes=n.map(l=>({name:`a_${l}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new s}populatePaintArray(e,n,o,s,l,d,p){let m=this.paintVertexArray.length,_=this.expression.evaluate(new vi(0,{brightness:d}),n,{},l,s,p);this.paintVertexArray.resize(e),this._setPaintValue(m,e,_)}updatePaintArray(e,n,o,s,l,d,p){let m=this.expression.evaluate({zoom:0,brightness:p},o,s,void 0,l);this._setPaintValue(e,n,m)}_setPaintValue(e,n,o){if(this.type==="color"){let s=w(o);for(let l=e;l<n;l++)this.paintVertexArray.emplace(l,s[0],s[1])}else{for(let s=e;s<n;s++)this.paintVertexArray.emplace(s,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class D{constructor(e,n,o,s,l,d){this.expression=e,this.uniformNames=n.map(p=>`u_${p}_t`),this.type=o,this.useIntegerZoom=s,this.zoom=l,this.maxValue=0,this.paintVertexAttributes=n.map(p=>({name:`a_${p}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new d}populatePaintArray(e,n,o,s,l,d,p){let m=this.expression.evaluate(new vi(this.zoom,{brightness:d}),n,{},l,s,p),_=this.expression.evaluate(new vi(this.zoom+1,{brightness:d}),n,{},l,s,p),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,m,_)}updatePaintArray(e,n,o,s,l,d,p){let m=this.expression.evaluate({zoom:this.zoom,brightness:p},o,s,void 0,l),_=this.expression.evaluate({zoom:this.zoom+1,brightness:p},o,s,void 0,l);this._setPaintValue(e,n,m,_)}_setPaintValue(e,n,o,s){if(this.type==="color"){let l=w(o),d=w(s);for(let p=e;p<n;p++)this.paintVertexArray.emplace(p,l[0],l[1],d[0],d[1])}else{for(let l=e;l<n;l++)this.paintVertexArray.emplace(l,o,s);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(s))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n,o,s,l){let d=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,p=on(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(e,l,p)}getBinding(e,n){return new Eo(e)}}class z{constructor(e,n,o,s,l){this.expression=e,this.layerId=l,this.paintVertexAttributes=(o==="array"?ng:tg).members;for(let d=0;d<n.length;++d);this.paintVertexArray=new s}populatePaintArray(e,n,o){let s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(s,e,n.patterns&&n.patterns[this.layerId],o)}updatePaintArray(e,n,o,s,l,d,p){this._setPaintValues(e,n,o.patterns&&o.patterns[this.layerId],d)}_setPaintValues(e,n,o,s){if(!s||!o)return;let l=s[o];if(!l)return;let{tl:d,br:p,pixelRatio:m}=l;for(let _=e;_<n;_++)this.paintVertexArray.emplace(_,d[0],d[1],p[0],p[1],m)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class F{constructor(e,n,o=()=>!0){this.binders={},this._buffers=[];let s=[];for(let l in e.paint._values){let d=e.paint.get(l);if(!o(l)||!(d instanceof pc&&Ft(d.property.specification)))continue;let p=$(l,e.type),m=d.value,_=d.property.specification.type,b=!!d.property.useIntegerZoom,C=l==="line-dasharray"||l.endsWith("pattern"),O=l==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(m.kind!=="constant"||O)if(m.kind==="source"||O||C){let E=ee(l,_,"source");this.binders[l]=C?new z(m,p,_,E,e.id):new S(m,p,_,E),s.push(`/a_${l}`)}else{let E=ee(l,_,"composite");this.binders[l]=new D(m,p,_,b,n,E),s.push(`/z_${l}`)}else this.binders[l]=C?new T(m.value,p):new A(m.value,p,_),s.push(`/u_${l}`)}this.cacheKey=s.sort().join("")}getMaxValue(e){let n=this.binders[e];return n instanceof S||n instanceof D?n.maxValue:0}populatePaintArrays(e,n,o,s,l,d,p){for(let m in this.binders){let _=this.binders[m];(_ instanceof S||_ instanceof D||_ instanceof z)&&_.populatePaintArray(e,n,o,s,l,d,p)}}setConstantPatternPositions(e){for(let n in this.binders){let o=this.binders[n];o instanceof T&&o.setConstantPatternPositions(e)}}updatePaintArrays(e,n,o,s,l,d,p,m){let _=!1,b=Object.keys(e),C=b.length!==0,O=C?b:n.uniqueIds;for(let E in this.binders){let k=this.binders[E];if((k instanceof S||k instanceof D||k instanceof z)&&(k.expression.isStateDependent===!0||k.expression.isLightConstant===!1)){let R=l.paint.get(E);k.expression=R.value;for(let L of O){let V=e[L.toString()];n.eachPosition(L,(Y,J,K)=>{let ae=s.feature(Y);k.updatePaintArray(J,K,ae,V,d,p,m)})}if(!C)for(let L of o.uniqueIds){let V=e[L.toString()];o.eachPosition(L,(Y,J,K)=>{let ae=s.feature(Y);k.updatePaintArray(J,K,ae,V,d,p,m)})}_=!0}}return _}defines(){let e=[];for(let n in this.binders){let o=this.binders[n];(o instanceof A||o instanceof T)&&e.push(...o.uniformNames.map(s=>`#define HAS_UNIFORM_${s}`))}return e}getBinderAttributes(){let e=[];for(let n in this.binders){let o=this.binders[n];if(o instanceof S||o instanceof D||o instanceof z)for(let s=0;s<o.paintVertexAttributes.length;s++)e.push(o.paintVertexAttributes[s].name)}return e}getBinderUniforms(){let e=[];for(let n in this.binders){let o=this.binders[n];if(o instanceof A||o instanceof T||o instanceof D)for(let s of o.uniformNames)e.push(s)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){let n=[];for(let o in this.binders){let s=this.binders[o];if(s instanceof A||s instanceof T||s instanceof D)for(let l of s.uniformNames)n.push({name:l,property:o,binding:s.getBinding(e,l)})}return n}setUniforms(e,n,o,s,l){for(let{name:d,property:p,binding:m}of o)this.binders[p].setUniform(e,m,l,s.get(p),d)}updatePaintBuffers(){this._buffers=[];for(let e in this.binders){let n=this.binders[e];(n instanceof S||n instanceof D||n instanceof z)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(let n in this.binders){let o=this.binders[n];(o instanceof S||o instanceof D||o instanceof z)&&o.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let n=this.binders[e];(n instanceof S||n instanceof D||n instanceof z)&&n.destroy()}}}class G{constructor(e,n,o=()=>!0){this.programConfigurations={};for(let s of e)this.programConfigurations[s.id]=new F(s,n,o);this.needsUpload=!1,this._featureMap=new Gu,this._featureMapWithoutIds=new Gu,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,n,o,s,l,d,p,m){for(let _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(e,n,s,l,d,p,m);n.id!==void 0?this._featureMap.add(n.id,o,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,o,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,o,s,l,d){for(let p of o)this.needsUpload=this.programConfigurations[p.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,n,p,s,l,d||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}}let U={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function $(t,e){return U[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}let N={"line-pattern":{source:Ns,composite:Ns},"fill-pattern":{source:Ns,composite:Ns},"fill-extrusion-pattern":{source:Ns,composite:Ns},"line-dasharray":{source:gc,composite:gc}},q={color:{source:Lu,composite:Ls},number:{source:Bu,composite:Lu}};function ee(t,e,n){let o=N[t];return o&&o[n]||q[e][n]}xt(A,"ConstantBinder"),xt(T,"PatternConstantBinder"),xt(S,"SourceExpressionBinder"),xt(z,"PatternCompositeBinder"),xt(D,"CompositeExpressionBinder"),xt(F,"ProgramConfiguration",{omit:["_buffers"]}),xt(G,"ProgramConfigurationSet");let X=ht/Math.PI/2,te=5,Z=6,ne=16383,le=64,ue=[le,32,16],fe=-X,Ae=X;function ye(t,e,n,o=X){return n=mn(n),[t*Math.sin(n)*o,-e*o,t*Math.cos(n)*o]}function ke(t,e,n){return ye(Math.cos(mn(t)),Math.sin(mn(t)),e,n)}let Ee=63710088e-1,$e=2*Math.PI*Ee;class xe{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new xe(ha(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let n=Math.PI/180,o=this.lat*n,s=e.lat*n,l=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((e.lng-this.lng)*n);return Ee*Math.acos(Math.min(l,1))}toBounds(e=0){let n=360*e/40075017,o=n/Math.cos(Math.PI/180*this.lat);return new Te({lng:this.lng-o,lat:this.lat-n},{lng:this.lng+o,lat:this.lat+n})}toEcef(e){return ke(this.lat,this.lng,X+e*X/Ee)}static convert(e){if(e instanceof xe)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new xe(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new xe(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Te{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof xe?new xe(e.lng,e.lat):xe.convert(e),this}setSouthWest(e){return this._sw=e instanceof xe?new xe(e.lng,e.lat):xe.convert(e),this}extend(e){let n=this._sw,o=this._ne,s,l;if(e instanceof xe)s=e,l=e;else{if(!(e instanceof Te))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Te.convert(e)):this.extend(xe.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(xe.convert(e)):this;if(s=e._sw,l=e._ne,!s||!l)return this}return n||o?(n.lng=Math.min(s.lng,n.lng),n.lat=Math.min(s.lat,n.lat),o.lng=Math.max(l.lng,o.lng),o.lat=Math.max(l.lat,o.lat)):(this._sw=new xe(s.lng,s.lat),this._ne=new xe(l.lng,l.lat)),this}getCenter(){return new xe((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new xe(this.getWest(),this.getNorth())}getSouthEast(){return new xe(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){let{lng:n,lat:o}=xe.convert(e),s=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(s=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=o&&o<=this._ne.lat&&s}static convert(e){return!e||e instanceof Te?e:new Te(e)}}var he={};(function(t,e){(function(n){function o(l,d,p){var m=s(256*l,256*(d=Math.pow(2,p)-d-1),p),_=s(256*(l+1),256*(d+1),p);return m[0]+","+m[1]+","+_[0]+","+_[1]}function s(l,d,p){var m=2*Math.PI*6378137/256/Math.pow(2,p);return[l*m-2*Math.PI*6378137/2,d*m-2*Math.PI*6378137/2]}n.getURL=function(l,d,p,m,_,b){return b=b||{},l+"?"+["bbox="+o(p,m,_),"format="+(b.format||"image/png"),"service="+(b.service||"WMS"),"version="+(b.version||"1.1.1"),"request="+(b.request||"GetMap"),"srs="+(b.srs||"EPSG:3857"),"width="+(b.width||256),"height="+(b.height||256),"layers="+d].join("&")},n.getTileBBox=o,n.getMercCoords=s,Object.defineProperty(n,"__esModule",{value:!0})})(e)})(0,he);var Ce=he;class Ze{constructor(e,n,o){this.z=e,this.x=n,this.y=o,this.key=dt(0,e,e,n,o)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n){let o=Ce.getTileBBox(this.x,this.y,this.z),s=function(l,d,p){let m,_="";for(let b=l;b>0;b--)m=1<<b-1,_+=(d&m?1:0)+(p&m?2:0);return _}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(n==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",s).replace("{bbox-epsg-3857}",o)}toString(){return`${this.z}/${this.x}/${this.y}`}}class it{constructor(e,n){this.wrap=e,this.canonical=n,this.key=dt(e,n.z,n.z,n.x,n.y)}}class Je{constructor(e,n,o,s,l){this.overscaledZ=e,this.wrap=n,this.canonical=new Ze(o,+s,+l),this.key=n===0&&e===o?this.canonical.key:dt(n,e,o,s,l)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){let n=this.canonical.z-e;return e>this.canonical.z?new Je(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Je(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n=!0){if(this.overscaledZ===e&&n)return this.key;if(e>this.canonical.z)return dt(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y);{let o=this.canonical.z-e;return dt(this.wrap*+n,e,e,this.canonical.x>>o,this.canonical.y>>o)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;let n=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new Je(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let n=this.canonical.z+1,o=2*this.canonical.x,s=2*this.canonical.y;return[new Je(n,this.wrap,n,o,s),new Je(n,this.wrap,n,o+1,s),new Je(n,this.wrap,n,o,s+1),new Je(n,this.wrap,n,o+1,s+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Je(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Je(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new it(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function dt(t,e,n,o,s){let l=1<<Math.min(n,22),d=l*(s%l)+o%l;return t&&n<22&&(d+=l*l*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*d+n)+(e-n)}let Ct=[t=>{let e=t.canonical.x-1,n=t.wrap;return e<0&&(e=(1<<t.canonical.z)-1,n--),new Je(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>{let e=t.canonical.x+1,n=t.wrap;return e===1<<t.canonical.z&&(e=0,n++),new Je(t.overscaledZ,n,t.canonical.z,e,t.canonical.y)},t=>new Je(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(t.canonical.y===0?1<<t.canonical.z:t.canonical.y)-1),t=>new Je(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)];xt(Ze,"CanonicalTileID"),xt(Je,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});let It=0,Ot=25.5;function St(t){return $e*Math.cos(t*Math.PI/180)}function Qt(t){return(180+t)/360}function Gt(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Zt(t,e){return t/St(e)}function $t(t){return 360*t-180}function Mn(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function ii(t,e){return t*St(Mn(e))}let un=85.051129;function wi(t){return Math.cos(mn(on(t,-un,un)))}function dn(t,e){let n=on(e,It,Ot),o=Math.pow(2,n);return wi(t)*$e/(512*o)}function En(t){return 1/Math.cos(t*Math.PI/180)}function hn(t,e=0){let n=Math.exp(Math.PI*(1-(t.y+e/ht)/(1<<t.z)*2));return 80150034*n/(n*n+1)/ht/(1<<t.z)}class Tn{constructor(e,n,o=0){this.x=+e,this.y=+n,this.z=+o}static fromLngLat(e,n=0){let o=xe.convert(e);return new Tn(Qt(o.lng),Gt(o.lat),Zt(n,o.lat))}toLngLat(){return new xe($t(this.x),Mn(this.y))}toAltitude(){return ii(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$e*En(Mn(this.y))}}function si(t,e,n,o,s,l,d,p,m){let _=(e+o)/2,b=(n+s)/2,C=new ut(_,b);p(C),function(O,E,k,R,L,V){let Y=k-L,J=R-V;return Math.abs((R-E)*Y-(k-O)*J)/Math.hypot(Y,J)}(C.x,C.y,l.x,l.y,d.x,d.y)>=m?(si(t,e,n,_,b,l,C,p,m),si(t,_,b,o,s,C,d,p,m)):t.push(d)}function Fn(t,e,n){let o=t[0],s=o.x,l=o.y;e(o);let d=[o];for(let p=1;p<t.length;p++){let m=t[p],{x:_,y:b}=m;e(m),si(d,s,l,_,b,o,m,e,n),s=_,l=b,o=m}return d}function ao(t,e,n,o){if(o(e,n)){let s=e.add(n)._mult(.5);ao(t,e,s,o),ao(t,s,n,o)}else t.push(n)}function xo(t,e){let n=t[0],o=[n];for(let s=1;s<t.length;s++){let l=t[s];ao(o,n,l,e),n=l}return o}let or=Math.pow(2,14)-1,Ia=-or-1;function rr(t,e){let n=Math.round(t.x*e),o=Math.round(t.y*e);return t.x=on(n,Ia,or),t.y=on(o,Ia,or),(n<t.x||n>t.x+1||o<t.y||o>t.y+1)&&ci("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function so(t,e,n){let o=t.loadGeometry(),s=t.extent,l=ht/s;if(e&&n&&n.projection.isReprojectedInTileSpace){let d=1<<e.z,{scale:p,x:m,y:_,projection:b}=n,C=O=>{let E=$t((e.x+O.x/s)/d),k=Mn((e.y+O.y/s)/d),R=b.project(E,k);O.x=(R.x*p-m)*s,O.y=(R.y*p-_)*s};for(let O=0;O<o.length;O++)if(t.type!==1)o[O]=Fn(o[O],C,1);else{let E=[];for(let k of o[O])k.x<0||k.x>=s||k.y<0||k.y>=s||(C(k),E.push(k));o[O]=E}}for(let d of o)for(let p of d)rr(p,l);return o}function qi(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?so(t):[]}}function Io(t,e,n,o,s){t.emplaceBack(2*e+(o+1)/2,2*n+(s+1)/2)}function Ho(t,e,n){t.emplaceBack(e.x,e.y,e.z,n[0]*16384,n[1]*16384,n[2]*16384)}class ar{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Qr,this.indexArray=new ro,this.segments=new Ii,this.programConfigurations=new G(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o,s){let l=this.layers[0],d=[],p=null;l.type==="circle"&&(p=l.layout.get("circle-sort-key"));for(let{feature:_,id:b,index:C,sourceLayerIndex:O}of e){let E=this.layers[0]._featureFilter.needGeometry,k=qi(_,E);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),k,o))continue;let R=p?p.evaluate(k,{},o):void 0,L={id:b,properties:_.properties,type:_.type,sourceLayerIndex:O,index:C,geometry:E?k.geometry:so(_,o,s),patterns:{},sortKey:R};d.push(L)}p&&d.sort((_,b)=>_.sortKey-b.sortKey);let m=null;s.projection.name==="globe"&&(this.globeExtVertexArray=new Bd,m=s.projection);for(let _ of d){let{geometry:b,index:C,sourceLayerIndex:O}=_,E=e[C].feature;this.addFeature(_,b,C,n.availableImages,o,m,n.brightness),n.featureIndex.insert(E,b,C,O,this.index)}}update(e,n,o,s,l){let d=Object.keys(e).length!==0;d&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,d?this.stateDependentLayers:this.layers,o,s,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,f_.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,eg.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,n,o,s,l,d,p){for(let m of n)for(let _ of m){let b=_.x,C=_.y;if(b<0||b>=ht||C<0||C>=ht)continue;if(d){let k=d.projectTilePoint(b,C,l),R=d.upVector(l,b,C),L=this.globeExtVertexArray;Ho(L,k,R),Ho(L,k,R),Ho(L,k,R),Ho(L,k,R)}let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),E=O.vertexLength;Io(this.layoutVertexArray,b,C,-1,-1),Io(this.layoutVertexArray,b,C,1,-1),Io(this.layoutVertexArray,b,C,1,1),Io(this.layoutVertexArray,b,C,-1,1),this.indexArray.emplaceBack(E,E+1,E+2),this.indexArray.emplaceBack(E,E+2,E+3),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,{},s,l,p)}}function Da(t,e){for(let n=0;n<t.length;n++)if(ns(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(ns(t,e[n]))return!0;return!!$u(t,e)}function Us(t,e,n){return!!ns(t,e)||!!Wu(e,t,n)}function Pl(t,e){if(t.length===1)return Ud(e,t[0]);for(let n=0;n<e.length;n++){let o=e[n];for(let s=0;s<o.length;s++)if(ns(t,o[s]))return!0}for(let n=0;n<t.length;n++)if(Ud(e,t[n]))return!0;for(let n=0;n<e.length;n++)if($u(t,e[n]))return!0;return!1}function Hu(t,e,n){if(t.length>1){if($u(t,e))return!0;for(let o=0;o<e.length;o++)if(Wu(e[o],t,n))return!0}for(let o=0;o<t.length;o++)if(Wu(t[o],e,n))return!0;return!1}function $u(t,e){if(t.length===0||e.length===0)return!1;for(let n=0;n<t.length-1;n++){let o=t[n],s=t[n+1];for(let l=0;l<e.length-1;l++)if(_p(o,s,e[l],e[l+1]))return!0}return!1}function _p(t,e,n,o){return Oo(t,n,o)!==Oo(e,n,o)&&Oo(t,e,n)!==Oo(t,e,o)}function Wu(t,e,n){let o=n*n;if(e.length===1)return t.distSqr(e[0])<o;for(let s=1;s<e.length;s++)if(_c(t,e[s-1],e[s])<o)return!0;return!1}function _c(t,e,n){let o=e.distSqr(n);if(o===0)return t.distSqr(e);let s=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/o;return t.distSqr(s<0?e:s>1?n:n.sub(e)._mult(s)._add(e))}function Ud(t,e){let n,o,s,l=!1;for(let d=0;d<t.length;d++){n=t[d];for(let p=0,m=n.length-1;p<n.length;m=p++)o=n[p],s=n[m],o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(l=!l)}return l}function ns(t,e){let n=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){let l=t[o],d=t[s];l.y>e.y!=d.y>e.y&&e.x<(d.x-l.x)*(e.y-l.y)/(d.y-l.y)+l.x&&(n=!n)}return n}function gy(t,e,n,o,s){for(let d of t)if(e<=d.x&&n<=d.y&&o>=d.x&&s>=d.y)return!0;let l=[new ut(e,n),new ut(e,s),new ut(o,s),new ut(o,n)];if(t.length>2){for(let d of l)if(ns(t,d))return!0}for(let d=0;d<t.length-1;d++)if(H2(t[d],t[d+1],l))return!0;return!1}function H2(t,e,n){let o=n[0],s=n[2];if(t.x<o.x&&e.x<o.x||t.x>s.x&&e.x>s.x||t.y<o.y&&e.y<o.y||t.y>s.y&&e.y>s.y)return!1;let l=Oo(t,e,n[0]);return l!==Oo(t,e,n[1])||l!==Oo(t,e,n[2])||l!==Oo(t,e,n[3])}function Gd(t,e,n,o,s,l){let d=e.y-t.y,p=t.x-e.x;if(l=l||0){let m=d*d+p*p;if(m===0)return!0;let _=Math.sqrt(m);d/=_,p/=_}return!((n.x-t.x)*d+(n.y-t.y)*p-l<0||(o.x-t.x)*d+(o.y-t.y)*p-l<0||(s.x-t.x)*d+(s.y-t.y)*p-l<0)}function g_(t,e,n,o,s,l,d){return!(Gd(t,e,o,s,l,d)||Gd(e,n,o,s,l,d)||Gd(n,t,o,s,l,d)||Gd(o,s,t,e,n,d)||Gd(s,l,t,e,n,d)||Gd(l,o,t,e,n,d))}function Hd(t,e,n){let o=e.paint.get(t).value;return o.kind==="constant"?o.value:n.programConfigurations.get(e.id).getMaxValue(t)}function lg(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function my(t,e,n,o,s){if(!e[0]&&!e[1])return t;let l=ut.convert(e)._mult(s);n==="viewport"&&l._rotate(-o);let d=[];for(let p=0;p<t.length;p++)d.push(t[p].sub(l));return d}function _y(t,e,n,o){let s=ut.convert(t)._mult(o);return e==="viewport"&&s._rotate(-n),s}xt(ar,"CircleBucket",{omit:["layers"]});let $2=new bi({"circle-sort-key":new Rt(Me.layout_circle["circle-sort-key"]),visibility:new at(Me.layout_circle.visibility)});var W2={paint:new bi({"circle-radius":new Rt(Me.paint_circle["circle-radius"]),"circle-color":new Rt(Me.paint_circle["circle-color"]),"circle-blur":new Rt(Me.paint_circle["circle-blur"]),"circle-opacity":new Rt(Me.paint_circle["circle-opacity"]),"circle-translate":new at(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new at(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new at(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new at(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Rt(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Rt(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Rt(Me.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new at(Me.paint_circle["circle-emissive-strength"])}),layout:$2},ho={},po={};Object.defineProperty(po,"__esModule",{value:!0}),po.setMatrixArrayType=function(t){po.ARRAY_TYPE=xy=t},po.toRadian=function(t){return t*q2},po.equals=function(t,e){return Math.abs(t-e)<=yy*Math.max(1,Math.abs(t),Math.abs(e))},po.RANDOM=po.ARRAY_TYPE=po.EPSILON=void 0;var yy=1e-6;po.EPSILON=yy;var xy=typeof Float32Array<"u"?Float32Array:Array;po.ARRAY_TYPE=xy;var Z2=Math.random;po.RANDOM=Z2;var q2=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ci={};function m_(t){return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m_(t)}Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.create=function(){var t=new yc.ARRAY_TYPE(4);return yc.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Ci.clone=function(t){var e=new yc.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Ci.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},Ci.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ci.fromValues=function(t,e,n,o){var s=new yc.ARRAY_TYPE(4);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s},Ci.set=function(t,e,n,o,s){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t},Ci.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},Ci.invert=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=n*l-s*o;return d?(t[0]=l*(d=1/d),t[1]=-o*d,t[2]=-s*d,t[3]=n*d,t):null},Ci.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},Ci.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Ci.multiply=by,Ci.rotate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=Math.sin(n),m=Math.cos(n);return t[0]=o*m+l*p,t[1]=s*m+d*p,t[2]=o*-p+l*m,t[3]=s*-p+d*m,t},Ci.scale=function(t,e,n){var o=e[1],s=e[2],l=e[3],d=n[0],p=n[1];return t[0]=e[0]*d,t[1]=o*d,t[2]=s*p,t[3]=l*p,t},Ci.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=-n,t[3]=o,t},Ci.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},Ci.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ci.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Ci.LDU=function(t,e,n,o){return t[2]=o[2]/o[0],n[0]=o[0],n[1]=o[1],n[3]=o[3]-t[2]*n[1],[t,e,n]},Ci.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},Ci.subtract=wy,Ci.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},Ci.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=e[0],p=e[1],m=e[2],_=e[3];return Math.abs(n-d)<=yc.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=yc.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=yc.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-_)<=yc.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))},Ci.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},Ci.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t},Ci.sub=Ci.mul=void 0;var yc=function(t,e){if(t&&t.__esModule)return t;if(t===null||m_(t)!=="object"&&typeof t!="function")return{default:t};var n=vy(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function vy(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(vy=function(o){return o?n:e})(t)}function by(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=n[0],m=n[1],_=n[2],b=n[3];return t[0]=o*p+l*m,t[1]=s*p+d*m,t[2]=o*_+l*b,t[3]=s*_+d*b,t}function wy(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Ci.mul=by,Ci.sub=wy;var Ti={};function __(t){return __=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__(t)}Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.create=function(){var t=new Gs.ARRAY_TYPE(6);return Gs.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},Ti.clone=function(t){var e=new Gs.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},Ti.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},Ti.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Ti.fromValues=function(t,e,n,o,s,l){var d=new Gs.ARRAY_TYPE(6);return d[0]=t,d[1]=e,d[2]=n,d[3]=o,d[4]=s,d[5]=l,d},Ti.set=function(t,e,n,o,s,l,d){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t[4]=l,t[5]=d,t},Ti.invert=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=n*l-o*s;return m?(t[0]=l*(m=1/m),t[1]=-o*m,t[2]=-s*m,t[3]=n*m,t[4]=(s*p-l*d)*m,t[5]=(o*d-n*p)*m,t):null},Ti.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},Ti.multiply=My,Ti.rotate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=Math.sin(n),b=Math.cos(n);return t[0]=o*b+l*_,t[1]=s*b+d*_,t[2]=o*-_+l*b,t[3]=s*-_+d*b,t[4]=p,t[5]=m,t},Ti.scale=function(t,e,n){var o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=n[0],_=n[1];return t[0]=e[0]*m,t[1]=o*m,t[2]=s*_,t[3]=l*_,t[4]=d,t[5]=p,t},Ti.translate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=n[0],b=n[1];return t[0]=o,t[1]=s,t[2]=l,t[3]=d,t[4]=o*_+l*b+p,t[5]=s*_+d*b+m,t},Ti.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=-n,t[3]=o,t[4]=0,t[5]=0,t},Ti.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},Ti.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},Ti.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Ti.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Ti.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},Ti.subtract=Ay,Ti.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},Ti.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t},Ti.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},Ti.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=t[4],p=t[5],m=e[0],_=e[1],b=e[2],C=e[3],O=e[4],E=e[5];return Math.abs(n-m)<=Gs.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-_)<=Gs.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-b)<=Gs.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-C)<=Gs.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(d-O)<=Gs.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-E)<=Gs.EPSILON*Math.max(1,Math.abs(p),Math.abs(E))},Ti.sub=Ti.mul=void 0;var Gs=function(t,e){if(t&&t.__esModule)return t;if(t===null||__(t)!=="object"&&typeof t!="function")return{default:t};var n=Cy(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function Cy(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Cy=function(o){return o?n:e})(t)}function My(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=n[0],b=n[1],C=n[2],O=n[3],E=n[4],k=n[5];return t[0]=o*_+l*b,t[1]=s*_+d*b,t[2]=o*C+l*O,t[3]=s*C+d*O,t[4]=o*E+l*k+p,t[5]=s*E+d*k+m,t}function Ay(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Ti.mul=My,Ti.sub=Ay;var Jn={};function y_(t){return y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y_(t)}Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.create=function(){var t=new Kr.ARRAY_TYPE(9);return Kr.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Jn.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},Jn.clone=function(t){var e=new Kr.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},Jn.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Jn.fromValues=function(t,e,n,o,s,l,d,p,m){var _=new Kr.ARRAY_TYPE(9);return _[0]=t,_[1]=e,_[2]=n,_[3]=o,_[4]=s,_[5]=l,_[6]=d,_[7]=p,_[8]=m,_},Jn.set=function(t,e,n,o,s,l,d,p,m,_){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t[4]=l,t[5]=d,t[6]=p,t[7]=m,t[8]=_,t},Jn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Jn.transpose=function(t,e){if(t===e){var n=e[1],o=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=o,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},Jn.invert=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=e[6],_=e[7],b=e[8],C=b*d-p*_,O=-b*l+p*m,E=_*l-d*m,k=n*C+o*O+s*E;return k?(t[0]=C*(k=1/k),t[1]=(-b*o+s*_)*k,t[2]=(p*o-s*d)*k,t[3]=O*k,t[4]=(b*n-s*m)*k,t[5]=(-p*n+s*l)*k,t[6]=E*k,t[7]=(-_*n+o*m)*k,t[8]=(d*n-o*l)*k,t):null},Jn.adjoint=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=e[6],_=e[7],b=e[8];return t[0]=d*b-p*_,t[1]=s*_-o*b,t[2]=o*p-s*d,t[3]=p*m-l*b,t[4]=n*b-s*m,t[5]=s*l-n*p,t[6]=l*_-d*m,t[7]=o*m-n*_,t[8]=n*d-o*l,t},Jn.determinant=function(t){var e=t[3],n=t[4],o=t[5],s=t[6],l=t[7],d=t[8];return t[0]*(d*n-o*l)+t[1]*(-d*e+o*s)+t[2]*(l*e-n*s)},Jn.multiply=Oy,Jn.translate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=e[8],O=n[0],E=n[1];return t[0]=o,t[1]=s,t[2]=l,t[3]=d,t[4]=p,t[5]=m,t[6]=O*o+E*d+_,t[7]=O*s+E*p+b,t[8]=O*l+E*m+C,t},Jn.rotate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=e[8],O=Math.sin(n),E=Math.cos(n);return t[0]=E*o+O*d,t[1]=E*s+O*p,t[2]=E*l+O*m,t[3]=E*d-O*o,t[4]=E*p-O*s,t[5]=E*m-O*l,t[6]=_,t[7]=b,t[8]=C,t},Jn.scale=function(t,e,n){var o=n[0],s=n[1];return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},Jn.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},Jn.fromRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=-n,t[4]=o,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Jn.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Jn.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},Jn.fromQuat=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=n+n,p=o+o,m=s+s,_=n*d,b=o*d,C=o*p,O=s*d,E=s*p,k=s*m,R=l*d,L=l*p,V=l*m;return t[0]=1-C-k,t[3]=b-V,t[6]=O+L,t[1]=b+V,t[4]=1-_-k,t[7]=E-R,t[2]=O-L,t[5]=E+R,t[8]=1-_-C,t},Jn.normalFromMat4=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=e[6],_=e[7],b=e[8],C=e[9],O=e[10],E=e[11],k=e[12],R=e[13],L=e[14],V=e[15],Y=n*p-o*d,J=n*m-s*d,K=n*_-l*d,ae=o*m-s*p,ie=o*_-l*p,de=s*_-l*m,me=b*R-C*k,ve=b*L-O*k,Pe=b*V-E*k,be=C*L-O*R,Be=C*V-E*R,Ue=O*V-E*L,Ie=Y*Ue-J*Be+K*be+ae*Pe-ie*ve+de*me;return Ie?(t[0]=(p*Ue-m*Be+_*be)*(Ie=1/Ie),t[1]=(m*Pe-d*Ue-_*ve)*Ie,t[2]=(d*Be-p*Pe+_*me)*Ie,t[3]=(s*Be-o*Ue-l*be)*Ie,t[4]=(n*Ue-s*Pe+l*ve)*Ie,t[5]=(o*Pe-n*Be-l*me)*Ie,t[6]=(R*de-L*ie+V*ae)*Ie,t[7]=(L*K-k*de-V*J)*Ie,t[8]=(k*ie-R*K+V*Y)*Ie,t):null},Jn.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Jn.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Jn.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Jn.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},Jn.subtract=Ty,Jn.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},Jn.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t},Jn.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},Jn.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=t[4],p=t[5],m=t[6],_=t[7],b=t[8],C=e[0],O=e[1],E=e[2],k=e[3],R=e[4],L=e[5],V=e[6],Y=e[7],J=e[8];return Math.abs(n-C)<=Kr.EPSILON*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(o-O)<=Kr.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(s-E)<=Kr.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-k)<=Kr.EPSILON*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(d-R)<=Kr.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-L)<=Kr.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-V)<=Kr.EPSILON*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(_-Y)<=Kr.EPSILON*Math.max(1,Math.abs(_),Math.abs(Y))&&Math.abs(b-J)<=Kr.EPSILON*Math.max(1,Math.abs(b),Math.abs(J))},Jn.sub=Jn.mul=void 0;var Kr=function(t,e){if(t&&t.__esModule)return t;if(t===null||y_(t)!=="object"&&typeof t!="function")return{default:t};var n=Py(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function Py(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Py=function(o){return o?n:e})(t)}function Oy(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=e[8],O=n[0],E=n[1],k=n[2],R=n[3],L=n[4],V=n[5],Y=n[6],J=n[7],K=n[8];return t[0]=O*o+E*d+k*_,t[1]=O*s+E*p+k*b,t[2]=O*l+E*m+k*C,t[3]=R*o+L*d+V*_,t[4]=R*s+L*p+V*b,t[5]=R*l+L*m+V*C,t[6]=Y*o+J*d+K*_,t[7]=Y*s+J*p+K*b,t[8]=Y*l+J*m+K*C,t}function Ty(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Jn.mul=Oy,Jn.sub=Ty;var en={};function x_(t){return x_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x_(t)}Object.defineProperty(en,"__esModule",{value:!0}),en.create=function(){var t=new Bi.ARRAY_TYPE(16);return Bi.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},en.clone=function(t){var e=new Bi.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},en.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},en.fromValues=function(t,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R){var L=new Bi.ARRAY_TYPE(16);return L[0]=t,L[1]=e,L[2]=n,L[3]=o,L[4]=s,L[5]=l,L[6]=d,L[7]=p,L[8]=m,L[9]=_,L[10]=b,L[11]=C,L[12]=O,L[13]=E,L[14]=k,L[15]=R,L},en.set=function(t,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t[4]=l,t[5]=d,t[6]=p,t[7]=m,t[8]=_,t[9]=b,t[10]=C,t[11]=O,t[12]=E,t[13]=k,t[14]=R,t[15]=L,t},en.identity=Ey,en.transpose=function(t,e){if(t===e){var n=e[1],o=e[2],s=e[3],l=e[6],d=e[7],p=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=l,t[11]=e[14],t[12]=s,t[13]=d,t[14]=p}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},en.invert=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=e[6],_=e[7],b=e[8],C=e[9],O=e[10],E=e[11],k=e[12],R=e[13],L=e[14],V=e[15],Y=n*p-o*d,J=n*m-s*d,K=n*_-l*d,ae=o*m-s*p,ie=o*_-l*p,de=s*_-l*m,me=b*R-C*k,ve=b*L-O*k,Pe=b*V-E*k,be=C*L-O*R,Be=C*V-E*R,Ue=O*V-E*L,Ie=Y*Ue-J*Be+K*be+ae*Pe-ie*ve+de*me;return Ie?(t[0]=(p*Ue-m*Be+_*be)*(Ie=1/Ie),t[1]=(s*Be-o*Ue-l*be)*Ie,t[2]=(R*de-L*ie+V*ae)*Ie,t[3]=(O*ie-C*de-E*ae)*Ie,t[4]=(m*Pe-d*Ue-_*ve)*Ie,t[5]=(n*Ue-s*Pe+l*ve)*Ie,t[6]=(L*K-k*de-V*J)*Ie,t[7]=(b*de-O*K+E*J)*Ie,t[8]=(d*Be-p*Pe+_*me)*Ie,t[9]=(o*Pe-n*Be-l*me)*Ie,t[10]=(k*ie-R*K+V*Y)*Ie,t[11]=(C*K-b*ie-E*Y)*Ie,t[12]=(p*ve-d*be-m*me)*Ie,t[13]=(n*be-o*ve+s*me)*Ie,t[14]=(R*J-k*ae-L*Y)*Ie,t[15]=(b*ae-C*J+O*Y)*Ie,t):null},en.adjoint=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=e[4],p=e[5],m=e[6],_=e[7],b=e[8],C=e[9],O=e[10],E=e[11],k=e[12],R=e[13],L=e[14],V=e[15];return t[0]=p*(O*V-E*L)-C*(m*V-_*L)+R*(m*E-_*O),t[1]=-(o*(O*V-E*L)-C*(s*V-l*L)+R*(s*E-l*O)),t[2]=o*(m*V-_*L)-p*(s*V-l*L)+R*(s*_-l*m),t[3]=-(o*(m*E-_*O)-p*(s*E-l*O)+C*(s*_-l*m)),t[4]=-(d*(O*V-E*L)-b*(m*V-_*L)+k*(m*E-_*O)),t[5]=n*(O*V-E*L)-b*(s*V-l*L)+k*(s*E-l*O),t[6]=-(n*(m*V-_*L)-d*(s*V-l*L)+k*(s*_-l*m)),t[7]=n*(m*E-_*O)-d*(s*E-l*O)+b*(s*_-l*m),t[8]=d*(C*V-E*R)-b*(p*V-_*R)+k*(p*E-_*C),t[9]=-(n*(C*V-E*R)-b*(o*V-l*R)+k*(o*E-l*C)),t[10]=n*(p*V-_*R)-d*(o*V-l*R)+k*(o*_-l*p),t[11]=-(n*(p*E-_*C)-d*(o*E-l*C)+b*(o*_-l*p)),t[12]=-(d*(C*L-O*R)-b*(p*L-m*R)+k*(p*O-m*C)),t[13]=n*(C*L-O*R)-b*(o*L-s*R)+k*(o*O-s*C),t[14]=-(n*(p*L-m*R)-d*(o*L-s*R)+k*(o*m-s*p)),t[15]=n*(p*O-m*C)-d*(o*O-s*C)+b*(o*m-s*p),t},en.determinant=function(t){var e=t[0],n=t[1],o=t[2],s=t[3],l=t[4],d=t[5],p=t[6],m=t[7],_=t[8],b=t[9],C=t[10],O=t[11],E=t[12],k=t[13],R=t[14],L=t[15];return(e*d-n*l)*(C*L-O*R)-(e*p-o*l)*(b*L-O*k)+(e*m-s*l)*(b*R-C*k)+(n*p-o*d)*(_*L-O*E)-(n*m-s*d)*(_*R-C*E)+(o*m-s*p)*(_*k-b*E)},en.multiply=Iy,en.translate=function(t,e,n){var o,s,l,d,p,m,_,b,C,O,E,k,R=n[0],L=n[1],V=n[2];return e===t?(t[12]=e[0]*R+e[4]*L+e[8]*V+e[12],t[13]=e[1]*R+e[5]*L+e[9]*V+e[13],t[14]=e[2]*R+e[6]*L+e[10]*V+e[14],t[15]=e[3]*R+e[7]*L+e[11]*V+e[15]):(s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=e[8],O=e[9],E=e[10],k=e[11],t[0]=o=e[0],t[1]=s,t[2]=l,t[3]=d,t[4]=p,t[5]=m,t[6]=_,t[7]=b,t[8]=C,t[9]=O,t[10]=E,t[11]=k,t[12]=o*R+p*L+C*V+e[12],t[13]=s*R+m*L+O*V+e[13],t[14]=l*R+_*L+E*V+e[14],t[15]=d*R+b*L+k*V+e[15]),t},en.scale=function(t,e,n){var o=n[0],s=n[1],l=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},en.rotate=function(t,e,n,o){var s,l,d,p,m,_,b,C,O,E,k,R,L,V,Y,J,K,ae,ie,de,me,ve,Pe,be,Be=o[0],Ue=o[1],Ie=o[2],je=Math.hypot(Be,Ue,Ie);return je<Bi.EPSILON?null:(Be*=je=1/je,Ue*=je,Ie*=je,s=Math.sin(n),l=Math.cos(n),m=e[1],_=e[2],b=e[3],O=e[5],E=e[6],k=e[7],L=e[9],V=e[10],Y=e[11],J=Be*Be*(d=1-l)+l,ie=Be*Ue*d-Ie*s,de=Ue*Ue*d+l,me=Ie*Ue*d+Be*s,ve=Be*Ie*d+Ue*s,Pe=Ue*Ie*d-Be*s,be=Ie*Ie*d+l,t[0]=(p=e[0])*J+(C=e[4])*(K=Ue*Be*d+Ie*s)+(R=e[8])*(ae=Ie*Be*d-Ue*s),t[1]=m*J+O*K+L*ae,t[2]=_*J+E*K+V*ae,t[3]=b*J+k*K+Y*ae,t[4]=p*ie+C*de+R*me,t[5]=m*ie+O*de+L*me,t[6]=_*ie+E*de+V*me,t[7]=b*ie+k*de+Y*me,t[8]=p*ve+C*Pe+R*be,t[9]=m*ve+O*Pe+L*be,t[10]=_*ve+E*Pe+V*be,t[11]=b*ve+k*Pe+Y*be,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},en.rotateX=function(t,e,n){var o=Math.sin(n),s=Math.cos(n),l=e[4],d=e[5],p=e[6],m=e[7],_=e[8],b=e[9],C=e[10],O=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=l*s+_*o,t[5]=d*s+b*o,t[6]=p*s+C*o,t[7]=m*s+O*o,t[8]=_*s-l*o,t[9]=b*s-d*o,t[10]=C*s-p*o,t[11]=O*s-m*o,t},en.rotateY=function(t,e,n){var o=Math.sin(n),s=Math.cos(n),l=e[0],d=e[1],p=e[2],m=e[3],_=e[8],b=e[9],C=e[10],O=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*s-_*o,t[1]=d*s-b*o,t[2]=p*s-C*o,t[3]=m*s-O*o,t[8]=l*o+_*s,t[9]=d*o+b*s,t[10]=p*o+C*s,t[11]=m*o+O*s,t},en.rotateZ=function(t,e,n){var o=Math.sin(n),s=Math.cos(n),l=e[0],d=e[1],p=e[2],m=e[3],_=e[4],b=e[5],C=e[6],O=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*s+_*o,t[1]=d*s+b*o,t[2]=p*s+C*o,t[3]=m*s+O*o,t[4]=_*s-l*o,t[5]=b*s-d*o,t[6]=C*s-p*o,t[7]=O*s-m*o,t},en.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},en.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},en.fromRotation=function(t,e,n){var o,s,l,d=n[0],p=n[1],m=n[2],_=Math.hypot(d,p,m);return _<Bi.EPSILON?null:(d*=_=1/_,p*=_,m*=_,o=Math.sin(e),s=Math.cos(e),t[0]=d*d*(l=1-s)+s,t[1]=p*d*l+m*o,t[2]=m*d*l-p*o,t[3]=0,t[4]=d*p*l-m*o,t[5]=p*p*l+s,t[6]=m*p*l+d*o,t[7]=0,t[8]=d*m*l+p*o,t[9]=p*m*l-d*o,t[10]=m*m*l+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},en.fromXRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},en.fromYRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},en.fromZRotation=function(t,e){var n=Math.sin(e),o=Math.cos(e);return t[0]=o,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},en.fromRotationTranslation=Dy,en.fromQuat2=function(t,e){var n=new Bi.ARRAY_TYPE(3),o=-e[0],s=-e[1],l=-e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=o*o+s*s+l*l+d*d;return C>0?(n[0]=2*(p*d+b*o+m*l-_*s)/C,n[1]=2*(m*d+b*s+_*o-p*l)/C,n[2]=2*(_*d+b*l+p*s-m*o)/C):(n[0]=2*(p*d+b*o+m*l-_*s),n[1]=2*(m*d+b*s+_*o-p*l),n[2]=2*(_*d+b*l+p*s-m*o)),Dy(t,e,n),t},en.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},en.getScaling=ky,en.getRotation=function(t,e){var n=new Bi.ARRAY_TYPE(3);ky(n,e);var o=1/n[0],s=1/n[1],l=1/n[2],d=e[0]*o,p=e[1]*s,m=e[2]*l,_=e[4]*o,b=e[5]*s,C=e[6]*l,O=e[8]*o,E=e[9]*s,k=e[10]*l,R=d+b+k,L=0;return R>0?(L=2*Math.sqrt(R+1),t[3]=.25*L,t[0]=(C-E)/L,t[1]=(O-m)/L,t[2]=(p-_)/L):d>b&&d>k?(L=2*Math.sqrt(1+d-b-k),t[3]=(C-E)/L,t[0]=.25*L,t[1]=(p+_)/L,t[2]=(O+m)/L):b>k?(L=2*Math.sqrt(1+b-d-k),t[3]=(O-m)/L,t[0]=(p+_)/L,t[1]=.25*L,t[2]=(C+E)/L):(L=2*Math.sqrt(1+k-d-b),t[3]=(p-_)/L,t[0]=(O+m)/L,t[1]=(C+E)/L,t[2]=.25*L),t},en.fromRotationTranslationScale=function(t,e,n,o){var s=e[0],l=e[1],d=e[2],p=e[3],m=s+s,_=l+l,b=d+d,C=s*m,O=s*_,E=s*b,k=l*_,R=l*b,L=d*b,V=p*m,Y=p*_,J=p*b,K=o[0],ae=o[1],ie=o[2];return t[0]=(1-(k+L))*K,t[1]=(O+J)*K,t[2]=(E-Y)*K,t[3]=0,t[4]=(O-J)*ae,t[5]=(1-(C+L))*ae,t[6]=(R+V)*ae,t[7]=0,t[8]=(E+Y)*ie,t[9]=(R-V)*ie,t[10]=(1-(C+k))*ie,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},en.fromRotationTranslationScaleOrigin=function(t,e,n,o,s){var l=e[0],d=e[1],p=e[2],m=e[3],_=l+l,b=d+d,C=p+p,O=l*_,E=l*b,k=l*C,R=d*b,L=d*C,V=p*C,Y=m*_,J=m*b,K=m*C,ae=o[0],ie=o[1],de=o[2],me=s[0],ve=s[1],Pe=s[2],be=(1-(R+V))*ae,Be=(E+K)*ae,Ue=(k-J)*ae,Ie=(E-K)*ie,je=(1-(O+V))*ie,Se=(L+Y)*ie,Ne=(k+J)*de,st=(L-Y)*de,Ge=(1-(O+R))*de;return t[0]=be,t[1]=Be,t[2]=Ue,t[3]=0,t[4]=Ie,t[5]=je,t[6]=Se,t[7]=0,t[8]=Ne,t[9]=st,t[10]=Ge,t[11]=0,t[12]=n[0]+me-(be*me+Ie*ve+Ne*Pe),t[13]=n[1]+ve-(Be*me+je*ve+st*Pe),t[14]=n[2]+Pe-(Ue*me+Se*ve+Ge*Pe),t[15]=1,t},en.fromQuat=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=n+n,p=o+o,m=s+s,_=n*d,b=o*d,C=o*p,O=s*d,E=s*p,k=s*m,R=l*d,L=l*p,V=l*m;return t[0]=1-C-k,t[1]=b+V,t[2]=O-L,t[3]=0,t[4]=b-V,t[5]=1-_-k,t[6]=E+R,t[7]=0,t[8]=O+L,t[9]=E-R,t[10]=1-_-C,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},en.frustum=function(t,e,n,o,s,l,d){var p=1/(n-e),m=1/(s-o),_=1/(l-d);return t[0]=2*l*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*l*m,t[6]=0,t[7]=0,t[8]=(n+e)*p,t[9]=(s+o)*m,t[10]=(d+l)*_,t[11]=-1,t[12]=0,t[13]=0,t[14]=d*l*2*_,t[15]=0,t},en.perspectiveNO=Ry,en.perspectiveZO=function(t,e,n,o,s){var l,d=1/Math.tan(e/2);return t[0]=d/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(t[10]=s*(l=1/(o-s)),t[14]=s*o*l):(t[10]=-1,t[14]=-o),t},en.perspectiveFromFieldOfView=function(t,e,n,o){var s=Math.tan(e.upDegrees*Math.PI/180),l=Math.tan(e.downDegrees*Math.PI/180),d=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),m=2/(d+p),_=2/(s+l);return t[0]=m,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=_,t[6]=0,t[7]=0,t[8]=-(d-p)*m*.5,t[9]=(s-l)*_*.5,t[10]=o/(n-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*n/(n-o),t[15]=0,t},en.orthoNO=zy,en.orthoZO=function(t,e,n,o,s,l,d){var p=1/(e-n),m=1/(o-s),_=1/(l-d);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=_,t[11]=0,t[12]=(e+n)*p,t[13]=(s+o)*m,t[14]=l*_,t[15]=1,t},en.lookAt=function(t,e,n,o){var s,l,d,p,m,_,b,C,O,E,k=e[0],R=e[1],L=e[2],V=o[0],Y=o[1],J=o[2],K=n[0],ae=n[1],ie=n[2];return Math.abs(k-K)<Bi.EPSILON&&Math.abs(R-ae)<Bi.EPSILON&&Math.abs(L-ie)<Bi.EPSILON?Ey(t):(b=k-K,C=R-ae,O=L-ie,s=Y*(O*=E=1/Math.hypot(b,C,O))-J*(C*=E),l=J*(b*=E)-V*O,d=V*C-Y*b,(E=Math.hypot(s,l,d))?(s*=E=1/E,l*=E,d*=E):(s=0,l=0,d=0),p=C*d-O*l,m=O*s-b*d,_=b*l-C*s,(E=Math.hypot(p,m,_))?(p*=E=1/E,m*=E,_*=E):(p=0,m=0,_=0),t[0]=s,t[1]=p,t[2]=b,t[3]=0,t[4]=l,t[5]=m,t[6]=C,t[7]=0,t[8]=d,t[9]=_,t[10]=O,t[11]=0,t[12]=-(s*k+l*R+d*L),t[13]=-(p*k+m*R+_*L),t[14]=-(b*k+C*R+O*L),t[15]=1,t)},en.targetTo=function(t,e,n,o){var s=e[0],l=e[1],d=e[2],p=o[0],m=o[1],_=o[2],b=s-n[0],C=l-n[1],O=d-n[2],E=b*b+C*C+O*O;E>0&&(b*=E=1/Math.sqrt(E),C*=E,O*=E);var k=m*O-_*C,R=_*b-p*O,L=p*C-m*b;return(E=k*k+R*R+L*L)>0&&(k*=E=1/Math.sqrt(E),R*=E,L*=E),t[0]=k,t[1]=R,t[2]=L,t[3]=0,t[4]=C*L-O*R,t[5]=O*k-b*L,t[6]=b*R-C*k,t[7]=0,t[8]=b,t[9]=C,t[10]=O,t[11]=0,t[12]=s,t[13]=l,t[14]=d,t[15]=1,t},en.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},en.frob=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},en.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},en.subtract=By,en.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},en.multiplyScalarAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t[4]=e[4]+n[4]*o,t[5]=e[5]+n[5]*o,t[6]=e[6]+n[6]*o,t[7]=e[7]+n[7]*o,t[8]=e[8]+n[8]*o,t[9]=e[9]+n[9]*o,t[10]=e[10]+n[10]*o,t[11]=e[11]+n[11]*o,t[12]=e[12]+n[12]*o,t[13]=e[13]+n[13]*o,t[14]=e[14]+n[14]*o,t[15]=e[15]+n[15]*o,t},en.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},en.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=t[4],p=t[5],m=t[6],_=t[7],b=t[8],C=t[9],O=t[10],E=t[11],k=t[12],R=t[13],L=t[14],V=t[15],Y=e[0],J=e[1],K=e[2],ae=e[3],ie=e[4],de=e[5],me=e[6],ve=e[7],Pe=e[8],be=e[9],Be=e[10],Ue=e[11],Ie=e[12],je=e[13],Se=e[14],Ne=e[15];return Math.abs(n-Y)<=Bi.EPSILON*Math.max(1,Math.abs(n),Math.abs(Y))&&Math.abs(o-J)<=Bi.EPSILON*Math.max(1,Math.abs(o),Math.abs(J))&&Math.abs(s-K)<=Bi.EPSILON*Math.max(1,Math.abs(s),Math.abs(K))&&Math.abs(l-ae)<=Bi.EPSILON*Math.max(1,Math.abs(l),Math.abs(ae))&&Math.abs(d-ie)<=Bi.EPSILON*Math.max(1,Math.abs(d),Math.abs(ie))&&Math.abs(p-de)<=Bi.EPSILON*Math.max(1,Math.abs(p),Math.abs(de))&&Math.abs(m-me)<=Bi.EPSILON*Math.max(1,Math.abs(m),Math.abs(me))&&Math.abs(_-ve)<=Bi.EPSILON*Math.max(1,Math.abs(_),Math.abs(ve))&&Math.abs(b-Pe)<=Bi.EPSILON*Math.max(1,Math.abs(b),Math.abs(Pe))&&Math.abs(C-be)<=Bi.EPSILON*Math.max(1,Math.abs(C),Math.abs(be))&&Math.abs(O-Be)<=Bi.EPSILON*Math.max(1,Math.abs(O),Math.abs(Be))&&Math.abs(E-Ue)<=Bi.EPSILON*Math.max(1,Math.abs(E),Math.abs(Ue))&&Math.abs(k-Ie)<=Bi.EPSILON*Math.max(1,Math.abs(k),Math.abs(Ie))&&Math.abs(R-je)<=Bi.EPSILON*Math.max(1,Math.abs(R),Math.abs(je))&&Math.abs(L-Se)<=Bi.EPSILON*Math.max(1,Math.abs(L),Math.abs(Se))&&Math.abs(V-Ne)<=Bi.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ne))},en.sub=en.mul=en.ortho=en.perspective=void 0;var Bi=function(t,e){if(t&&t.__esModule)return t;if(t===null||x_(t)!=="object"&&typeof t!="function")return{default:t};var n=Sy(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function Sy(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Sy=function(o){return o?n:e})(t)}function Ey(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Iy(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=e[8],O=e[9],E=e[10],k=e[11],R=e[12],L=e[13],V=e[14],Y=e[15],J=n[0],K=n[1],ae=n[2],ie=n[3];return t[0]=J*o+K*p+ae*C+ie*R,t[1]=J*s+K*m+ae*O+ie*L,t[2]=J*l+K*_+ae*E+ie*V,t[3]=J*d+K*b+ae*k+ie*Y,t[4]=(J=n[4])*o+(K=n[5])*p+(ae=n[6])*C+(ie=n[7])*R,t[5]=J*s+K*m+ae*O+ie*L,t[6]=J*l+K*_+ae*E+ie*V,t[7]=J*d+K*b+ae*k+ie*Y,t[8]=(J=n[8])*o+(K=n[9])*p+(ae=n[10])*C+(ie=n[11])*R,t[9]=J*s+K*m+ae*O+ie*L,t[10]=J*l+K*_+ae*E+ie*V,t[11]=J*d+K*b+ae*k+ie*Y,t[12]=(J=n[12])*o+(K=n[13])*p+(ae=n[14])*C+(ie=n[15])*R,t[13]=J*s+K*m+ae*O+ie*L,t[14]=J*l+K*_+ae*E+ie*V,t[15]=J*d+K*b+ae*k+ie*Y,t}function Dy(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=o+o,m=s+s,_=l+l,b=o*p,C=o*m,O=o*_,E=s*m,k=s*_,R=l*_,L=d*p,V=d*m,Y=d*_;return t[0]=1-(E+R),t[1]=C+Y,t[2]=O-V,t[3]=0,t[4]=C-Y,t[5]=1-(b+R),t[6]=k+L,t[7]=0,t[8]=O+V,t[9]=k-L,t[10]=1-(b+E),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ky(t,e){var n=e[4],o=e[5],s=e[6],l=e[8],d=e[9],p=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(n,o,s),t[2]=Math.hypot(l,d,p),t}function Ry(t,e,n,o,s){var l,d=1/Math.tan(e/2);return t[0]=d/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(t[10]=(s+o)*(l=1/(o-s)),t[14]=2*s*o*l):(t[10]=-1,t[14]=-2*o),t}function zy(t,e,n,o,s,l,d){var p=1/(e-n),m=1/(o-s),_=1/(l-d);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*m,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*_,t[11]=0,t[12]=(e+n)*p,t[13]=(s+o)*m,t[14]=(d+l)*_,t[15]=1,t}function By(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}en.perspective=Ry,en.ortho=zy,en.mul=Iy,en.sub=By;var Yt={},Kt={};function v_(t){return v_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v_(t)}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.create=Ly,Kt.clone=function(t){var e=new Ol.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},Kt.length=Ny,Kt.fromValues=function(t,e,n){var o=new Ol.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o},Kt.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},Kt.set=function(t,e,n,o){return t[0]=e,t[1]=n,t[2]=o,t},Kt.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},Kt.subtract=Vy,Kt.multiply=jy,Kt.divide=Uy,Kt.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},Kt.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},Kt.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},Kt.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},Kt.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},Kt.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},Kt.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t},Kt.distance=Gy,Kt.squaredDistance=Hy,Kt.squaredLength=$y,Kt.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},Kt.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},Kt.normalize=function(t,e){var n=e[0],o=e[1],s=e[2],l=n*n+o*o+s*s;return l>0&&(l=1/Math.sqrt(l)),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l,t},Kt.dot=Wy,Kt.cross=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=n[0],p=n[1],m=n[2];return t[0]=s*m-l*p,t[1]=l*d-o*m,t[2]=o*p-s*d,t},Kt.lerp=function(t,e,n,o){var s=e[0],l=e[1],d=e[2];return t[0]=s+o*(n[0]-s),t[1]=l+o*(n[1]-l),t[2]=d+o*(n[2]-d),t},Kt.hermite=function(t,e,n,o,s,l){var d=l*l,p=d*(2*l-3)+1,m=d*(l-2)+l,_=d*(l-1),b=d*(3-2*l);return t[0]=e[0]*p+n[0]*m+o[0]*_+s[0]*b,t[1]=e[1]*p+n[1]*m+o[1]*_+s[1]*b,t[2]=e[2]*p+n[2]*m+o[2]*_+s[2]*b,t},Kt.bezier=function(t,e,n,o,s,l){var d=1-l,p=d*d,m=l*l,_=p*d,b=3*l*p,C=3*m*d,O=m*l;return t[0]=e[0]*_+n[0]*b+o[0]*C+s[0]*O,t[1]=e[1]*_+n[1]*b+o[1]*C+s[1]*O,t[2]=e[2]*_+n[2]*b+o[2]*C+s[2]*O,t},Kt.random=function(t,e){e=e||1;var n=2*Ol.RANDOM()*Math.PI,o=2*Ol.RANDOM()-1,s=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*s,t[1]=Math.sin(n)*s,t[2]=o*e,t},Kt.transformMat4=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=n[3]*o+n[7]*s+n[11]*l+n[15];return t[0]=(n[0]*o+n[4]*s+n[8]*l+n[12])/(d=d||1),t[1]=(n[1]*o+n[5]*s+n[9]*l+n[13])/d,t[2]=(n[2]*o+n[6]*s+n[10]*l+n[14])/d,t},Kt.transformMat3=function(t,e,n){var o=e[0],s=e[1],l=e[2];return t[0]=o*n[0]+s*n[3]+l*n[6],t[1]=o*n[1]+s*n[4]+l*n[7],t[2]=o*n[2]+s*n[5]+l*n[8],t},Kt.transformQuat=function(t,e,n){var o=n[0],s=n[1],l=n[2],d=e[0],p=e[1],m=e[2],_=s*m-l*p,b=l*d-o*m,C=o*p-s*d,O=s*C-l*b,E=l*_-o*C,k=o*b-s*_,R=2*n[3];return b*=R,C*=R,E*=2,k*=2,t[0]=d+(_*=R)+(O*=2),t[1]=p+b+E,t[2]=m+C+k,t},Kt.rotateX=function(t,e,n,o){var s=[],l=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],l[0]=s[0],l[1]=s[1]*Math.cos(o)-s[2]*Math.sin(o),l[2]=s[1]*Math.sin(o)+s[2]*Math.cos(o),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t},Kt.rotateY=function(t,e,n,o){var s=[],l=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],l[0]=s[2]*Math.sin(o)+s[0]*Math.cos(o),l[1]=s[1],l[2]=s[2]*Math.cos(o)-s[0]*Math.sin(o),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t},Kt.rotateZ=function(t,e,n,o){var s=[],l=[];return s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],l[0]=s[0]*Math.cos(o)-s[1]*Math.sin(o),l[1]=s[0]*Math.sin(o)+s[1]*Math.cos(o),l[2]=s[2],t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t},Kt.angle=function(t,e){var n=t[0],o=t[1],s=t[2],l=e[0],d=e[1],p=e[2],m=Math.sqrt(n*n+o*o+s*s)*Math.sqrt(l*l+d*d+p*p),_=m&&Wy(t,e)/m;return Math.acos(Math.min(Math.max(_,-1),1))},Kt.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Kt.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Kt.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},Kt.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=e[0],d=e[1],p=e[2];return Math.abs(n-l)<=Ol.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-d)<=Ol.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-p)<=Ol.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},Kt.forEach=Kt.sqrLen=Kt.len=Kt.sqrDist=Kt.dist=Kt.div=Kt.mul=Kt.sub=void 0;var Ol=function(t,e){if(t&&t.__esModule)return t;if(t===null||v_(t)!=="object"&&typeof t!="function")return{default:t};var n=Fy(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function Fy(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Fy=function(o){return o?n:e})(t)}function Ly(){var t=new Ol.ARRAY_TYPE(3);return Ol.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ny(t){return Math.hypot(t[0],t[1],t[2])}function Vy(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function jy(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Uy(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Gy(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function Hy(t,e){var n=e[0]-t[0],o=e[1]-t[1],s=e[2]-t[2];return n*n+o*o+s*s}function $y(t){var e=t[0],n=t[1],o=t[2];return e*e+n*n+o*o}function Wy(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Kt.sub=Vy,Kt.mul=jy,Kt.div=Uy,Kt.dist=Gy,Kt.sqrDist=Hy,Kt.len=Ny,Kt.sqrLen=$y;var Tl,Y2=(Tl=Ly(),function(t,e,n,o,s,l){var d,p;for(e||(e=3),n||(n=0),p=o?Math.min(o*e+n,t.length):t.length,d=n;d<p;d+=e)Tl[0]=t[d],Tl[1]=t[d+1],Tl[2]=t[d+2],s(Tl,Tl,l),t[d]=Tl[0],t[d+1]=Tl[1],t[d+2]=Tl[2];return t});Kt.forEach=Y2;var yn={};function b_(t){return b_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b_(t)}Object.defineProperty(yn,"__esModule",{value:!0}),yn.create=qy,yn.clone=function(t){var e=new ka.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},yn.fromValues=function(t,e,n,o){var s=new ka.ARRAY_TYPE(4);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s},yn.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},yn.set=function(t,e,n,o,s){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t},yn.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},yn.subtract=Yy,yn.multiply=Xy,yn.divide=Qy,yn.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},yn.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},yn.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},yn.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},yn.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},yn.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},yn.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t[3]=e[3]+n[3]*o,t},yn.distance=Ky,yn.squaredDistance=Jy,yn.length=ex,yn.squaredLength=tx,yn.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},yn.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},yn.normalize=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=n*n+o*o+s*s+l*l;return d>0&&(d=1/Math.sqrt(d)),t[0]=n*d,t[1]=o*d,t[2]=s*d,t[3]=l*d,t},yn.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},yn.cross=function(t,e,n,o){var s=n[0]*o[1]-n[1]*o[0],l=n[0]*o[2]-n[2]*o[0],d=n[0]*o[3]-n[3]*o[0],p=n[1]*o[2]-n[2]*o[1],m=n[1]*o[3]-n[3]*o[1],_=n[2]*o[3]-n[3]*o[2],b=e[0],C=e[1],O=e[2],E=e[3];return t[0]=C*_-O*m+E*p,t[1]=-b*_+O*d-E*l,t[2]=b*m-C*d+E*s,t[3]=-b*p+C*l-O*s,t},yn.lerp=function(t,e,n,o){var s=e[0],l=e[1],d=e[2],p=e[3];return t[0]=s+o*(n[0]-s),t[1]=l+o*(n[1]-l),t[2]=d+o*(n[2]-d),t[3]=p+o*(n[3]-p),t},yn.random=function(t,e){var n,o,s,l,d,p;e=e||1;do d=(n=2*ka.RANDOM()-1)*n+(o=2*ka.RANDOM()-1)*o;while(d>=1);do p=(s=2*ka.RANDOM()-1)*s+(l=2*ka.RANDOM()-1)*l;while(p>=1);var m=Math.sqrt((1-d)/p);return t[0]=e*n,t[1]=e*o,t[2]=e*s*m,t[3]=e*l*m,t},yn.transformMat4=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3];return t[0]=n[0]*o+n[4]*s+n[8]*l+n[12]*d,t[1]=n[1]*o+n[5]*s+n[9]*l+n[13]*d,t[2]=n[2]*o+n[6]*s+n[10]*l+n[14]*d,t[3]=n[3]*o+n[7]*s+n[11]*l+n[15]*d,t},yn.transformQuat=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=n[0],p=n[1],m=n[2],_=n[3],b=_*o+p*l-m*s,C=_*s+m*o-d*l,O=_*l+d*s-p*o,E=-d*o-p*s-m*l;return t[0]=b*_+E*-d+C*-m-O*-p,t[1]=C*_+E*-p+O*-d-b*-m,t[2]=O*_+E*-m+b*-p-C*-d,t[3]=e[3],t},yn.zero=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},yn.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},yn.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},yn.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=e[0],p=e[1],m=e[2],_=e[3];return Math.abs(n-d)<=ka.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=ka.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=ka.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-_)<=ka.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))},yn.forEach=yn.sqrLen=yn.len=yn.sqrDist=yn.dist=yn.div=yn.mul=yn.sub=void 0;var ka=function(t,e){if(t&&t.__esModule)return t;if(t===null||b_(t)!=="object"&&typeof t!="function")return{default:t};var n=Zy(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function Zy(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Zy=function(o){return o?n:e})(t)}function qy(){var t=new ka.ARRAY_TYPE(4);return ka.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Yy(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xy(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Qy(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Ky(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])}function Jy(t,e){var n=e[0]-t[0],o=e[1]-t[1],s=e[2]-t[2],l=e[3]-t[3];return n*n+o*o+s*s+l*l}function ex(t){return Math.hypot(t[0],t[1],t[2],t[3])}function tx(t){var e=t[0],n=t[1],o=t[2],s=t[3];return e*e+n*n+o*o+s*s}yn.sub=Yy,yn.mul=Xy,yn.div=Qy,yn.dist=Ky,yn.sqrDist=Jy,yn.len=ex,yn.sqrLen=tx;var X2=function(){var t=qy();return function(e,n,o,s,l,d){var p,m;for(n||(n=4),o||(o=0),m=s?Math.min(s*n+o,e.length):e.length,p=o;p<m;p+=n)t[0]=e[p],t[1]=e[p+1],t[2]=e[p+2],t[3]=e[p+3],l(t,t,d),e[p]=t[0],e[p+1]=t[1],e[p+2]=t[2],e[p+3]=t[3];return e}}();function w_(t){return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w_(t)}yn.forEach=X2,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.create=C_,Yt.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Yt.setAxisAngle=ix,Yt.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),o=Math.sin(n/2);return o>Zu.EPSILON?(t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o):(t[0]=1,t[1]=0,t[2]=0),n},Yt.getAngle=function(t,e){var n=cx(t,e);return Math.acos(2*n*n-1)},Yt.multiply=ox,Yt.rotateX=function(t,e,n){n*=.5;var o=e[0],s=e[1],l=e[2],d=e[3],p=Math.sin(n),m=Math.cos(n);return t[0]=o*m+d*p,t[1]=s*m+l*p,t[2]=l*m-s*p,t[3]=d*m-o*p,t},Yt.rotateY=function(t,e,n){n*=.5;var o=e[0],s=e[1],l=e[2],d=e[3],p=Math.sin(n),m=Math.cos(n);return t[0]=o*m-l*p,t[1]=s*m+d*p,t[2]=l*m+o*p,t[3]=d*m-s*p,t},Yt.rotateZ=function(t,e,n){n*=.5;var o=e[0],s=e[1],l=e[2],d=e[3],p=Math.sin(n),m=Math.cos(n);return t[0]=o*m+s*p,t[1]=s*m-o*p,t[2]=l*m+d*p,t[3]=d*m-l*p,t},Yt.calculateW=function(t,e){var n=e[0],o=e[1],s=e[2];return t[0]=n,t[1]=o,t[2]=s,t[3]=Math.sqrt(Math.abs(1-n*n-o*o-s*s)),t},Yt.exp=rx,Yt.ln=ax,Yt.pow=function(t,e,n){return ax(t,e),lx(t,t,n),rx(t,t),t},Yt.slerp=ug,Yt.random=function(t){var e=Zu.RANDOM(),n=Zu.RANDOM(),o=Zu.RANDOM(),s=Math.sqrt(1-e),l=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*n),t[1]=s*Math.cos(2*Math.PI*n),t[2]=l*Math.sin(2*Math.PI*o),t[3]=l*Math.cos(2*Math.PI*o),t},Yt.invert=function(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=n*n+o*o+s*s+l*l,p=d?1/d:0;return t[0]=-n*p,t[1]=-o*p,t[2]=-s*p,t[3]=l*p,t},Yt.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},Yt.fromMat3=sx,Yt.fromEuler=function(t,e,n,o){var s=.5*Math.PI/180;e*=s,n*=s,o*=s;var l=Math.sin(e),d=Math.cos(e),p=Math.sin(n),m=Math.cos(n),_=Math.sin(o),b=Math.cos(o);return t[0]=l*m*b-d*p*_,t[1]=d*p*b+l*m*_,t[2]=d*m*_-l*p*b,t[3]=d*m*b+l*p*_,t},Yt.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yt.setAxes=Yt.sqlerp=Yt.rotationTo=Yt.equals=Yt.exactEquals=Yt.normalize=Yt.sqrLen=Yt.squaredLength=Yt.len=Yt.length=Yt.lerp=Yt.dot=Yt.scale=Yt.mul=Yt.add=Yt.set=Yt.copy=Yt.fromValues=Yt.clone=void 0;var Zu=cg(po),Q2=cg(Jn),Sl=cg(Kt),Jr=cg(yn);function nx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(nx=function(o){return o?n:e})(t)}function cg(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||w_(t)!=="object"&&typeof t!="function")return{default:t};var n=nx(e);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}function C_(){var t=new Zu.ARRAY_TYPE(4);return Zu.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ix(t,e,n){n*=.5;var o=Math.sin(n);return t[0]=o*e[0],t[1]=o*e[1],t[2]=o*e[2],t[3]=Math.cos(n),t}function ox(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=n[0],m=n[1],_=n[2],b=n[3];return t[0]=o*b+d*p+s*_-l*m,t[1]=s*b+d*m+l*p-o*_,t[2]=l*b+d*_+o*m-s*p,t[3]=d*b-o*p-s*m-l*_,t}function rx(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=Math.sqrt(n*n+o*o+s*s),p=Math.exp(l),m=d>0?p*Math.sin(d)/d:0;return t[0]=n*m,t[1]=o*m,t[2]=s*m,t[3]=p*Math.cos(d),t}function ax(t,e){var n=e[0],o=e[1],s=e[2],l=e[3],d=Math.sqrt(n*n+o*o+s*s),p=d>0?Math.atan2(d,l)/d:0;return t[0]=n*p,t[1]=o*p,t[2]=s*p,t[3]=.5*Math.log(n*n+o*o+s*s+l*l),t}function ug(t,e,n,o){var s,l,d,p,m,_=e[0],b=e[1],C=e[2],O=e[3],E=n[0],k=n[1],R=n[2],L=n[3];return(l=_*E+b*k+C*R+O*L)<0&&(l=-l,E=-E,k=-k,R=-R,L=-L),1-l>Zu.EPSILON?(s=Math.acos(l),d=Math.sin(s),p=Math.sin((1-o)*s)/d,m=Math.sin(o*s)/d):(p=1-o,m=o),t[0]=p*_+m*E,t[1]=p*b+m*k,t[2]=p*C+m*R,t[3]=p*O+m*L,t}function sx(t,e){var n,o=e[0]+e[4]+e[8];if(o>0)n=Math.sqrt(o+1),t[3]=.5*n,t[0]=(e[5]-e[7])*(n=.5/n),t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);var l=(s+1)%3,d=(s+2)%3;n=Math.sqrt(e[3*s+s]-e[3*l+l]-e[3*d+d]+1),t[s]=.5*n,t[3]=(e[3*l+d]-e[3*d+l])*(n=.5/n),t[l]=(e[3*l+s]+e[3*s+l])*n,t[d]=(e[3*d+s]+e[3*s+d])*n}return t}Yt.clone=Jr.clone,Yt.fromValues=Jr.fromValues,Yt.copy=Jr.copy,Yt.set=Jr.set,Yt.add=Jr.add,Yt.mul=ox;var lx=Jr.scale;Yt.scale=lx;var cx=Jr.dot;Yt.dot=cx,Yt.lerp=Jr.lerp;var ux=Jr.length;Yt.length=ux,Yt.len=ux;var dx=Jr.squaredLength;Yt.squaredLength=dx,Yt.sqrLen=dx;var M_=Jr.normalize;Yt.normalize=M_,Yt.exactEquals=Jr.exactEquals,Yt.equals=Jr.equals;var is,hx,px,K2=(is=Sl.create(),hx=Sl.fromValues(1,0,0),px=Sl.fromValues(0,1,0),function(t,e,n){var o=Sl.dot(e,n);return o<-.999999?(Sl.cross(is,hx,e),Sl.len(is)<1e-6&&Sl.cross(is,px,e),Sl.normalize(is,is),ix(t,is,Math.PI),t):o>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Sl.cross(is,e,n),t[0]=is[0],t[1]=is[1],t[2]=is[2],t[3]=1+o,M_(t,t))});Yt.rotationTo=K2;var A_,P_,J2=(A_=C_(),P_=C_(),function(t,e,n,o,s,l){return ug(A_,e,s,l),ug(P_,n,o,l),ug(t,A_,P_,2*l*(1-l)),t});Yt.sqlerp=J2;var os,eA=(os=Q2.create(),function(t,e,n,o){return os[0]=n[0],os[3]=n[1],os[6]=n[2],os[1]=o[0],os[4]=o[1],os[7]=o[2],os[2]=-e[0],os[5]=-e[1],os[8]=-e[2],M_(t,sx(t,os))});Yt.setAxes=eA;var An={};function O_(t){return O_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O_(t)}Object.defineProperty(An,"__esModule",{value:!0}),An.create=function(){var t=new Cr.ARRAY_TYPE(8);return Cr.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},An.clone=function(t){var e=new Cr.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},An.fromValues=function(t,e,n,o,s,l,d,p){var m=new Cr.ARRAY_TYPE(8);return m[0]=t,m[1]=e,m[2]=n,m[3]=o,m[4]=s,m[5]=l,m[6]=d,m[7]=p,m},An.fromRotationTranslationValues=function(t,e,n,o,s,l,d){var p=new Cr.ARRAY_TYPE(8);p[0]=t,p[1]=e,p[2]=n,p[3]=o;var m=.5*s,_=.5*l,b=.5*d;return p[4]=m*o+_*n-b*e,p[5]=_*o+b*t-m*n,p[6]=b*o+m*e-_*t,p[7]=-m*t-_*e-b*n,p},An.fromRotationTranslation=mx,An.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},An.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},An.fromMat4=function(t,e){var n=El.create();fx.getRotation(n,e);var o=new Cr.ARRAY_TYPE(3);return fx.getTranslation(o,e),mx(t,n,o),t},An.copy=_x,An.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},An.set=function(t,e,n,o,s,l,d,p,m){return t[0]=e,t[1]=n,t[2]=o,t[3]=s,t[4]=l,t[5]=d,t[6]=p,t[7]=m,t},An.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},An.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},An.getTranslation=function(t,e){var n=e[4],o=e[5],s=e[6],l=e[7],d=-e[0],p=-e[1],m=-e[2],_=e[3];return t[0]=2*(n*_+l*d+o*m-s*p),t[1]=2*(o*_+l*p+s*d-n*m),t[2]=2*(s*_+l*m+n*p-o*d),t},An.translate=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=.5*n[0],m=.5*n[1],_=.5*n[2],b=e[4],C=e[5],O=e[6],E=e[7];return t[0]=o,t[1]=s,t[2]=l,t[3]=d,t[4]=d*p+s*_-l*m+b,t[5]=d*m+l*p-o*_+C,t[6]=d*_+o*m-s*p+O,t[7]=-o*p-s*m-l*_+E,t},An.rotateX=function(t,e,n){var o=-e[0],s=-e[1],l=-e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=p*d+b*o+m*l-_*s,O=m*d+b*s+_*o-p*l,E=_*d+b*l+p*s-m*o,k=b*d-p*o-m*s-_*l;return El.rotateX(t,e,n),t[4]=C*(d=t[3])+k*(o=t[0])+O*(l=t[2])-E*(s=t[1]),t[5]=O*d+k*s+E*o-C*l,t[6]=E*d+k*l+C*s-O*o,t[7]=k*d-C*o-O*s-E*l,t},An.rotateY=function(t,e,n){var o=-e[0],s=-e[1],l=-e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=p*d+b*o+m*l-_*s,O=m*d+b*s+_*o-p*l,E=_*d+b*l+p*s-m*o,k=b*d-p*o-m*s-_*l;return El.rotateY(t,e,n),t[4]=C*(d=t[3])+k*(o=t[0])+O*(l=t[2])-E*(s=t[1]),t[5]=O*d+k*s+E*o-C*l,t[6]=E*d+k*l+C*s-O*o,t[7]=k*d-C*o-O*s-E*l,t},An.rotateZ=function(t,e,n){var o=-e[0],s=-e[1],l=-e[2],d=e[3],p=e[4],m=e[5],_=e[6],b=e[7],C=p*d+b*o+m*l-_*s,O=m*d+b*s+_*o-p*l,E=_*d+b*l+p*s-m*o,k=b*d-p*o-m*s-_*l;return El.rotateZ(t,e,n),t[4]=C*(d=t[3])+k*(o=t[0])+O*(l=t[2])-E*(s=t[1]),t[5]=O*d+k*s+E*o-C*l,t[6]=E*d+k*l+C*s-O*o,t[7]=k*d-C*o-O*s-E*l,t},An.rotateByQuatAppend=function(t,e,n){var o=n[0],s=n[1],l=n[2],d=n[3],p=e[0],m=e[1],_=e[2],b=e[3];return t[0]=p*d+b*o+m*l-_*s,t[1]=m*d+b*s+_*o-p*l,t[2]=_*d+b*l+p*s-m*o,t[3]=b*d-p*o-m*s-_*l,t[4]=(p=e[4])*d+(b=e[7])*o+(m=e[5])*l-(_=e[6])*s,t[5]=m*d+b*s+_*o-p*l,t[6]=_*d+b*l+p*s-m*o,t[7]=b*d-p*o-m*s-_*l,t},An.rotateByQuatPrepend=function(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=n[0],m=n[1],_=n[2],b=n[3];return t[0]=o*b+d*p+s*_-l*m,t[1]=s*b+d*m+l*p-o*_,t[2]=l*b+d*_+o*m-s*p,t[3]=d*b-o*p-s*m-l*_,t[4]=o*(b=n[7])+d*(p=n[4])+s*(_=n[6])-l*(m=n[5]),t[5]=s*b+d*m+l*p-o*_,t[6]=l*b+d*_+o*m-s*p,t[7]=d*b-o*p-s*m-l*_,t},An.rotateAroundAxis=function(t,e,n,o){if(Math.abs(o)<Cr.EPSILON)return _x(t,e);var s=Math.hypot(n[0],n[1],n[2]);o*=.5;var l=Math.sin(o),d=l*n[0]/s,p=l*n[1]/s,m=l*n[2]/s,_=Math.cos(o),b=e[0],C=e[1],O=e[2],E=e[3];t[0]=b*_+E*d+C*m-O*p,t[1]=C*_+E*p+O*d-b*m,t[2]=O*_+E*m+b*p-C*d,t[3]=E*_-b*d-C*p-O*m;var k=e[4],R=e[5],L=e[6],V=e[7];return t[4]=k*_+V*d+R*m-L*p,t[5]=R*_+V*p+L*d-k*m,t[6]=L*_+V*m+k*p-R*d,t[7]=V*_-k*d-R*p-L*m,t},An.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},An.multiply=yx,An.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},An.lerp=function(t,e,n,o){var s=1-o;return xx(e,n)<0&&(o=-o),t[0]=e[0]*s+n[0]*o,t[1]=e[1]*s+n[1]*o,t[2]=e[2]*s+n[2]*o,t[3]=e[3]*s+n[3]*o,t[4]=e[4]*s+n[4]*o,t[5]=e[5]*s+n[5]*o,t[6]=e[6]*s+n[6]*o,t[7]=e[7]*s+n[7]*o,t},An.invert=function(t,e){var n=dg(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},An.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},An.normalize=function(t,e){var n=dg(e);if(n>0){n=Math.sqrt(n);var o=e[0]/n,s=e[1]/n,l=e[2]/n,d=e[3]/n,p=e[4],m=e[5],_=e[6],b=e[7],C=o*p+s*m+l*_+d*b;t[0]=o,t[1]=s,t[2]=l,t[3]=d,t[4]=(p-o*C)/n,t[5]=(m-s*C)/n,t[6]=(_-l*C)/n,t[7]=(b-d*C)/n}return t},An.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},An.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},An.equals=function(t,e){var n=t[0],o=t[1],s=t[2],l=t[3],d=t[4],p=t[5],m=t[6],_=t[7],b=e[0],C=e[1],O=e[2],E=e[3],k=e[4],R=e[5],L=e[6],V=e[7];return Math.abs(n-b)<=Cr.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-C)<=Cr.EPSILON*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(s-O)<=Cr.EPSILON*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(l-E)<=Cr.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-k)<=Cr.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(p-R)<=Cr.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-L)<=Cr.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(_-V)<=Cr.EPSILON*Math.max(1,Math.abs(_),Math.abs(V))},An.sqrLen=An.squaredLength=An.len=An.length=An.dot=An.mul=An.setReal=An.getReal=void 0;var Cr=T_(po),El=T_(Yt),fx=T_(en);function gx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(gx=function(o){return o?n:e})(t)}function T_(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||O_(t)!=="object"&&typeof t!="function")return{default:t};var n=gx(e);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}function mx(t,e,n){var o=.5*n[0],s=.5*n[1],l=.5*n[2],d=e[0],p=e[1],m=e[2],_=e[3];return t[0]=d,t[1]=p,t[2]=m,t[3]=_,t[4]=o*_+s*m-l*p,t[5]=s*_+l*d-o*m,t[6]=l*_+o*p-s*d,t[7]=-o*d-s*p-l*m,t}function _x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function yx(t,e,n){var o=e[0],s=e[1],l=e[2],d=e[3],p=n[4],m=n[5],_=n[6],b=n[7],C=e[4],O=e[5],E=e[6],k=e[7],R=n[0],L=n[1],V=n[2],Y=n[3];return t[0]=o*Y+d*R+s*V-l*L,t[1]=s*Y+d*L+l*R-o*V,t[2]=l*Y+d*V+o*L-s*R,t[3]=d*Y-o*R-s*L-l*V,t[4]=o*b+d*p+s*_-l*m+C*Y+k*R+O*V-E*L,t[5]=s*b+d*m+l*p-o*_+O*Y+k*L+E*R-C*V,t[6]=l*b+d*_+o*m-s*p+E*Y+k*V+C*L-O*R,t[7]=d*b-o*p-s*m-l*_+k*Y-C*R-O*L-E*V,t}An.getReal=El.copy,An.setReal=El.copy,An.mul=yx;var xx=El.dot;An.dot=xx;var vx=El.length;An.length=vx,An.len=vx;var dg=El.squaredLength;An.squaredLength=dg,An.sqrLen=dg;var cn={};function S_(t){return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S_(t)}Object.defineProperty(cn,"__esModule",{value:!0}),cn.create=wx,cn.clone=function(t){var e=new qu.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},cn.fromValues=function(t,e){var n=new qu.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},cn.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},cn.set=function(t,e,n){return t[0]=e,t[1]=n,t},cn.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},cn.subtract=Cx,cn.multiply=Mx,cn.divide=Ax,cn.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},cn.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},cn.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},cn.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},cn.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},cn.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},cn.scaleAndAdd=function(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t},cn.distance=Px,cn.squaredDistance=Ox,cn.length=Tx,cn.squaredLength=Sx,cn.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},cn.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},cn.normalize=function(t,e){var n=e[0],o=e[1],s=n*n+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t},cn.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},cn.cross=function(t,e,n){var o=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=o,t},cn.lerp=function(t,e,n,o){var s=e[0],l=e[1];return t[0]=s+o*(n[0]-s),t[1]=l+o*(n[1]-l),t},cn.random=function(t,e){e=e||1;var n=2*qu.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},cn.transformMat2=function(t,e,n){var o=e[0],s=e[1];return t[0]=n[0]*o+n[2]*s,t[1]=n[1]*o+n[3]*s,t},cn.transformMat2d=function(t,e,n){var o=e[0],s=e[1];return t[0]=n[0]*o+n[2]*s+n[4],t[1]=n[1]*o+n[3]*s+n[5],t},cn.transformMat3=function(t,e,n){var o=e[0],s=e[1];return t[0]=n[0]*o+n[3]*s+n[6],t[1]=n[1]*o+n[4]*s+n[7],t},cn.transformMat4=function(t,e,n){var o=e[0],s=e[1];return t[0]=n[0]*o+n[4]*s+n[12],t[1]=n[1]*o+n[5]*s+n[13],t},cn.rotate=function(t,e,n,o){var s=e[0]-n[0],l=e[1]-n[1],d=Math.sin(o),p=Math.cos(o);return t[0]=s*p-l*d+n[0],t[1]=s*d+l*p+n[1],t},cn.angle=function(t,e){var n=t[0],o=t[1],s=e[0],l=e[1],d=Math.sqrt(n*n+o*o)*Math.sqrt(s*s+l*l);return Math.acos(Math.min(Math.max(d&&(n*s+o*l)/d,-1),1))},cn.zero=function(t){return t[0]=0,t[1]=0,t},cn.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},cn.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cn.equals=function(t,e){var n=t[0],o=t[1],s=e[0],l=e[1];return Math.abs(n-s)<=qu.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=qu.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},cn.forEach=cn.sqrLen=cn.sqrDist=cn.dist=cn.div=cn.mul=cn.sub=cn.len=void 0;var qu=function(t,e){if(t&&t.__esModule)return t;if(t===null||S_(t)!=="object"&&typeof t!="function")return{default:t};var n=bx(void 0);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}(po);function bx(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(bx=function(o){return o?n:e})(t)}function wx(){var t=new qu.ARRAY_TYPE(2);return qu.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function Cx(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Mx(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Ax(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Px(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1])}function Ox(t,e){var n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o}function Tx(t){return Math.hypot(t[0],t[1])}function Sx(t){var e=t[0],n=t[1];return e*e+n*n}cn.len=Tx,cn.sub=Cx,cn.mul=Mx,cn.div=Ax,cn.dist=Px,cn.sqrDist=Ox,cn.sqrLen=Sx;var tA=function(){var t=wx();return function(e,n,o,s,l,d){var p,m;for(n||(n=2),o||(o=0),m=s?Math.min(s*n+o,e.length):e.length,p=o;p<m;p+=n)t[0]=e[p],t[1]=e[p+1],l(t,t,d),e[p]=t[0],e[p+1]=t[1];return e}}();function E_(t){return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(t)}cn.forEach=tA,Object.defineProperty(ho,"__esModule",{value:!0}),r.a7=ho.vec4=r.N=ho.vec3=ho.vec2=ho.quat2=r.bi=ho.quat=r.a6=ho.mat4=r.co=ho.mat3=ho.mat2d=r.b4=ho.mat2=ho.glMatrix=void 0;var nA=Hs(po);ho.glMatrix=nA;var iA=Hs(Ci);r.b4=ho.mat2=iA;var oA=Hs(Ti);ho.mat2d=oA;var rA=Hs(Jn);r.co=ho.mat3=rA;var aA=Hs(en);r.a6=ho.mat4=aA;var sA=Hs(Yt);r.bi=ho.quat=sA;var lA=Hs(An);ho.quat2=lA;var cA=Hs(cn);ho.vec2=cA;var uA=Hs(Kt);r.N=ho.vec3=uA;var dA=Hs(yn);function Ex(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Ex=function(o){return o?n:e})(t)}function Hs(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||E_(t)!=="object"&&typeof t!="function")return{default:t};var n=Ex(e);if(n&&n.has(t))return n.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(l!=="default"&&Object.prototype.hasOwnProperty.call(t,l)){var d=s?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(o,l,d):o[l]=t[l]}return o.default=t,n&&n.set(t,o),o}r.a7=ho.vec4=dA;class I_{constructor(e,n){this.pos=e,this.dir=n}intersectsPlane(e,n,o){let s=r.N.dot(n,this.dir);if(Math.abs(s)<1e-6)return!1;let l=((e[0]-this.pos[0])*n[0]+(e[1]-this.pos[1])*n[1]+(e[2]-this.pos[2])*n[2])/s;return o[0]=this.pos[0]+this.dir[0]*l,o[1]=this.pos[1]+this.dir[1]*l,o[2]=this.pos[2]+this.dir[2]*l,!0}closestPointOnSphere(e,n,o){if(r.N.equals(this.pos,e)||n===0)return o[0]=o[1]=o[2]=0,!1;let[s,l,d]=this.dir,p=this.pos[0]-e[0],m=this.pos[1]-e[1],_=this.pos[2]-e[2],b=s*s+l*l+d*d,C=2*(p*s+m*l+_*d),O=C*C-4*b*(p*p+m*m+_*_-n*n);if(O<0){let E=Math.max(-C/2,0),k=p+s*E,R=m+l*E,L=_+d*E,V=Math.hypot(k,R,L);return o[0]=k*n/V,o[1]=R*n/V,o[2]=L*n/V,!1}{let E=(-C-Math.sqrt(O))/(2*b);if(E<0){let k=Math.hypot(p,m,_);return o[0]=p*n/k,o[1]=m*n/k,o[2]=_*n/k,!1}return o[0]=p+s*E,o[1]=m+l*E,o[2]=_+d*E,!0}}}class D_{constructor(e,n,o,s,l){this.TL=e,this.TR=n,this.BR=o,this.BL=s,this.horizon=l}static fromInvProjectionMatrix(e,n,o){let s=[-1,1,1],l=[1,1,1],d=[1,-1,1],p=[-1,-1,1],m=r.N.transformMat4(s,s,e),_=r.N.transformMat4(l,l,e),b=r.N.transformMat4(d,d,e),C=r.N.transformMat4(p,p,e);return new D_(m,_,b,C,n/o)}}function yp(t,e,n){let o=1/0,s=-1/0,l=[];for(let d of t){r.N.sub(l,d,e);let p=r.N.dot(l,n);o=Math.min(o,p),s=Math.max(s,p)}return[o,s]}function Ix(t,e){let n=!0;for(let o=0;o<t.planes.length;o++){let s=t.planes[o],l=0;for(let d=0;d<e.length;d++)l+=r.N.dot(s,e[d])+s[3]>=0;if(l===0)return 0;l!==e.length&&(n=!1)}return n?2:1}function Dx(t,e){for(let n of t.projections){let o=yp(e,t.points[0],n.axis);if(n.projection[1]<o[0]||n.projection[0]>o[1])return 0}return 1}function kx(t,e){let n=0,o=[0,0,0,0];for(let s=0;s<t.length;s++)o[0]=t[s][0],o[1]=t[s][1],o[2]=t[s][2],o[3]=1,r.a7.dot(o,e)>=0&&n++;return n}class k_{constructor(e,n){this.points=e||new Array(8).fill([0,0,0]),this.planes=n||new Array(6).fill([0,0,0,0]),this.bounds=Si.fromPoints(this.points),this.projections=[],this.frustumEdges=[r.N.sub([],this.points[2],this.points[3]),r.N.sub([],this.points[0],this.points[3]),r.N.sub([],this.points[4],this.points[0]),r.N.sub([],this.points[5],this.points[1]),r.N.sub([],this.points[6],this.points[2]),r.N.sub([],this.points[7],this.points[3])];for(let o of this.frustumEdges){let s=[0,-o[2],o[1]],l=[o[2],0,-o[0]];this.projections.push({axis:s,projection:yp(this.points,this.points[0],s)}),this.projections.push({axis:l,projection:yp(this.points,this.points[0],l)})}}static fromInvProjectionMatrix(e,n,o,s){let l=Math.pow(2,o),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(_=>{let b=r.a7.transformMat4([],_,e),C=1/b[3]/n*l;return r.a7.mul(b,b,[C,C,s?1/b[3]:C,C])}),p=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(_=>{let b=r.N.sub([],d[_[0]],d[_[1]]),C=r.N.sub([],d[_[2]],d[_[1]]),O=r.N.normalize([],r.N.cross([],b,C)),E=-r.N.dot(O,d[_[1]]);return O.concat(E)}),m=[];for(let _=0;_<d.length;_++)m.push([d[_][0],d[_][1],d[_][2]]);return new k_(m,p)}intersectsPrecise(e,n,o){for(let s=0;s<n.length;s++)if(!kx(e,n[s]))return 0;for(let s=0;s<this.planes.length;s++)if(!kx(e,this.planes[s]))return 0;for(let s of o)for(let l of this.frustumEdges){let d=r.N.cross([],s,l),p=r.N.length(d);if(p===0)continue;r.N.scale(d,d,1/p);let m=yp(this.points,this.points[0],d),_=yp(e,this.points[0],d);if(m[0]>_[1]||_[0]>m[1])return 0}return 1}}class Si{static fromPoints(e){let n=[1/0,1/0,1/0],o=[-1/0,-1/0,-1/0];for(let s of e)r.N.min(n,n,s),r.N.max(o,o,s);return new Si(n,o)}static fromTileIdAndHeight(e,n,o){let s=1<<e.canonical.z,l=e.canonical.x,d=e.canonical.y;return new Si([l/s,d/s,n],[(l+1)/s,(d+1)/s,o])}static applyTransform(e,n){let o=e.getCorners();for(let s=0;s<o.length;++s)r.N.transformMat4(o[s],o[s],n);return Si.fromPoints(o)}static projectAabbCorners(e,n){let o=e.getCorners();for(let s=0;s<o.length;++s)r.N.transformMat4(o[s],o[s],n);return o}constructor(e,n){this.min=e,this.max=n,this.center=r.N.scale([],r.N.add([],this.min,this.max),.5)}quadrant(e){let n=[e%2==0,e<2],o=r.N.clone(this.min),s=r.N.clone(this.max);for(let l=0;l<n.length;l++)o[l]=n[l]?this.min[l]:this.center[l],s[l]=n[l]?this.center[l]:this.max[l];return s[2]=this.max[2],new Si(o,s)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){let e=this.min,n=this.max;return[[e[0],e[1],e[2]],[n[0],e[1],e[2]],[n[0],n[1],e[2]],[e[0],n[1],e[2]],[e[0],e[1],n[2]],[n[0],e[1],n[2]],[n[0],n[1],n[2]],[e[0],n[1],n[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?Ix(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?Ix(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,n){return n||this.intersects(e)?Dx(e,this.getCorners()):0}intersectsPreciseFlat(e,n){return n||this.intersectsFlat(e)?Dx(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let n=0;n<3;++n)if(this.min[n]>e.max[n]||e.min[n]>this.max[n])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e.min[n]),this.max[n]=Math.max(this.max[n],e.max[n])}encapsulatePoint(e){for(let n=0;n<3;n++)this.min[n]=Math.min(this.min[n],e[n]),this.max[n]=Math.max(this.max[n],e[n])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}xt(Si,"Aabb");let hA=Hn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:hg}=hA,pA=Hn([{name:"a_pos_3",components:3,type:"Int16"}]);var Rx=Hn([{name:"a_pos",type:"Int16",components:2}]);function pg(t){return t*X/Ee}let fA=[new Si([fe,fe,fe],[Ae,Ae,Ae]),new Si([fe,fe,fe],[0,0,Ae]),new Si([0,fe,fe],[Ae,0,Ae]),new Si([fe,0,fe],[0,Ae,Ae]),new Si([0,0,fe],[Ae,Ae,Ae])];function zx(t,e,n,o=!0){let s=r.N.scale([],t._camera.position,t.worldSize),l=[e,n,1,1];r.a7.transformMat4(l,l,t.pixelMatrixInverse),r.a7.scale(l,l,1/l[3]);let d=r.N.sub([],l,s),p=r.N.normalize([],d),m=t.globeMatrix,_=[m[12],m[13],m[14]],b=r.N.sub([],_,s),C=r.N.length(b),O=r.N.normalize([],b),E=t.worldSize/(2*Math.PI),k=r.N.dot(O,p),R=Math.asin(E/C);if(R<Math.acos(k)){if(!o)return null;let be=[],Be=[];r.N.scale(be,p,C/k),r.N.normalize(Be,r.N.sub(Be,be,b)),r.N.normalize(p,r.N.add(p,b,r.N.scale(p,Be,Math.tan(R)*C)))}let L=[];new I_(s,p).closestPointOnSphere(_,E,L);let V=r.N.normalize([],oe(m,0)),Y=r.N.normalize([],oe(m,1)),J=r.N.normalize([],oe(m,2)),K=r.N.dot(V,L),ae=r.N.dot(Y,L),ie=r.N.dot(J,L),de=Qi(Math.asin(-ae/E)),me=Qi(Math.atan2(K,ie));me=t.center.lng+function(be,Be){let Ue=(Be-be+180)%360-180;return Ue<-180?Ue+360:Ue}(t.center.lng,me);let ve=Qt(me),Pe=on(Gt(de),0,1);return new Tn(ve,Pe)}class gA{constructor(e,n,o){this.a=r.N.sub([],e,o),this.b=r.N.sub([],n,o),this.center=o;let s=r.N.normalize([],this.a),l=r.N.normalize([],this.b);this.angle=Math.acos(r.N.dot(s,l))}}function R_(t,e){if(t.angle===0)return null;let n;return n=t.a[e]===0?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),n<0||n>1?null:function(o,s,l,d){let p=Math.sin(l);return o*(Math.sin((1-d)*l)/p)+s*(Math.sin(d*l)/p)}(t.a[e],t.b[e],t.angle,on(n,0,1))+t.center[e]}function $s(t){if(t.z<=1)return fA[t.z+2*t.y+t.x];let e=z_(fg(t));return Si.fromPoints(e)}function Il(t,e,n){return r.N.scale(t,t,1-n),r.N.scaleAndAdd(t,t,e,n)}function Bx(t,e,n){for(let o of t)r.N.transformMat4(o,o,e),r.N.scale(o,o,n)}function Fx(t,e,n,o){let s=e/t.worldSize,l=t.globeMatrix;if(n.z<=1){let ve=$s(n).getCorners();return Bx(ve,l,s),Si.fromPoints(ve)}let d=fg(n,o),p=z_(d,X+pg(t._tileCoverLift));Bx(p,l,s);let m=Number.MAX_VALUE,_=[-m,-m,-m],b=[m,m,m];if(d.contains(t.center)){for(let be of p)r.N.min(b,b,be),r.N.max(_,_,be);_[2]=0;let ve=t.point,Pe=[ve.x*s,ve.y*s,0];return r.N.min(b,b,Pe),r.N.max(_,_,Pe),new Si(b,_)}if(t._tileCoverLift>0){for(let ve of p)r.N.min(b,b,ve),r.N.max(_,_,ve);return new Si(b,_)}let C=[l[12]*s,l[13]*s,l[14]*s],O=d.getCenter(),E=on(t.center.lat,-un,un),k=on(O.lat,-un,un),R=Qt(t.center.lng),L=Gt(E),V=R-Qt(O.lng),Y=L-Gt(k);V>.5?V-=1:V<-.5&&(V+=1);let J=0;if(Math.abs(V)>Math.abs(Y))J=V>=0?1:3;else{J=Y>=0?0:2;let ve=[l[4]*s,l[5]*s,l[6]*s],Pe=-Math.sin(mn(Y>=0?d.getSouth():d.getNorth()))*X;r.N.scaleAndAdd(C,C,ve,Pe)}let K=p[J],ae=p[(J+1)%4],ie=new gA(K,ae,C),de=[R_(ie,0)||K[0],R_(ie,1)||K[1],R_(ie,2)||K[2]],me=xc(t.zoom);if(me>0){let ve=function({x:be,y:Be,z:Ue},Ie,je,Se,Ne){let st=1/(1<<Ue),Ge=be*st,bt=Ge+st,mt=Be*st,qe=mt+st,Nt=0,Tt=(Ge+bt)/2-Se;return Tt>.5?Nt=-1:Tt<-.5&&(Nt=1),Ge=((Ge+Nt)*Ie-(Se*=Ie))*je+Se,bt=((bt+Nt)*Ie-Se)*je+Se,mt=(mt*Ie-(Ne*=Ie))*je+Ne,qe=(qe*Ie-Ne)*je+Ne,[[Ge,qe,0],[bt,qe,0],[bt,mt,0],[Ge,mt,0]]}(n,e,t._pixelsPerMercatorPixel,R,L);for(let be=0;be<p.length;be++)Il(p[be],ve[be],me);let Pe=r.N.add([],ve[J],ve[(J+1)%4]);r.N.scale(Pe,Pe,.5),Il(de,Pe,me)}for(let ve of p)r.N.min(b,b,ve),r.N.max(_,_,ve);return b[2]=Math.min(K[2],ae[2]),r.N.min(b,b,de),r.N.max(_,_,de),new Si(b,_)}function fg({x:t,y:e,z:n},o=!1){let s=1/(1<<n),l=new xe($t(t*s),e===(1<<n)-1&&o?-90:Mn((e+1)*s)),d=new xe($t((t+1)*s),e===0&&o?90:Mn(e*s));return new Te(l,d)}function z_(t,e=X){let n=mn(t.getNorth()),o=mn(t.getSouth()),s=Math.cos(n),l=Math.cos(o),d=Math.sin(n),p=Math.sin(o),m=t.getWest(),_=t.getEast();return[ye(l,p,m,e),ye(l,p,_,e),ye(s,d,_,e),ye(s,d,m,e)]}function xp(t,e,n,o){let s=1<<n.z,l=(t/ht+n.x)/s;return ke(Mn((e/ht+n.y)/s),$t(l),o)}function gg({min:t,max:e}){return ne/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}let Lx=new Float64Array(16);function mg(t){let e=gg(t),n=r.a6.fromScaling(Lx,[e,e,e]);return r.a6.translate(n,n,r.N.negate([],t.min))}function B_(t){let e=r.a6.fromTranslation(Lx,t.min),n=1/gg(t);return r.a6.scale(e,e,[n,n,n])}function F_(t){let e=ht/(2*Math.PI);return t/(2*Math.PI)/e}function Nx(t,e){return ht/(512*Math.pow(2,t))*gg($s(e))}function Vx(t,e,n,o,s){let l=F_(n),d=[t,e,-n/(2*Math.PI)],p=r.a6.identity(new Float64Array(16));return r.a6.translate(p,p,d),r.a6.scale(p,p,[l,l,l]),r.a6.rotateX(p,p,mn(-s)),r.a6.rotateY(p,p,mn(-o)),p}function xc(t){return On(te,Z,t)}function jx(t,e){let n=ke(e.lat,e.lng),o=function(l){let d=ke(l._center.lat,l._center.lng),p=r.N.fromValues(0,1,0),m=r.N.cross([],p,d),_=r.a6.fromRotation([],-l.angle,d);m=r.N.transformMat4(m,m,_),r.a6.fromRotation(_,-l._pitch,m);let b=r.N.normalize([],d);return r.N.scale(b,b,pg(l.cameraToCenterDistance/l.pixelsPerMeter)),r.N.transformMat4(b,b,_),r.N.add([],d,b)}(t),s=r.N.subtract([],o,n);return r.N.angle(s,n)}function L_(t,e){return jx(t,e)>Math.PI/2*1.01}let Ux=mn(85),mA=Math.cos(Ux),_A=Math.sin(Ux),yA=r.a6.create(),Gx=t=>{let e=[];return t.paint.get("circle-pitch-alignment")==="map"&&e.push("PITCH_WITH_MAP"),t.paint.get("circle-pitch-scale")==="map"&&e.push("SCALE_WITH_MAP"),e};function Hx(t,e,n,o,s,l,d,p,m){if(l&&t.queryGeometry.isAboveHorizon)return!1;l&&(m*=t.pixelToTileUnitsFactor);let _=t.tileID.canonical,b=n.projection.upVectorScale(_,n.center.lat,n.worldSize).metersToTile;for(let C of e)for(let O of C){let E=O.add(p),k=s&&n.elevation?n.elevation.exaggeration()*s.getElevationAt(E.x,E.y,!0):0,R=n.projection.projectTilePoint(E.x,E.y,_);if(k>0){let J=n.projection.upVector(_,E.x,E.y);R.x+=J[0]*b*k,R.y+=J[1]*b*k,R.z+=J[2]*b*k}let L=l?E:xA(R.x,R.y,R.z,o),V=l?t.tilespaceRays.map(J=>bA(J,k)):t.queryGeometry.screenGeometry,Y=r.a7.transformMat4([],[R.x,R.y,R.z,1],o);if(!d&&l?m*=Y[3]/n.cameraToCenterDistance:d&&!l&&(m*=n.cameraToCenterDistance/Y[3]),l){let J=Mn((O.y/ht+_.y)/(1<<_.z));m/=n.projection.pixelsPerMeter(J,1)/Zt(1,J)}if(Us(V,L,m))return!0}return!1}function xA(t,e,n,o){let s=r.a7.transformMat4([],[t,e,n,1],o);return new ut(s[0]/s[3],s[1]/s[3])}let $x=r.N.fromValues(0,0,0),vA=r.N.fromValues(0,0,1);function bA(t,e){let n=r.N.create();return $x[2]=e,t.intersectsPlane($x,vA,n),new ut(n[0],n[1])}class Wx extends ar{}function Zx(t,{width:e,height:n},o,s){if(s){if(s instanceof Uint8ClampedArray)s=new Uint8Array(s.buffer);else if(s.length!==e*n*o)throw new RangeError("mismatched image size")}else s=new Uint8Array(e*n*o);return t.width=e,t.height=n,t.data=s,t}function qx(t,e,n){let{width:o,height:s}=e;o===t.width&&s===t.height||(N_(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,o),height:Math.min(t.height,s)},n),t.width=o,t.height=s,t.data=e.data)}function N_(t,e,n,o,s,l,d){if(s.width===0||s.height===0)return e;if(s.width>t.width||s.height>t.height||n.x>t.width-s.width||n.y>t.height-s.height)throw new RangeError("out of range source coordinates for image copy");if(s.width>e.width||s.height>e.height||o.x>e.width-s.width||o.y>e.height-s.height)throw new RangeError("out of range destination coordinates for image copy");let p=t.data,m=e.data,_=l===4&&d;for(let b=0;b<s.height;b++){let C=((n.y+b)*t.width+n.x)*l,O=((o.y+b)*e.width+o.x)*l;if(_)for(let E=0;E<s.width;E++){let k=C+E*l+3,R=O+E*l;m[R+0]=255,m[R+1]=255,m[R+2]=255,m[R+3]=p[k]}else for(let E=0;E<s.width*l;E++)m[O+E]=p[C+E]}return e}xt(Wx,"HeatmapBucket",{omit:["layers"]});class vc{constructor(e,n){Zx(this,e,1,n)}resize(e){qx(this,new vc(e),1)}clone(){return new vc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,o,s,l){N_(e,n,o,s,l,1)}}class ea{constructor(e,n){Zx(this,e,4,n)}resize(e){qx(this,new ea(e),4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,o,s,l,d){N_(e,n,o,s,l,4,d)}}class Yx{constructor(e,n){this.width=e.width,this.height=e.height,this.data=n instanceof Uint8Array?new Float32Array(n.buffer):n}}xt(vc,"AlphaImage"),xt(ea,"RGBAImage");let wA=new bi({visibility:new at(Me.layout_heatmap.visibility)});var CA={paint:new bi({"heatmap-radius":new Rt(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Rt(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new at(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ml(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new at(Me.paint_heatmap["heatmap-opacity"])}),layout:wA};function vp(t){let e={},n=t.resolution||256,o=t.clips?t.clips.length:1,s=t.image||new ea({width:n,height:o}),l=(d,p,m)=>{e[t.evaluationKey]=m;let _=t.expression.evaluate(e);_&&(s.data[d+p+0]=Math.floor(255*_.r/_.a),s.data[d+p+1]=Math.floor(255*_.g/_.a),s.data[d+p+2]=Math.floor(255*_.b/_.a),s.data[d+p+3]=Math.floor(255*_.a))};if(t.clips)for(let d=0,p=0;d<o;++d,p+=4*n)for(let m=0,_=0;m<n;m++,_+=4){let b=m/(n-1),{start:C,end:O}=t.clips[d];l(p,_,C*(1-b)+O*b)}else for(let d=0,p=0;d<n;d++,p+=4)l(0,p,d/(n-1));return s}let MA=new bi({visibility:new at(Me.layout_hillshade.visibility)});var AA={paint:new bi({"hillshade-illumination-direction":new at(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new at(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new at(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new at(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new at(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new at(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new at(Me.paint_hillshade["hillshade-emissive-strength"])}),layout:MA};let PA=Hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:OA}=PA;var V_={exports:{}};function _g(t,e,n){n=n||2;var o,s,l,d,p,m,_,b=e&&e.length,C=b?e[0]*n:t.length,O=Xx(t,0,C,n,!0),E=[];if(!O||O.next===O.prev)return E;if(b&&(O=function(R,L,V,Y){var J,K,ae,ie=[];for(J=0,K=L.length;J<K;J++)(ae=Xx(R,L[J]*Y,J<K-1?L[J+1]*Y:R.length,Y,!1))===ae.next&&(ae.steiner=!0),ie.push(zA(ae));for(ie.sort(DA),J=0;J<ie.length;J++)V=kA(ie[J],V);return V}(t,e,O,n)),t.length>80*n){o=l=t[0],s=d=t[1];for(var k=n;k<C;k+=n)(p=t[k])<o&&(o=p),(m=t[k+1])<s&&(s=m),p>l&&(l=p),m>d&&(d=m);_=(_=Math.max(l-o,d-s))!==0?32767/_:0}return bp(O,E,n,o,s,_,0),E}function Xx(t,e,n,o,s){var l,d;if(s===G_(t,e,n,o)>0)for(l=e;l<n;l+=o)d=Jx(l,t[l],t[l+1],d);else for(l=n-o;l>=e;l-=o)d=Jx(l,t[l],t[l+1],d);return d&&yg(d,d.next)&&(Cp(d),d=d.next),d}function Yu(t,e){if(!t)return t;e||(e=t);var n,o=t;do if(n=!1,o.steiner||!yg(o,o.next)&&Ki(o.prev,o,o.next)!==0)o=o.next;else{if(Cp(o),(o=e=o.prev)===o.next)break;n=!0}while(n||o!==e);return e}function bp(t,e,n,o,s,l,d){if(t){!d&&l&&function(b,C,O,E){var k=b;do k.z===0&&(k.z=j_(k.x,k.y,C,O,E)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==b);k.prevZ.nextZ=null,k.prevZ=null,function(R){var L,V,Y,J,K,ae,ie,de,me=1;do{for(V=R,R=null,K=null,ae=0;V;){for(ae++,Y=V,ie=0,L=0;L<me&&(ie++,Y=Y.nextZ);L++);for(de=me;ie>0||de>0&&Y;)ie!==0&&(de===0||!Y||V.z<=Y.z)?(J=V,V=V.nextZ,ie--):(J=Y,Y=Y.nextZ,de--),K?K.nextZ=J:R=J,J.prevZ=K,K=J;V=Y}K.nextZ=null,me*=2}while(ae>1)}(k)}(t,o,s,l);for(var p,m,_=t;t.prev!==t.next;)if(p=t.prev,m=t.next,l?SA(t,o,s,l):TA(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(m.i/n|0),Cp(t),t=m.next,_=m.next;else if((t=m)===_){d?d===1?bp(t=EA(Yu(t),e,n),e,n,o,s,l,2):d===2&&IA(t,e,n,o,s,l):bp(Yu(t),e,n,o,s,l,1);break}}}function TA(t){var e=t.prev,n=t,o=t.next;if(Ki(e,n,o)>=0)return!1;for(var s=e.x,l=n.x,d=o.x,p=e.y,m=n.y,_=o.y,b=s<l?s<d?s:d:l<d?l:d,C=p<m?p<_?p:_:m<_?m:_,O=s>l?s>d?s:d:l>d?l:d,E=p>m?p>_?p:_:m>_?m:_,k=o.next;k!==e;){if(k.x>=b&&k.x<=O&&k.y>=C&&k.y<=E&&$d(s,p,l,m,d,_,k.x,k.y)&&Ki(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function SA(t,e,n,o){var s=t.prev,l=t,d=t.next;if(Ki(s,l,d)>=0)return!1;for(var p=s.x,m=l.x,_=d.x,b=s.y,C=l.y,O=d.y,E=p<m?p<_?p:_:m<_?m:_,k=b<C?b<O?b:O:C<O?C:O,R=p>m?p>_?p:_:m>_?m:_,L=b>C?b>O?b:O:C>O?C:O,V=j_(E,k,e,n,o),Y=j_(R,L,e,n,o),J=t.prevZ,K=t.nextZ;J&&J.z>=V&&K&&K.z<=Y;){if(J.x>=E&&J.x<=R&&J.y>=k&&J.y<=L&&J!==s&&J!==d&&$d(p,b,m,C,_,O,J.x,J.y)&&Ki(J.prev,J,J.next)>=0||(J=J.prevZ,K.x>=E&&K.x<=R&&K.y>=k&&K.y<=L&&K!==s&&K!==d&&$d(p,b,m,C,_,O,K.x,K.y)&&Ki(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;J&&J.z>=V;){if(J.x>=E&&J.x<=R&&J.y>=k&&J.y<=L&&J!==s&&J!==d&&$d(p,b,m,C,_,O,J.x,J.y)&&Ki(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;K&&K.z<=Y;){if(K.x>=E&&K.x<=R&&K.y>=k&&K.y<=L&&K!==s&&K!==d&&$d(p,b,m,C,_,O,K.x,K.y)&&Ki(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function EA(t,e,n){var o=t;do{var s=o.prev,l=o.next.next;!yg(s,l)&&Qx(s,o,o.next,l)&&wp(s,l)&&wp(l,s)&&(e.push(s.i/n|0),e.push(o.i/n|0),e.push(l.i/n|0),Cp(o),Cp(o.next),o=t=l),o=o.next}while(o!==t);return Yu(o)}function IA(t,e,n,o,s,l){var d=t;do{for(var p=d.next.next;p!==d.prev;){if(d.i!==p.i&&BA(d,p)){var m=Kx(d,p);return d=Yu(d,d.next),m=Yu(m,m.next),bp(d,e,n,o,s,l,0),void bp(m,e,n,o,s,l,0)}p=p.next}d=d.next}while(d!==t)}function DA(t,e){return t.x-e.x}function kA(t,e){var n=function(s,l){var d,p=l,m=s.x,_=s.y,b=-1/0;do{if(_<=p.y&&_>=p.next.y&&p.next.y!==p.y){var C=p.x+(_-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(C<=m&&C>b&&(b=C,d=p.x<p.next.x?p:p.next,C===m))return d}p=p.next}while(p!==l);if(!d)return null;var O,E=d,k=d.x,R=d.y,L=1/0;p=d;do m>=p.x&&p.x>=k&&m!==p.x&&$d(_<R?m:b,_,k,R,_<R?b:m,_,p.x,p.y)&&(O=Math.abs(_-p.y)/(m-p.x),wp(p,s)&&(O<L||O===L&&(p.x>d.x||p.x===d.x&&RA(d,p)))&&(d=p,L=O)),p=p.next;while(p!==E);return d}(t,e);if(!n)return e;var o=Kx(n,t);return Yu(o,o.next),Yu(n,n.next)}function RA(t,e){return Ki(t.prev,t,e.prev)<0&&Ki(e.next,t,t.next)<0}function j_(t,e,n,o,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-o)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function zA(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function $d(t,e,n,o,s,l,d,p){return(s-d)*(e-p)>=(t-d)*(l-p)&&(t-d)*(o-p)>=(n-d)*(e-p)&&(n-d)*(l-p)>=(s-d)*(o-p)}function BA(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,o){var s=n;do{if(s.i!==n.i&&s.next.i!==n.i&&s.i!==o.i&&s.next.i!==o.i&&Qx(s,s.next,n,o))return!0;s=s.next}while(s!==n);return!1}(t,e)&&(wp(t,e)&&wp(e,t)&&function(n,o){var s=n,l=!1,d=(n.x+o.x)/2,p=(n.y+o.y)/2;do s.y>p!=s.next.y>p&&s.next.y!==s.y&&d<(s.next.x-s.x)*(p-s.y)/(s.next.y-s.y)+s.x&&(l=!l),s=s.next;while(s!==n);return l}(t,e)&&(Ki(t.prev,t,e.prev)||Ki(t,e.prev,e))||yg(t,e)&&Ki(t.prev,t,t.next)>0&&Ki(e.prev,e,e.next)>0)}function Ki(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function yg(t,e){return t.x===e.x&&t.y===e.y}function Qx(t,e,n,o){var s=vg(Ki(t,e,n)),l=vg(Ki(t,e,o)),d=vg(Ki(n,o,t)),p=vg(Ki(n,o,e));return s!==l&&d!==p||!(s!==0||!xg(t,n,e))||!(l!==0||!xg(t,o,e))||!(d!==0||!xg(n,t,o))||!(p!==0||!xg(n,e,o))}function xg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function vg(t){return t>0?1:t<0?-1:0}function wp(t,e){return Ki(t.prev,t,t.next)<0?Ki(t,e,t.next)>=0&&Ki(t,t.prev,e)>=0:Ki(t,e,t.prev)<0||Ki(t,t.next,e)<0}function Kx(t,e){var n=new U_(t.i,t.x,t.y),o=new U_(e.i,e.x,e.y),s=t.next,l=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,o.next=n,n.prev=o,l.next=o,o.prev=l,o}function Jx(t,e,n,o){var s=new U_(t,e,n);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function Cp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function U_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G_(t,e,n,o){for(var s=0,l=e,d=n-o;l<n;l+=o)s+=(t[d]-t[l])*(t[l+1]+t[d+1]),d=l;return s}V_.exports=_g,V_.exports.default=_g,_g.deviation=function(t,e,n,o){var s=e&&e.length,l=Math.abs(G_(t,0,s?e[0]*n:t.length,n));if(s)for(var d=0,p=e.length;d<p;d++)l-=Math.abs(G_(t,e[d]*n,d<p-1?e[d+1]*n:t.length,n));var m=0;for(d=0;d<o.length;d+=3){var _=o[d]*n,b=o[d+1]*n,C=o[d+2]*n;m+=Math.abs((t[_]-t[C])*(t[b+1]-t[_+1])-(t[_]-t[b])*(t[C+1]-t[_+1]))}return l===0&&m===0?0:Math.abs((m-l)/l)},_g.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,s=0;s<t.length;s++){for(var l=0;l<t[s].length;l++)for(var d=0;d<e;d++)n.vertices.push(t[s][l][d]);s>0&&n.holes.push(o+=t[s-1].length)}return n};var bg=lo(V_.exports);function H_(t,e){let n=t.length;if(n<=1)return[t];let o=[],s,l;for(let d=0;d<n;d++){let p=fr(t[d]);p!==0&&(t[d].area=Math.abs(p),l===void 0&&(l=p<0),l===p<0?(s&&o.push(s),s=[t[d]]):s.push(t[d]))}if(s&&o.push(s),e>1)for(let d=0;d<o.length;d++)o[d].length<=e||(Rh(o[d],e,1,o[d].length-1,FA),o[d]=o[d].slice(0,e));return o}function FA(t,e){return e.area-t.area}function $_(t,e,n){let o=n.patternDependencies,s=!1;for(let l of e){let d=l.paint.get(`${t}-pattern`);d.isConstant()||(s=!0);let p=d.constantOr(null);p&&(s=!0,o[p]=!0)}return s}function W_(t,e,n,o,s){let l=s.patternDependencies;for(let d of e){let p=d.paint.get(`${t}-pattern`).value;if(p.kind!=="constant"){let m=p.evaluate({zoom:o},n,{},s.availableImages);m=m&&m.name?m.name:m,l[m]=!0,n.patterns[d.id]=m}}return n}class Z_{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qr,this.indexArray=new ro,this.indexArray2=new Ea,this.programConfigurations=new G(e.layers,e.zoom),this.segments=new Ii,this.segments2=new Ii,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.projection=e.projection}populate(e,n,o,s){this.hasPattern=$_("fill",this.layers,n);let l=this.layers[0].layout.get("fill-sort-key"),d=[];for(let{feature:p,id:m,index:_,sourceLayerIndex:b}of e){let C=this.layers[0]._featureFilter.needGeometry,O=qi(p,C);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),O,o))continue;let E=l?l.evaluate(O,{},o,n.availableImages):void 0,k={id:m,properties:p.properties,type:p.type,sourceLayerIndex:b,index:_,geometry:C?O.geometry:so(p,o,s),patterns:{},sortKey:E};d.push(k)}l&&d.sort((p,m)=>p.sortKey-m.sortKey);for(let p of d){let{geometry:m,index:_,sourceLayerIndex:b}=p;if(this.hasPattern){let C=W_("fill",this.layers,p,this.zoom,n);this.patternFeatures.push(C)}else this.addFeature(p,m,_,o,{},n.availableImages,n.brightness);n.featureIndex.insert(e[_].feature,m,_,b,this.index)}}update(e,n,o,s,l){let d=Object.keys(e).length!==0;d&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,d?this.stateDependentLayers:this.layers,o,s,l)}addFeatures(e,n,o,s,l,d){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,n,o,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,OA),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,o,s,l,d=[],p){for(let m of H_(n,500)){let _=0;for(let R of m)_+=R.length;let b=this.segments.prepareSegment(_,this.layoutVertexArray,this.indexArray),C=b.vertexLength,O=[],E=[];for(let R of m){if(R.length===0)continue;R!==m[0]&&E.push(O.length/2);let L=this.segments2.prepareSegment(R.length,this.layoutVertexArray,this.indexArray2),V=L.vertexLength;this.layoutVertexArray.emplaceBack(R[0].x,R[0].y),this.indexArray2.emplaceBack(V+R.length-1,V),O.push(R[0].x),O.push(R[0].y);for(let Y=1;Y<R.length;Y++)this.layoutVertexArray.emplaceBack(R[Y].x,R[Y].y),this.indexArray2.emplaceBack(V+Y-1,V+Y),O.push(R[Y].x),O.push(R[Y].y);L.vertexLength+=R.length,L.primitiveLength+=R.length}let k=bg(O,E);for(let R=0;R<k.length;R+=3)this.indexArray.emplaceBack(C+k[R],C+k[R+1],C+k[R+2]);b.vertexLength+=_,b.primitiveLength+=k.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,l,d,s,p)}}xt(Z_,"FillBucket",{omit:["layers","patternFeatures"]});let LA=new bi({"fill-sort-key":new Rt(Me.layout_fill["fill-sort-key"]),visibility:new at(Me.layout_fill.visibility)});var NA={paint:new bi({"fill-antialias":new at(Me.paint_fill["fill-antialias"]),"fill-opacity":new Rt(Me.paint_fill["fill-opacity"]),"fill-color":new Rt(Me.paint_fill["fill-color"]),"fill-outline-color":new Rt(Me.paint_fill["fill-outline-color"]),"fill-translate":new at(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new at(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new Rt(Me.paint_fill["fill-pattern"]),"fill-emissive-strength":new at(Me.paint_fill["fill-emissive-strength"])}),layout:LA};let VA=Hn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),jA=Hn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),UA=Hn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),GA=Hn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),HA=Hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:$A}=VA;var wg={},WA=da,ev=Wd;function Wd(t,e,n,o,s){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=o,this._values=s,t.readFields(ZA,this,e)}function ZA(t,e,n){t==1?e.id=n.readVarint():t==2?function(o,s){for(var l=o.readVarint()+o.pos;o.pos<l;){var d=s._keys[o.readVarint()],p=s._values[o.readVarint()];s.properties[d]=p}}(n,e):t==3?e.type=n.readVarint():t==4&&(e._geometry=n.pos)}function qA(t){for(var e,n,o=0,s=0,l=t.length,d=l-1;s<l;d=s++)o+=((n=t[d]).x-(e=t[s]).x)*(e.y+n.y);return o}Wd.types=["Unknown","Point","LineString","Polygon"],Wd.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,o=1,s=0,l=0,d=0,p=[];t.pos<n;){if(s<=0){var m=t.readVarint();o=7&m,s=m>>3}if(s--,o===1||o===2)l+=t.readSVarint(),d+=t.readSVarint(),o===1&&(e&&p.push(e),e=[]),e.push(new WA(l,d));else{if(o!==7)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&p.push(e),p},Wd.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,o=0,s=0,l=0,d=1/0,p=-1/0,m=1/0,_=-1/0;t.pos<e;){if(o<=0){var b=t.readVarint();n=7&b,o=b>>3}if(o--,n===1||n===2)(s+=t.readSVarint())<d&&(d=s),s>p&&(p=s),(l+=t.readSVarint())<m&&(m=l),l>_&&(_=l);else if(n!==7)throw new Error("unknown command "+n)}return[d,m,p,_]},Wd.prototype.toGeoJSON=function(t,e,n){var o,s,l=this.extent*Math.pow(2,n),d=this.extent*t,p=this.extent*e,m=this.loadGeometry(),_=Wd.types[this.type];function b(E){for(var k=0;k<E.length;k++){var R=E[k];E[k]=[360*(R.x+d)/l-180,360/Math.PI*Math.atan(Math.exp((180-360*(R.y+p)/l)*Math.PI/180))-90]}}switch(this.type){case 1:var C=[];for(o=0;o<m.length;o++)C[o]=m[o][0];b(m=C);break;case 2:for(o=0;o<m.length;o++)b(m[o]);break;case 3:for(m=function(E){var k=E.length;if(k<=1)return[E];for(var R,L,V=[],Y=0;Y<k;Y++){var J=qA(E[Y]);J!==0&&(L===void 0&&(L=J<0),L===J<0?(R&&V.push(R),R=[E[Y]]):R.push(E[Y]))}return R&&V.push(R),V}(m),o=0;o<m.length;o++)for(s=0;s<m[o].length;s++)b(m[o][s])}m.length===1?m=m[0]:_="Multi"+_;var O={type:"Feature",geometry:{type:_,coordinates:m},properties:this.properties};return"id"in this&&(O.id=this.id),O};var YA=ev,tv=nv;function nv(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(XA,this,e),this.length=this._features.length}function XA(t,e,n){t===15?e.version=n.readVarint():t===1?e.name=n.readString():t===5?e.extent=n.readVarint():t===2?e._features.push(n.pos):t===3?e._keys.push(n.readString()):t===4&&e._values.push(function(o){for(var s=null,l=o.readVarint()+o.pos;o.pos<l;){var d=o.readVarint()>>3;s=d===1?o.readString():d===2?o.readFloat():d===3?o.readDouble():d===4?o.readVarint64():d===5?o.readVarint():d===6?o.readSVarint():d===7?o.readBoolean():null}return s}(n))}nv.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new YA(this._pbf,e,this.extent,this._keys,this._values)};var QA=tv;function KA(t,e,n){if(t===3){var o=new QA(n,n.readVarint()+n.pos);o.length&&(e[o.name]=o)}}var q_=wg.VectorTile=function(t,e){this.layers=t.readFields(KA,{},e)},Cg=wg.VectorTileFeature=ev;function Mg(t,e,n,o){let s=[],l=o===0?(d,p,m,_,b,C)=>{d.push(new ut(C,m+(C-p)/(_-p)*(b-m)))}:(d,p,m,_,b,C)=>{d.push(new ut(p+(C-m)/(b-m)*(_-p),C))};for(let d of t){let p=[];for(let m of d){if(m.length<=2)continue;let _=[];for(let O=0;O<m.length-1;O++){let E=m[O].x,k=m[O].y,R=m[O+1].x,L=m[O+1].y,V=o===0?E:k,Y=o===0?R:L;V<e?Y>e&&l(_,E,k,R,L,e):V>n?Y<n&&l(_,E,k,R,L,n):_.push(m[O]),Y<e&&V>=e&&l(_,E,k,R,L,e),Y>n&&V<=n&&l(_,E,k,R,L,n)}let b=m[m.length-1],C=o===0?b.x:b.y;C>=e&&C<=n&&_.push(b),_.length&&(b=_[_.length-1],_[0].x===b.x&&_[0].y===b.y||_.push(_[0]),p.push(_))}p.length&&s.push(p)}return s}function Ag(t,e){return t.x-e.x||t.y-e.y}function iv(t,e){return Ag(t.min,e.min)===0&&Ag(t.max,e.max)===0}function ov(t,e){return!(t.min.x>e.max.x||t.max.x<e.min.x||t.min.y>e.max.y||t.max.y<e.min.y)}function rv(t,e,n){let o=1/ht,s=1/(1<<n.canonical.z),l=(e.x*o+n.canonical.x)*s+n.wrap,d=(e.y*o+n.canonical.y)*s;return{min:new ut((t.x*o+n.canonical.x)*s+n.wrap,(t.y*o+n.canonical.y)*s),max:new ut(l,d)}}function JA(t,e,n){let o=1<<n.canonical.z,s=((e.x-n.wrap)*o-n.canonical.x)*ht,l=(e.y*o-n.canonical.y)*ht;return{min:new ut(((t.x-n.wrap)*o-n.canonical.x)*ht,(t.y*o-n.canonical.y)*ht),max:new ut(s,l)}}function av(t,e,n,o,s,l,d){let p=t.indices,m=t.vertices,_=[];for(let b=o;b<o+s;b+=3){let C=e[n[b+0]+l],O=e[n[b+1]+l],E=e[n[b+2]+l],k=Math.min(C.x,O.x,E.x),R=Math.max(C.x,O.x,E.x),L=Math.min(C.y,O.y,E.y),V=Math.max(C.y,O.y,E.y);_.length=0,t.grid.query(new ut(k,L),new ut(R,V),_);for(let Y=0;Y<_.length;Y++){let J=_[Y];if(g_(m[p[3*J+0]],m[p[3*J+1]],m[p[3*J+2]],C,O,E,d))return!0}}return!1}function sv(t,e,n,o){if(!t||!n)return!1;let s=t.vertices;if(!e.canonical.equals(o.canonical)||e.wrap!==o.wrap){if(n.vertices.length<t.vertices.length)return sv(n,o,t,e);let l=e.canonical,d=o.canonical,p=Math.pow(2,d.z-l.z);s=t.vertices.map(m=>new ut(m.x*l.x*ht*p-d.x*ht,m.y*l.y*ht*p-d.y*ht))}return av(n,s,t.indices,0,t.indices.length,0,0)}wg.VectorTileLayer=tv;class lv{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,n){let o=this.toIdx(e,n);return{min:this.minimums[o],max:this.maximums[o]}}isLeaf(e,n){return this.leaves[this.toIdx(e,n)]}toIdx(e,n){return n*this.size+e}}function cv(t,e,n,o){let s=0,l=Number.MAX_VALUE;for(let d=0;d<3;d++)if(Math.abs(o[d])<1e-15){if(n[d]<t[d]||n[d]>e[d])return null}else{let p=1/o[d],m=(t[d]-n[d])*p,_=(e[d]-n[d])*p;if(m>_){let b=m;m=_,_=b}if(m>s&&(s=m),_<l&&(l=_),s>l)return null}return s}function uv(t,e,n,o,s,l,d,p,m,_,b){let C=o-t,O=s-e,E=l-n,k=d-t,R=p-e,L=m-n,V=b[1]*L-b[2]*R,Y=b[2]*k-b[0]*L,J=b[0]*R-b[1]*k,K=C*V+O*Y+E*J;if(Math.abs(K)<1e-15)return null;let ae=1/K,ie=_[0]-t,de=_[1]-e,me=_[2]-n,ve=(ie*V+de*Y+me*J)*ae;if(ve<0||ve>1)return null;let Pe=de*E-me*O,be=me*C-ie*E,Be=ie*O-de*C,Ue=(b[0]*Pe+b[1]*be+b[2]*Be)*ae;return Ue<0||ve+Ue>1?null:(k*Pe+R*be+L*Be)*ae}function dv(t,e,n){return(t-e)/(n-e)}function hv(t,e,n,o,s,l,d,p,m){let _=1<<n,b=l-o,C=d-s,O=(t+1)/_*b+o,E=(e+0)/_*C+s,k=(e+1)/_*C+s;p[0]=(t+0)/_*b+o,p[1]=E,m[0]=O,m[1]=k}class pv{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;let n=function(l){let d=Math.ceil(Math.log2(l.dim/8)),p=[],m=Math.ceil(Math.pow(2,d)),_=1/m,b=(E,k,R,L,V)=>{let Y=L?1:0,J=(E+1)*R-Y,K=k*R,ae=(k+1)*R-Y;V[0]=E*R,V[1]=K,V[2]=J,V[3]=ae},C=new lv(m),O=[];for(let E=0;E<m*m;E++){b(E%m,Math.floor(E/m),_,!1,O);let k=bc(O[0],O[1],l),R=bc(O[2],O[1],l),L=bc(O[2],O[3],l),V=bc(O[0],O[3],l);C.minimums.push(Math.min(k,R,L,V)),C.maximums.push(Math.max(k,R,L,V)),C.leaves.push(1)}for(p.push(C),m/=2;m>=1;m/=2){let E=p[p.length-1];C=new lv(m);for(let k=0;k<m*m;k++){b(k%m,Math.floor(k/m),2,!0,O);let R=E.getElevation(O[0],O[1]),L=E.getElevation(O[2],O[1]),V=E.getElevation(O[2],O[3]),Y=E.getElevation(O[0],O[3]),J=E.isLeaf(O[0],O[1]),K=E.isLeaf(O[2],O[1]),ae=E.isLeaf(O[2],O[3]),ie=E.isLeaf(O[0],O[3]),de=Math.min(R.min,L.min,V.min,Y.min),me=Math.max(R.max,L.max,V.max,Y.max),ve=J&&K&&ae&&ie;C.maximums.push(me),C.minimums.push(de),C.leaves.push(me-de<=5&&ve?1:0)}p.push(C)}return p}(this.dem),o=n.length-1,s=n[o];this._addNode(s.minimums[0],s.maximums[0],s.leaves[0]),this._construct(n,0,0,o,0)}raycastRoot(e,n,o,s,l,d,p=1){return cv([e,n,-100],[o,s,this.maximums[0]*p],l,d)}raycast(e,n,o,s,l,d,p=1){if(!this.nodeCount)return null;let m=this.raycastRoot(e,n,o,s,l,d,p);if(m==null)return null;let _=[],b=[],C=[],O=[],E=[{idx:0,t:m,nodex:0,nodey:0,depth:0}];for(;E.length>0;){let{idx:k,t:R,nodex:L,nodey:V,depth:Y}=E.pop();if(this.leaves[k]){hv(L,V,Y,e,n,o,s,C,O);let K=1<<Y,ae=(L+0)/K,ie=(L+1)/K,de=(V+0)/K,me=(V+1)/K,ve=bc(ae,de,this.dem)*p,Pe=bc(ie,de,this.dem)*p,be=bc(ie,me,this.dem)*p,Be=bc(ae,me,this.dem)*p,Ue=uv(C[0],C[1],ve,O[0],C[1],Pe,O[0],O[1],be,l,d),Ie=uv(O[0],O[1],be,C[0],O[1],Be,C[0],C[1],ve,l,d),je=Math.min(Ue!==null?Ue:Number.MAX_VALUE,Ie!==null?Ie:Number.MAX_VALUE);if(je!==Number.MAX_VALUE)return je;{let Se=r.N.scaleAndAdd([],l,d,R);if(fv(ve,Pe,Be,be,dv(Se[0],C[0],O[0]),dv(Se[1],C[1],O[1]))>=Se[2])return R}continue}let J=0;for(let K=0;K<this._siblingOffset.length;K++){hv((L<<1)+this._siblingOffset[K][0],(V<<1)+this._siblingOffset[K][1],Y+1,e,n,o,s,C,O),C[2]=-100,O[2]=this.maximums[this.childOffsets[k]+K]*p;let ae=cv(C,O,l,d);if(ae!=null){let ie=ae;_[K]=ie;let de=!1;for(let me=0;me<J&&!de;me++)ie>=_[b[me]]&&(b.splice(me,0,K),de=!0);de||(b[J]=K),J++}}for(let K=0;K<J;K++){let ae=b[K];E.push({idx:this.childOffsets[k]+ae,t:_[ae],nodex:(L<<1)+this._siblingOffset[ae][0],nodey:(V<<1)+this._siblingOffset[ae][1],depth:Y+1})}}return null}_addNode(e,n,o){return this.minimums.push(e),this.maximums.push(n),this.leaves.push(o),this.childOffsets.push(0),this.nodeCount++}_construct(e,n,o,s,l){if(e[s].isLeaf(n,o)===1)return;this.childOffsets[l]||(this.childOffsets[l]=this.nodeCount);let d=s-1,p=e[d],m=0,_=0;for(let b=0;b<this._siblingOffset.length;b++){let C=2*n+this._siblingOffset[b][0],O=2*o+this._siblingOffset[b][1],E=p.getElevation(C,O),k=p.isLeaf(C,O),R=this._addNode(E.min,E.max,k);k&&(m|=1<<b),_||(_=R)}for(let b=0;b<this._siblingOffset.length;b++)m&1<<b||this._construct(e,2*n+this._siblingOffset[b][0],2*o+this._siblingOffset[b][1],d,_+b)}}function fv(t,e,n,o,s,l){return gn(gn(t,n,l),gn(e,o,l),s)}function bc(t,e,n){let o=n.dim,s=on(t*o-.5,0,o-1),l=on(e*o-.5,0,o-1),d=Math.floor(s),p=Math.floor(l),m=Math.min(d+1,o-1),_=Math.min(p+1,o-1);return fv(n.get(d,p),n.get(m,p),n.get(d,_),n.get(m,_),s-d,l-p)}let eP={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function tP(t,e,n){return(256*t*256+256*e+n)/10-1e4}function nP(t,e,n){return 256*t+e+n/256-32768}class Pg{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,n,o,s=!1){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(o&&o!=="mapbox"&&o!=="terrarium")return ci(`"${o}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;let l=this.dim=n.height-2,d=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.floatView=new Float32Array(n.data.buffer),this.borderReady=s,this._modifiedForSources={},!s){for(let m=0;m<l;m++)d[this._idx(-1,m)]=d[this._idx(0,m)],d[this._idx(l,m)]=d[this._idx(l-1,m)],d[this._idx(m,-1)]=d[this._idx(m,0)],d[this._idx(m,l)]=d[this._idx(m,l-1)];d[this._idx(-1,-1)]=d[this._idx(0,0)],d[this._idx(l,-1)]=d[this._idx(l-1,0)],d[this._idx(-1,l)]=d[this._idx(0,l-1)],d[this._idx(l,l)]=d[this._idx(l-1,l-1)]}let p=o==="terrarium"?nP:tP;for(let m=0;m<d.length;++m){let _=4*m;this.floatView[m]=p(this.pixels[_],this.pixels[_+1],this.pixels[_+2])}this._timestamp=Ke.now()}_buildQuadTree(){this._tree=new pv(this)}get(e,n,o=!1){o&&(e=on(e,-1,this.dim),n=on(n,-1,this.dim));let s=this._idx(e,n);return this.floatView[s]}set(e,n,o){let s=this._idx(e,n),l=this.floatView[s];return this.floatView[s]=o,o-l}static getUnpackVector(e){return eP[e]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}static pack(e,n){let o=[0,0,0,0],s=Pg.getUnpackVector(n),l=Math.floor((e+s[3])/s[2]);return o[2]=l%256,l=Math.floor(l/256),o[1]=l%256,l=Math.floor(l/256),o[0]=l,o}getPixels(){return new Yx({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,n,o){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let s=n*this.dim,l=n*this.dim+this.dim,d=o*this.dim,p=o*this.dim+this.dim;switch(n){case-1:s=l-1;break;case 1:l=s+1}switch(o){case-1:d=p-1;break;case 1:p=d+1}let m=-n*this.dim,_=-o*this.dim;for(let b=d;b<p;b++)for(let C=s;C<l;C++){let O=4*this._idx(C,b),E=4*this._idx(C+m,b+_);this.pixels[O+0]=e.pixels[E+0],this.pixels[O+1]=e.pixels[E+1],this.pixels[O+2]=e.pixels[E+2],this.pixels[O+3]=e.pixels[E+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}xt(Pg,"DEMData"),xt(pv,"DemMinMaxQuadTree",{omit:["dem"]});class Zd{constructor(e,n,o){this._demTile=e,this._dem=this._demTile.dem,this._scale=n,this._offset=o}static create(e,n,o){let s=o||e.findDEMTileFor(n);if(!s||!s.dem)return;let l=s.dem,d=s.tileID,p=1<<n.canonical.z-d.canonical.z;return new Zd(s,l.dim/ht/p,[(n.canonical.x/p-d.canonical.x)*l.dim,(n.canonical.y/p-d.canonical.y)*l.dim])}tileCoordToPixel(e,n){let o=n*this._scale+this._offset[1],s=Math.floor(e*this._scale+this._offset[0]),l=Math.floor(o);return new ut(s,l)}getElevationAt(e,n,o,s){let l=e*this._scale+this._offset[0],d=n*this._scale+this._offset[1],p=Math.floor(l),m=Math.floor(d),_=this._dem;return s=!!s,o?gn(gn(_.get(p,m,s),_.get(p,m+1,s),d-m),gn(_.get(p+1,m,s),_.get(p+1,m+1,s),d-m),l-p):_.get(p,m,s)}getElevationAtPixel(e,n,o){return this._dem.get(e,n,!!o)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Zt(1,e)*this._dem.stride}}let iP=Cg.types,oP=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],rP=["fill-extrusion-flood-light-ground-radius"],aP=Math.pow(2,13),sP=Math.pow(2,15)-1,gv=new ut(0,1),wc=2147483648;function Mp(t,e,n,o,s,l,d,p){t.emplaceBack((e<<1)+d,(n<<1)+l,(Math.floor(o*aP)<<1)+s,Math.round(p))}function Og(t,e,n,o,s,l){t.emplaceBack(e.x,e.y,(n.x<<1)+o,(n.y<<1)+s,l)}function Ap(t,e,n){t.emplaceBack(e.x,e.y,e.z,n[0]*16384,n[1]*16384,n[2]*16384)}class mv{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class _v{constructor(){this.centroidXY=new ut(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new ut(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new ut(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new ut(this.max.x-this.min.x,this.max.y-this.min.y)}}class yv{constructor(){this.acc=new ut(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,n){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=n.x,e.min.y=e.max.y=n.y)}appendEdge(e,n,o){this.accCount++,this.acc._add(n);let s=!!this.borders;n.x<e.min.x?(e.min.x=n.x,s=!0):n.x>e.max.x&&(e.max.x=n.x,s=!0),n.y<e.min.y?(e.min.y=n.y,s=!0):n.y>e.max.y&&(e.max.y=n.y,s=!0),((n.x===0||n.x===ht)&&n.x===o.x)!=((n.y===0||n.y===ht)&&n.y===o.y)&&this.processBorderOverlap(n,o),s&&this.checkBorderIntersection(n,o)}checkBorderIntersection(e,n){n.x<0!=e.x<0&&this.addBorderIntersection(0,gn(n.y,e.y,(0-n.x)/(e.x-n.x))),n.x>ht!=e.x>ht&&this.addBorderIntersection(1,gn(n.y,e.y,(ht-n.x)/(e.x-n.x))),n.y<0!=e.y<0&&this.addBorderIntersection(2,gn(n.x,e.x,(0-n.y)/(e.y-n.y))),n.y>ht!=e.y>ht&&this.addBorderIntersection(3,gn(n.x,e.x,(ht-n.y)/(e.y-n.y)))}addBorderIntersection(e,n){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);let o=this.borders[e];n<o[0]&&(o[0]=n),n>o[1]&&(o[1]=n)}processBorderOverlap(e,n){if(e.x===n.x){if(e.y===n.y)return;let o=e.x===0?0:1;this.addBorderIntersection(o,n.y),this.addBorderIntersection(o,e.y)}else{let o=e.y===0?2:3;this.addBorderIntersection(o,n.x),this.addBorderIntersection(o,e.x)}}centroid(){return this.accCount===0?new ut(0,0):new ut(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,n)=>e+ +(n[0]!==Number.MAX_VALUE),0):0}}function xv(t,e){let n=t.add(e)._unit(),o=on(t.x*n.x+t.y*n.y,-1,1);var s,l,d;return s=Math.acos(o),Math.min(4,Math.max(-4,Math.tan(s)))/4*sP*((l=t).x*(d=e).y-l.y*d.x<0?-1:1)}let lP=[t=>t.x<0,t=>t.x>ht,t=>t.y<0,t=>t.y>ht];function cP(t,e,n,o){let s=[4];if(o===0)return s;n._mult(o);let l=t.sub(n),d=e.sub(n),p=[t,e,l,d];for(let m=0;m<4;m++)for(let _ of p)if(lP[m](_)){s.push(m);break}return s}class vv{constructor(e){this.vertexArray=new ip,this.indexArray=new ro,this.programConfigurations=new G(e.layers,e.zoom,n=>rP.includes(n)),this._segments=new Ii,this.hiddenByLandmarkVertexArray=new hp,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ii}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(e,n,o,s=!1){let l=e.length;if(l>2){let d=Math.max(0,this._segments.get().length-1),p=this._segments._prepareSegment(4*l,this.vertexArray.length,2*this._segmentToGroundQuads[d].length),m;d!==this._segments.get().length-1&&(d++,this._segmentToGroundQuads[d]=[],this._segmentToRegionTriCounts[d]=[0,0,0,0,0]);{let _=e[0],b=e[1];m=xv(_.sub(e[l-1])._perp()._unit(),b.sub(_)._perp()._unit())}for(let _=0;_<l;_++){let b=_===l-1?0:_+1,C=e[_],O=e[b],E=e[b===l-1?0:b+1],k=O.sub(C)._perp()._unit(),R=xv(k,E.sub(O)._perp()._unit()),L=m,V=R;if(Y_(C,O,n)||s&&Cv(C,n)&&Cv(O,n)){m=R;continue}let Y=p.vertexLength;Og(this.vertexArray,C,O,1,1,L),Og(this.vertexArray,C,O,1,0,L),Og(this.vertexArray,C,O,0,1,V),Og(this.vertexArray,C,O,0,0,V),p.vertexLength+=4;let J=cP(C,O,k,o);for(let K of J)this._segmentToGroundQuads[d].push({id:Y,region:K}),this._segmentToRegionTriCounts[d][K]+=2,p.primitiveLength+=2;m=R}}}prepareBorderSegments(){if(!this.hasData())return;let e=this._segments.get(),n=e.length;for(let o=0;o<n;o++)this._segmentToGroundQuads[o].sort((s,l)=>s.region-l.region);for(let o=0;o<n;o++){let s=this._segmentToGroundQuads[o],l=e[o],d=this._segmentToRegionTriCounts[o];d.reduce((m,_)=>m+_,0);let p=0;for(let m=0;m<=4;m++){let _=d[m];if(_!==0){let b=this.regionSegments[m];b||(b=this.regionSegments[m]=new Ii);let C={vertexOffset:l.vertexOffset,primitiveOffset:l.primitiveOffset+p,vertexLength:l.vertexLength,primitiveLength:_};b.get().push(C)}p+=_}for(let m=0;m<s.length;m++){let _=s[m].id;this.indexArray.emplaceBack(_,_+1,_+3),this.indexArray.emplaceBack(_,_+3,_+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,n,o,s,l,d){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,n,o,s,l,d)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,jA.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,n,o,s,l,d){this.hasData()&&this.programConfigurations.updatePaintArrays(e,n,o,s,l,d)}updateHiddenByLandmark(e){if(!this.hasData())return;let n=e.groundVertexCount+e.groundVertexArrayOffset;if(e.groundVertexCount===0)return;let o=e.flags&wc?1:0;for(let s=e.groundVertexArrayOffset;s<n;++s)this.hiddenByLandmarkVertexArray.emplace(s,o);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,GA.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){let n=this.regionSegments[e];n&&n.destroy()}}}}class Tg{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ro,this.footprintVertices=new Qr,this.footprintSegments=[],this.layoutVertexArray=new es,this.centroidVertexArray=new ju,this.indexArray=new ro,this.programConfigurations=new G(e.layers,e.zoom,n=>oP.includes(n)),this.segments=new Ii,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.groundEffect=new vv(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(e,n,o,s){this.features=[],this.hasPattern=$_("fill-extrusion",this.layers,n),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=hn(o),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(let{feature:l,id:d,index:p,sourceLayerIndex:m}of e){let _=this.layers[0]._featureFilter.needGeometry,b=qi(l,_);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),b,o))continue;let C={id:d,sourceLayerIndex:m,index:p,geometry:_?b.geometry:so(l,o,s),properties:l.properties,type:l.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(W_("fill-extrusion",this.layers,C,this.zoom,n)):this.addFeature(C,C.geometry,p,o,{},n.availableImages,s,n.brightness),n.featureIndex.insert(l,C.geometry,p,m,this.index,O)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,n,o,s,l,d){for(let p of this.features){let{geometry:m}=p;this.addFeature(p,m,p.index,n,o,s,l,d)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(e,n,o,s,l){let d=Object.keys(e).length!==0;if(d&&!this.stateDependentLayers.length)return;let p=d?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,n,p,o,s,l),this.groundEffect.update(e,n,p,o,s,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$A),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,HA.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,UA.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,o,s,l,d,p,m){let _=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,b=[new ut(0,0),new ut(ht,ht)],C=p.projection,O=C.name==="globe",E=iP[e.type]==="Polygon",k=new yv;k.centroidDataIndex=this.centroidData.length;let R=new _v,L=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},s)<=0,V=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},s);R.height=V,R.vertexArrayOffset=this.layoutVertexArray.length,R.groundVertexArrayOffset=this.groundEffect.vertexArray.length,O&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Bd);let Y=H_(n,500);for(let me=Y.length-1;me>=0;me--){let ve=Y[me];(ve.length===0||(J=ve[0]).every(Pe=>Pe.x<=0)||J.every(Pe=>Pe.x>=ht)||J.every(Pe=>Pe.y<=0)||J.every(Pe=>Pe.y>=ht))&&Y.splice(me,1)}var J;let K;if(O)K=Ov(Y,b,s);else{K=[];for(let me of Y)K.push({polygon:me,bounds:b})}let ae=E?this.edgeRadius:0,ie=ae>0&&this.zoom<17,de=(me,ve)=>{if(me.length===0)return!1;let Pe=me[me.length-1];return ve.x===Pe.x&&ve.y===Pe.y};for(let{polygon:me,bounds:ve}of K){let Pe=0,be=0;for(let je of me)E&&!je[0].equals(je[je.length-1])&&je.push(je[0]),be+=E?je.length-1:je.length;let Be=this.segments.prepareSegment((E?5:4)*be,this.layoutVertexArray,this.indexArray);R.footprintSegIdx<0&&(R.footprintSegIdx=this.footprintSegments.length),R.polygonSegIdx<0&&(R.polygonSegIdx=this.polygonSegments.length);let Ue={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Ie=new mv;if(Ie.vertexOffset=this.footprintVertices.length,Ie.indexOffset=3*this.footprintIndices.length,Ie.ringIndices=[],E){let je=[],Se=[];Pe=Be.vertexLength;for(let st=0;st<me.length;st++){let Ge=me[st];Ge.length&&st!==0&&Se.push(je.length/2);let bt=[],mt,qe;mt=Ge[1].sub(Ge[0])._perp()._unit(),Ie.ringIndices.push(Ge.length-1);for(let Nt=1;Nt<Ge.length;Nt++){let Tt=Ge[Nt],vt=Ge[Nt===Ge.length-1?1:Nt+1],Ye=Tt.clone();if(ae){qe=vt.sub(Tt)._perp()._unit();let Bt=mt.add(qe)._unit(),tn=ae*Math.min(4,1/(mt.x*Bt.x+mt.y*Bt.y));Ye.x+=tn*Bt.x,Ye.y+=tn*Bt.y,Ye.x=Math.round(Ye.x),Ye.y=Math.round(Ye.y),mt=qe}!L||ae!==0&&!ie||de(bt,Ye)||bt.push(Ye),Mp(this.layoutVertexArray,Ye.x,Ye.y,0,0,1,1,0),Be.vertexLength++,this.footprintVertices.emplaceBack(Tt.x,Tt.y),je.push(Tt.x,Tt.y),O&&Ap(this.layoutVertexExtArray,C.projectTilePoint(Ye.x,Ye.y,s),C.upVector(s,Ye.x,Ye.y))}L&&(ae===0||ie)&&(bt.length!==0&&de(bt,bt[0])&&bt.pop(),this.groundEffect.addData(bt,ve,_))}let Ne=bg(je,Se);for(let st=0;st<Ne.length;st+=3)this.footprintIndices.emplaceBack(Ie.vertexOffset+Ne[st+0],Ie.vertexOffset+Ne[st+1],Ie.vertexOffset+Ne[st+2]),this.indexArray.emplaceBack(Pe+Ne[st],Pe+Ne[st+2],Pe+Ne[st+1]),Be.primitiveLength++;Ie.indexCount+=Ne.length,Ie.vertexCount+=this.footprintVertices.length-Ie.vertexOffset}for(let je=0;je<me.length;je++){let Se=me[je];k.startRing(R,Se[0]);let Ne=Se.length>4&&Mv(Se[Se.length-2],Se[0],Se[1]),st=ae?uP(Se[Se.length-2],Se[0],Se[1],ae):0,Ge=[],bt,mt,qe;mt=Se[1].sub(Se[0])._perp()._unit();let Nt=!0;for(let Tt=1,vt=0;Tt<Se.length;Tt++){let Ye=Se[Tt-1],Bt=Se[Tt],tn=Se[Tt===Se.length-1?1:Tt+1];if(k.appendEdge(R,Bt,Ye),Y_(Bt,Ye,ve)){ae&&(mt=tn.sub(Bt)._perp()._unit(),Nt=!Nt);continue}let Vt=Bt.sub(Ye)._perp(),nn=Vt.x/(Math.abs(Vt.x)+Math.abs(Vt.y)),Ht=Vt.y>0?1:0,xn=Ye.dist(Bt);if(vt+xn>32768&&(vt=0),ae){qe=tn.sub(Bt)._perp()._unit();let zn=wv(Ye,Bt,tn,bv(mt,qe),ae);isNaN(zn)&&(zn=0);let Nn=Bt.sub(Ye)._unit();Ye=Ye.add(Nn.mult(st))._round(),Bt=Bt.add(Nn.mult(-zn))._round(),st=zn,mt=qe,L&&this.zoom>=17&&(de(Ge,Ye)||Ge.push(Ye),de(Ge,Bt)||Ge.push(Bt))}let qt=Be.vertexLength,ei=Se.length>4&&Mv(Ye,Bt,tn),In=Av(vt,Ne,Nt);if(Mp(this.layoutVertexArray,Ye.x,Ye.y,nn,Ht,0,0,In),Mp(this.layoutVertexArray,Ye.x,Ye.y,nn,Ht,0,1,In),vt+=xn,In=Av(vt,ei,!Nt),Ne=ei,Mp(this.layoutVertexArray,Bt.x,Bt.y,nn,Ht,0,0,In),Mp(this.layoutVertexArray,Bt.x,Bt.y,nn,Ht,0,1,In),Be.vertexLength+=4,this.indexArray.emplaceBack(qt+0,qt+1,qt+2),this.indexArray.emplaceBack(qt+1,qt+3,qt+2),Be.primitiveLength+=2,ae){let zn=Pe+(Tt===1?Se.length-2:Tt-2),Nn=Tt===1?Pe:zn+1;if(this.indexArray.emplaceBack(qt+1,zn,qt+3),this.indexArray.emplaceBack(zn,Nn,qt+3),Be.primitiveLength+=2,bt===void 0&&(bt=qt),!Y_(tn,Se[Tt],ve)){let Dn=Tt===Se.length-1?bt:Be.vertexLength;this.indexArray.emplaceBack(qt+2,qt+3,Dn),this.indexArray.emplaceBack(qt+3,Dn+1,Dn),this.indexArray.emplaceBack(qt+3,Nn,Dn+1),Be.primitiveLength+=3}Nt=!Nt}if(O){let zn=this.layoutVertexExtArray,Nn=C.projectTilePoint(Ye.x,Ye.y,s),Dn=C.projectTilePoint(Bt.x,Bt.y,s),gi=C.upVector(s,Ye.x,Ye.y),Zn=C.upVector(s,Bt.x,Bt.y);Ap(zn,Nn,gi),Ap(zn,Nn,gi),Ap(zn,Dn,Zn),Ap(zn,Dn,Zn)}}E&&(Pe+=Se.length-1),L&&ae&&this.zoom>=17&&(Ge.length!==0&&de(Ge,Ge[0])&&Ge.pop(),this.groundEffect.addData(Ge,ve,_,ae>0))}this.footprintSegments.push(Ie),Ue.triangleCount=this.indexArray.length-Ue.triangleArrayOffset,this.polygonSegments.push(Ue),++R.footprintSegLen,++R.polygonSegLen}if(R.vertexCount=this.layoutVertexArray.length-R.vertexArrayOffset,R.groundVertexCount=this.groundEffect.vertexArray.length-R.groundVertexArrayOffset,R.vertexCount!==0){if(R.centroidXY=k.borders?gv:this.encodeCentroid(k,R),this.centroidData.push(R),k.borders){this.featuresOnBorder.push(k);let me=this.featuresOnBorder.length-1;for(let ve=0;ve<k.borders.length;ve++)k.borders[ve][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[ve].push(me)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,l,d,s,m),this.groundEffect.addPaintPropertiesData(e,o,l,d,s,m),this.maxHeight=Math.max(this.maxHeight,V)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((n,o)=>this.featuresOnBorder[n].borders[e][0]-this.featuresOnBorder[o].borders[e][0])}splitToSubtiles(){let e=[];for(let p=0;p<this.centroidData.length;p++){let m=this.centroidData[p],_=+(m.min.y+m.max.y>ht),b=2*_+(+(m.min.x+m.max.x>ht)^_);for(let C=0;C<m.polygonSegLen;C++){let O=m.polygonSegIdx+C;e.push({centroidIdx:p,subtile:b,polygonSegmentIdx:O,triangleSegmentIdx:this.polygonSegments[O].triangleSegIdx})}}let n=new ro;e.sort((p,m)=>p.triangleSegmentIdx===m.triangleSegmentIdx?p.subtile-m.subtile:p.triangleSegmentIdx-m.triangleSegmentIdx);let o=0,s=0,l=0;for(let p of e){if(p.triangleSegmentIdx!==o)break;l++}let d=e.length;for(;s!==e.length;){o=e[s].triangleSegmentIdx;let p=0,m=s,_=s;for(let b=m;b<l&&e[b].subtile===p;b++)_++;for(;m!==l;){let b=e[m];p=b.subtile;let C=this.centroidData[b.centroidIdx].min.clone(),O=this.centroidData[b.centroidIdx].max.clone(),E={vertexOffset:this.segments.segments[o].vertexOffset,primitiveOffset:n.length,vertexLength:this.segments.segments[o].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let k=m;k<_;k++){let R=e[k],L=this.polygonSegments[R.polygonSegmentIdx],V=this.centroidData[R.centroidIdx].min,Y=this.centroidData[R.centroidIdx].max,J=this.indexArray.uint16;for(let K=L.triangleArrayOffset;K<L.triangleArrayOffset+L.triangleCount;K++)n.emplaceBack(J[3*K],J[3*K+1],J[3*K+2]);E.primitiveLength+=L.triangleCount,C.x=Math.min(C.x,V.x),C.y=Math.min(C.y,V.y),O.x=Math.max(O.x,Y.x),O.y=Math.max(O.y,Y.y)}E.primitiveLength>0&&this.triangleSubSegments.push({segment:E,min:C,max:O}),m=_;for(let k=m;k<l&&e[k].subtile===e[m].subtile;k++)_++}s=l;for(let b=s;b<d&&e[b].triangleSegmentIdx===e[s].triangleSegmentIdx;b++)l++}n._trim(),this.indexArray=n}getVisibleSegments(e,n,o){let s=0,l=0,d=1<<e.canonical.z;if(n){let R=n.getMinMaxForTile(e);R&&(s=R.min,l=R.max)}l+=this.maxHeight;let p=e.toUnwrapped(),m,_=[p.canonical.x/d+p.wrap,p.canonical.y/d],b=[(p.canonical.x+1)/d+p.wrap,(p.canonical.y+1)/d],C=new Ii,O=(R,L,V)=>[R[0]*(1-V[0])+L[0]*V[0],R[1]*(1-V[1])+L[1]*V[1]],E=[],k=[];for(let R of this.triangleSubSegments){E[0]=R.min.x/ht,E[1]=R.min.y/ht,k[0]=R.max.x/ht,k[1]=R.max.y/ht;let L=O(_,b,E),V=O(_,b,k);if(new Si([L[0],L[1],s],[V[0],V[1],l]).intersectsPrecise(o)===0){m&&(C.segments.push(m),m=void 0);continue}let Y=R.segment;m&&m.vertexOffset!==Y.vertexOffset&&(C.segments.push(m),m=void 0),m?(m.vertexLength+=Y.vertexLength,m.primitiveLength+=Y.primitiveLength):m={vertexOffset:Y.vertexOffset,primitiveLength:Y.primitiveLength,vertexLength:Y.vertexLength,primitiveOffset:Y.primitiveOffset,sortKey:void 0,vaos:{}}}return m&&C.segments.push(m),C}encodeCentroid(e,n){let o=e.centroid(),s=n.span(),l=Math.min(7,Math.round(s.x*this.tileToMeter/10)),d=Math.min(7,Math.round(s.y*this.tileToMeter/10));return new ut(on(o.x,1,ht-1)<<3|l,on(o.y,1,ht-1)<<3|d)}encodeBorderCentroid(e){if(!e.borders)return new ut(0,0);let n=e.borders,o=Number.MAX_VALUE;if(n[0][0]!==o||n[1][0]!==o){let s=n[0][0]!==o?0:1;return new ut(6|(n[0][0]!==o?0:65528),(n[s][0]+n[s][1])/2<<3|6)}{let s=n[2][0]!==o?2:3;return new ut((n[s][0]+n[s][1])/2<<3|6,6|(n[2][0]!==o?0:65528))}}showCentroid(e){let n=this.centroidData[e.centroidDataIndex];n.flags&=wc,n.centroidXY.x=0,n.centroidXY.y=0,this.writeCentroidToBuffer(n)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);let n=e.vertexArrayOffset,o=e.vertexCount+e.vertexArrayOffset,s=e.flags&wc?gv:e.centroidXY,l=this.centroidVertexArray.geta_centroid_pos0(n);if(this.centroidVertexArray.geta_centroid_pos1(n)!==s.y||l!==s.x){for(let d=n;d<o;++d)this.centroidVertexArray.emplace(d,s.x,s.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(let e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;let o=n.getReplacementRegionsForTile(e.toUnwrapped());if(function(l,d){if(l.length!==d.length)return!1;for(let p=0;p<l.length;p++)if(l[p].sourceId!==d[p].sourceId||!iv(l[p],d[p]))return!1;return!0}(this.activeReplacements,o))return;if(this.activeReplacements=o,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(let l of this.centroidData)l.flags&=2147483647;let s=[];for(let l of this.activeReplacements){let d=Math.pow(2,l.footprintTileId.canonical.z-e.canonical.z);for(let p of this.centroidData)if(!(p.flags&wc||l.min.x>p.max.x||p.min.x>l.max.x||l.min.y>p.max.y||p.min.y>l.max.y))for(let m=0;m<p.footprintSegLen;m++){let _=this.footprintSegments[p.footprintSegIdx+m];if(s.length=0,dP(this.footprintVertices,_.vertexOffset,_.vertexCount,l.footprintTileId.canonical,e.canonical,s),av(l.footprint,s,this.footprintIndices.uint16,_.indexOffset,_.indexCount,-_.vertexOffset,-d)){p.flags|=wc;break}}}for(let l of this.centroidData)this.writeCentroidToBuffer(l);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,n,o){let s=!1;for(let l=0;l<o.footprintSegLen;l++){let d=this.footprintSegments[o.footprintSegIdx+l],p=0;for(let m of d.ringIndices){for(let _=p,b=m+p-1;_<m+p;b=_++){let C=this.footprintVertices.int16[2*(_+d.vertexOffset)+0],O=this.footprintVertices.int16[2*(_+d.vertexOffset)+1],E=this.footprintVertices.int16[2*(b+d.vertexOffset)+1];O>n!=E>n&&e<(this.footprintVertices.int16[2*(b+d.vertexOffset)+0]-C)*(n-O)/(E-O)+C&&(s=!s)}p=m}}return s}getHeightAtTileCoord(e,n){let o=Number.NEGATIVE_INFINITY,s=!0,l=4*(e+ht)*ht+(n+ht);if(this.partLookup.hasOwnProperty(l)){let d=this.partLookup[l];return d?{height:d.height,hidden:!!(d.flags&wc)}:void 0}for(let d of this.centroidData)e>d.max.x||d.min.x>e||n>d.max.y||d.min.y>n||this.footprintContainsPoint(e,n,d)&&d&&d.height>o&&(o=d.height,this.partLookup[l]=d,s=!!(d.flags&wc));if(o!==Number.NEGATIVE_INFINITY)return{height:o,hidden:s};this.partLookup[l]=void 0}}function bv(t,e){let n=t.add(e)._unit();return t.x*n.x+t.y*n.y}function uP(t,e,n,o){let s=e.sub(t)._perp()._unit(),l=n.sub(e)._perp()._unit();return wv(t,e,n,bv(s,l),o)}function wv(t,e,n,o,s){let l=Math.sqrt(1-o*o);return Math.min(t.dist(e)/3,e.dist(n)/3,s*l/o)}function Y_(t,e,n){return t.x<n[0].x&&e.x<n[0].x||t.x>n[1].x&&e.x>n[1].x||t.y<n[0].y&&e.y<n[0].y||t.y>n[1].y&&e.y>n[1].y}function Cv(t,e){return t.x<e[0].x||t.x>e[1].x||t.y<e[0].y||t.y>e[1].y}function Mv(t,e,n){if(t.x<0||t.x>=ht||e.x<0||e.x>=ht||n.x<0||n.x>=ht)return!1;let o=n.sub(e),s=o.perp(),l=t.sub(e);return(o.x*l.x+o.y*l.y)/Math.sqrt((o.x*o.x+o.y*o.y)*(l.x*l.x+l.y*l.y))>-.866&&s.x*l.x+s.y*l.y<0}function Av(t,e,n){let o=e?2|t:-3&t;return n?1|o:-2&o}function Pv(){let t=Math.PI/32,e=Math.tan(t),n=Ee;return n*Math.sqrt(1+2*e*e)-n}function Ov(t,e,n){let o=1<<n.z,s=$t(n.x/o),l=$t((n.x+1)/o),d=Mn(n.y/o),p=Mn((n.y+1)/o);return function(m,_,b,C,O=0,E){let k=[];if(!m.length||!b||!C)return k;let R=(ie,de)=>{for(let me of ie)k.push({polygon:me,bounds:de})},L=Math.ceil(Math.log2(b)),V=Math.ceil(Math.log2(C)),Y=L-V,J=[];for(let ie=0;ie<Math.abs(Y);ie++)J.push(Y>0?0:1);for(let ie=0;ie<Math.min(L,V);ie++)J.push(0),J.push(1);let K=m;if(K=Mg(K,_[0].y-O,_[1].y+O,1),K=Mg(K,_[0].x-O,_[1].x+O,0),!K.length)return k;let ae=[];for(J.length?ae.push({polygons:K,bounds:_,depth:0}):R(K,_);ae.length;){let ie=ae.pop(),de=ie.depth,me=J[de],ve=ie.bounds[0],Pe=ie.bounds[1],be=me===0?ve.x:ve.y,Be=me===0?Pe.x:Pe.y,Ue=E?E(me,be,Be):.5*(be+Be),Ie=Mg(ie.polygons,be-O,Ue+O,me),je=Mg(ie.polygons,Ue-O,Be+O,me);if(Ie.length){let Se=[ve,new ut(me===0?Ue:Pe.x,me===1?Ue:Pe.y)];J.length>de+1?ae.push({polygons:Ie,bounds:Se,depth:de+1}):R(Ie,Se)}if(je.length){let Se=[new ut(me===0?Ue:ve.x,me===1?Ue:ve.y),Pe];J.length>de+1?ae.push({polygons:je,bounds:Se,depth:de+1}):R(je,Se)}}return k}(t,e,Math.ceil((l-s)/11.25),Math.ceil((d-p)/11.25),1,(m,_,b)=>{if(m===0)return .5*(_+b);{let C=Mn((n.y+_/ht)/o);return(Gt(.5*(Mn((n.y+b/ht)/o)+C))*o-n.y)*ht}})}function dP(t,e,n,o,s,l){let d=Math.pow(2,o.z-s.z);for(let p=0;p<n;p++){let m=t.int16[2*(p+e)+0],_=t.int16[2*(p+e)+1];m=(m+s.x*ht)*d-o.x*ht,_=(_+s.y*ht)*d-o.y*ht,l.push(new ut(m,_))}}xt(Tg,"FillExtrusionBucket",{omit:["layers","features"]}),xt(_v,"PartData"),xt(mv,"FootprintSegment"),xt(yv,"BorderCentroidData"),xt(vv,"GroundEffect");let hP=new bi({visibility:new at(Me["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new at(Me["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var pP={paint:new bi({"fill-extrusion-opacity":new at(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new at(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new at(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new at(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new at(Me["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new at(Me["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new at(Me["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new at(Me["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new at(Me["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new at(Me["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new at(Me["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Rt(Me["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new at(Me["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new at(Me["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new at(Me["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new at(Me["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new at(Me["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:hP};class qd extends ut{constructor(e,n,o){super(e,n),this.z=o}}function Pp(t,e){return t.x*e.x+t.y*e.y}function Tv(t,e){if(t.length===1){let n=0,o=e[n++],s;for(;!s||o.equals(s);)if(s=e[n++],!s)return 1/0;for(;n<e.length;n++){let l=e[n],d=t[0],p=s.sub(o),m=l.sub(o),_=d.sub(o),b=Pp(p,p),C=Pp(p,m),O=Pp(m,m),E=Pp(_,p),k=Pp(_,m),R=b*O-C*C,L=(O*E-C*k)/R,V=(b*k-C*E)/R,Y=o.z*(1-L-V)+s.z*L+l.z*V;if(isFinite(Y))return Y}return 1/0}{let n=1/0;for(let o of e)n=Math.min(n,o.z);return n}}function Sv(t,e,n,o,s,l,d,p){let m=d*s.getElevationAt(t,e,!0,!0),_=l[0]!==0,b=_?l[1]===0?d*(l[0]/7-450):d*function(C,O,E){let k=Math.floor(O[0]/8),R=Math.floor(O[1]/8),L=10*(O[0]-8*k),V=10*(O[1]-8*R),Y=C.getElevationAt(k,R,!0,!0),J=C.getMeterToDEM(E),K=Math.floor(.5*(L*J-1)),ae=Math.floor(.5*(V*J-1)),ie=C.tileCoordToPixel(k,R),de=2*K+1,me=2*ae+1,ve=function(je,Se,Ne,st,Ge){return[je.getElevationAtPixel(Se,Ne,!0),je.getElevationAtPixel(Se+Ge,Ne,!0),je.getElevationAtPixel(Se,Ne+Ge,!0),je.getElevationAtPixel(Se+st,Ne+Ge,!0)]}(C,ie.x-K,ie.y-ae,de,me),Pe=Math.abs(ve[0]-ve[1]),be=Math.abs(ve[2]-ve[3]),Be=Math.abs(ve[0]-ve[2])+Math.abs(ve[1]-ve[3]),Ue=Math.min(.25,.5*J*(Pe+be)/de),Ie=Math.min(.25,.5*J*Be/me);return Y+Math.max(Ue*L,Ie*V)}(s,l,p):m;return{base:m+(n===0)?-1:n,top:_?Math.max(b+o,m+n+2):m+o}}let fP=Hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:gP}=fP,mP=Hn([{name:"a_packed",components:4,type:"Float32"}]),{members:_P}=mP;class Ev{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.image=new vc({width:e,height:n}),this.positions={},this.uploaded=!1}getDash(e,n){let o=this.getKey(e,n);return this.positions[o]}trim(){let e=this.width,n=this.height=pa(this.nextRow);this.image.resize({width:e,height:n})}getKey(e,n){return e.join(",")+n}getDashRanges(e,n,o){let s=[],l=e.length%2==1?-e[e.length-1]*o:0,d=e[0]*o,p=!0;s.push({left:l,right:d,isDash:p,zeroLength:e[0]===0});let m=e[0];for(let _=1;_<e.length;_++){p=!p;let b=e[_];l=m*o,m+=b,d=m*o,s.push({left:l,right:d,isDash:p,zeroLength:b===0})}return s}addRoundDash(e,n,o){let s=n/2;for(let l=-o;l<=o;l++){let d=this.width*(this.nextRow+o+l),p=0,m=e[p];for(let _=0;_<this.width;_++){_/m.right>1&&(m=e[++p]);let b=Math.abs(_-m.left),C=Math.abs(_-m.right),O=Math.min(b,C),E,k=l/o*(s+1);if(m.isDash){let R=s-Math.abs(k);E=Math.sqrt(O*O+R*R)}else E=s-Math.sqrt(O*O+k*k);this.image.data[d+_]=Math.max(0,Math.min(255,E+128))}}}addRegularDash(e,n){for(let m=e.length-1;m>=0;--m){let _=e[m],b=e[m+1];_.zeroLength?e.splice(m,1):b&&b.isDash===_.isDash&&(b.left=_.left,e.splice(m,1))}let o=e[0],s=e[e.length-1];o.isDash===s.isDash&&(o.left=s.left-this.width,s.right=o.right+this.width);let l=this.width*this.nextRow,d=0,p=e[d];for(let m=0;m<this.width;m++){m/p.right>1&&(p=e[++d]);let _=Math.abs(m-p.left),b=Math.abs(m-p.right),C=Math.min(_,b);this.image.data[l+m]=Math.max(0,Math.min(255,(p.isDash?C:-C)+n+128))}}addDash(e,n){let o=this.getKey(e,n);if(this.positions[o])return this.positions[o];let s=n==="round",l=s?7:0,d=2*l+1;if(this.nextRow+d>this.height)return ci("LineAtlas out of space"),null;e.length===0&&e.push(1);let p=0;for(let b=0;b<e.length;b++)e[b]<0&&(ci("Negative value is found in line dasharray, replacing values with 0"),e[b]=0),p+=e[b];if(p!==0){let b=this.width/p,C=this.getDashRanges(e,this.width,b);s?this.addRoundDash(C,b,l):this.addRegularDash(C,n==="square"?.5*b:0)}let m=this.nextRow+l;this.nextRow+=d;let _={tl:[m,l],br:[p,0]};return this.positions[o]=_,_}}xt(Ev,"LineAtlas");let yP=Cg.types,xP=Math.cos(Math.PI/180*37.5);class X_{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new op,this.layoutVertexArray2=new Ls,this.indexArray=new ro,this.programConfigurations=new G(e.layers,e.zoom),this.segments=new Ii,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,o,s){this.hasPattern=$_("line",this.layers,n);let l=this.layers[0].layout.get("line-sort-key"),d=[];for(let{feature:b,id:C,index:O,sourceLayerIndex:E}of e){let k=this.layers[0]._featureFilter.needGeometry,R=qi(b,k);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),R,o))continue;let L=l?l.evaluate(R,{},o):void 0,V={id:C,properties:b.properties,type:b.type,sourceLayerIndex:E,index:O,geometry:k?R.geometry:so(b,o,s),patterns:{},sortKey:L};d.push(V)}l&&d.sort((b,C)=>b.sortKey-C.sortKey);let{lineAtlas:p,featureIndex:m}=n,_=this.addConstantDashes(p);for(let b of d){let{geometry:C,index:O,sourceLayerIndex:E}=b;if(_&&this.addFeatureDashes(b,p),this.hasPattern){let k=W_("line",this.layers,b,this.zoom,n);this.patternFeatures.push(k)}else this.addFeature(b,C,O,o,p.positions,n.availableImages,n.brightness);m.insert(e[O].feature,C,O,E,this.index)}}addConstantDashes(e){let n=!1;for(let o of this.layers){let s=o.paint.get("line-dasharray").value,l=o.layout.get("line-cap").value;if(s.kind!=="constant"||l.kind!=="constant")n=!0;else{let d=l.value,p=s.value;if(!p)continue;e.addDash(p,d)}}return n}addFeatureDashes(e,n){let o=this.zoom;for(let s of this.layers){let l=s.paint.get("line-dasharray").value,d=s.layout.get("line-cap").value;if(l.kind==="constant"&&d.kind==="constant")continue;let p,m;if(l.kind==="constant"){if(p=l.value,!p)continue}else p=l.evaluate({zoom:o},e);m=d.kind==="constant"?d.value:d.evaluate({zoom:o},e),n.addDash(p,m),e.patterns[s.id]=n.getKey(p,m)}}update(e,n,o,s,l){let d=Object.keys(e).length!==0;d&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,n,d?this.stateDependentLayers:this.layers,o,s,l)}addFeatures(e,n,o,s,l,d){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,n,o,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,_P)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gP),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,o,s,l,d,p){let m=this.layers[0].layout,_=m.get("line-join").evaluate(e,{}),b=m.get("line-cap").evaluate(e,{}),C=m.get("line-miter-limit"),O=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(let E of n)this.addLine(E,e,_,b,C,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,l,d,s,p)}addLine(e,n,o,s,l,d){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let V=0;V<e.length-1;V++)this.totalDistance+=e[V].dist(e[V+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let p=yP[n.type]==="Polygon",m=e.length;for(;m>=2&&e[m-1].equals(e[m-2]);)m--;let _=0;for(;_<m-1&&e[_].equals(e[_+1]);)_++;if(m<(p?3:2))return;o==="bevel"&&(l=1.05);let b=this.overscaling<=16?15*ht/(512*this.overscaling):0,C=this.segments.prepareSegment(10*m,this.layoutVertexArray,this.indexArray),O,E,k,R,L;this.e1=this.e2=-1,p&&(O=e[m-2],L=e[_].sub(O)._unit()._perp());for(let V=_;V<m;V++){if(k=V===m-1?p?e[_+1]:void 0:e[V+1],k&&e[V].equals(k))continue;L&&(R=L),O&&(E=O),O=e[V],L=k?k.sub(O)._unit()._perp():R,R=R||L;let Y=R.add(L);Y.x===0&&Y.y===0||Y._unit();let J=R.x*L.x+R.y*L.y,K=Y.x*L.x+Y.y*L.y,ae=K!==0?1/K:1/0,ie=2*Math.sqrt(2-2*K),de=K<xP&&E&&k,me=R.x*L.y-R.y*L.x>0;if(de&&V>_){let be=O.dist(E);if(be>2*b){let Be=O.sub(O.sub(E)._mult(b/be)._round());this.updateDistance(E,Be),this.addCurrentVertex(Be,R,0,0,C),E=Be}}let ve=E&&k,Pe=ve?o:p?"butt":s;if(ve&&Pe==="round"&&(ae<d?Pe="miter":ae<=2&&(Pe="fakeround")),Pe==="miter"&&ae>l&&(Pe="bevel"),Pe==="bevel"&&(ae>2&&(Pe="flipbevel"),ae<l&&(Pe="miter")),E&&this.updateDistance(E,O),Pe==="miter")Y._mult(ae),this.addCurrentVertex(O,Y,0,0,C);else if(Pe==="flipbevel"){if(ae>100)Y=L.mult(-1);else{let be=ae*R.add(L).mag()/R.sub(L).mag();Y._perp()._mult(be*(me?-1:1))}this.addCurrentVertex(O,Y,0,0,C),this.addCurrentVertex(O,Y.mult(-1),0,0,C)}else if(Pe==="bevel"||Pe==="fakeround"){let be=-Math.sqrt(ae*ae-1),Be=me?be:0,Ue=me?0:be;if(E&&this.addCurrentVertex(O,R,Be,Ue,C),Pe==="fakeround"){let Ie=Math.round(180*ie/Math.PI/20);for(let je=1;je<Ie;je++){let Se=je/Ie;if(Se!==.5){let st=Se-.5;Se+=Se*st*(Se-1)*((1.0904+J*(J*(3.55645-1.43519*J)-3.2452))*st*st+(.848013+J*(.215638*J-1.06021)))}let Ne=L.sub(R)._mult(Se)._add(R)._unit()._mult(me?-1:1);this.addHalfVertex(O,Ne.x,Ne.y,!1,me,0,C)}}k&&this.addCurrentVertex(O,L,-Be,-Ue,C)}else if(Pe==="butt")this.addCurrentVertex(O,Y,0,0,C);else if(Pe==="square"){let be=E?1:-1;E||this.addCurrentVertex(O,Y,be,be,C),this.addCurrentVertex(O,Y,0,0,C),E&&this.addCurrentVertex(O,Y,be,be,C)}else Pe==="round"&&(E&&(this.addCurrentVertex(O,R,0,0,C),this.addCurrentVertex(O,R,1,1,C,!0)),k&&(this.addCurrentVertex(O,L,-1,-1,C,!0),this.addCurrentVertex(O,L,0,0,C)));if(de&&V<m-1){let be=O.dist(k);if(be>2*b){let Be=O.add(k.sub(O)._mult(b/be)._round());this.updateDistance(O,Be),this.addCurrentVertex(Be,L,0,0,C),O=Be}}}}addCurrentVertex(e,n,o,s,l,d=!1){let p=n.y*s-n.x,m=-n.y-n.x*s;this.addHalfVertex(e,n.x+n.y*o,n.y-n.x*o,d,!1,o,l),this.addHalfVertex(e,p,m,d,!0,-s,l)}addHalfVertex({x:e,y:n},o,s,l,d,p,m){this.layoutVertexArray.emplaceBack((e<<1)+(l?1:0),(n<<1)+(d?1:0),Math.round(63*o)+128,Math.round(63*s)+128,1+(p===0?0:p<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);let _=m.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_),m.primitiveLength++),d?this.e2=_:this.e1=_}updateScaledDistance(){if(this.lineClips){let e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}xt(X_,"LineBucket",{omit:["layers","patternFeatures"]});let vP=new bi({"line-cap":new Rt(Me.layout_line["line-cap"]),"line-join":new Rt(Me.layout_line["line-join"]),"line-miter-limit":new at(Me.layout_line["line-miter-limit"]),"line-round-limit":new at(Me.layout_line["line-round-limit"]),"line-sort-key":new Rt(Me.layout_line["line-sort-key"]),visibility:new at(Me.layout_line.visibility)});var Iv={paint:new bi({"line-opacity":new Rt(Me.paint_line["line-opacity"]),"line-color":new Rt(Me.paint_line["line-color"]),"line-translate":new at(Me.paint_line["line-translate"]),"line-translate-anchor":new at(Me.paint_line["line-translate-anchor"]),"line-width":new Rt(Me.paint_line["line-width"]),"line-gap-width":new Rt(Me.paint_line["line-gap-width"]),"line-offset":new Rt(Me.paint_line["line-offset"]),"line-blur":new Rt(Me.paint_line["line-blur"]),"line-dasharray":new Rt(Me.paint_line["line-dasharray"]),"line-pattern":new Rt(Me.paint_line["line-pattern"]),"line-gradient":new Ml(Me.paint_line["line-gradient"]),"line-trim-offset":new at(Me.paint_line["line-trim-offset"]),"line-emissive-strength":new at(Me.paint_line["line-emissive-strength"]),"line-border-width":new Rt(Me.paint_line["line-border-width"]),"line-border-color":new Rt(Me.paint_line["line-border-color"])}),layout:vP};function Dv(t,e,n){return e*(ht/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}function kv(t,e){return 1/Dv(t,1,e.tileZoom)}function Rv(t,e,n,o){return t.translatePosMatrix(o||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}let zv=t=>{let e=[];Bv(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");let n=t.paint.get("line-trim-offset");return n[0]===0&&n[1]===0||e.push("RENDER_LINE_TRIM_OFFSET"),t.paint.get("line-border-width").constantOr(1)!==0&&e.push("RENDER_LINE_BORDER"),e};function Bv(t){let e=t.paint.get("line-dasharray").value;return e.value||e.kind!=="constant"}let Fv=new class extends Rt{possiblyEvaluate(t,e){return e=new vi(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,o){return e=to({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,o)}}(Iv.paint.properties["line-width"].specification);function Lv(t,e){return e>0?e+2*t:t}Fv.useIntegerZoom=!0;let bP=Hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wP=Hn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),CP=Hn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let MP=Hn([{name:"a_z_offset",components:1,type:"Float32"}],4),AP=Hn([{name:"a_texb",components:2,type:"Uint16"}]),PP=Hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),OP=Hn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);Hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Nv=Hn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),TP=Hn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Hn([{name:"triangle",components:3,type:"Uint16"}]),Hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Hn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Hn([{type:"Float32",name:"offsetX"}]),Hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ao=24;let rs=128;function Q_(t,e){let{expression:n}=e;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new vi(t+1))};if(n.kind==="source")return{kind:"source"};{let{zoomStops:o,interpolationType:s}=n,l=0;for(;l<o.length&&o[l]<=t;)l++;l=Math.max(0,l-1);let d=l;for(;d<o.length&&o[d]<t+1;)d++;d=Math.min(o.length-1,d);let p=o[l],m=o[d];return n.kind==="composite"?{kind:"composite",minZoom:p,maxZoom:m,interpolationType:s}:{kind:"camera",minZoom:p,maxZoom:m,minSize:n.evaluate(new vi(p)),maxSize:n.evaluate(new vi(m)),interpolationType:s}}}function Sg(t,{uSize:e,uSizeT:n},{lowerSize:o,upperSize:s}){return t.kind==="source"?o/rs:t.kind==="composite"?gn(o/rs,s/rs,n):e}function Yd(t,e){let n=0,o=0;if(t.kind==="constant")o=t.layoutSize;else if(t.kind!=="source"){let{interpolationType:s,minZoom:l,maxZoom:d}=t,p=s?on(Uo.interpolationFactor(s,e,l,d),0,1):0;t.kind==="camera"?o=gn(t.minSize,t.maxSize,p):n=p}return{uSizeT:n,uSize:o}}var SP=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:rs,evaluateSizeForFeature:Sg,evaluateSizeForZoom:Yd,getSizeData:Q_});function EP(t,e,n){return t.sections.forEach(o=>{o.text=function(s,l,d){let p=l.layout.get("text-transform").evaluate(d,{});return p==="uppercase"?s=s.toLocaleUpperCase():p==="lowercase"&&(s=s.toLocaleLowerCase()),br.applyArabicShaping&&(s=br.applyArabicShaping(s)),s}(o.text,e,n)}),t}let Op={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function IP(t){return t==="\uFE36"||t==="\uFE48"||t==="\uFE38"||t==="\uFE44"||t==="\uFE42"||t==="\uFE3E"||t==="\uFE3C"||t==="\uFE3A"||t==="\uFE18"||t==="\uFE40"||t==="\uFE10"||t==="\uFE13"||t==="\uFE14"||t==="\uFF40"||t==="\uFFE3"||t==="\uFE11"||t==="\uFE12"}function DP(t){return t==="\uFE35"||t==="\uFE47"||t==="\uFE37"||t==="\uFE43"||t==="\uFE41"||t==="\uFE3D"||t==="\uFE3B"||t==="\uFE39"||t==="\uFE17"||t==="\uFE3F"}var kP={read:function(t,e,n,o,s){var l,d,p=8*s-o-1,m=(1<<p)-1,_=m>>1,b=-7,C=n?s-1:0,O=n?-1:1,E=t[e+C];for(C+=O,l=E&(1<<-b)-1,E>>=-b,b+=p;b>0;l=256*l+t[e+C],C+=O,b-=8);for(d=l&(1<<-b)-1,l>>=-b,b+=o;b>0;d=256*d+t[e+C],C+=O,b-=8);if(l===0)l=1-_;else{if(l===m)return d?NaN:1/0*(E?-1:1);d+=Math.pow(2,o),l-=_}return(E?-1:1)*d*Math.pow(2,l-o)},write:function(t,e,n,o,s,l){var d,p,m,_=8*l-s-1,b=(1<<_)-1,C=b>>1,O=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:l-1,k=o?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(p=isNaN(e)?1:0,d=b):(d=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-d))<1&&(d--,m*=2),(e+=d+C>=1?O/m:O*Math.pow(2,1-C))*m>=2&&(d++,m/=2),d+C>=b?(p=0,d=b):d+C>=1?(p=(e*m-1)*Math.pow(2,s),d+=C):(p=e*Math.pow(2,C-1)*Math.pow(2,s),d=0));s>=8;t[n+E]=255&p,E+=k,p/=256,s-=8);for(d=d<<s|p,_+=s;_>0;t[n+E]=255&d,E+=k,d/=256,_-=8);t[n+E-k]|=128*R}},Vv=fi,Eg=kP;function fi(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}fi.Varint=0,fi.Fixed64=1,fi.Bytes=2,fi.Fixed32=5;var K_=4294967296,jv=1/K_,Uv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dl(t){return t.type===fi.Bytes?t.readVarint()+t.pos:t.pos+1}function Xd(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Gv(t,e,n){var o=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(o);for(var s=n.pos-1;s>=t;s--)n.buf[s+o]=n.buf[s]}function RP(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function zP(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function BP(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function FP(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function LP(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function NP(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function VP(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function jP(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function UP(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Ig(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Qd(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Hv(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}fi.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var o=this.readVarint(),s=o>>3,l=this.pos;this.type=7&o,t(s,e,this),this.pos===l&&this.skip(o)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Ig(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Hv(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Ig(this.buf,this.pos)+Ig(this.buf,this.pos+4)*K_;return this.pos+=8,t},readSFixed64:function(){var t=Ig(this.buf,this.pos)+Hv(this.buf,this.pos+4)*K_;return this.pos+=8,t},readFloat:function(){var t=Eg.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Eg.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,o=this.buf;return e=127&(n=o[this.pos++]),n<128?e:(e|=(127&(n=o[this.pos++]))<<7,n<128?e:(e|=(127&(n=o[this.pos++]))<<14,n<128?e:(e|=(127&(n=o[this.pos++]))<<21,n<128?e:function(s,l,d){var p,m,_=d.buf;if(p=(112&(m=_[d.pos++]))>>4,m<128||(p|=(127&(m=_[d.pos++]))<<3,m<128)||(p|=(127&(m=_[d.pos++]))<<10,m<128)||(p|=(127&(m=_[d.pos++]))<<17,m<128)||(p|=(127&(m=_[d.pos++]))<<24,m<128)||(p|=(1&(m=_[d.pos++]))<<31,m<128))return Xd(s,p,l);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=o[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Uv?function(n,o,s){return Uv.decode(n.subarray(o,s))}(this.buf,e,t):function(n,o,s){for(var l="",d=o;d<s;){var p,m,_,b=n[d],C=null,O=b>239?4:b>223?3:b>191?2:1;if(d+O>s)break;O===1?b<128&&(C=b):O===2?(192&(p=n[d+1]))==128&&(C=(31&b)<<6|63&p)<=127&&(C=null):O===3?(m=n[d+2],(192&(p=n[d+1]))==128&&(192&m)==128&&((C=(15&b)<<12|(63&p)<<6|63&m)<=2047||C>=55296&&C<=57343)&&(C=null)):O===4&&(m=n[d+2],_=n[d+3],(192&(p=n[d+1]))==128&&(192&m)==128&&(192&_)==128&&((C=(15&b)<<18|(63&p)<<12|(63&m)<<6|63&_)<=65535||C>=1114112)&&(C=null)),C===null?(C=65533,O=1):C>65535&&(C-=65536,l+=String.fromCharCode(C>>>10&1023|55296),C=56320|1023&C),l+=String.fromCharCode(C),d+=O}return l}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==fi.Bytes)return t.push(this.readVarint(e));var n=Dl(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==fi.Bytes)return t.push(this.readSVarint());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==fi.Bytes)return t.push(this.readBoolean());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==fi.Bytes)return t.push(this.readFloat());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==fi.Bytes)return t.push(this.readDouble());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==fi.Bytes)return t.push(this.readFixed32());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==fi.Bytes)return t.push(this.readSFixed32());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==fi.Bytes)return t.push(this.readFixed64());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==fi.Bytes)return t.push(this.readSFixed64());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===fi.Varint)for(;this.buf[this.pos++]>127;);else if(e===fi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===fi.Fixed32)this.pos+=4;else{if(e!==fi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Qd(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Qd(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Qd(this.buf,-1&t,this.pos),Qd(this.buf,Math.floor(t*jv),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Qd(this.buf,-1&t,this.pos),Qd(this.buf,Math.floor(t*jv),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,n){var o,s;if(e>=0?(o=e%4294967296|0,s=e/4294967296|0):(s=~(-e/4294967296),4294967295^(o=~(-e%4294967296))?o=o+1|0:(o=0,s=s+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(l,d,p){p.buf[p.pos++]=127&l|128,l>>>=7,p.buf[p.pos++]=127&l|128,l>>>=7,p.buf[p.pos++]=127&l|128,l>>>=7,p.buf[p.pos++]=127&l|128,p.buf[p.pos]=127&(l>>>=7)}(o,0,n),function(l,d){var p=(7&l)<<4;d.buf[d.pos++]|=p|((l>>>=3)?128:0),l&&(d.buf[d.pos++]=127&l|((l>>>=7)?128:0),l&&(d.buf[d.pos++]=127&l|((l>>>=7)?128:0),l&&(d.buf[d.pos++]=127&l|((l>>>=7)?128:0),l&&(d.buf[d.pos++]=127&l|((l>>>=7)?128:0),l&&(d.buf[d.pos++]=127&l)))))}(s,n)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(o,s,l){for(var d,p,m=0;m<s.length;m++){if((d=s.charCodeAt(m))>55295&&d<57344){if(!p){d>56319||m+1===s.length?(o[l++]=239,o[l++]=191,o[l++]=189):p=d;continue}if(d<56320){o[l++]=239,o[l++]=191,o[l++]=189,p=d;continue}d=p-55296<<10|d-56320|65536,p=null}else p&&(o[l++]=239,o[l++]=191,o[l++]=189,p=null);d<128?o[l++]=d:(d<2048?o[l++]=d>>6|192:(d<65536?o[l++]=d>>12|224:(o[l++]=d>>18|240,o[l++]=d>>12&63|128),o[l++]=d>>6&63|128),o[l++]=63&d|128)}return l}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Gv(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Eg.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Eg.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var o=this.pos-n;o>=128&&Gv(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeMessage:function(t,e,n){this.writeTag(t,fi.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,RP,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,zP,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,LP,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,BP,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,FP,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,NP,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,VP,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,jP,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,UP,e)},writeBytesField:function(t,e){this.writeTag(t,fi.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,fi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,fi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,fi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,fi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,fi.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,fi.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,fi.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,fi.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,fi.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var Kd=lo(Vv);let J_=3;function GP(t,e,n){e.glyphs=[],t===1&&n.readMessage(HP,e)}function HP(t,e,n){if(t===3){let{id:o,bitmap:s,width:l,height:d,left:p,top:m,advance:_}=n.readMessage($P,{});e.glyphs.push({id:o,bitmap:new vc({width:l+2*J_,height:d+2*J_},s),metrics:{width:l,height:d,left:p,top:m,advance:_}})}else t===4?e.ascender=n.readSVarint():t===5&&(e.descender=n.readSVarint())}function $P(t,e,n){t===1?e.id=n.readVarint():t===2?e.bitmap=n.readBytes():t===3?e.width=n.readVarint():t===4?e.height=n.readVarint():t===5?e.left=n.readSVarint():t===6?e.top=n.readSVarint():t===7&&(e.advance=n.readVarint())}let $v=J_,ta={horizontal:1,vertical:2,horizontalOnly:3};class Tp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){let o=new Tp;return o.scale=e||1,o.fontStack=n,o}static forImage(e){let n=new Tp;return n.imageName=e,n}}class Jd{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){let o=new Jd;for(let s=0;s<e.sections.length;s++){let l=e.sections[s];l.image?o.addImageSection(l):o.addTextSection(l,n)}return o}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(n,o){let s="";for(let l=0;l<n.length;l++){let d=n.charCodeAt(l+1)||null,p=n.charCodeAt(l-1)||null;s+=!o&&(d&&Lf(d)&&!Op[n[l+1]]||p&&Lf(p)&&!Op[n[l-1]])||!Op[n[l]]?n[l]:Op[n[l]]}return s}(this.text,e)}trim(){let e=0;for(let o=0;o<this.text.length&&Dg[this.text.charCodeAt(o)];o++)e++;let n=this.text.length;for(let o=this.text.length-1;o>=0&&o>=e&&Dg[this.text.charCodeAt(o)];o--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){let o=new Jd;return o.text=this.text.substring(e,n),o.sectionIndex=this.sectionIndex.slice(e,n),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(Tp.forText(e.scale,e.fontStack||n));let o=this.sections.length-1;for(let s=0;s<e.text.length;++s)this.sectionIndex.push(o)}addImageSection(e){let n=e.image?e.image.namePrimary:"";if(n.length===0)return void ci("Can't add FormattedSection with an empty image.");let o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCodePoint(o),this.sections.push(Tp.forImage(n)),this.sectionIndex.push(this.sections.length-1)):ci("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function e0(t,e,n,o,s,l,d,p,m,_,b,C,O,E,k){let R=Jd.fromFeature(t,s);C===ta.vertical&&R.verticalizePunctuation(O);let L=[],V=function(ie,de,me,ve,Pe,be){if(!ie)return[];let Be=[],Ue=function(Ne,st,Ge,bt,mt,qe){let Nt=0;for(let Tt=0;Tt<Ne.length();Tt++){let vt=Ne.getSection(Tt);Nt+=Wv(Ne.getCodePoint(Tt),vt,bt,mt,st,qe)}return Nt/Math.max(1,Math.ceil(Nt/Ge))}(ie,de,me,ve,Pe,be),Ie=ie.text.indexOf("\u200B")>=0,je=0;for(let Ne=0;Ne<ie.length();Ne++){let st=ie.getSection(Ne),Ge=ie.getCodePoint(Ne);if(Dg[Ge]||(je+=Wv(Ge,st,ve,Pe,de,be)),Ne<ie.length()-1){let bt=!((Se=Ge)<11904||!(Mt["Bopomofo Extended"](Se)||Mt.Bopomofo(Se)||Mt["CJK Compatibility Forms"](Se)||Mt["CJK Compatibility Ideographs"](Se)||Mt["CJK Compatibility"](Se)||Mt["CJK Radicals Supplement"](Se)||Mt["CJK Strokes"](Se)||Mt["CJK Symbols and Punctuation"](Se)||Mt["CJK Unified Ideographs Extension A"](Se)||Mt["CJK Unified Ideographs"](Se)||Mt["Enclosed CJK Letters and Months"](Se)||Mt["Halfwidth and Fullwidth Forms"](Se)||Mt.Hiragana(Se)||Mt["Ideographic Description Characters"](Se)||Mt["Kangxi Radicals"](Se)||Mt["Katakana Phonetic Extensions"](Se)||Mt.Katakana(Se)||Mt["Vertical Forms"](Se)||Mt["Yi Radicals"](Se)||Mt["Yi Syllables"](Se)));(WP[Ge]||bt||st.imageName)&&Be.push(qv(Ne+1,je,Ue,Be,ZP(Ge,ie.getCodePoint(Ne+1),bt&&Ie),!1))}}var Se;return Yv(qv(ie.length(),je,Ue,Be,0,!0))}(R,_,l,e,o,E),{processBidirectionalText:Y,processStyledBidirectionalText:J}=br;if(Y&&R.sections.length===1){let ie=Y(R.toString(),V);for(let de of ie){let me=new Jd;me.text=de,me.sections=R.sections;for(let ve=0;ve<de.length;ve++)me.sectionIndex.push(0);L.push(me)}}else if(J){let ie=J(R.text,R.sectionIndex,V);for(let de of ie){let me=new Jd;me.text=de[0],me.sectionIndex=de[1],me.sections=R.sections,L.push(me)}}else L=function(ie,de){let me=[],ve=ie.text,Pe=0;for(let be of de)me.push(ie.substring(Pe,be)),Pe=be;return Pe<ve.length&&me.push(ie.substring(Pe,ve.length)),me}(R,V);let K=[],ae={positionedLines:K,text:R.toString(),top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:C,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ie,de,me,ve,Pe,be,Be,Ue,Ie,je,Se,Ne){let st=0,Ge=0,bt=0,mt=Ue==="right"?1:Ue==="left"?0:.5,qe=!1;for(let tn of Pe){let Vt=tn.getSections();for(let nn of Vt){if(nn.imageName)continue;let Ht=de[nn.fontStack];if(Ht&&(qe=Ht.ascender!==void 0&&Ht.descender!==void 0,!qe))break}if(!qe)break}let Nt=0;for(let tn of Pe){tn.trim();let Vt=tn.getMaxScale(),nn=(Vt-1)*Ao,Ht={positionedGlyphs:[],lineOffset:0};ie.positionedLines[Nt]=Ht;let xn=Ht.positionedGlyphs,qt=0;if(!tn.length()){Ge+=be,++Nt;continue}let ei=0,In=0;for(let Nn=0;Nn<tn.length();Nn++){let Dn=tn.getSection(Nn),gi=tn.getSectionIndex(Nn),Zn=tn.getCodePoint(Nn),Di=Dn.scale,Ji=null,vo=null,hi=null,Mi=Ao,fo=0,go=!(Ie===ta.horizontal||!Se&&!Uh(Zn)||Se&&(Dg[Zn]||(Tt=Zn,Mt.Arabic(Tt)||Mt["Arabic Supplement"](Tt)||Mt["Arabic Extended-A"](Tt)||Mt["Arabic Presentation Forms-A"](Tt)||Mt["Arabic Presentation Forms-B"](Tt))));if(Dn.imageName){let mo=ve[Dn.imageName];if(!mo)continue;hi=Dn.imageName,ie.iconsInText=ie.iconsInText||!0,vo=mo.paddedRect;let li=mo.displaySize;Di=Di*Ao/Ne,Ji={width:li[0],height:li[1],left:0,top:-$v,advance:go?li[1]:li[0],localGlyph:!1},fo=qe?-Ji.height*Di:Vt*Ao-17-li[1]*Di,Mi=Ji.advance;let kr=(go?li[0]:li[1])*Di-Ao*Vt;kr>0&&kr>qt&&(qt=kr)}else{let mo=me[Dn.fontStack];if(!mo)continue;mo[Zn]&&(vo=mo[Zn]);let li=de[Dn.fontStack];if(!li)continue;let kr=li.glyphs[Zn];if(!kr)continue;if(Ji=kr.metrics,Mi=Zn!==8203?Ao:0,qe){let Sc=li.ascender!==void 0?Math.abs(li.ascender):0,sr=li.descender!==void 0?Math.abs(li.descender):0,$o=(Sc+sr)*Di;ei<$o&&(ei=$o,In=(Sc-sr)/2*Di),fo=-Sc*Di}else fo=(Vt-Di)*Ao-17}go?(ie.verticalizable=!0,xn.push({glyph:Zn,imageName:hi,x:st,y:Ge+fo,vertical:go,scale:Di,localGlyph:Ji.localGlyph,fontStack:Dn.fontStack,sectionIndex:gi,metrics:Ji,rect:vo}),st+=Mi*Di+je):(xn.push({glyph:Zn,imageName:hi,x:st,y:Ge+fo,vertical:go,scale:Di,localGlyph:Ji.localGlyph,fontStack:Dn.fontStack,sectionIndex:gi,metrics:Ji,rect:vo}),st+=Ji.advance*Di+je)}xn.length!==0&&(bt=Math.max(st-je,bt),qe?Xv(xn,mt,qt,In,be*Vt/2):Xv(xn,mt,qt,0,be/2)),st=0;let zn=be*Vt+qt;Ht.lineOffset=Math.max(qt,nn),Ge+=zn,++Nt}var Tt;let vt=Ge,{horizontalAlign:Ye,verticalAlign:Bt}=t0(Be);(function(tn,Vt,nn,Ht,xn,qt){let ei=(Vt-nn)*xn,In=-qt*Ht;for(let zn of tn)for(let Nn of zn.positionedGlyphs)Nn.x+=ei,Nn.y+=In})(ie.positionedLines,mt,Ye,Bt,bt,vt),ie.top+=-Bt*vt,ie.bottom=ie.top+vt,ie.left+=-Ye*bt,ie.right=ie.left+bt,ie.hasBaseline=qe}(ae,e,n,o,L,d,p,m,C,_,O,k),!function(ie){for(let de of ie)if(de.positionedGlyphs.length!==0)return!1;return!0}(K)&&ae}let Dg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},WP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Wv(t,e,n,o,s,l){if(e.imageName){let d=o[e.imageName];return d?d.displaySize[0]*e.scale*Ao/l+s:0}{let d=n[e.fontStack],p=d&&d.glyphs[t];return p?p.metrics.advance*e.scale+s:0}}function Zv(t,e,n,o){let s=Math.pow(t-e,2);return o?t<e?s/2:2*s:s+Math.abs(n)*n}function ZP(t,e,n){let o=0;return t===10&&(o-=1e4),n&&(o+=150),t!==40&&t!==65288||(o+=50),e!==41&&e!==65289||(o+=50),o}function qv(t,e,n,o,s,l){let d=null,p=Zv(e,n,s,l);for(let m of o){let _=Zv(e-m.x,n,s,l)+m.badness;_<=p&&(d=m,p=_)}return{index:t,x:e,priorBreak:d,badness:p}}function Yv(t){return t?Yv(t.priorBreak).concat(t.index):[]}function t0(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Xv(t,e,n,o,s){if(!(e||n||o||s))return;let l=t.length-1,d=t[l],p=(d.x+d.metrics.advance*d.scale)*e;for(let m=0;m<=l;m++)t[m].x-=p,t[m].y+=n+o+s}function qP(t,e,n,o){let{horizontalAlign:s,verticalAlign:l}=t0(o),d=n[0]-t.displaySize[0]*s,p=n[1]-t.displaySize[1]*l;return{imagePrimary:t,imageSecondary:e,top:p,bottom:p+t.displaySize[1],left:d,right:d+t.displaySize[0]}}function Qv(t,e,n,o,s,l){let d=t.imagePrimary,p;if(d.content){let L=d.content,V=d.pixelRatio||1;p=[L[0]/V,L[1]/V,d.displaySize[0]-L[2]/V,d.displaySize[1]-L[3]/V]}let m=e.left*l,_=e.right*l,b,C,O,E;n==="width"||n==="both"?(E=s[0]+m-o[3],C=s[0]+_+o[1]):(E=s[0]+(m+_-d.displaySize[0])/2,C=E+d.displaySize[0]);let k=e.top*l,R=e.bottom*l;return n==="height"||n==="both"?(b=s[1]+k-o[0],O=s[1]+R+o[2]):(b=s[1]+(k+R-d.displaySize[1])/2,O=b+d.displaySize[1]),{imagePrimary:d,imageSecondary:void 0,top:b,right:C,bottom:O,left:E,collisionPadding:p}}class kl extends ut{constructor(e,n,o,s,l){super(e,n),this.angle=s,this.z=o,l!==void 0&&(this.segment=l)}clone(){return new kl(this.x,this.y,this.z,this.angle,this.segment)}}function Kv(t,e,n,o,s){if(e.segment===void 0)return!0;let l=e,d=e.segment+1,p=0;for(;p>-n/2;){if(d--,d<0)return!1;p-=t[d].dist(l),l=t[d]}p+=t[d].dist(t[d+1]),d++;let m=[],_=0;for(;p<n/2;){let b=t[d],C=t[d+1];if(!C)return!1;let O=t[d-1].angleTo(b)-b.angleTo(C);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),m.push({distance:p,angleDelta:O}),_+=O;p-m[0].distance>o;)_-=m.shift().angleDelta;if(_>s)return!1;d++,p+=b.dist(C)}return!0}function Jv(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function eb(t,e,n){return t?.6*e*n:0}function tb(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function YP(t,e,n,o,s,l){let d=eb(n,s,l),p=tb(n,o)*l,m=0,_=Jv(t)/2;for(let b=0;b<t.length-1;b++){let C=t[b],O=t[b+1],E=C.dist(O);if(m+E>_){let k=(_-m)/E,R=gn(C.x,O.x,k),L=gn(C.y,O.y,k),V=new kl(R,L,0,O.angleTo(C),b);return!d||Kv(t,V,p,d,e)?V:void 0}m+=E}}function XP(t,e,n,o,s,l,d,p,m){let _=eb(o,l,d),b=tb(o,s),C=b*d,O=t[0].x===0||t[0].x===m||t[0].y===0||t[0].y===m;return e-C<e/4&&(e=C+e/4),nb(t,O?e/2*p%e:(b/2+2*l)*d*p%e,e,_,n,C,O,!1,m)}function nb(t,e,n,o,s,l,d,p,m){let _=l/2,b=Jv(t),C=0,O=e-n,E=[];for(let k=0;k<t.length-1;k++){let R=t[k],L=t[k+1],V=R.dist(L),Y=L.angleTo(R);for(;O+n<C+V;){O+=n;let J=(O-C)/V,K=gn(R.x,L.x,J),ae=gn(R.y,L.y,J);if(K>=0&&K<m&&ae>=0&&ae<m&&O-_>=0&&O+_<=b){let ie=new kl(K,ae,0,Y,k);o&&!Kv(t,ie,l,o,s)||E.push(ie)}}C+=V}return p||E.length||d||(E=nb(t,C/2,n,o,s,l,d,!0,m)),E}function ib(t,e,n,o,s){let l=[];for(let d=0;d<t.length;d++){let p=t[d],m;for(let _=0;_<p.length-1;_++){let b=p[_],C=p[_+1];b.x<e&&C.x<e||(b.x<e?b=new ut(e,b.y+(e-b.x)/(C.x-b.x)*(C.y-b.y))._round():C.x<e&&(C=new ut(e,b.y+(e-b.x)/(C.x-b.x)*(C.y-b.y))._round()),b.y<n&&C.y<n||(b.y<n?b=new ut(b.x+(n-b.y)/(C.y-b.y)*(C.x-b.x),n)._round():C.y<n&&(C=new ut(b.x+(n-b.y)/(C.y-b.y)*(C.x-b.x),n)._round()),b.x>=o&&C.x>=o||(b.x>=o?b=new ut(o,b.y+(o-b.x)/(C.x-b.x)*(C.y-b.y))._round():C.x>=o&&(C=new ut(o,b.y+(o-b.x)/(C.x-b.x)*(C.y-b.y))._round()),b.y>=s&&C.y>=s||(b.y>=s?b=new ut(b.x+(s-b.y)/(C.y-b.y)*(C.x-b.x),s)._round():C.y>=s&&(C=new ut(b.x+(s-b.y)/(C.y-b.y)*(C.x-b.x),s)._round()),m&&b.equals(m[m.length-1])||(m=[b],l.push(m)),m.push(C)))))}}return l}function ob(t){let e=0,n=0;for(let d of t)e+=d.w*d.h,n=Math.max(n,d.w);t.sort((d,p)=>p.h-d.h);let o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,l=0;for(let d of t)for(let p=o.length-1;p>=0;p--){let m=o[p];if(!(d.w>m.w||d.h>m.h)){if(d.x=m.x,d.y=m.y,l=Math.max(l,d.y+d.h),s=Math.max(s,d.x+d.w),d.w===m.w&&d.h===m.h){let _=o.pop();p<o.length&&(o[p]=_)}else d.h===m.h?(m.x+=d.w,m.w-=d.w):d.w===m.w?(m.y+=d.h,m.h-=d.h):(o.push({x:m.x+d.w,y:m.y,w:m.w-d.w,h:d.h}),m.y+=d.h,m.h-=d.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}xt(kl,"Anchor");let Dr=1;class n0{constructor(e,{pixelRatio:n,version:o,stretchX:s,stretchY:l,content:d}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=s,this.stretchY=l,this.content=d,this.version=o}get tl(){return[this.paddedRect.x+Dr,this.paddedRect.y+Dr]}get br(){return[this.paddedRect.x+this.paddedRect.w-Dr,this.paddedRect.y+this.paddedRect.h-Dr]}get displaySize(){return[(this.paddedRect.w-2*Dr)/this.pixelRatio,(this.paddedRect.h-2*Dr)/this.pixelRatio]}}class rb{constructor(e,n){let o={},s={};this.haveRenderCallbacks=[];let l=[];this.addImages(e,o,l),this.addImages(n,s,l);let{w:d,h:p}=ob(l),m=new ea({width:d||1,height:p||1});for(let _ in e){let b=e[_],C=o[_].paddedRect;ea.copy(b.data,m,{x:0,y:0},{x:C.x+Dr,y:C.y+Dr},b.data,b.sdf)}for(let _ in n){let b=n[_],C=s[_].paddedRect,O=C.x+Dr,E=C.y+Dr,k=b.data.width,R=b.data.height;ea.copy(b.data,m,{x:0,y:0},{x:O,y:E},b.data),ea.copy(b.data,m,{x:0,y:R-1},{x:O,y:E-1},{width:k,height:1}),ea.copy(b.data,m,{x:0,y:0},{x:O,y:E+R},{width:k,height:1}),ea.copy(b.data,m,{x:k-1,y:0},{x:O-1,y:E},{width:1,height:R}),ea.copy(b.data,m,{x:0,y:0},{x:O+k,y:E},{width:1,height:R})}this.image=m,this.iconPositions=o,this.patternPositions=s}addImages(e,n,o){for(let s in e){let l=e[s],d={x:0,y:0,w:l.data.width+2*Dr,h:l.data.height+2*Dr};o.push(d),n[s]=new n0(d,l),l.hasRenderCallback&&this.haveRenderCallbacks.push(s)}}patchUpdatedImages(e,n,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(s=>e.hasImage(s,o)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,o);for(let s in e.getUpdatedImages(o))this.patchUpdatedImage(this.iconPositions[s],e.getImage(s,o),n),this.patchUpdatedImage(this.patternPositions[s],e.getImage(s,o),n)}patchUpdatedImage(e,n,o){if(!e||!n||e.version===n.version)return;e.version=n.version;let[s,l]=e.tl,d=!!Object.keys(this.patternPositions).length;o.update(n.data,{useMipmap:d},{x:s,y:l})}}xt(n0,"ImagePosition"),xt(rb,"ImageAtlas");let Sp=1e20;function ab(t,e,n,o,s,l,d,p,m){for(let _=e;_<e+o;_++)sb(t,n*l+_,l,s,d,p,m);for(let _=n;_<n+s;_++)sb(t,_*l+e,1,o,d,p,m)}function sb(t,e,n,o,s,l,d){l[0]=0,d[0]=-Sp,d[1]=Sp,s[0]=t[e];for(let p=1,m=0,_=0;p<o;p++){s[p]=t[e+p*n];let b=p*p;do{let C=l[m];_=(s[p]-s[C]+b-C*C)/(p-C)/2}while(_<=d[m]&&--m>-1);m++,l[m]=p,d[m]=_,d[m+1]=Sp}for(let p=0,m=0;p<o;p++){for(;d[m+1]<p;)m++;let _=l[m],b=p-_;t[e+p*n]=s[_]+b*b}}let as=2,i0={none:0,ideographs:1,all:2};class eh{constructor(e,n,o){this.requestManager=e,this.localGlyphMode=n,this.localFontFamily=o,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,n){this.urls[n]=e}getGlyphs(e,n,o){let s=[],l=this.urls[n]||we.GLYPHS_URL;for(let d in e)for(let p of e[d])s.push({stack:d,id:p});pr(s,({stack:d,id:p},m)=>{let _=this.entries[d];_||(_=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let b=_.glyphs[p];if(b!==void 0)return void m(null,{stack:d,id:p,glyph:b});if(b=this._tinySDF(_,d,p),b)return _.glyphs[p]=b,void m(null,{stack:d,id:p,glyph:b});let C=Math.floor(p/256);if(256*C>65535)return void m(new Error("glyphs > 65535 not supported"));if(_.ranges[C])return void m(null,{stack:d,id:p,glyph:b});let O=_.requests[C];O||(O=_.requests[C]=[],eh.loadGlyphRange(d,C,l,this.requestManager,(E,k)=>{if(k){_.ascender=k.ascender,_.descender=k.descender;for(let R in k.glyphs)this._doesCharSupportLocalGlyph(+R)||(_.glyphs[+R]=k.glyphs[+R]);_.ranges[C]=!0}for(let R of O)R(E,k);delete _.requests[C]})),O.push((E,k)=>{E?m(E):k&&m(null,{stack:d,id:p,glyph:k.glyphs[p]||null})})},(d,p)=>{if(d)o(d);else if(p){let m={};for(let{stack:_,id:b,glyph:C}of p)m[_]===void 0&&(m[_]={}),m[_].glyphs===void 0&&(m[_].glyphs={}),m[_].glyphs[b]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},m[_].ascender=this.entries[_].ascender,m[_].descender=this.entries[_].descender;o(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==i0.none&&(this.localGlyphMode===i0.all?!!this.localFontFamily:!!this.localFontFamily&&(Mt["CJK Unified Ideographs"](e)||Mt["Hangul Syllables"](e)||Mt.Hiragana(e)||Mt.Katakana(e)||Mt["CJK Symbols and Punctuation"](e)||Mt["CJK Unified Ideographs Extension A"](e)||Mt["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,n,o){let s=this.localFontFamily;if(!s||!this._doesCharSupportLocalGlyph(o))return;let l=e.tinySDF;if(!l){let R="400";/bold/i.test(n)?R="900":/medium/i.test(n)?R="500":/light/i.test(n)&&(R="200"),l=e.tinySDF=new eh.TinySDF({fontFamily:s,fontWeight:R,fontSize:24*as,buffer:3*as,radius:8*as}),l.fontWeight=R}if(this.localGlyphs[l.fontWeight][o])return this.localGlyphs[l.fontWeight][o];let d=String.fromCodePoint(o),{data:p,width:m,height:_,glyphWidth:b,glyphHeight:C,glyphLeft:O,glyphTop:E,glyphAdvance:k}=l.draw(d);return this.localGlyphs[l.fontWeight][o]={id:o,bitmap:new vc({width:m,height:_},p),metrics:{width:b/as,height:C/as,left:O/as,top:E/as-27,advance:k/as,localGlyph:!0}}}}eh.loadGlyphRange=function(t,e,n,o,s){let l=256*e,d=l+255,p=o.transformRequest(o.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${l}-${d}`),bn.Glyphs);De(p,(m,_)=>{if(m)s(m);else if(_){let b={},C=function(O){return new Kd(O).readFields(GP,{})}(_);for(let O of C.glyphs)b[O.id]=O;s(null,{glyphs:b,ascender:C.ascender,descender:C.descender})}})},eh.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:o=.25,fontFamily:s="sans-serif",fontWeight:l="normal",fontStyle:d="normal"}={}){this.buffer=e,this.cutoff=o,this.radius=n;let p=this.size=t+4*e,m=this._createCanvas(p),_=this.ctx=m.getContext("2d",{willReadFrequently:!0});_.font=`${d} ${l} ${t}px ${s}`,_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(p*p),this.gridInner=new Float64Array(p*p),this.f=new Float64Array(p),this.z=new Float64Array(p+1),this.v=new Uint16Array(p)}_createCanvas(t){let e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){let{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:o,actualBoundingBoxLeft:s,actualBoundingBoxRight:l}=this.ctx.measureText(t),d=Math.ceil(n),p=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(l-s))),m=Math.min(this.size-this.buffer,d+Math.ceil(o)),_=p+2*this.buffer,b=m+2*this.buffer,C=Math.max(_*b,0),O=new Uint8ClampedArray(C),E={data:O,width:_,height:b,glyphWidth:p,glyphHeight:m,glyphTop:d,glyphLeft:0,glyphAdvance:e};if(p===0||m===0)return E;let{ctx:k,buffer:R,gridInner:L,gridOuter:V}=this;k.clearRect(R,R,p,m),k.fillText(t,R,R+d);let Y=k.getImageData(R,R,p,m);V.fill(Sp,0,C),L.fill(0,0,C);for(let J=0;J<m;J++)for(let K=0;K<p;K++){let ae=Y.data[4*(J*p+K)+3]/255;if(ae===0)continue;let ie=(J+R)*_+K+R;if(ae===1)V[ie]=0,L[ie]=Sp;else{let de=.5-ae;V[ie]=de>0?de*de:0,L[ie]=de<0?de*de:0}}ab(V,0,0,_,b,_,this.f,this.v,this.z),ab(L,R,R,p,m,_,this.f,this.v,this.z);for(let J=0;J<C;J++){let K=Math.sqrt(V[J])-Math.sqrt(L[J]);O[J]=Math.round(255-255*(K/this.radius+this.cutoff))}return E}};let Cc=Dr;function lb(t,e,n,o){let s=[],l=t.imagePrimary,d=l.pixelRatio,p=l.paddedRect.w-2*Cc,m=l.paddedRect.h-2*Cc,_=t.right-t.left,b=t.bottom-t.top,C=l.stretchX||[[0,p]],O=l.stretchY||[[0,m]],E=(be,Be)=>be+Be[1]-Be[0],k=C.reduce(E,0),R=O.reduce(E,0),L=p-k,V=m-R,Y=0,J=k,K=0,ae=R,ie=0,de=L,me=0,ve=V;if(l.content&&o){let be=l.content;Y=kg(C,0,be[0]),K=kg(O,0,be[1]),J=kg(C,be[0],be[2]),ae=kg(O,be[1],be[3]),ie=be[0]-Y,me=be[1]-K,de=be[2]-be[0]-J,ve=be[3]-be[1]-ae}let Pe=(be,Be,Ue,Ie)=>{let je=Rg(be.stretch-Y,J,_,t.left),Se=zg(be.fixed-ie,de,be.stretch,k),Ne=Rg(Be.stretch-K,ae,b,t.top),st=zg(Be.fixed-me,ve,Be.stretch,R),Ge=Rg(Ue.stretch-Y,J,_,t.left),bt=zg(Ue.fixed-ie,de,Ue.stretch,k),mt=Rg(Ie.stretch-K,ae,b,t.top),qe=zg(Ie.fixed-me,ve,Ie.stretch,R),Nt=new ut(je,Ne),Tt=new ut(Ge,Ne),vt=new ut(Ge,mt),Ye=new ut(je,mt),Bt=new ut(Se/d,st/d),tn=new ut(bt/d,qe/d),Vt=e*Math.PI/180;if(Vt){let In=Math.sin(Vt),zn=Math.cos(Vt),Nn=[zn,-In,In,zn];Nt._matMult(Nn),Tt._matMult(Nn),Ye._matMult(Nn),vt._matMult(Nn)}let nn=be.stretch+be.fixed,Ht=Ue.stretch+Ue.fixed,xn=Be.stretch+Be.fixed,qt=Ie.stretch+Ie.fixed,ei=t.imageSecondary;return{tl:Nt,tr:Tt,bl:Ye,br:vt,texPrimary:{x:l.paddedRect.x+Cc+nn,y:l.paddedRect.y+Cc+xn,w:Ht-nn,h:qt-xn},texSecondary:ei?{x:ei.paddedRect.x+Cc+nn,y:ei.paddedRect.y+Cc+xn,w:Ht-nn,h:qt-xn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bt,pixelOffsetBR:tn,minFontScaleX:de/d/_,minFontScaleY:ve/d/b,isSDF:n}};if(o&&(l.stretchX||l.stretchY)){let be=cb(C,L,k),Be=cb(O,V,R);for(let Ue=0;Ue<be.length-1;Ue++){let Ie=be[Ue],je=be[Ue+1];for(let Se=0;Se<Be.length-1;Se++)s.push(Pe(Ie,Be[Se],je,Be[Se+1]))}}else s.push(Pe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:p+1},{fixed:0,stretch:m+1}));return s}function kg(t,e,n){let o=0;for(let s of t)o+=Math.max(e,Math.min(n,s[1]))-Math.max(e,Math.min(n,s[0]));return o}function cb(t,e,n){let o=[{fixed:-Cc,stretch:0}];for(let[s,l]of t){let d=o[o.length-1];o.push({fixed:s-d.stretch,stretch:d.stretch}),o.push({fixed:s-d.stretch,stretch:d.stretch+(l-s)})}return o.push({fixed:e+Cc,stretch:n}),o}function Rg(t,e,n,o){return t/e*n+o}function zg(t,e,n,o){return t-e*n/o}function QP(t,e,n,o){let s=e+t.positionedLines[o].lineOffset;return o===0?n+s/2:n+(s+(e+t.positionedLines[o-1].lineOffset))/2}function KP(t,e=1,n=!1){let o=1/0,s=1/0,l=-1/0,d=-1/0,p=t[0];for(let E=0;E<p.length;E++){let k=p[E];(!E||k.x<o)&&(o=k.x),(!E||k.y<s)&&(s=k.y),(!E||k.x>l)&&(l=k.x),(!E||k.y>d)&&(d=k.y)}let m=Math.min(l-o,d-s),_=m/2,b=new er([],JP);if(m===0)return new ut(o,s);for(let E=o;E<l;E+=m)for(let k=s;k<d;k+=m)b.push(new th(E+_,k+_,_,t));let C=function(E){let k=0,R=0,L=0,V=E[0];for(let Y=0,J=V.length,K=J-1;Y<J;K=Y++){let ae=V[Y],ie=V[K],de=ae.x*ie.y-ie.x*ae.y;R+=(ae.x+ie.x)*de,L+=(ae.y+ie.y)*de,k+=3*de}return new th(R/k,L/k,0,E)}(t),O=b.length;for(;b.length;){let E=b.pop();(E.d>C.d||!C.d)&&(C=E,n&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,O)),E.max-C.d<=e||(_=E.h/2,b.push(new th(E.p.x-_,E.p.y-_,_,t)),b.push(new th(E.p.x+_,E.p.y-_,_,t)),b.push(new th(E.p.x-_,E.p.y+_,_,t)),b.push(new th(E.p.x+_,E.p.y+_,_,t)),O+=4)}return n&&(console.log(`num probes: ${O}`),console.log(`best distance: ${C.d}`)),C.p}function JP(t,e){return e.max-t.max}class th{constructor(e,n,o,s){this.p=new ut(e,n),this.h=o,this.d=function(l,d){let p=!1,m=1/0;for(let _=0;_<d.length;_++){let b=d[_];for(let C=0,O=b.length,E=O-1;C<O;E=C++){let k=b[C],R=b[E];k.y>l.y!=R.y>l.y&&l.x<(R.x-k.x)*(l.y-k.y)/(R.y-k.y)+k.x&&(p=!p),m=Math.min(m,_c(l,k,R))}}return(p?1:-1)*Math.sqrt(m)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}}let o0=Number.POSITIVE_INFINITY,eO=Math.sqrt(2);function ub(t,[e,n]){let o=0,s=0;if(n===o0){e<0&&(e=0);let l=e/eO;switch(t){case"top-right":case"top-left":s=l-7;break;case"bottom-right":case"bottom-left":s=7-l;break;case"bottom":s=7-e;break;case"top":s=e-7}switch(t){case"top-right":case"bottom-right":o=-l;break;case"top-left":case"bottom-left":o=l;break;case"left":o=e;break;case"right":o=-e}}else{switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":s=n-7;break;case"bottom-right":case"bottom-left":case"bottom":s=7-n}switch(t){case"top-right":case"bottom-right":case"right":o=-e;break;case"top-left":case"bottom-left":case"left":o=e}}return[o,s]}function r0(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tO(t,e,n,o,s,l,d,p,m,_,b,C,O,E,k){let R=l.textMaxSize.evaluate(e,{},C);R===void 0&&(R=d);let L=t.layers[0].layout,V=L.get("icon-offset").evaluate(e,{},C),Y=hb(n.horizontal)||n.vertical,J=O.name==="globe",K=Ao,ae=d/K,ie=t.tilePixelRatio*R/K,de=(je=t.overscaling,t.zoom>18&&je>2&&(je>>=1),Math.max(ht/(512*je),1)*L.get("symbol-spacing")),me=L.get("text-padding")*t.tilePixelRatio,ve=L.get("icon-padding")*t.tilePixelRatio,Pe=mn(L.get("text-max-angle")),be=L.get("text-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Be=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Ue=L.get("symbol-placement"),Ie=de/2;var je;let Se=L.get("icon-text-fit").evaluate(e,{},C),Ne=L.get("icon-text-fit-padding").evaluate(e,{},C),st=Se!=="none",Ge;t.hasAnyIconTextFit===!1&&st&&(t.hasAnyIconTextFit=!0),o&&st&&(t.allowVerticalPlacement&&n.vertical&&(Ge=Qv(o,n.vertical,Se,Ne,V,ae)),Y&&(o=Qv(o,Y,Se,Ne,V,ae)));let bt=(mt,qe,Nt)=>{if(qe.x<0||qe.x>=ht||qe.y<0||qe.y>=ht)return;let Tt=null;if(J){let{x:vt,y:Ye,z:Bt}=O.projectTilePoint(qe.x,qe.y,Nt);Tt={anchor:new kl(vt,Ye,Bt,0,void 0),up:O.upVector(Nt,qe.x,qe.y)}}(function(vt,Ye,Bt,tn,Vt,nn,Ht,xn,qt,ei,In,zn,Nn,Dn,gi,Zn,Di,Ji,vo,hi,Mi,fo,go,mo,li,kr,Sc){let sr=vt.addToLineVertexArray(Ye,tn),$o,ia,$p,nm,hw,pw,fw,gw=0,mw=0,_w=0,yw=0,E0=-1,I0=-1,Ws={},xw=gp(""),Ju=Bt?Bt.anchor:Ye,D0=qt.layout.get("icon-text-fit").evaluate(Mi,{},li)!=="none",k0=0,R0=0;if(qt._unevaluatedLayout.getValue("text-radial-offset")===void 0?[k0,R0]=qt.layout.get("text-offset").evaluate(Mi,{},li).map(Rr=>Rr*Ao):(k0=qt.layout.get("text-radial-offset").evaluate(Mi,{},li)*Ao,R0=o0),vt.allowVerticalPlacement&&Vt.vertical){let Rr=Vt.vertical;if(gi)pw=a0(Rr),xn&&(fw=a0(xn));else{let zr=qt.layout.get("text-rotate").evaluate(Mi,{},li)+90;$p=Bg(ei,Ju,Ye,In,zn,Nn,Rr,Dn,zr,Zn),xn&&(nm=Bg(ei,Ju,Ye,In,zn,Nn,xn,Ji,zr))}}if(nn){let Rr=qt.layout.get("icon-rotate").evaluate(Mi,{},li),zr=lb(nn,Rr,go,D0),lh=xn?lb(xn,Rr,go,D0):void 0;ia=Bg(ei,Ju,Ye,In,zn,Nn,nn,Ji,Rr),gw=4*zr.length;let vw=vt.iconSizeData,ed=null;vw.kind==="source"?(ed=[rs*qt.layout.get("icon-size").evaluate(Mi,{},li)],ed[0]>Mc&&ci(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Ep}. Reduce your "icon-size".`)):vw.kind==="composite"&&(ed=[rs*fo.compositeIconSizes[0].evaluate(Mi,{},li),rs*fo.compositeIconSizes[1].evaluate(Mi,{},li)],(ed[0]>Mc||ed[1]>Mc)&&ci(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Ep}. Reduce your "icon-size".`)),vt.addSymbols(vt.icon,zr,ed,hi,vo,Mi,!1,Bt,Ye,sr.lineStartIndex,sr.lineLength,-1,mo,li,kr,Sc),E0=vt.icon.placedSymbolArray.length-1,lh&&(mw=4*lh.length,vt.addSymbols(vt.icon,lh,ed,hi,vo,Mi,ta.vertical,Bt,Ye,sr.lineStartIndex,sr.lineLength,-1,mo,li,kr,Sc),I0=vt.icon.placedSymbolArray.length-1)}for(let Rr in Vt.horizontal){let zr=Vt.horizontal[Rr];$o||(xw=gp(zr.text),gi?hw=a0(zr):$o=Bg(ei,Ju,Ye,In,zn,Nn,zr,Dn,qt.layout.get("text-rotate").evaluate(Mi,{},li),Zn));let lh=zr.positionedLines.length===1;if(_w+=db(vt,Bt,Ye,zr,Ht,qt,gi,Mi,Zn,sr,Vt.vertical?ta.horizontal:ta.horizontalOnly,lh?Object.keys(Vt.horizontal):[Rr],Ws,E0,fo,mo,li,kr),lh)break}Vt.vertical&&(yw+=db(vt,Bt,Ye,Vt.vertical,Ht,qt,gi,Mi,Zn,sr,ta.vertical,["vertical"],Ws,I0,fo,mo,li,kr));let Ec=-1,z0=(Rr,zr)=>Rr?Math.max(Rr,zr):zr;Ec=z0(hw,Ec),Ec=z0(pw,Ec),Ec=z0(fw,Ec);let xT=Ec>-1?1:0;vt.glyphOffsetArray.length>=65535&&ci("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mi.sortKey!==void 0&&vt.addToSortKeyRanges(vt.symbolInstances.length,Mi.sortKey),vt.symbolInstances.emplaceBack(Ye.x,Ye.y,Ju.x,Ju.y,Ju.z,Ws.right>=0?Ws.right:-1,Ws.center>=0?Ws.center:-1,Ws.left>=0?Ws.left:-1,Ws.vertical>=0?Ws.vertical:-1,E0,I0,xw,$o!==void 0?$o:vt.collisionBoxArray.length,$o!==void 0?$o+1:vt.collisionBoxArray.length,$p!==void 0?$p:vt.collisionBoxArray.length,$p!==void 0?$p+1:vt.collisionBoxArray.length,ia!==void 0?ia:vt.collisionBoxArray.length,ia!==void 0?ia+1:vt.collisionBoxArray.length,nm||vt.collisionBoxArray.length,nm?nm+1:vt.collisionBoxArray.length,In,_w,yw,gw,mw,xT,0,k0,R0,Ec,0,D0?1:0)})(t,qe,Tt,mt,n,o,s,Ge,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,me,be,m,0,ve,Be,V,e,l,_,b,C,E,k)};if(Ue==="line")for(let mt of ib(e.geometry,0,0,ht,ht)){let qe=XP(mt,de,Pe,n.vertical||Y,o,K,ie,t.overscaling,ht);for(let Nt of qe)Y&&nO(t,Y.text,Ie,Nt)||bt(mt,Nt,C)}else if(Ue==="line-center"){for(let mt of e.geometry)if(mt.length>1){let qe=YP(mt,Pe,n.vertical||Y,o,K,ie);qe&&bt(mt,qe,C)}}else if(e.type==="Polygon")for(let mt of H_(e.geometry,0)){let qe=KP(mt,16);bt(mt[0],new kl(qe.x,qe.y,0,0,void 0),C)}else if(e.type==="LineString")for(let mt of e.geometry)bt(mt,new kl(mt[0].x,mt[0].y,0,0,void 0),C);else if(e.type==="Point")for(let mt of e.geometry)for(let qe of mt)bt([qe],new kl(qe.x,qe.y,0,0,void 0),C)}let Ep=255,Mc=Ep*rs;function db(t,e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L,V){let Y=function(ae,ie,de,me,ve,Pe,be,Be){let Ue=[];if(ie.positionedLines.length===0)return Ue;let Ie=me.layout.get("text-rotate").evaluate(Pe,{})*Math.PI/180,je=function(bt){let mt=bt[0],qe=bt[1],Nt=mt*qe;return Nt>0?[mt,-qe]:Nt<0?[-mt,qe]:mt===0?[qe,mt]:[qe,-mt]}(de),Se=Math.abs(ie.top-ie.bottom);for(let bt of ie.positionedLines)Se-=bt.lineOffset;let Ne=ie.positionedLines.length,st=Se/Ne,Ge=ie.top-de[1];for(let bt=0;bt<Ne;++bt){let mt=ie.positionedLines[bt];Ge=QP(ie,st,Ge,bt);for(let qe of mt.positionedGlyphs){if(!qe.rect)continue;let Nt=qe.rect||{},Tt=$v+1,vt=!0,Ye=1,Bt=0;if(qe.imageName){let hi=be[qe.imageName];if(!hi)continue;if(hi.sdf){ci("SDF images are not supported in formatted text and will be ignored.");continue}vt=!1,Ye=hi.pixelRatio,Tt=Dr/Ye}let tn=(ve||Be)&&qe.vertical,Vt=qe.metrics.advance*qe.scale/2,nn=qe.metrics,Ht=qe.rect;if(Ht===null)continue;Be&&ie.verticalizable&&(Bt=qe.imageName?Vt-qe.metrics.width*qe.scale/2:0);let xn=ve?[qe.x+Vt,qe.y]:[0,0],qt=[0,0],ei=[0,0],In=!1;ve||(tn?(ei=[qe.x+Vt+je[0],qe.y+je[1]-Bt],In=!0):qt=[qe.x+Vt+de[0],qe.y+de[1]-Bt]);let zn=Ht.w*qe.scale/(Ye*(qe.localGlyph?as:1)),Nn=Ht.h*qe.scale/(Ye*(qe.localGlyph?as:1)),Dn,gi,Zn,Di;if(tn){let hi=qe.y-Ge,Mi=new ut(-Vt,Vt-hi),fo=-Math.PI/2,go=new ut(...ei);Dn=new ut(-Vt+qt[0],qt[1]),Dn._rotateAround(fo,Mi)._add(go),Dn.x+=-hi+Vt,Dn.y-=(nn.left-Tt)*qe.scale;let mo=qe.imageName?nn.advance*qe.scale:Ao*qe.scale,li=String.fromCodePoint(qe.glyph);IP(li)?Dn.x+=(1-Tt)*qe.scale:DP(li)?Dn.x+=mo-nn.height*qe.scale+(-Tt-1)*qe.scale:Dn.x+=qe.imageName||nn.width+2*Tt===Ht.w&&nn.height+2*Tt===Ht.h?(mo-Nn)/2:(mo-(nn.height+2*Tt)*qe.scale)/2,gi=new ut(Dn.x,Dn.y-zn),Zn=new ut(Dn.x+Nn,Dn.y),Di=new ut(Dn.x+Nn,Dn.y-zn)}else{let hi=(nn.left-Tt)*qe.scale-Vt+qt[0],Mi=(-nn.top-Tt)*qe.scale+qt[1],fo=hi+zn,go=Mi+Nn;Dn=new ut(hi,Mi),gi=new ut(fo,Mi),Zn=new ut(hi,go),Di=new ut(fo,go)}if(Ie){let hi;hi=ve?new ut(0,0):In?new ut(je[0],je[1]):new ut(de[0],de[1]),Dn._rotateAround(Ie,hi),gi._rotateAround(Ie,hi),Zn._rotateAround(Ie,hi),Di._rotateAround(Ie,hi)}let Ji=new ut(0,0),vo=new ut(0,0);Ue.push({tl:Dn,tr:gi,bl:Zn,br:Di,texPrimary:Nt,texSecondary:void 0,writingMode:ie.writingMode,glyphOffset:xn,sectionIndex:qe.sectionIndex,isSDF:vt,pixelOffsetTL:Ji,pixelOffsetBR:vo,minFontScaleX:0,minFontScaleY:0})}}return Ue}(0,o,m,l,d,p,s,t.allowVerticalPlacement),J=t.textSizeData,K=null;J.kind==="source"?(K=[rs*l.layout.get("text-size").evaluate(p,{},L)],K[0]>Mc&&ci(`${t.layerIds[0]}: Value for "text-size" is >= ${Ep}. Reduce your "text-size".`)):J.kind==="composite"&&(K=[rs*k.compositeTextSizes[0].evaluate(p,{},L),rs*k.compositeTextSizes[1].evaluate(p,{},L)],(K[0]>Mc||K[1]>Mc)&&ci(`${t.layerIds[0]}: Value for "text-size" is >= ${Ep}. Reduce your "text-size".`)),t.addSymbols(t.text,Y,K,m,d,p,b,e,n,_.lineStartIndex,_.lineLength,E,R,L,V,!1);for(let ae of C)O[ae]=t.text.placedSymbolArray.length-1;return 4*Y.length}function hb(t){for(let e in t)return t[e];return null}function Bg(t,e,n,o,s,l,d,p,m,_){let b=d.top,C=d.bottom,O=d.left,E=d.right,k=d.collisionPadding;if(k&&(O-=k[0],b-=k[1],E+=k[2],C+=k[3]),m){let R=new ut(O,b),L=new ut(E,b),V=new ut(O,C),Y=new ut(E,C),J=mn(m),K=new ut(0,0);_&&(K=new ut(_[0],_[1])),R._rotateAround(J,K),L._rotateAround(J,K),V._rotateAround(J,K),Y._rotateAround(J,K),O=Math.min(R.x,L.x,V.x,Y.x),E=Math.max(R.x,L.x,V.x,Y.x),b=Math.min(R.y,L.y,V.y,Y.y),C=Math.max(R.y,L.y,V.y,Y.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,O,b,E,C,p,o,s,l),t.length-1}function a0(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);let e=t.bottom-t.top;return e>0?Math.max(10,e):null}function nO(t,e,n,o){let s=t.compareText;if(e in s){let l=s[e];for(let d=l.length-1;d>=0;d--)if(o.dist(l[d])<n)return!0}else s[e]=[];return s[e].push(o),!1}function pb(t,e){let n=t.fovAboveCenter,o=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,s=(t._camera.position[2]*t.worldSize-o)/Math.cos(t._pitch),l=Math.sin(n)*s/Math.sin(Math.max(Math.PI/2-t._pitch-n,.01)),d=Math.sin(t._pitch)*l+s;return Math.min(1.01*d,s*(1/t._horizonShift))}function Ip(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};let n=Math.pow(2,-t.z),o=t.x*n,s=(t.x+1)*n,l=t.y*n,d=(t.y+1)*n,p=$t(o),m=$t(s),_=Mn(l),b=Mn(d),C=e.project(p,_),O=e.project(m,_),E=e.project(m,b),k=e.project(p,b),R=Math.min(C.x,O.x,E.x,k.x),L=Math.min(C.y,O.y,E.y,k.y),V=Math.max(C.x,O.x,E.x,k.x),Y=Math.max(C.y,O.y,E.y,k.y),J=n/16;function K(ie,de,me,ve,Pe,be){let Be=(me+Pe)/2,Ue=(ve+be)/2,Ie=e.project($t(Be),Mn(Ue)),je=Math.max(0,R-Ie.x,L-Ie.y,Ie.x-V,Ie.y-Y);R=Math.min(R,Ie.x),V=Math.max(V,Ie.x),L=Math.min(L,Ie.y),Y=Math.max(Y,Ie.y),je>J&&(K(ie,Ie,me,ve,Be,Ue),K(Ie,de,Be,Ue,Pe,be))}K(C,O,o,l,s,l),K(O,E,s,l,s,d),K(E,k,s,d,o,d),K(k,C,o,d,o,l),R-=J,L-=J,V+=J,Y+=J;let ae=1/Math.max(V-R,Y-L);return{scale:ae,x:R*ae,y:L*ae,x2:V*ae,y2:Y*ae,projection:e}}function fb(t,{x:e,y:n},o=0){return new ut(((e-o)*t.scale-t.x)*ht,(n*t.scale-t.y)*ht)}let iO=r.a6.identity(new Float32Array(16));class Ac{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,n){return{x:0,y:0,z:0}}unproject(e,n){return new xe(0,0)}projectTilePoint(e,n,o){return{x:e,y:n,z:0}}locationPoint(e,n,o=!0){return e._coordinatePoint(e.locationCoordinate(n),o)}pixelsPerMeter(e,n){return Zt(1,e)*n}pixelSpaceConversion(e,n,o){return 1}farthestPixelDistance(e){return pb(e,e.pixelsPerMeter)}pointCoordinate(e,n,o,s){let l=e.horizonLineFromTop(!1),d=new ut(n,Math.max(l,o));return e.rayIntersectionCoordinate(e.pointRayIntersection(d,s))}pointCoordinate3D(e,n,o){let s=new ut(n,o);if(e.elevation)return e.elevation.pointCoordinate(s);{let l=this.pointCoordinate(e,s.x,s.y,0);return[l.x,l.y,l.z]}}isPointAboveHorizon(e,n){if(e.elevation)return!this.pointCoordinate3D(e,n.x,n.y);let o=e.horizonLineFromTop();return n.y<o}createInversionMatrix(e,n){return iO}createTileMatrix(e,n,o){let s,l,d,p=o.canonical,m=r.a6.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){let _=Ip(p,this);s=1,l=_.x+o.wrap*_.scale,d=_.y,r.a6.scale(m,m,[s/_.scale,s/_.scale,e.pixelsPerMeter/n])}else s=n/e.zoomScale(p.z),l=(p.x+Math.pow(2,p.z)*o.wrap)*s,d=p.y*s;return r.a6.translate(m,m,[l,d,0]),r.a6.scale(m,m,[s/ht,s/ht,1]),m}upVector(e,n,o){return[0,0,1]}upVectorScale(e,n,o){return{metersToTile:1}}}class oO extends Ac{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];let[n,o]=this.parallels=e.parallels||[29.5,45.5],s=Math.sin(mn(n));this.n=(s+Math.sin(mn(o)))/2,this.c=1+s*(2*this.n-s),this.r0=Math.sqrt(this.c)/this.n}project(e,n){let{n:o,c:s,r0:l}=this,d=mn(e-this.center[0]),p=mn(n),m=Math.sqrt(s-2*o*Math.sin(p))/o;return{x:m*Math.sin(d*o),y:m*Math.cos(d*o)-l,z:0}}unproject(e,n){let{n:o,c:s,r0:l}=this,d=l+n,p=Math.atan2(e,Math.abs(d))*Math.sign(d);d*o<0&&(p-=Math.PI*Math.sign(e)*Math.sign(d));let m=mn(this.center[0])*o;p=ha(p,-Math.PI-m,Math.PI-m);let _=on(Qi(p/o)+this.center[0],-180,180),b=Math.asin(on((s-(e*e+d*d)*o*o)/(2*o),-1,1)),C=on(Qi(b),-un,un);return new xe(_,C)}}let Dp=1.340264,kp=-.081106,Rp=893e-6,zp=.003796,Fg=Math.sqrt(3)/2;class rO extends Ac{project(e,n){n=n/180*Math.PI,e=e/180*Math.PI;let o=Math.asin(Fg*Math.sin(n)),s=o*o,l=s*s*s;return{x:.5*(e*Math.cos(o)/(Fg*(Dp+3*kp*s+l*(7*Rp+9*zp*s)))/Math.PI+.5),y:1-.5*(o*(Dp+kp*s+l*(Rp+zp*s))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let o=n=(2*(1-n)-1)*Math.PI,s=o*o,l=s*s*s;for(let b,C,O,E=0;E<12&&(C=o*(Dp+kp*s+l*(Rp+zp*s))-n,O=Dp+3*kp*s+l*(7*Rp+9*zp*s),b=C/O,o=on(o-b,-Math.PI/3,Math.PI/3),s=o*o,l=s*s*s,!(Math.abs(b)<1e-12));++E);let d=Fg*e*(Dp+3*kp*s+l*(7*Rp+9*zp*s))/Math.cos(o),p=Math.asin(Math.sin(o)/Fg),m=on(180*d/Math.PI,-180,180),_=on(180*p/Math.PI,-un,un);return new xe(m,_)}}class aO extends Ac{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){return{x:.5+e/360,y:.5-n/360,z:0}}unproject(e,n){let o=360*(e-.5),s=on(360*(.5-n),-un,un);return new xe(o,s)}}let nh=Math.PI/2;function Lg(t){return Math.tan((nh+t)/2)}class sO extends Ac{constructor(e){super(e),this.center=e.center||[0,30];let[n,o]=this.parallels=e.parallels||[30,30],s=mn(n),l=mn(o);this.southernCenter=s+l<0,this.southernCenter&&(s=-s,l=-l);let d=Math.cos(s),p=Lg(s);this.n=s===l?Math.sin(s):Math.log(d/Math.cos(l))/Math.log(Lg(l)/p),this.f=d*Math.pow(Lg(s),this.n)/this.n}project(e,n){n=mn(n),this.southernCenter&&(n=-n),e=mn(e-this.center[0]);let o=1e-6,{n:s,f:l}=this;l>0?n<-nh+o&&(n=-nh+o):n>nh-o&&(n=nh-o);let d=l/Math.pow(Lg(n),s),p=d*Math.sin(s*e),m=l-d*Math.cos(s*e);return p=.5*(p/Math.PI+.5),m=.5*(m/Math.PI+.5),{x:p,y:this.southernCenter?m:1-m,z:0}}unproject(e,n){e=(2*e-.5)*Math.PI,this.southernCenter&&(n=1-n),n=(2*(1-n)-.5)*Math.PI;let{n:o,f:s}=this,l=s-n,d=Math.sign(l),p=Math.sign(o)*Math.sqrt(e*e+l*l),m=Math.atan2(e,Math.abs(l))*d;l*o<0&&(m-=Math.PI*Math.sign(e)*d);let _=on(Qi(m/o)+this.center[0],-180,180),b=on(Qi(2*Math.atan(Math.pow(s/p,1/o))-nh),-un,un);return new xe(_,this.southernCenter?-b:b)}}class gb extends Ac{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,n){return{x:Qt(e),y:Gt(n),z:0}}unproject(e,n){let o=$t(e),s=Mn(n);return new xe(o,s)}}let mb=mn(un);class lO extends Ac{project(e,n){let o=(n=mn(n))*n,s=o*o;return{x:.5*((e=mn(e))*(.8707-.131979*o+s*(s*(.003971*o-.001529*s)-.013791))/Math.PI+.5),y:1-.5*(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))/Math.PI+1),z:0}}unproject(e,n){e=(2*e-.5)*Math.PI;let o=n=(2*(1-n)-1)*Math.PI,s=25,l=0,d=o*o;do{d=o*o;let _=d*d;l=(o*(1.007226+d*(.015085+_*(.028874*d-.044475-.005916*_)))-n)/(1.007226+d*(.045255+_*(.259866*d-.311325-.005916*11*_))),o=on(o-l,-mb,mb)}while(Math.abs(l)>1e-6&&--s>0);d=o*o;let p=on(Qi(e/(.8707+d*(d*(d*d*d*(.003971-.001529*d)-.013791)-.131979))),-180,180),m=Qi(o);return new xe(p,m)}}let _b=mn(un);class cO extends Ac{project(e,n){n=mn(n),e=mn(e);let o=Math.cos(n),s=2/Math.PI,l=Math.acos(o*Math.cos(e/2)),d=Math.sin(l)/l,p=.5*(e*s+2*o*Math.sin(e/2)/d)||0,m=.5*(n+Math.sin(n)/d)||0;return{x:.5*(p/Math.PI+.5),y:1-.5*(m/Math.PI+1),z:0}}unproject(e,n){let o=e=(2*e-.5)*Math.PI,s=n=(2*(1-n)-1)*Math.PI,l=25,d=1e-6,p=0,m=0;do{let _=Math.cos(s),b=Math.sin(s),C=2*b*_,O=b*b,E=_*_,k=Math.cos(o/2),R=Math.sin(o/2),L=2*k*R,V=R*R,Y=1-E*k*k,J=Y?1/Y:0,K=Y?Math.acos(_*k)*Math.sqrt(1/Y):0,ae=.5*(2*K*_*R+2*o/Math.PI)-e,ie=.5*(K*b+s)-n,de=.5*J*(E*V+K*_*k*O)+1/Math.PI,me=J*(L*C/4-K*b*R),ve=.125*J*(C*R-K*b*E*L),Pe=.5*J*(O*k+K*V*_)+.5,be=me*ve-Pe*de;p=(ie*me-ae*Pe)/be,m=(ae*ve-ie*de)/be,o=on(o-p,-Math.PI,Math.PI),s=on(s-m,-_b,_b)}while((Math.abs(p)>d||Math.abs(m)>d)&&--l>0);return new xe(Qi(o),Qi(s))}}class yb extends Ac{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(mn(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,n){let{scale:o,cosPhi:s}=this;return{x:mn(e)*s*o+.5,y:-Math.sin(mn(n))/s*o+.5,z:0}}unproject(e,n){let{scale:o,cosPhi:s}=this,l=-(n-.5)/o,d=on(Qi((e-.5)/o)/s,-180,180),p=Math.asin(on(l*s,-1,1)),m=on(Qi(p),-un,un);return new xe(d,m)}}class uO extends gb{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,n,o){let s=xp(e,n,o),l=mg($s(o));return r.N.transformMat4(s,s,l),{x:s[0],y:s[1],z:s[2]}}locationPoint(e,n){let o=ke(n.lat,n.lng),s=r.N.normalize([],o),l=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(n),e._centerAltitude):e._centerAltitude,d=Zt(1,0)*ht*l;r.N.scaleAndAdd(o,o,s,d);let p=r.a6.identity(new Float64Array(16));return r.a6.multiply(p,e.pixelMatrix,e.globeMatrix),r.N.transformMat4(o,o,p),new ut(o[0],o[1])}pixelsPerMeter(e,n){return Zt(1,0)*n}pixelSpaceConversion(e,n,o){let s=Zt(1,e)*n,l=gn(Zt(1,45)*n,s,o);return this.pixelsPerMeter(e,n)/l}createTileMatrix(e,n,o){let s=B_($s(o.canonical));return r.a6.multiply(new Float64Array(16),e.globeMatrix,s)}createInversionMatrix(e,n){let{center:o}=e,s=mg($s(n));return r.a6.rotateY(s,s,mn(o.lng)),r.a6.rotateX(s,s,mn(o.lat)),r.a6.scale(s,s,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(s)}pointCoordinate(e,n,o,s){return zx(e,n,o,!0)||new Tn(0,0)}pointCoordinate3D(e,n,o){let s=this.pointCoordinate(e,n,o,0);return[s.x,s.y,s.z]}isPointAboveHorizon(e,n){return!zx(e,n.x,n.y,!1)}farthestPixelDistance(e){let n=function(s,l){let d=s.cameraToCenterDistance,p=s._centerAltitude*l,m=s._camera,_=s._camera.forward(),b=r.N.add([],r.N.scale([],_,-d),[0,0,p]),C=s.worldSize/(2*Math.PI),O=[0,0,-C],E=s.width/s.height,k=Math.tan(s.fovAboveCenter),R=r.N.scale([],m.up(),k),L=r.N.scale([],m.right(),k*E),V=r.N.normalize([],r.N.add([],r.N.add([],_,R),L)),Y=[],J;if(new I_(b,V).closestPointOnSphere(O,C,Y)){let K=r.N.add([],Y,O),ae=r.N.sub([],K,b);J=Math.cos(s.fovAboveCenter)*r.N.length(ae)}else{let K=r.N.sub([],b,O),ae=r.N.sub([],O,b);r.N.normalize(ae,ae);let ie=r.N.length(K)-C;J=Math.sqrt(ie*(ie+2*C));let de=Math.acos(J/(C+ie))-Math.acos(r.N.dot(_,ae));J*=Math.cos(de)}return 1.01*J}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),o=xc(e.zoom);if(o>0){let s=pb(e,Zt(1,e.center.lat)*e.worldSize),l=e.worldSize/(2*Math.PI),d=Math.max(e.width,e.height)/e.worldSize*Math.PI;return gn(n,s+l*(1-Math.cos(d)),Math.pow(o,10))}return n}upVector(e,n,o){return xp(n,o,e,1)}upVectorScale(e){return{metersToTile:pg(gg($s(e)))}}}function xb(t){let e=t.parallels,n=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new gb(t);case"equirectangular":return new aO(t);case"naturalEarth":return new lO(t);case"equalEarth":return new rO(t);case"winkelTripel":return new cO(t);case"albers":return n?new yb(t):new oO(t);case"lambertConformalConic":return n?new yb(t):new sO(t);case"globe":return new uO(t)}throw new Error(`Invalid projection name: ${t.name}`)}let dO=Cg.types,hO=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ng(t,e,n,o,s,l,d,p,m,_,b,C,O){let E=p?Math.min(Mc,Math.round(p[0])):0,k=p?Math.min(Mc,Math.round(p[1])):0;t.emplaceBack(e,n,Math.round(32*o),Math.round(32*s),l,d,(E<<1)+(m?1:0),k,16*_,16*b,256*C,256*O)}function Vg(t,e,n){t.emplaceBack(e,n)}function jg(t,e,n,o,s,l,d){t.emplaceBack(e,n,o,s,l,d)}function Ug(t,e,n,o,s){t.emplaceBack(e,n,o,s),t.emplaceBack(e,n,o,s),t.emplaceBack(e,n,o,s),t.emplaceBack(e,n,o,s)}function pO(t){for(let e of t.sections)if(Gh(e.text))return!0;return!1}class s0{constructor(e){this.layoutVertexArray=new Ru,this.indexArray=new ro,this.programConfigurations=e,this.segments=new Ii,this.dynamicLayoutVertexArray=new Ls,this.opacityVertexArray=new ap,this.placedSymbolArray=new qf,this.iconTransitioningVertexArray=new Ea,this.globeExtVertexArray=new rp,this.zOffsetVertexArray=new Bu}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(e,n,o,s,l){this.isEmpty()||(o&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,bP.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,CP.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,hO,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,AP.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,wP.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||l)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,MP.members,!0)),this.opacityVertexBuffer.itemSize=1),(o||s)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}xt(s0,"SymbolBuffers");class l0{constructor(e,n,o){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new o,this.segments=new Ii,this.collisionVertexArray=new lp,this.collisionVertexArrayExt=new Ls}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,PP.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,OP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}xt(l0,"CollisionBuffers");class Gg{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=r.a6.identity([]),this.placementViewportMatrix=r.a6.identity([]);let n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Q_(this.zoom,n["text-size"]),this.iconSizeData=Q_(this.zoom,n["icon-size"]);let o=this.layers[0].layout,s=o.get("symbol-sort-key"),l=o.get("symbol-z-order");this.canOverlap=o.get("text-allow-overlap")||o.get("icon-allow-overlap")||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=l!=="viewport-y"&&s.constantOr(1)!==void 0,this.sortFeaturesByY=(l==="viewport-y"||l==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=o.get("text-writing-mode").map(d=>ta[d]),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=o.get("symbol-z-elevate")}createArrays(){this.text=new s0(new G(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new s0(new G(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Qf,this.lineVertexArray=new Vu,this.symbolInstances=new Xf}calculateGlyphDependencies(e,n,o,s,l){for(let d=0;d<e.length;d++){let p=e.codePointAt(d);if(p===void 0)break;if(n[p]=!0,s&&l&&p<=65535){let m=Op[e.charAt(d)];m&&(n[m.charCodeAt(0)]=!0)}}}populate(e,n,o,s){let l=this.layers[0],d=l.layout,p=this.projection.name==="globe",m=d.get("text-font"),_=d.get("text-field"),b=d.get("icon-image"),C=(_.value.kind!=="constant"||_.value.value instanceof io&&!_.value.value.isEmpty()||_.value.value.toString().length>0)&&(m.value.kind!=="constant"||m.value.value.length>0),O=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,E=d.get("symbol-sort-key");if(this.features=[],!C&&!O)return;let k=n.iconDependencies,R=n.glyphDependencies,L=n.availableImages,V=new vi(this.zoom);for(let{feature:Y,id:J,index:K,sourceLayerIndex:ae}of e){let ie=l._featureFilter.needGeometry,de=qi(Y,ie);if(!l._featureFilter.filter(V,de,o))continue;if(ie||(de.geometry=so(Y,o,s)),p&&Y.type!==1&&o.z<=5){let be=de.geometry,Be=.98078528056,Ue=(Ie,je)=>{let Se=xp(Ie.x,Ie.y,o,1),Ne=xp(je.x,je.y,o,1);return r.N.dot(Se,Ne)<Be};for(let Ie=0;Ie<be.length;Ie++)be[Ie]=xo(be[Ie],Ue)}let me,ve;if(C){let be=l.getValueAndResolveTokens("text-field",de,o,L),Be=io.factory(be);pO(Be)&&(this.hasRTLText=!0),(!this.hasRTLText||Fs()==="unavailable"||this.hasRTLText&&br.isParsed())&&(me=EP(Be,l,de))}if(O){let be=l.getValueAndResolveTokens("icon-image",de,o,L);ve=be instanceof Dt?be:Dt.fromString(be)}if(!me&&!ve)continue;let Pe=this.sortFeaturesByKey?E.evaluate(de,{},o):void 0;if(this.features.push({id:J,text:me,icon:ve,index:K,sourceLayerIndex:ae,geometry:de.geometry,properties:Y.properties,type:dO[Y.type],sortKey:Pe}),ve&&(k[ve.namePrimary]=!0,ve.nameSecondary&&(k[ve.nameSecondary]=!0)),me){let be=m.evaluate(de,{},o).join(","),Be=d.get("text-rotation-alignment")==="map"&&d.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ta.vertical)>=0;for(let Ue of me.sections)if(Ue.image)k[Ue.image.namePrimary]=!0;else{let Ie=zs(me.toString()),je=Ue.fontStack||be,Se=R[je]=R[je]||{};this.calculateGlyphDependencies(Ue.text,Se,Be,this.allowVerticalPlacement,Ie)}}}d.get("symbol-placement")==="line"&&(this.features=function(Y){let J={},K={},ae=[],ie=0;function de(be){ae.push(Y[be]),ie++}function me(be,Be,Ue){let Ie=K[be];return delete K[be],K[Be]=Ie,ae[Ie].geometry[0].pop(),ae[Ie].geometry[0]=ae[Ie].geometry[0].concat(Ue[0]),Ie}function ve(be,Be,Ue){let Ie=J[Be];return delete J[Be],J[be]=Ie,ae[Ie].geometry[0].shift(),ae[Ie].geometry[0]=Ue[0].concat(ae[Ie].geometry[0]),Ie}function Pe(be,Be,Ue){let Ie=Ue?Be[0][Be[0].length-1]:Be[0][0];return`${be}:${Ie.x}:${Ie.y}`}for(let be=0;be<Y.length;be++){let Be=Y[be],Ue=Be.geometry,Ie=Be.text?Be.text.toString():null;if(!Ie){de(be);continue}let je=Pe(Ie,Ue),Se=Pe(Ie,Ue,!0);if(je in K&&Se in J&&K[je]!==J[Se]){let Ne=ve(je,Se,Ue),st=me(je,Se,ae[Ne].geometry);delete J[je],delete K[Se],K[Pe(Ie,ae[st].geometry,!0)]=st,ae[Ne].geometry=null}else je in K?me(je,Se,Ue):Se in J?ve(je,Se,Ue):(de(be),J[je]=ie-1,K[Se]=ie-1)}return ae.filter(be=>be.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,J)=>Y.sortKey-J.sortKey)}update(e,n,o,s,l){let d=Object.keys(e).length!==0;if(d&&!this.stateDependentLayers.length)return;let p=d?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,n,p,o,s,l),this.icon.programConfigurations.updatePaintArrays(e,n,p,o,s,l)}updateZOffset(){let e=(l,d,p)=>{o+=d,o>l.length&&l.resize(o);for(let m=-d;m<0;m++)l.emplace(m+o,p)},n=(l,d,p)=>{s+=d,s>l.length&&l.resize(s);for(let m=-d;m<0;m++)l.emplace(m+s,p)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let o=0,s=0;for(let l=0;l<this.symbolInstances.length;l++){let d=this.symbolInstances.get(l),{numHorizontalGlyphVertices:p,numVerticalGlyphVertices:m,numIconVertices:_}=d,b=d.zOffset,C=_>0;if((p>0||m>0)&&(e(this.text.zOffsetVertexArray,p,b),e(this.text.zOffsetVertexArray,m,b)),C){let{placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:E}=d;O>=0&&n(this.icon.zOffsetVertexArray,_,b),E>=0&&n(this.icon.zOffsetVertexArray,d.numVerticalIconVertices,b)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=xb(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){let o=this.lineVertexArray.length;if(e.segment!==void 0)for(let{x:s,y:l}of n)this.lineVertexArray.emplaceBack(s,l);return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(e,n,o,s,l,d,p,m,_,b,C,O,E,k,R,L){let V=e.indexArray,Y=e.layoutVertexArray,J=e.globeExtVertexArray,K=e.segments.prepareSegment(4*n.length,Y,V,this.canOverlap?d.sortKey:void 0),ae=this.glyphOffsetArray.length,ie=K.vertexLength,de=this.allowVerticalPlacement&&p===ta.vertical?Math.PI/2:0,me=d.text&&d.text.sections;for(let Pe=0;Pe<n.length;Pe++){let{tl:be,tr:Be,bl:Ue,br:Ie,texPrimary:je,texSecondary:Se,pixelOffsetTL:Ne,pixelOffsetBR:st,minFontScaleX:Ge,minFontScaleY:bt,glyphOffset:mt,isSDF:qe,sectionIndex:Nt}=n[Pe],Tt=K.vertexLength,vt=mt[1];if(Ng(Y,_.x,_.y,be.x,vt+be.y,je.x,je.y,o,qe,Ne.x,Ne.y,Ge,bt),Ng(Y,_.x,_.y,Be.x,vt+Be.y,je.x+je.w,je.y,o,qe,st.x,Ne.y,Ge,bt),Ng(Y,_.x,_.y,Ue.x,vt+Ue.y,je.x,je.y+je.h,o,qe,Ne.x,st.y,Ge,bt),Ng(Y,_.x,_.y,Ie.x,vt+Ie.y,je.x+je.w,je.y+je.h,o,qe,st.x,st.y,Ge,bt),m){let{x:Ye,y:Bt,z:tn}=m.anchor,[Vt,nn,Ht]=m.up;jg(J,Ye,Bt,tn,Vt,nn,Ht),jg(J,Ye,Bt,tn,Vt,nn,Ht),jg(J,Ye,Bt,tn,Vt,nn,Ht),jg(J,Ye,Bt,tn,Vt,nn,Ht),Ug(e.dynamicLayoutVertexArray,Ye,Bt,tn,de)}else Ug(e.dynamicLayoutVertexArray,_.x,_.y,_.z,de);if(L){let Ye=Se||je;Vg(e.iconTransitioningVertexArray,Ye.x,Ye.y),Vg(e.iconTransitioningVertexArray,Ye.x+Ye.w,Ye.y),Vg(e.iconTransitioningVertexArray,Ye.x,Ye.y+Ye.h),Vg(e.iconTransitioningVertexArray,Ye.x+Ye.w,Ye.y+Ye.h)}V.emplaceBack(Tt,Tt+1,Tt+2),V.emplaceBack(Tt+1,Tt+2,Tt+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mt[0]),Pe!==n.length-1&&Nt===n[Pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(Y.length,d,d.index,{},E,k,R,me&&me[Nt])}let ve=m?m.anchor:_;e.placedSymbolArray.emplaceBack(ve.x,ve.y,ve.z,_.x,_.y,ae,this.glyphOffsetArray.length-ae,ie,b,C,_.segment,o?o[0]:0,o?o[1]:0,s[0],s[1],p,0,!1,0,O,0)}_commitLayoutVertex(e,n,o,s,l,d,p){e.emplaceBack(n,o,s,l,d,Math.round(p.x),Math.round(p.y))}_addCollisionDebugVertices(e,n,o,s,l,d,p){let m=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),_=m.vertexLength,b=p.tileAnchorX,C=p.tileAnchorY;for(let E=0;E<4;E++)o.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(o.collisionVertexArrayExt,n,e.padding,p.zOffset),this._commitLayoutVertex(o.layoutVertexArray,s,l,d,b,C,new ut(e.x1,e.y1)),this._commitLayoutVertex(o.layoutVertexArray,s,l,d,b,C,new ut(e.x2,e.y1)),this._commitLayoutVertex(o.layoutVertexArray,s,l,d,b,C,new ut(e.x2,e.y2)),this._commitLayoutVertex(o.layoutVertexArray,s,l,d,b,C,new ut(e.x1,e.y2)),m.vertexLength+=4;let O=o.indexArray;O.emplaceBack(_,_+1),O.emplaceBack(_+1,_+2),O.emplaceBack(_+2,_+3),O.emplaceBack(_+3,_),m.primitiveLength+=4}_addTextDebugCollisionBoxes(e,n,o,s,l,d){for(let p=s;p<l;p++){let m=o.get(p),_=this.getSymbolInstanceTextSize(e,d,n,p);this._addCollisionDebugVertices(m,_,this.textCollisionBox,m.projectedAnchorX,m.projectedAnchorY,m.projectedAnchorZ,d)}}_addIconDebugCollisionBoxes(e,n,o,s,l,d){for(let p=s;p<l;p++){let m=o.get(p),_=this.getSymbolInstanceIconSize(e,n,d.placedIconSymbolIndex);this._addCollisionDebugVertices(m,_,this.iconCollisionBox,m.projectedAnchorX,m.projectedAnchorY,m.projectedAnchorZ,d)}}generateCollisionDebugBuffers(e,n){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new l0(zu,Nv.members,Ea),this.iconCollisionBox=new l0(zu,Nv.members,Ea);let o=Yd(this.iconSizeData,e),s=Yd(this.textSizeData,e);for(let l=0;l<this.symbolInstances.length;l++){let d=this.symbolInstances.get(l);this._addTextDebugCollisionBoxes(s,e,n,d.textBoxStartIndex,d.textBoxEndIndex,d),this._addTextDebugCollisionBoxes(s,e,n,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d),this._addIconDebugCollisionBoxes(o,e,n,d.iconBoxStartIndex,d.iconBoxEndIndex,d),this._addIconDebugCollisionBoxes(o,e,n,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d)}}getSymbolInstanceTextSize(e,n,o,s){let l=this.text.placedSymbolArray.get(n.rightJustifiedTextSymbolIndex>=0?n.rightJustifiedTextSymbolIndex:n.centerJustifiedTextSymbolIndex>=0?n.centerJustifiedTextSymbolIndex:n.leftJustifiedTextSymbolIndex>=0?n.leftJustifiedTextSymbolIndex:n.verticalPlacedTextSymbolIndex>=0?n.verticalPlacedTextSymbolIndex:s),d=Sg(this.textSizeData,e,l)/Ao;return this.tilePixelRatio*d}getSymbolInstanceIconSize(e,n,o){let s=this.icon.placedSymbolArray.get(o),l=Sg(this.iconSizeData,e,s);return this.tilePixelRatio*l}_commitDebugCollisionVertexUpdate(e,n,o,s){e.emplaceBack(n,-o,-o,s),e.emplaceBack(n,o,-o,s),e.emplaceBack(n,o,o,s),e.emplaceBack(n,-o,o,s)}_updateTextDebugCollisionBoxes(e,n,o,s,l,d){for(let p=s;p<l;p++){let m=o.get(p),_=this.getSymbolInstanceTextSize(e,d,n,p);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,_,m.padding,d.zOffset)}}_updateIconDebugCollisionBoxes(e,n,o,s,l,d){for(let p=s;p<l;p++){let m=o.get(p),_=this.getSymbolInstanceIconSize(e,n,d.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,_,m.padding,d.zOffset)}}updateCollisionDebugBuffers(e,n){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();let o=Yd(this.iconSizeData,e),s=Yd(this.textSizeData,e);for(let l=0;l<this.symbolInstances.length;l++){let d=this.symbolInstances.get(l);this._updateTextDebugCollisionBoxes(s,e,n,d.textBoxStartIndex,d.textBoxEndIndex,d),this._updateTextDebugCollisionBoxes(s,e,n,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d),this._updateIconDebugCollisionBoxes(o,e,n,d.iconBoxStartIndex,d.iconBoxEndIndex,d),this._updateIconDebugCollisionBoxes(o,e,n,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,n,o,s,l,d,p,m,_){let b={};if(n<o){let{x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K,featureIndex:ae}=e.get(n);b.textBox={x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K},b.textFeatureIndex=ae}if(s<l){let{x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K,featureIndex:ae}=e.get(s);b.verticalTextBox={x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K},b.verticalTextFeatureIndex=ae}if(d<p){let{x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K,featureIndex:ae}=e.get(d);b.iconBox={x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K},b.iconFeatureIndex=ae}if(m<_){let{x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K,featureIndex:ae}=e.get(m);b.verticalIconBox={x1:C,y1:O,x2:E,y2:k,padding:R,projectedAnchorX:L,projectedAnchorY:V,projectedAnchorZ:Y,tileAnchorX:J,tileAnchorY:K},b.verticalIconFeatureIndex=ae}return b}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){let o=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,n){let o=e.placedSymbolArray.get(n),s=o.vertexStartIndex+4*o.numGlyphs;for(let l=o.vertexStartIndex;l<s;l+=4)e.indexArray.emplaceBack(l,l+1,l+2),e.indexArray.emplaceBack(l+1,l+2,l+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let n=Math.sin(e),o=Math.cos(e),s=[],l=[],d=[];for(let p=0;p<this.symbolInstances.length;++p){d.push(p);let m=this.symbolInstances.get(p);s.push(0|Math.round(n*m.tileAnchorX+o*m.tileAnchorY)),l.push(m.featureIndex)}return d.sort((p,m)=>s[p]-s[m]||l[m]-l[p]),d}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,n)=>this.symbolInstances.get(n).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,n){let o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===n?o.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let n of this.symbolInstanceIndexes){let o=this.symbolInstances.get(n);this.featureSortOrder.push(o.featureIndex);let{rightJustifiedTextSymbolIndex:s,centerJustifiedTextSymbolIndex:l,leftJustifiedTextSymbolIndex:d,verticalPlacedTextSymbolIndex:p,placedIconSymbolIndex:m,verticalPlacedIconSymbolIndex:_}=o;s>=0&&this.addIndicesForPlacedSymbol(this.text,s),l>=0&&l!==s&&this.addIndicesForPlacedSymbol(this.text,l),d>=0&&d!==l&&d!==s&&this.addIndicesForPlacedSymbol(this.text,d),p>=0&&this.addIndicesForPlacedSymbol(this.text,p),m>=0&&this.addIndicesForPlacedSymbol(this.icon,m),_>=0&&this.addIndicesForPlacedSymbol(this.icon,_)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}xt(Gg,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Gg.addDynamicAttributes=Ug;let fO=new bi({"symbol-placement":new at(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new at(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new at(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Rt(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new at(Me.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new at(Me.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new at(Me.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new at(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new at(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new at(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Rt(Me.layout_symbol["icon-size"]),"icon-text-fit":new Rt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Rt(Me.layout_symbol["icon-image"]),"icon-rotate":new Rt(Me.layout_symbol["icon-rotate"]),"icon-padding":new at(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new at(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new Rt(Me.layout_symbol["icon-offset"]),"icon-anchor":new Rt(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new at(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new at(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new at(Me.layout_symbol["text-rotation-alignment"]),"text-field":new Rt(Me.layout_symbol["text-field"]),"text-font":new Rt(Me.layout_symbol["text-font"]),"text-size":new Rt(Me.layout_symbol["text-size"]),"text-max-width":new Rt(Me.layout_symbol["text-max-width"]),"text-line-height":new Rt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new Rt(Me.layout_symbol["text-letter-spacing"]),"text-justify":new Rt(Me.layout_symbol["text-justify"]),"text-radial-offset":new Rt(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new at(Me.layout_symbol["text-variable-anchor"]),"text-anchor":new Rt(Me.layout_symbol["text-anchor"]),"text-max-angle":new at(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new at(Me.layout_symbol["text-writing-mode"]),"text-rotate":new Rt(Me.layout_symbol["text-rotate"]),"text-padding":new at(Me.layout_symbol["text-padding"]),"text-keep-upright":new at(Me.layout_symbol["text-keep-upright"]),"text-transform":new Rt(Me.layout_symbol["text-transform"]),"text-offset":new Rt(Me.layout_symbol["text-offset"]),"text-allow-overlap":new at(Me.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new at(Me.layout_symbol["text-ignore-placement"]),"text-optional":new at(Me.layout_symbol["text-optional"]),visibility:new at(Me.layout_symbol.visibility)});var c0={paint:new bi({"icon-opacity":new Rt(Me.paint_symbol["icon-opacity"]),"icon-emissive-strength":new Rt(Me.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Rt(Me.paint_symbol["text-emissive-strength"]),"icon-color":new Rt(Me.paint_symbol["icon-color"]),"icon-halo-color":new Rt(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Rt(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Rt(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new at(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new at(Me.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Rt(Me.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Rt(Me.paint_symbol["text-opacity"]),"text-color":new Rt(Me.paint_symbol["text-color"],{runtimeType:Qo,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Rt(Me.paint_symbol["text-halo-color"]),"text-halo-width":new Rt(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new Rt(Me.paint_symbol["text-halo-blur"]),"text-translate":new at(Me.paint_symbol["text-translate"]),"text-translate-anchor":new at(Me.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new at(Me.paint_symbol["icon-color-saturation"])}),layout:fO};class vb{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Hr,this.defaultValue=e}evaluate(e){if(e.formattedSection){let n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xt(vb,"FormatSectionOverride",{omit:["defaultValue"]});class Hg extends ir{constructor(e,n,o){super(e,c0,n,o)}recalculate(e,n){super.recalculate(e,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));let o=this.layout.get("text-writing-mode");if(o){let s=[];for(let l of o)s.indexOf(l)<0&&s.push(l);this.layout._values["text-writing-mode"]=s}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,n,o,s){let l=this.layout.get(e).evaluate(n,{},o,s),d=this._unevaluatedLayout._values[e];return d.isDataDriven()||bu(d.value)||!l?l:function(p,m){return m.replace(/{([^{}]+)}/g,(_,b)=>b in p?String(p[b]):"")}(n.properties,l)}createBucket(e){return new Gg(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(let e of c0.paint.overridableProperties){if(!Hg.hasPaintOverride(this.layout,e))continue;let n=this.paint.get(e),o=new vb(n),s=new Sd(o,n.property.specification,this.scope,this.options),l=null;l=n.value.kind==="constant"||n.value.kind==="source"?new jh("source",s):new wu("composite",s,n.value.zoomStops,n.value._interpolationType),this.paint._values[e]=new pc(n.property,l,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,o){return!(!this.layout||n.isDataDriven()||o.isDataDriven())&&Hg.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){let o=e.get("text-field"),s=c0.paint.properties[n],l=!1,d=p=>{for(let m of p)if(s.overrides&&s.overrides.hasOverride(m))return void(l=!0)};if(o.value.kind==="constant"&&o.value.value instanceof io)d(o.value.value.sections);else if(o.value.kind==="source"){let p=_=>{l||(_ instanceof Er&&Ni(_.value)===ms?d(_.value.sections):_ instanceof xs?d(_.sections):_.eachChild(p))},m=o.value;m._styleExpression&&p(m._styleExpression.expression)}return l}getProgramIds(){let e=this.paint.get("icon-opacity").constantOr(1)!==0,n=this.paint.get("text-opacity").constantOr(1)!==0,o=[];return e&&o.push("symbolIcon"),n&&o.push("symbolSDF"),o}getDefaultProgramParams(e,n){return{config:new F(this,n),overrideFog:!1}}}let gO=new bi({visibility:new at(Me.layout_background.visibility)});var mO={paint:new bi({"background-color":new at(Me.paint_background["background-color"]),"background-pattern":new at(Me.paint_background["background-pattern"]),"background-opacity":new at(Me.paint_background["background-opacity"]),"background-emissive-strength":new at(Me.paint_background["background-emissive-strength"])}),layout:gO};let _O=new bi({visibility:new at(Me.layout_raster.visibility)});var yO={paint:new bi({"raster-opacity":new at(Me.paint_raster["raster-opacity"]),"raster-color":new Ml(Me.paint_raster["raster-color"]),"raster-color-mix":new at(Me.paint_raster["raster-color-mix"]),"raster-color-range":new at(Me.paint_raster["raster-color-range"]),"raster-hue-rotate":new at(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new at(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new at(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new at(Me.paint_raster["raster-saturation"]),"raster-contrast":new at(Me.paint_raster["raster-contrast"]),"raster-resampling":new at(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new at(Me.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new at(Me.paint_raster["raster-emissive-strength"]),"raster-array-band":new at(Me.paint_raster["raster-array-band"]),"raster-elevation":new at(Me.paint_raster["raster-elevation"])}),layout:_O},u0=Hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class d0{constructor(e,n,o,s){this.context=e,this.format=o,this.texture=e.gl.createTexture(),this.update(n,s)}update(e,n,o){let{width:s,height:l}=e,{context:d}=this,{gl:p}=d;if(p.bindTexture(p.TEXTURE_2D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(this.format===p.RGBA&&(!n||n.premultiply!==!1)),o||this.size&&this.size[0]===s&&this.size[1]===l){let{x:m,y:_}=o||{x:0,y:0};if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap)p.texSubImage2D(p.TEXTURE_2D,0,m,_,p.RGBA,p.UNSIGNED_BYTE,e);else{let b=this.format,C=p.UNSIGNED_BYTE;this.format===p.R32F&&(b=p.RED,C=p.FLOAT),p.texSubImage2D(p.TEXTURE_2D,0,m,_,s,l,b,C,e.data)}}else if(this.size=[s,l],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap){let m=this.format;this.format===p.R8&&(m=p.RED),p.texImage2D(p.TEXTURE_2D,0,this.format,m,p.UNSIGNED_BYTE,e)}else{let m=this.format,_=this.format,b=p.UNSIGNED_BYTE;this.format===p.DEPTH_COMPONENT&&(m=p.DEPTH_COMPONENT16,b=p.UNSIGNED_SHORT),this.format===p.R8&&(_=p.RED),this.format===p.R32F&&(b=p.FLOAT,_=p.RED),p.texImage2D(p.TEXTURE_2D,0,m,s,l,0,_,b,e.data)}this.useMipmap=!!(n&&n.useMipmap),this.useMipmap&&p.generateMipmap(p.TEXTURE_2D)}bind(e,n,o=!1){let{context:s}=this,{gl:l}=s;l.bindTexture(l.TEXTURE_2D,this.texture),e!==this.minFilter&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this.useMipmap&&!o?e===l.NEAREST?l.NEAREST_MIPMAP_NEAREST:l.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),n!==this.wrapS&&(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,n),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,n),this.wrapS=n)}bindExtraParam(e,n,o,s){let{context:l}=this,{gl:d}=l;d.bindTexture(d.TEXTURE_2D,this.texture),n!==this.magFilter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),this.magFilter=n),e!==this.minFilter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?e===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),o!==this.wrapS&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,o),this.wrapS=o),s!==this.wrapT&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,s),this.wrapT=s)}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class $g{constructor(e,n){this.context=e,this.texture=n}bind(e,n){let{context:o}=this,{gl:s}=o;s.bindTexture(s.TEXTURE_2D,this.texture),e!==this.minFilter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,e),this.minFilter=e),n!==this.wrapS&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,n),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,n),this.wrapS=n)}}function Wg(t,e,n,o,s,l,d,p){let m=[t,e,1,n,o,1,s,l,1],_=[d,p,1],b=r.co.adjoint([],m),[C,O,E]=r.N.transformMat3(_,_,b);return r.co.multiply(m,m,[C,0,0,0,O,0,0,0,E])}function bb(t,e,n,o,s,l,d,p){let m=function(_,b,C,O,E,k,R,L){let V=Wg(0,0,1,0,1,1,0,1),Y=Wg(_,b,C,O,E,k,R,L),J=r.co.adjoint([],V);return r.co.multiply(Y,Y,J)}(t,e,n,o,s,l,d,p);return[m[2]/m[8]/ht,m[5]/m[8]/ht]}function Zg(t){return[t[0],Math.min(Math.max(t[1],-un),un)]}class wb extends ga{constructor(e,n,o,s){super(),this.id=e,this.dispatcher=o,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(s),this.options=n,this._dirty=!1}load(e,n){if(this._loaded=n||!1,this.fire(new Va("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=tt(this.map._requestManager.transformRequest(this.url,bn.Image),(o,s)=>{this._imageRequest=null,this._loaded=!0,o?this.fire(new Gc(o)):s&&(this.image=s instanceof HTMLImageElement?Ke.getImageData(s):s,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new $g(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Va("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof $g||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let n=e[0][1],o=e[0][1];for(let l of e)l[1]>o&&(o=l[1]),l[1]<n&&(n=l[1]);let s=(o+n)/2;if(s>un?this.onNorthPole=!0:s<-un&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){let l=e.map(Tn.fromLngLat);this.tileID=function(d){let p=1/0,m=1/0,_=-1/0,b=-1/0;for(let R of d)p=Math.min(p,R.x),m=Math.min(m,R.y),_=Math.max(_,R.x),b=Math.max(b,R.y);let C=Math.max(_-p,b-m),O=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),E=Math.pow(2,O),k=Math.floor((p+_)/2*E);return k>1&&(k-=1),new Ze(O,k,Math.floor((m+b)/2*E))}(l),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Va("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(let V in this.tiles){let Y=this.tiles[V];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;let n=Ip(new Ze(0,0,0),this.map.transform.projection),o=[n.projection.project(this.coordinates[0][0],this.coordinates[0][1]),n.projection.project(this.coordinates[1][0],this.coordinates[1][1]),n.projection.project(this.coordinates[2][0],this.coordinates[2][1]),n.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(V){let Y=V[1].x-V[0].x,J=V[1].y-V[0].y,K=V[2].x-V[1].x,ae=V[2].y-V[1].y,ie=V[3].x-V[2].x,de=V[3].y-V[2].y,me=V[0].x-V[3].x,ve=V[0].y-V[3].y,Pe=Y*ae-K*J,be=K*de-ie*ae,Be=ie*ve-me*de,Ue=me*J-Y*ve;return Pe>0&&be>0&&Be>0&&Ue>0||Pe<0&&be<0&&Be<0&&Ue<0}(o))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);let s=Ip(this.tileID,this.map.transform.projection),[l,d,p,m]=this.coordinates.map(V=>{let Y=s.projection.project(V[0],V[1]);return fb(s,Y)._round()});this.perspectiveTransform=bb(l.x,l.y,d.x,d.y,p.x,p.y,m.x,m.y);let _=this._boundsArray=new es;_.emplaceBack(l.x,l.y,0,0),_.emplaceBack(d.x,d.y,ht,0),_.emplaceBack(m.x,m.y,0,ht),_.emplaceBack(p.x,p.y,ht,ht),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(_,u0.members),this.boundsSegments=Ii.simpleSegment(0,0,4,2);let b=[],C=[Zg((O=this.coordinates)[0]),Zg(O[1]),Zg(O[2]),Zg(O[3])];var O;let[E,k,R,L]=function(V){let Y=V[0][0],J=Y,K=V[0][1],ae=K;for(let ie=1;ie<V.length;ie++)V[ie][0]<Y?Y=V[ie][0]:V[ie][0]>J&&(J=V[ie][0]),V[ie][1]<K?K=V[ie][1]:V[ie][1]>ae&&(ae=V[ie][1]);return[Y,K,J-Y,ae-K]}(C);{let V=new es,[Y,J,K,ae]=function(Ne){let st=Ne[0].x,Ge=st,bt=Ne[0].y,mt=bt;for(let qe=1;qe<Ne.length;qe++)Ne[qe].x<st?st=Ne[qe].x:Ne[qe].x>Ge&&(Ge=Ne[qe].x),Ne[qe].y<bt?bt=Ne[qe].y:Ne[qe].y>mt&&(mt=Ne[qe].y);return[st,bt,Ge-st,mt-bt]}(o),ie=Ne=>[(Ne.x-Y)/K,(Ne.y-J)/ae],[de,me,ve,Pe]=o.map(ie),be=function(Ne,st,Ge,bt,mt,qe,Nt,Tt){let vt=Wg(0,0,1,0,1,1,0,1),Ye=Wg(Ne,st,Ge,bt,mt,qe,Nt,Tt),Bt=r.co.adjoint([],Ye);return r.co.multiply(vt,vt,Bt)}(de[0],de[1],me[0],me[1],ve[0],ve[1],Pe[0],Pe[1]);this.elevatedGlobePerspectiveTransform=bb(de[0],de[1],me[0],me[1],ve[0],ve[1],Pe[0],Pe[1]);let Be=(Ne,st)=>{b.push(Ne.lng);let Ge=Math.round((Ne.lng-E)/R*ht),bt=Math.round((Ne.lat-k)/L*ht),mt=ie(st),qe=r.N.transformMat3([],[mt[0],mt[1],1],be),Nt=Math.round(qe[0]/qe[2]*ht),Tt=Math.round(qe[1]/qe[2]*ht);V.emplaceBack(Ge,bt,Nt,Tt)},Ue=o[3].x-o[0].x,Ie=o[3].y-o[0].y,je=o[2].x-o[1].x,Se=o[2].y-o[1].y;for(let Ne=0;Ne<65;Ne++){let st=Ne/64,Ge=[o[0].x+st*Ue,o[0].y+st*Ie],bt=[o[1].x+st*je,o[1].y+st*Se],mt=bt[0]-Ge[0],qe=bt[1]-Ge[1];for(let Nt=0;Nt<65;Nt++){let Tt=Nt/64,vt={x:Ge[0]+mt*Tt,y:Ge[1]+qe*Tt,z:0};Be(n.projection.unproject(vt.x,vt.y),vt)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(V,u0.members)}{this.maxLongitudeTriangleSize=0;let V=[],Y=new ro,J=(K,ae,ie)=>{Y.emplaceBack(K,ae,ie);let de=b[K],me=b[ae],ve=b[ie],Pe=Math.min(Math.min(de,me),ve),be=Math.max(Math.max(de,me),ve)-Pe;be>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=be),V.push(Pe+be/2)};for(let K=0;K<64;K++)for(let ae=0;ae<64;ae++){let ie=65*K+ae,de=ie+1,me=ie+65,ve=me+1;J(ie,me,de),J(de,me,ve)}[V,Y]=function(K,ae){let ie=Array.from({length:K.length},(ve,Pe)=>Pe);ie.sort((ve,Pe)=>K[ve]-K[Pe]);let de=[],me=new ro;for(let ve=0;ve<ie.length;ve++){let Pe=ie[ve];de.push(K[Pe]);let be=3*Pe,Be=be+1;me.emplaceBack(ae.uint16[be],ae.uint16[Be],ae.uint16[Be+1])}return[de,me]}(V,Y),this.elevatedGlobeTrianglesCenterLongitudes=V,this.elevatedGlobeIndexBuffer=e.createIndexBuffer(Y)}this.elevatedGlobeSegments=Ii.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,R/ht,0,L/ht,0,0,k,E,0])}prepare(){let e=Object.keys(this.tiles).length!==0;if(this.tileID&&!e)return;let n=this.map.painter.context,o=n.gl;!this._dirty||this.texture instanceof $g||(this.texture?this.texture.update(this.image):(this.texture=new d0(n,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(n)}loadTile(e,n){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},n(null)):(e.state="errored",n(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){let n=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!n)return null;let o=this.elevatedGlobeTrianglesCenterLongitudes,s=((b,C)=>b+360*Math.round((C-b)/360))(e+180,o[0]),l=new Ii,d=(b,C)=>{l.segments.push({vertexOffset:0,primitiveOffset:b,vertexLength:n.segments[0].vertexLength,primitiveLength:C,sortKey:void 0,vaos:{}})},p=.51*this.maxLongitudeTriangleSize;if(Math.abs(o[0]-s)<=p){let b=ze(o,0,o.length,s+p);return b===o.length||d(b,pe(o,b+1,o.length,s+360-p)-b),l}s<o[0]&&(s+=360);let m=pe(o,0,o.length,s-p);if(m===o.length)return d(0,o.length),l;d(0,m-0);let _=ze(o,m+1,o.length,s+p);return _!==o.length&&d(_,o.length-_),l}}let xO=(Math.pow(256,2)-1)/16907520;class Cb extends ir{constructor(e,n,o){super(e,yO,n,o),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isLayerDraped(e){return!(e&&e._source instanceof wb&&(e._source.onNorthPole||e._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(e){e!=="raster-color"&&e!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(e){if(!this.hasColorMap()||!this._curRampRange)return;let n=this._transitionablePaint._values["raster-color"].value.expression,[o,s]=e||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(o)&&isNaN(s)||o===this._curRampRange[0]&&s===this._curRampRange[1]||(this.colorRamp=vp({expression:n,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:o,end:s}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[o,s])}}let vO=new bi({visibility:new at(Me["layout_raster-particle"].visibility)});var bO={paint:new bi({"raster-particle-array-band":new at(Me["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new at(Me["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Ml(Me["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new at(Me["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new at(Me["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new at(Me["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new at(Me["paint_raster-particle"]["raster-particle-reset-rate-factor"])}),layout:vO};class Mb extends ir{constructor(e,n,o){super(e,bO,n,o),this._updateColorRamp(),this.onRemove=s=>{this.colorRampTexture&&this.colorRampTexture.destroy(),this.transformFeedbackObject&&s.painter.context.gl.deleteTransformFeedback(this.transformFeedbackObject),this.tileFramebuffer&&this.tileFramebuffer.destroy()},this.lastInvalidatedAt=Ke.now()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isLayerDraped(e){return!1}_handleSpecialPaintPropertyUpdate(e){e!=="raster-particle-color"&&e!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),e==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;let e=this._transitionablePaint._values["raster-particle-color"].value.expression,n=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=vp({expression:e,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:n}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Ke.now()}}class wO extends ir{constructor(e,n){super(e,{},n),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(e){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}let CO=new bi({visibility:new at(Me.layout_sky.visibility)});var MO={paint:new bi({"sky-type":new at(Me.paint_sky["sky-type"]),"sky-atmosphere-sun":new at(Me.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new at(Me.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new at(Me.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new at(Me.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ml(Me.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new at(Me.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new at(Me.paint_sky["sky-atmosphere-color"]),"sky-opacity":new at(Me.paint_sky["sky-opacity"])}),layout:CO};function h0(t,e,n){let o=[0,0,1],s=r.bi.identity([]);return r.bi.rotateY(s,s,n?-mn(t)+Math.PI:mn(t)),r.bi.rotateX(s,s,-mn(e)),r.N.transformQuat(o,o,s),r.N.normalize(o,o)}var AO={paint:new bi({})};function Ab(t,e){let n=qg(t.projection,t.zoom,t.width,t.height),o=function(l,d,p,m,_){let b=new xe(p.lng-180*Pc,p.lat),C=new xe(p.lng+180*Pc,p.lat),O=l.project(b.lng,b.lat),E=l.project(C.lng,C.lat),k=-Math.atan2(E.y-O.y,E.x-O.x),R=Tn.fromLngLat(p);R.y=on(R.y,-1+Pc,1-Pc);let L=R.toLngLat(),V=l.project(L.lng,L.lat),Y=Tn.fromLngLat(L);Y.x+=Pc;let J=Y.toLngLat(),K=l.project(J.lng,J.lat),ae=Tb(K.x-V.x,K.y-V.y,k),ie=Tn.fromLngLat(L);ie.y+=Pc;let de=ie.toLngLat(),me=l.project(de.lng,de.lat),ve=Tb(me.x-V.x,me.y-V.y,k),Pe=Math.abs(ae.x)/Math.abs(ve.y),be=r.a6.identity([]);r.a6.rotateZ(be,be,-k*(1-(_?0:m)));let Be=r.a6.identity([]);return r.a6.scale(Be,Be,[1,1-(1-Pe)*m,1]),Be[4]=-ve.x/ve.y*m,r.a6.rotateZ(Be,Be,k),r.a6.multiply(Be,be,Be),Be}(t.projection,0,t.center,n,e),s=Pb(t);return r.a6.scale(o,o,[s,s,1]),o}function Pb(t){let e=t.projection,n=qg(t.projection,t.zoom,t.width,t.height),o=Ob(e,t.center),s=Ob(e,xe.convert(e.center));return Math.pow(2,o*n+(1-n)*s)}function qg(t,e,n,o,s=1/0){let l=t.range;if(!l)return 0;let d=Math.min(s,Math.max(n,o)),p=Math.log(d/1024)/Math.LN2;return On(l[0]+p,l[1]+p,e)}let Pc=1/4e4;function Ob(t,e){let n=on(e.lat,-un,un),o=new xe(e.lng-180*Pc,n),s=new xe(e.lng+180*Pc,n),l=t.project(o.lng,n),d=t.project(s.lng,n),p=Tn.fromLngLat(o),m=Tn.fromLngLat(s),_=d.x-l.x,b=d.y-l.y,C=m.x-p.x,O=m.y-p.y,E=Math.sqrt((C*C+O*O)/(_*_+b*b));return Math.log(E)/Math.LN2}function Tb(t,e,n){let o=Math.cos(n),s=Math.sin(n);return{x:t*o-e*s,y:t*s+e*o}}function Sb(t,e,n){r.a6.identity(t),r.a6.rotateZ(t,t,mn(e[2])),r.a6.rotateX(t,t,mn(e[0])),r.a6.rotateY(t,t,mn(e[1])),r.a6.scale(t,t,n),r.a6.multiply(t,t,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Yg(t,e,n,o,s,l,d,p){let m=[n[0]-e[0],n[1]-e[1],0],_=[o[0]-e[0],o[1]-e[1],0];if(r.N.length(m)<1e-12||r.N.length(_)<1e-12)return r.bi.identity(t);let b=r.N.cross([],m,_);r.N.normalize(b,b),r.N.subtract(_,o,e),m[2]=(l-s)*p,_[2]=(d-s)*p;let C=m;return r.N.cross(C,m,_),r.N.normalize(C,C),r.bi.rotationTo(t,b,C)}function p0(t,e,n=!1){let o=xc(e.zoom),s=function(l,d,p){let m=d.worldSize,_=[l[12],l[13],l[14]],b=Mn(_[1]/m),C=$t(_[0]/m),O=r.a6.identity([]),E=Zt(1,b)*m,k=Zt(1,0)*m*dn(b,d.zoom),R=1/F_(m),L=k*R;if(p){let K=qg(d.projection,d.zoom,d.width,d.height,1024);L=R*d.projection.pixelSpaceConversion(d.center.lat,m,K)}let V=ke(b,C);r.N.add(V,V,r.N.scale([],r.N.normalize([],V),E*L*_[2]));let Y=function(K){let ae=[K[0],K[1],K[2]],ie=[0,1,0],de=r.N.cross([],ie,ae);return r.N.cross(ie,ae,de),r.N.squaredLength(ie)===0&&(ie=[0,1,0],r.N.cross(de,ae,ie)),r.N.normalize(de,de),r.N.normalize(ie,ie),r.N.normalize(ae,ae),[de[0],de[1],de[2],0,ie[0],ie[1],ie[2],0,ae[0],ae[1],ae[2],0,K[0],K[1],K[2],1]}(V);r.a6.scale(O,O,[L,L,L*E]),r.a6.translate(O,O,[-_[0],-_[1],-_[2]]);let J=r.a6.multiply([],d.globeMatrix,Y);return r.a6.multiply(J,J,O),r.a6.multiply(J,J,l),J}(t,e,n);if(o>0){let l=function(d,p){let m=p.worldSize,_=Zt(1,0)*m*dn(p.center.lat,p.zoom)/F_(m),b=Zt(1,p.center.lat)*m,C=r.a6.identity([]);return r.a6.rotateY(C,C,mn(p.center.lng)),r.a6.rotateX(C,C,mn(p.center.lat)),r.a6.translate(C,C,[0,0,X]),r.a6.scale(C,C,[_,_,_*b]),r.a6.translate(C,C,[p.point.x-.5*m,p.point.y-.5*m,0]),r.a6.multiply(C,C,d),r.a6.multiply(C,p.globeMatrix,C)}(t,e);return function(d,p,m){let _=(k,R,L)=>{let V=r.N.length(k),Y=r.N.length(R),J=Il(k,R,L);return r.N.scale(J,J,1/r.N.length(J)*gn(V,Y,L))},b=_([d[0],d[1],d[2]],[p[0],p[1],p[2]],m),C=_([d[4],d[5],d[6]],[p[4],p[5],p[6]],m),O=_([d[8],d[9],d[10]],[p[8],p[9],p[10]],m),E=Il([d[12],d[13],d[14]],[p[12],p[13],p[14]],m);return[b[0],b[1],b[2],0,C[0],C[1],C[2],0,O[0],O[1],O[2],0,E[0],E[1],E[2],1]}(s,l,o)}return s}function Eb(t,e,n,o){let s=Si.projectAabbCorners(o,n),l=Number.MAX_VALUE,d=-1;for(let _=0;_<s.length;++_){let b=s[_];b[0]=(.5*b[0]+.5)*e.width,b[1]=(.5-.5*b[1])*e.height,b[2]<l&&(d=_,l=b[2])}let p=_=>new ut(s[_][0],s[_][1]),m;switch(d){case 0:case 6:m=[p(1),p(5),p(4),p(7),p(3),p(2),p(1)];break;case 1:case 7:m=[p(0),p(4),p(5),p(6),p(2),p(3),p(0)];break;case 3:case 5:m=[p(1),p(0),p(4),p(7),p(6),p(2),p(1)];break;default:m=[p(1),p(5),p(6),p(7),p(3),p(0),p(1)]}if(Da(t,m))return l}let PO=Hn([{name:"a_pos_3f",components:3,type:"Float32"}]),OO=Hn([{name:"a_color_3f",components:3,type:"Float32"}]),TO=Hn([{name:"a_color_4f",components:4,type:"Float32"}]),SO=Hn([{name:"a_uv_2f",components:2,type:"Float32"}]),EO=Hn([{name:"a_normal_3f",components:3,type:"Float32"}]),IO=Hn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),DO=Hn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class Ib{constructor(e,n){this.feature=e,this.instancedDataOffset=n,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class Db{constructor(){this.instancedDataArray=new dp,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class f0{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(e,n,o,s){this.tileToMeter=hn(o);let l=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(let{feature:d,id:p,index:m,sourceLayerIndex:_}of e){let b=qi(d,l);if(!this.layers[0]._featureFilter.filter(new vi(this.zoom),b,o))continue;let C={id:p,sourceLayerIndex:_,index:m,geometry:l?b.geometry:so(d,o,s),properties:d.properties,type:d.type,patterns:{}},O=this.addFeature(C,C.geometry,b);O&&n.featureIndex.insert(d,C.geometry,m,_,this.index,this.instancesPerModel[O].instancedDataArray.length,ht/32)}this.lookup=null}update(e,n,o,s){for(let l in this.instancesPerModel){let d=this.instancesPerModel[l];for(let p in e)d.idToFeaturesIndex.hasOwnProperty(p)&&this.evaluate(d.features[d.idToFeaturesIndex[p]],e[p],d,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(let n in this.instancesPerModel){let o=this.instancesPerModel[n];for(let s of o.features){let l=this.layers[0],d=s.feature,p=this.canonical,m=l.paint.get("model-rotation").evaluate(d,{},p),_=l.paint.get("model-scale").evaluate(d,{},p),b=l.paint.get("model-translation").evaluate(d,{},p);r.N.exactEquals(s.rotation,m)&&r.N.exactEquals(s.scale,_)&&r.N.exactEquals(s.translation,b)||(this.evaluate(s,s.featureStates,o,!0),e=!0)}}return e}isEmpty(){for(let e in this.instancesPerModel)if(this.instancesPerModel[e].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(let n in this.instancesPerModel){let o=this.instancesPerModel[n];o.instancedDataArray.length<0||o.instancedDataArray.length===0||(o.instancedDataBuffer?o.instancedDataBuffer.updateData(o.instancedDataArray):o.instancedDataBuffer=e.createVertexBuffer(o.instancedDataArray,IO.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(let e in this.instancesPerModel){let n=this.instancesPerModel[e];n.instancedDataArray.length!==0&&n.instancedDataBuffer&&n.instancedDataBuffer.destroy()}}addFeature(e,n,o){let s=this.layers[0],l=s.layout.get("model-id").evaluate(o,{},this.canonical);if(!l)return ci(`modelId is not evaluated for layer ${s.id} and it is not going to get rendered.`),l;this.instancesPerModel[l]||(this.instancesPerModel[l]=new Db);let d=this.instancesPerModel[l],p=d.instancedDataArray,m=new Ib(o,p.length);for(let _ of n)for(let b of _){if(b.x<0||b.x>=ht||b.y<0||b.y>=ht)continue;let C=(this.lookupDim-1)/ht,O=this.lookupDim*(b.y*C|0)+b.x*C|0;if(this.lookup){if(this.lookup[O]!==0)continue;this.lookup[O]=1}this.instanceCount++;let E=p.length;p.resize(E+1),d.instancesEvaluatedElevation.push(0),p.float32[16*E]=b.x,p.float32[16*E+1]=b.y}return m.instancedDataCount=d.instancedDataArray.length-m.instancedDataOffset,m.instancedDataCount>0&&(e.id&&(d.idToFeaturesIndex[e.id]=d.features.length),d.features.push(m),this.evaluate(m,{},d,!1)),l}evaluate(e,n,o,s){let l=this.layers[0],d=e.feature,p=this.canonical,m=e.rotation=l.paint.get("model-rotation").evaluate(d,n,p),_=e.scale=l.paint.get("model-scale").evaluate(d,n,p),b=e.translation=l.paint.get("model-translation").evaluate(d,n,p),C=l.paint.get("model-color").evaluate(d,n,p);C.a=l.paint.get("model-color-mix-intensity").evaluate(d,n,p);let O=[];this.maxVerticalOffset<b[2]&&(this.maxVerticalOffset=b[2]),this.maxScale=Math.max(Math.max(this.maxScale,_[0]),Math.max(_[1],_[2])),Sb(O,m,_);let E=Math.round(100*C.a)+C.b/1.05;for(let k=0;k<e.instancedDataCount;++k){let R=e.instancedDataOffset+k,L=16*R,V=o.instancedDataArray.float32,Y=0;s&&(Y=V[L+6]-o.instancesEvaluatedElevation[R]);let J=0|V[L+1];V[L]=(0|V[L])+C.r/1.05,V[L+1]=J+C.g/1.05,V[L+2]=E,V[L+3]=1/(p.z>10?this.tileToMeter:hn(p,J)),V[L+4]=b[0],V[L+5]=b[1],V[L+6]=b[2]+Y,V[L+7]=O[0],V[L+8]=O[1],V[L+9]=O[2],V[L+10]=O[4],V[L+11]=O[5],V[L+12]=O[6],V[L+13]=O[8],V[L+14]=O[9],V[L+15]=O[10],o.instancesEvaluatedElevation[R]=b[2]}}}xt(f0,"ModelBucket",{omit:["layers"]}),xt(Db,"PerModelAttributes"),xt(Ib,"ModelFeature");let kO=new bi({visibility:new at(Me.layout_model.visibility),"model-id":new Rt(Me.layout_model["model-id"])});var RO={paint:new bi({"model-opacity":new at(Me.paint_model["model-opacity"]),"model-rotation":new Rt(Me.paint_model["model-rotation"]),"model-scale":new Rt(Me.paint_model["model-scale"]),"model-translation":new Rt(Me.paint_model["model-translation"]),"model-color":new Rt(Me.paint_model["model-color"]),"model-color-mix-intensity":new Rt(Me.paint_model["model-color-mix-intensity"]),"model-type":new at(Me.paint_model["model-type"]),"model-cast-shadows":new at(Me.paint_model["model-cast-shadows"]),"model-receive-shadows":new at(Me.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new at(Me.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Rt(Me.paint_model["model-emissive-strength"]),"model-roughness":new Rt(Me.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Rt(Me.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new at(Me.paint_model["model-cutoff-fade-range"])}),layout:kO};let Xu=64,ih={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function kb(t,e,n,o,s,l,d,p,m,_=!1){let b=n.zoom,C=n.project(o),O=dn(o.lat,b),E=1/O;r.a6.identity(t),r.a6.translate(t,t,[C.x+d[0]*E,C.y+d[1]*E,d[2]]);let k=1,R=1,L=n.worldSize;if(_){if(n.projection.name==="mercator"){let K=0;n.elevation&&(K=n.elevation.getAtPointOrZero(new Tn(C.x/L,C.y/L),0));let ae=r.a7.transformMat4([],[C.x,C.y,K,1],n.projMatrix)[3]/n.cameraToCenterDistance;k=ae,R=ae*dn(n.center.lat,b)}else if(n.projection.name==="globe"){let K=p0(t,n),ae=r.a6.multiply([],n.projMatrix,K),ie=[0,0,0,1];r.a7.transformMat4(ie,ie,ae);let de=ie[3]/n.cameraToCenterDistance,me=xc(b),ve=n.projection.pixelsPerMeter(o.lat,L)*dn(o.lat,b),Pe=n.projection.pixelsPerMeter(n.center.lat,L)*dn(n.center.lat,b);k=de/gn(ve,wi(n.center.lat),me),R=de*O/ve,k*=Pe,R*=Pe}}else k=E;r.a6.scale(t,t,[k,k,R]);let V=[...t],Y=e.orientation,J=[];if(Sb(J,[Y[0]+s[0],Y[1]+s[1],Y[2]+s[2]],l),r.a6.multiply(t,V,J),p&&n.elevation){let K=0,ae=[];if(m&&n.elevation){K=function(me,ve,Pe,be,Be){let Ue=ve.elevation;if(!Ue)return 0;let Ie=Si.projectAabbCorners(Pe,be),je=Zt(1,Be.lat)*ve.worldSize,Se=function(Bt,tn){let Vt=[0,0,1],nn=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(let Ht of nn){let xn=Bt[Ht.corners[0]],qt=Bt[Ht.corners[1]],ei=Bt[Ht.corners[2]],In=[qt[0]-xn[0],qt[1]-xn[1],tn*(qt[2]-xn[2])],zn=r.N.cross(In,In,[ei[0]-xn[0],ei[1]-xn[1],tn*(ei[2]-xn[2])]);r.N.normalize(zn,zn),Ht.dotProductWithUp=r.N.dot(zn,Vt)}return nn.sort((Ht,xn)=>Ht.dotProductWithUp-xn.dotProductWithUp),nn[0].corners}(Ie,je),Ne=Ie[Se[0]],st=Ie[Se[1]],Ge=Ie[Se[2]],bt=Ie[Se[3]],mt=Ue.getAtPointOrZero(new Tn(Ne[0]/ve.worldSize,Ne[1]/ve.worldSize),0),qe=Ue.getAtPointOrZero(new Tn(st[0]/ve.worldSize,st[1]/ve.worldSize),0),Nt=Ue.getAtPointOrZero(new Tn(Ge[0]/ve.worldSize,Ge[1]/ve.worldSize),0),Tt=Ue.getAtPointOrZero(new Tn(bt[0]/ve.worldSize,bt[1]/ve.worldSize),0),vt=(mt+Tt)/2,Ye=(qe+Nt)/2;return vt>Ye?qe<Nt?Yg(me,st,bt,Ne,qe,Tt,mt,je):Yg(me,Ge,Ne,bt,Nt,mt,Tt,je):mt<Tt?Yg(me,Ne,st,Ge,mt,qe,Nt,je):Yg(me,bt,Ge,st,Tt,Nt,qe,je),Math.max(vt,Ye)}(ae,n,e.aabb,t,o);let ie=r.a6.fromQuat([],ae),de=r.a6.multiply([],ie,J);r.a6.multiply(t,V,de)}else K=n.elevation.getAtPointOrZero(new Tn(C.x/L,C.y/L),0);K!==0&&(t[14]+=K)}}function Bp(t,e,n=!1){t.uploaded||(t.gfxTexture=new d0(e,t.image,n?e.gl.R8:e.gl.RGBA,{useMipmap:t.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),t.uploaded=!0,t.image=null)}function zO(t,e,n){t.indexBuffer=e.createIndexBuffer(t.indexArray,!1,!0),t.vertexBuffer=e.createVertexBuffer(t.vertexArray,PO.members,!1,!0),t.normalArray&&(t.normalBuffer=e.createVertexBuffer(t.normalArray,EO.members,!1,!0)),t.texcoordArray&&(t.texcoordBuffer=e.createVertexBuffer(t.texcoordArray,SO.members,!1,!0)),t.colorArray&&(t.colorBuffer=e.createVertexBuffer(t.colorArray,(t.colorArray.bytesPerElement===12?OO:TO).members,!1,!0)),t.featureArray&&(t.pbrBuffer=e.createVertexBuffer(t.featureArray,DO.members,!0)),t.segments=Ii.simpleSegment(0,0,t.vertexArray.length,t.indexArray.length);let o=t.material;o.pbrMetallicRoughness.baseColorTexture&&Bp(o.pbrMetallicRoughness.baseColorTexture,e),o.pbrMetallicRoughness.metallicRoughnessTexture&&Bp(o.pbrMetallicRoughness.metallicRoughnessTexture,e),o.normalTexture&&Bp(o.normalTexture,e),o.occlusionTexture&&Bp(o.occlusionTexture,e,n),o.emissionTexture&&Bp(o.emissionTexture,e)}function g0(t,e,n){if(t.meshes)for(let o of t.meshes)zO(o,e,n);if(t.children)for(let o of t.children)g0(o,e,n)}function Xg(t){if(t.meshes)for(let e of t.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(t.children)for(let e of t.children)Xg(e)}function m0(t){if(t.meshes)for(let n of t.meshes)n.vertexBuffer&&(n.vertexBuffer.destroy(),n.indexBuffer.destroy(),n.normalBuffer&&n.normalBuffer.destroy(),n.texcoordBuffer&&n.texcoordBuffer.destroy(),n.colorBuffer&&n.colorBuffer.destroy(),n.pbrBuffer&&n.pbrBuffer.destroy(),n.segments.destroy(),n.material&&((e=n.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(t.children)for(let n of t.children)m0(n)}class BO{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class FO{constructor(){this.tasks={},this.taskQueue=[],Gr(["process"],this),this.invoker=new BO(this.process),this.nextId=0}add(e,n){let o=this.nextId++,s=function({type:l,isSymbolTile:d,zoom:p}){return p=p||0,l==="message"?0:l!=="maybePrepare"||d?l!=="parseTile"||d?l==="parseTile"&&d?300-p:l==="maybePrepare"&&d?400-p:500:200-p:100-p}(n);if(s===0){Ri();try{e()}finally{}return null}return this.tasks[o]={fn:e,metadata:n,priority:s,id:o},this.taskQueue.push(o),this.invoker.trigger(),{cancel:()=>{delete this.tasks[o]}}}process(){Ri();try{if(this.taskQueue=this.taskQueue.filter(o=>!!this.tasks[o]),!this.taskQueue.length)return;let e=this.pick();if(e===null)return;let n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}pick(){let e=null,n=1/0;for(let s=0;s<this.taskQueue.length;s++){let l=this.tasks[this.taskQueue[s]];l.priority<n&&(n=l.priority,e=s)}if(e===null)return null;let o=this.taskQueue[e];return this.taskQueue.splice(e,1),o}remove(){this.invoker.remove()}}class Rb{constructor(e,n,o){this.target=e,this.parent=n,this.mapId=o,this.callbacks={},this.cancelCallbacks={},Gr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new FO}send(e,n,o,s,l=!1,d){let p=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=d,this.callbacks[p]=o);let m=new Set;return this.target.postMessage({id:p,type:e,hasCallback:!!o,targetMapId:s,mustQueue:l,sourceMapId:this.mapId,data:Rs(n,m)},m),{cancel:()=>{o&&delete this.callbacks[p],this.target.postMessage({id:p,type:"<cancel>",targetMapId:s,sourceMapId:this.mapId})}}}receive(e){let n=e.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){let s=this.cancelCallbacks[o];delete this.cancelCallbacks[o],s&&s.cancel()}else if(n.mustQueue||Ri()){let s=this.callbacks[o],l=this.scheduler.add(()=>this.processTask(o,n),s&&s.metadata||{type:"message"});l&&(this.cancelCallbacks[o]=l)}else this.processTask(o,n)}processTask(e,n){if(delete this.cancelCallbacks[e],n.type==="<response>"){let o=this.callbacks[e];delete this.callbacks[e],o&&(n.error?o(wl(n.error)):o(null,wl(n.data)))}else{let o=new Set,s=n.hasCallback?(d,p)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:d?Rs(d):null,data:Rs(p,o)},o)}:d=>{},l=wl(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,l,s);else if(this.parent.getWorkerSource){let d=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,d[0],l.source,l.scope)[d[1]](l,s)}else s(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}let _0=(()=>{class t{constructor(n,o){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=We();let s=this.workerPool.acquire(this.id);for(let l=0;l<s.length;l++){let d=new t.Actor(s[l],o,this.id);d.name=`Worker ${l}`,this.actors.push(d)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,o,s){pr(this.actors,(l,d)=>{l.send(n,o,d)},s=s||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}return t.Actor=Rb,t})();var Fp={workerUrl:"",workerClass:null,workerParams:void 0};function LO(){return Fp.workerClass!=null?new Fp.workerClass:new self.Worker(Fp.workerUrl,Fp.workerParams)}let y0="mapboxgl_preloaded_worker_pool";class Lp{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Lp.workerCount;)this.workers.push(new LO);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&this.numActive()===0&&(this.workers.forEach(n=>{n.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[y0]}numActive(){return Object.keys(this.active).length}}let Np;function Qg(){return Np||(Np=new Lp),Np}Lp.workerCount=2;let Kg,x0,ss,oh,v0,rh=null;function zb(){return Ri()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:x0||we.DRACO_URL}function Bb(){if(Ri()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(oh)return oh;let t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return oh=WebAssembly.validate(t)?we.MESHOPT_SIMD_URL:we.MESHOPT_URL,oh}let Jg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NO={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Vp={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Fb(t,e,n){let o=n.json.bufferViews.length,s=n.buffers.length;e.bufferView=o,n.json.bufferViews[o]={buffer:s,byteLength:t.byteLength},n.buffers[s]=t}let b0="KHR_draco_mesh_compression";function VO(t,e){let n=t.extensions&&t.extensions[b0];if(!n)return;let o=new ss.Decoder,s=jb(e,n.bufferView),l=new ss.Mesh;if(!o.DecodeArrayToMesh(s,s.byteLength,l))throw new Error("Failed to decode Draco mesh");let d=e.json.accessors[t.indices],p=Jg[d.componentType],m=d.count*p.BYTES_PER_ELEMENT,_=ss._malloc(m);p===Uint16Array?o.GetTrianglesUInt16Array(l,m,_):o.GetTrianglesUInt32Array(l,m,_),Fb(ss.memory.buffer.slice(_,_+m),d,e),ss._free(_);for(let b of Object.keys(n.attributes)){let C=o.GetAttributeByUniqueId(l,n.attributes[b]),O=e.json.accessors[t.attributes[b]],E=NO[O.componentType],k=O.count*Vp[O.type]*Jg[O.componentType].BYTES_PER_ELEMENT,R=ss._malloc(k);o.GetAttributeDataArrayForAllPoints(l,C,ss[E],k,R),Fb(ss.memory.buffer.slice(R,R+k),O,e),ss._free(R)}o.destroy(),l.destroy(),delete t.extensions[b0]}let em="EXT_meshopt_compression";function jO(t,e){if(!t.extensions||!t.extensions[em])return;let n=t.extensions[em],o=new Uint8Array(e.buffers[n.buffer],n.byteOffset||0,n.byteLength||0),s=new Uint8Array(n.count*n.byteStride);v0.decodeGltfBuffer(s,n.count,n.byteStride,o,n.mode,n.filter),t.buffer=e.buffers.length,t.byteOffset=0,e.buffers[t.buffer]=s.buffer,delete t.extensions[em]}let Lb=1179937895,Nb=new TextDecoder("utf8");function Vb(t,e){return new URL(t,e).href}function UO(t,e,n,o){return fetch(Vb(t.uri,o)).then(s=>s.arrayBuffer()).then(s=>{e.buffers[n]=s})}function jb(t,e){let n=t.json.bufferViews[e];return new Uint8Array(t.buffers[n.buffer],n.byteOffset||0,n.byteLength)}function GO(t,e,n,o){if(t.uri){let s=Vb(t.uri,o);return fetch(s).then(l=>l.blob()).then(l=>createImageBitmap(l)).then(l=>{e.images[n]=l})}if(t.bufferView!==void 0){let s=jb(e,t.bufferView),l=new Blob([s],{type:t.mimeType});return createImageBitmap(l).then(d=>{e.images[n]=d})}}function Ub(t,e=0,n){let o={json:null,images:[],buffers:[]};if(new Uint32Array(t,e,1)[0]===Lb){let b=new Uint32Array(t,e),C=2,O=(b[C++]>>2)-3,E=b[C++]>>2;if(C++,o.json=JSON.parse(Nb.decode(b.subarray(C,C+E))),C+=E,C<O){let k=b[C++];C++;let R=e+(C<<2);o.buffers[0]=t.slice(R,R+k)}}else o.json=JSON.parse(Nb.decode(new Uint8Array(t,e)));let{buffers:s,images:l,meshes:d,extensionsUsed:p,bufferViews:m}=o.json,_=Promise.resolve();if(s){let b=[];for(let C=0;C<s.length;C++){let O=s[C];O.uri?b.push(UO(O,o,C,n)):o.buffers[C]||(o.buffers[C]=null)}_=Promise.all(b)}return _.then(()=>{let b=[],C=p&&p.includes(b0),O=p&&p.includes(em);if(C&&b.push(function(){if(!ss)return Kg||(Kg=function(E){let k,R=null;function L(){k=new Uint8Array(R.buffer)}function V(){throw new Error("Unexpected Draco error.")}let Y={a:{a:V,d:function(J,K,ae){return k.copyWithin(J,K,K+ae)},c:function(J){let K=k.length,ae=Math.max(J>>>0,Math.ceil(1.2*K)),ie=Math.ceil((ae-K)/65536);try{return R.grow(ie),L(),!0}catch{return!1}},b:V}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(E,Y):E.then(J=>J.arrayBuffer()).then(J=>WebAssembly.instantiate(J,Y))).then(J=>{let{Rb:K,Qb:ae,P:ie,T:de,X:me,Ja:ve,La:Pe,Qa:be,Va:Be,Wa:Ue,eb:Ie,jb:je,f:Se,e:Ne,yb:st,zb:Ge,Ab:bt,Bb:mt,Db:qe,Gb:Nt}=J.instance.exports;R=Ne;let Tt=(()=>{let vt=0,Ye=0,Bt=0,tn=0;return Vt=>{Bt&&(K(tn),K(vt),Ye+=Bt,Bt=vt=0),vt||(Ye+=128,vt=ae(Ye));let nn=Vt.length+7&-8,Ht=vt;nn>=Ye&&(Bt=nn,Ht=tn=ae(nn));for(let xn=0;xn<Vt.length;xn++)k[Ht+xn]=Vt[xn];return Ht}})();return L(),Se(),{memory:Ne,_free:K,_malloc:ae,Mesh:class{constructor(){this.ptr=ie()}destroy(){de(this.ptr)}},Decoder:class{constructor(){this.ptr=ve()}destroy(){je(this.ptr)}DecodeArrayToMesh(vt,Ye,Bt){let tn=Tt(vt),Vt=Pe(this.ptr,tn,Ye,Bt.ptr);return!!me(Vt)}GetAttributeByUniqueId(vt,Ye){return{ptr:be(this.ptr,vt.ptr,Ye)}}GetTrianglesUInt16Array(vt,Ye,Bt){Be(this.ptr,vt.ptr,Ye,Bt)}GetTrianglesUInt32Array(vt,Ye,Bt){Ue(this.ptr,vt.ptr,Ye,Bt)}GetAttributeDataArrayForAllPoints(vt,Ye,Bt,tn,Vt){Ie(this.ptr,vt.ptr,Ye.ptr,Bt,tn,Vt)}},DT_INT8:st(),DT_UINT8:Ge(),DT_INT16:bt(),DT_UINT16:mt(),DT_UINT32:qe(),DT_FLOAT32:Nt()}})}(fetch(zb())),Kg.then(E=>{ss=E,Kg=void 0}))}()),O&&b.push(function(){if(v0)return;let E=function(k){let R,L=WebAssembly.instantiateStreaming(k,{}).then(J=>{R=J.instance,R.exports.__wasm_call_ctors()}),V={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Y={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:L,supported:!0,decodeGltfBuffer(J,K,ae,ie,de,me){(function(ve,Pe,be,Be,Ue,Ie,je){let Se=ve.exports.sbrk,Ne=Be+3&-4,st=Se(Ne*Ue),Ge=Se(Ie.length),bt=new Uint8Array(ve.exports.memory.buffer);bt.set(Ie,Ge);let mt=Pe(st,Be,Ue,Ge,Ie.length);if(mt===0&&je&&je(st,Ne,Ue),be.set(bt.subarray(st,st+Be*Ue)),Se(st-Se(0)),mt!==0)throw new Error(`Malformed buffer data: ${mt}`)})(R,R.exports[Y[de]],J,K,ae,ie,R.exports[V[me]])}}}(fetch(Bb()));return E.ready.then(()=>{v0=E})}()),l)for(let E=0;E<l.length;E++)b.push(GO(l[E],o,E,n));return(b.length?Promise.all(b):Promise.resolve()).then(()=>{if(C&&d)for(let{primitives:E}of d)for(let k of E)VO(k,o);if(O&&d&&m)for(let E of m)jO(E,o);return o})})}class Gb{constructor(e,n,o){if(this.triangleCount=n.length/3,this.min=new ut(0,0),this.max=new ut(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||e.length===0||o===0)return;let s=e.map(b=>b.x),l=e.map(b=>b.y);this.min=new ut(Math.min(...s),Math.min(...l)),this.max=new ut(Math.max(...s),Math.max(...l));let d=this.max.sub(this.min);d.x=Math.max(d.x,1),d.y=Math.max(d.y,1);let p=Math.max(d.x,d.y)/o;this.cellsX=Math.max(1,Math.ceil(d.x/p)),this.cellsY=Math.max(1,Math.ceil(d.y/p)),this.xScale=1/p,this.yScale=1/p;let m=[];for(let b=0;b<this.triangleCount;b++){let C=e[n[3*b+0]].sub(this.min),O=e[n[3*b+1]].sub(this.min),E=e[n[3*b+2]].sub(this.min),k=Oc(Math.floor(Math.min(C.x,O.x,E.x)),this.xScale,this.cellsX),R=Oc(Math.floor(Math.max(C.x,O.x,E.x)),this.xScale,this.cellsX),L=Oc(Math.floor(Math.min(C.y,O.y,E.y)),this.yScale,this.cellsY),V=Oc(Math.floor(Math.max(C.y,O.y,E.y)),this.yScale,this.cellsY),Y=new ut(0,0),J=new ut(0,0),K=new ut(0,0),ae=new ut(0,0);for(let ie=L;ie<=V;++ie){Y.y=J.y=ie*p,K.y=ae.y=(ie+1)*p;for(let de=k;de<=R;++de)Y.x=K.x=de*p,J.x=ae.x=(de+1)*p,(g_(C,O,E,Y,J,ae)||g_(C,O,E,Y,ae,K))&&m.push({cellIdx:ie*this.cellsX+de,triIdx:b})}}if(m.length===0)return;m.sort((b,C)=>b.cellIdx-C.cellIdx||b.triIdx-C.triIdx);let _=0;for(;_<m.length;){let b=m[_].cellIdx,C={start:this.payload.length,len:0};for(;_<m.length&&m[_].cellIdx===b;)++C.len,this.payload.push(m[_++].triIdx);this.cells[b]=C}}query(e,n,o){if(this.triangleCount===0||this.cells.length===0||e.x>this.max.x||this.min.x>n.x||e.y>this.max.y||this.min.y>n.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let m=0;m<this.lookup.length;m++)this.lookup[m]=0;let s=Oc(e.x-this.min.x,this.xScale,this.cellsX),l=Oc(n.x-this.min.x,this.xScale,this.cellsX),d=Oc(e.y-this.min.y,this.yScale,this.cellsY),p=Oc(n.y-this.min.y,this.yScale,this.cellsY);for(let m=d;m<=p;m++)for(let _=s;_<=l;_++){let b=this.cells[m*this.cellsX+_];if(b)for(let C=0;C<b.len;C++){let O=this.payload[b.start+C],E=Math.floor(O/8),k=1<<O%8;if(!(this.lookup[E]&k)&&(this.lookup[E]|=k,o.push(O),o.length===this.triangleCount))return}}}}function Oc(t,e,n){return Math.max(0,Math.min(n-1,Math.floor(t*e)))}function Qu(t,e){let n=t.json.bufferViews[e.bufferView],o=Jg[e.componentType];return new o(t.buffers[n.buffer],(e.byteOffset||0)+(n.byteOffset||0),e.count*(n.byteStride&&n.byteStride!==Vp[e.type]*o.BYTES_PER_ELEMENT?n.byteStride/o.BYTES_PER_ELEMENT:Vp[e.type]))}function w0(t,e,n,o){let s=Jg[e.componentType],l=function(b){switch(b){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(s),d=t.json.bufferViews[e.bufferView],p=d.byteStride?d.byteStride/s.BYTES_PER_ELEMENT:Vp[e.type],m=n.float32,_=m.length/n.capacity;for(let b=0,C=0;b<e.count*p;b+=p,C+=_)for(let O=0;O<_;O++)m[C+O]=o[b+O]*l;n._trim()}function HO(t,e,n){let o=t.indices,s=t.attributes,l={};l.indexArray=new ro;let d=e.json.accessors[o],p=d.count/3;l.indexArray.reserve(p);let m=Qu(e,d);for(let O=0;O<p;O++)l.indexArray.emplaceBack(m[3*O],m[3*O+1],m[3*O+2]);l.indexArray._trim(),l.vertexArray=new Al;let _=e.json.accessors[s.POSITION];l.vertexArray.reserve(_.count);let b=Qu(e,_);for(let O=0;O<_.count;O++)l.vertexArray.emplaceBack(b[3*O],b[3*O+1],b[3*O+2]);if(l.vertexArray._trim(),l.aabb=new Si(_.min,_.max),l.centroid=function(O,E){let k=[0,0,0],R=O.length;if(R>0){for(let L=0;L<R;L++){let V=3*O[L];k[0]+=E[V],k[1]+=E[V+1],k[2]+=E[V+2]}k[0]/=R,k[1]/=R,k[2]/=R}return k}(m,b),s.COLOR_0!==void 0){let O=e.json.accessors[s.COLOR_0],E=Vp[O.type],k=Qu(e,O);l.colorArray=E===3?new Al:new Ls,l.colorArray.resize(O.count),w0(e,O,l.colorArray,k)}if(s.NORMAL!==void 0){l.normalArray=new Al;let O=e.json.accessors[s.NORMAL];l.normalArray.resize(O.count);let E=Qu(e,O);w0(e,O,l.normalArray,E)}if(s.TEXCOORD_0!==void 0&&n.length>0){l.texcoordArray=new Lu;let O=e.json.accessors[s.TEXCOORD_0];l.texcoordArray.resize(O.count);let E=Qu(e,O);w0(e,O,l.texcoordArray,E)}if(s._FEATURE_ID_RGBA4444!==void 0){let O=e.json.accessors[s._FEATURE_ID_RGBA4444];e.json.extensionsUsed&&e.json.extensionsUsed.includes("EXT_meshopt_compression")&&(l.featureData=Qu(e,O))}s._FEATURE_RGBA4444!==void 0&&(l.featureData=new Uint32Array(Qu(e,e.json.accessors[s._FEATURE_RGBA4444]).buffer));let C=t.material;return l.material=function(O,E){let{emissiveFactor:k=[0,0,0],alphaMode:R="OPAQUE",alphaCutoff:L=.5,normalTexture:V,occlusionTexture:Y,emissiveTexture:J,doubleSided:K}=O,{baseColorFactor:ae=[1,1,1,1],metallicFactor:ie=1,roughnessFactor:de=1,baseColorTexture:me,metallicRoughnessTexture:ve}=O.pbrMetallicRoughness||{},Pe=Y?E[Y.index]:void 0;if(Y&&Y.extensions&&Y.extensions.KHR_texture_transform&&Pe){let be=Y.extensions.KHR_texture_transform;Pe.offsetScale=[be.offset[0],be.offset[1],be.scale[0],be.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new zi(...ae),metallicFactor:ie,roughnessFactor:de,baseColorTexture:me?E[me.index]:void 0,metallicRoughnessTexture:ve?E[ve.index]:void 0},doubleSided:K,emissiveFactor:k,alphaMode:R,alphaCutoff:L,normalTexture:V?E[V.index]:void 0,occlusionTexture:Pe,emissionTexture:J?E[J.index]:void 0,defined:O.defined===void 0}}(C!==void 0?e.json.materials[C]:{defined:!1},n),l}function Hb(t,e,n){let{matrix:o,rotation:s,translation:l,scale:d,mesh:p,extras:m,children:_}=t,b={};if(b.matrix=o||r.a6.fromRotationTranslationScale([],s||[0,0,0,1],l||[0,0,0],d||[1,1,1]),p!==void 0){b.meshes=n[p];let C=b.anchor=[0,0];for(let O of b.meshes){let{min:E,max:k}=O.aabb;C[0]+=E[0]+k[0],C[1]+=E[1]+k[1]}C[0]=Math.floor(C[0]/b.meshes.length/2),C[1]=Math.floor(C[1]/b.meshes.length/2)}if(m&&(m.id&&(b.id=m.id),m.lights&&(b.lights=function(C){if(!C.length)return[];let O=function(V){let Y=atob(V),J=new Uint8Array(Y.length);for(let K=0;K<Y.length;K++)J[K]=Y.codePointAt(K);return J}(C),E=[],k=O.length/24,R=new Uint16Array(O.buffer),L=new Float32Array(O.buffer);for(let V=0;V<k;V++){let Y=R[2*V*6]/30,J=R[2*V*6+1]/30,K=R[2*V*6+10]/100,ae=L[6*V+1],ie=L[6*V+2],de=L[6*V+3],me=L[6*V+4],ve=de-ae,Pe=me-ie,be=Math.hypot(ve,Pe);E.push({pos:[ae+.5*ve,ie+.5*Pe,J],normal:[Pe/be,-ve/be,0],width:be,height:Y,depth:K,points:[ae,ie,de,me]})}return E}(m.lights))),_){let C=[];for(let O of _)C.push(Hb(e.json.nodes[O],e,n));b.children=C}return b}function $O(t){if(t.vertices.length===0||t.indices.length===0)return null;let[e,n]=[t.vertices[0].clone(),t.vertices[0].clone()];for(let d=1;d<t.vertices.length;++d){let p=t.vertices[d];e.x=Math.min(e.x,p.x),e.y=Math.min(e.y,p.y),n.x=Math.max(n.x,p.x),n.y=Math.max(n.y,p.y)}let o=Math.ceil(Math.max(n.x-e.x,n.y-e.y)/256),s=Math.max(8,o),l=new Gb(t.vertices,t.indices,s);return{vertices:t.vertices,indices:t.indices,grid:l,min:e,max:n}}function WO(t){if(!t.extras||!t.extras.ground)return null;let e=t.extras.ground;if(!e||!Array.isArray(e)||e.length===0)return null;let n=e[0];if(!n||!Array.isArray(n)||n.length===0)return null;let o=[];for(let d of n){if(!Array.isArray(d)||d.length!==2)continue;let p=d[0],m=d[1];typeof p=="number"&&typeof m=="number"&&o.push(new ut(p,m))}if(o.length<3)return null;o.length>1&&o[o.length-1].equals(o[0])&&o.pop();let s=0;for(let d=0;d<o.length;d++){let p=o[d],m=o[(d+1)%o.length],_=o[(d+2)%o.length];s+=(p.x-m.x)*(_.y-m.y)-(_.x-m.x)*(p.y-m.y)}s>0&&o.reverse();let l=bg(o.flatMap(d=>[d.x,d.y]),[]);return l.length===0?null:{vertices:o,indices:l}}function ZO(t){let e=[],n=[],o=0;for(let s of t){o=e.length;let l=s.vertexArray.float32,d=s.indexArray.uint16;for(let p=0;p<s.vertexArray.length;p++)e.push(new ut(l[3*p+0],l[3*p+1]));for(let p=0;p<3*s.indexArray.length;p++)n.push(d[p]+o)}if(n.length%3!=0)return null;for(let s=0;s<n.length;s+=3){let l=e[n[s+0]],d=e[n[s+1]],p=e[n[s+2]];(l.x-d.x)*(p.y-d.y)-(p.x-d.x)*(l.y-d.y)>0&&([n[s+1],n[s+2]]=[n[s+2],n[s+1]])}return{vertices:e,indices:n}}function $b(t){let e=function(m,_){let b=[],C=WebGL2RenderingContext;if(m.json.textures)for(let O of m.json.textures){let E={magFilter:C.LINEAR,minFilter:C.NEAREST,wrapS:C.REPEAT,wrapT:C.REPEAT};O.sampler!==void 0&&Object.assign(E,m.json.samplers[O.sampler]),b.push({image:_[O.source],sampler:E,uploaded:!1})}return b}(t,t.images),n=function(m,_){let b=[];for(let C of m.json.meshes){let O=[];for(let E of C.primitives)O.push(HO(E,m,_));b.push(O)}return b}(t,e),{scenes:o,scene:s,nodes:l}=t.json,d=o?o[s||0].nodes:l,p=[];for(let m of d)p.push(Hb(l[m],t,n));return function(m,_,b){let C={},O=new Set;for(let E=0;E<m.length;E++){let k=b[_[E]];if(!k.extras)continue;let R=k.extras["mapbox:footprint:version"],L=k.extras["mapbox:footprint:id"];(R||L)&&O.add(E),R==="1.0.0"&&L&&(C[L]=E)}for(let E=0;E<m.length;E++){if(O.has(E))continue;let k=m[E],R=b[_[E]];if(!R.extras)continue;let L=null;k.id in C&&(L=ZO(m[C[k.id]].meshes)),L||(L=WO(R)),L&&(k.footprint=$O(L))}if(O.size>0){let E=Array.from(O.values()).sort((k,R)=>k-R);for(let k=E.length-1;k>=0;k--)m.splice(E[k],1)}}(p,d,t.json.nodes),p}function qO(t){t.heightmap=new Float32Array(4096),t.heightmap.fill(-1);let e=t.vertexArray.float32,n=t.aabb.min[0]-1,o=t.aabb.min[1]-1,s=Xu/(t.aabb.max[0]-n+2),l=Xu/(t.aabb.max[1]-o+2);for(let d=0;d<e.length;d+=3){let p=e[d+2],m=(e[d+0]-n)*s|0,_=(e[d+1]-o)*l|0;p>t.heightmap[_*Xu+m]&&(t.heightmap[_*Xu+m]=p)}}function YO(t,e){let n={};n.indexArray=new ro,n.indexArray.reserve(4*t.length),n.vertexArray=new Al,n.vertexArray.reserve(10*t.length),n.colorArray=new Ls,n.vertexArray.reserve(10*t.length);let o=0;for(let d of t){let p=Math.min(10,Math.max(4,1.3*d.height))*e,m=[-d.normal[1],d.normal[0],0],_=Math.min(.29,.1*d.width/d.depth),b=d.width-2*d.depth*e*(_+.01),C=r.N.scaleAndAdd([],d.pos,m,b/2),O=r.N.scaleAndAdd([],d.pos,m,-b/2),E=[C[0],C[1],C[2]+d.height],k=[O[0],O[1],O[2]+d.height],R=r.N.scaleAndAdd([],d.normal,m,_);r.N.scale(R,R,p);let L=r.N.scaleAndAdd([],d.normal,m,-_);r.N.scale(L,L,p),r.N.add(R,C,R),r.N.add(L,O,L),C[2]+=.1,O[2]+=.1,n.vertexArray.emplaceBack(R[0],R[1],R[2]),n.vertexArray.emplaceBack(L[0],L[1],L[2]),n.vertexArray.emplaceBack(C[0],C[1],C[2]),n.vertexArray.emplaceBack(O[0],O[1],O[2]),n.vertexArray.emplaceBack(E[0],E[1],E[2]),n.vertexArray.emplaceBack(k[0],k[1],k[2]),n.vertexArray.emplaceBack(C[0],C[1],C[2]),n.vertexArray.emplaceBack(O[0],O[1],O[2]),n.vertexArray.emplaceBack(R[0],R[1],R[2]),n.vertexArray.emplaceBack(L[0],L[1],L[2]);let V=b/p/2;n.colorArray.emplaceBack(-V-_,-1,V,.8),n.colorArray.emplaceBack(V+_,-1,V,.8),n.colorArray.emplaceBack(-V,0,V,1.3),n.colorArray.emplaceBack(V,0,V,1.3),n.colorArray.emplaceBack(V+_,-.8,V,.7),n.colorArray.emplaceBack(V+_,-.8,V,.7),n.colorArray.emplaceBack(0,0,V,1.3),n.colorArray.emplaceBack(0,0,V,1.3),n.colorArray.emplaceBack(V+_,-1.2,V,.8),n.colorArray.emplaceBack(V+_,-1.2,V,.8),n.indexArray.emplaceBack(6+o,4+o,8+o),n.indexArray.emplaceBack(7+o,9+o,5+o),n.indexArray.emplaceBack(0+o,1+o,2+o),n.indexArray.emplaceBack(1+o,3+o,2+o),o+=10}let s={defined:!0,emissiveFactor:[0,0,0]},l={};return l.baseColorFactor=zi.white,s.pbrMetallicRoughness=l,n.material=s,n.aabb=new Si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),n}xt(Gb,"TriangleGridIndex");class Wb{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){let o=e[n];this._stringToNumber[o]=n,this._numberToString[n]=o}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}let XO=["tile","layer","source","sourceLayer","state"];class Zb{constructor(e,n,o,s,l){this.type="Feature",this._vectorTileFeature=e,this._z=n,this._x=o,this._y=s,this.properties=e.properties,this.id=l}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(let n of XO)this[n]!==void 0&&(e[n]=this[n]);return e}}class qb{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ka(ht,16,0),this.featureIndexArray=new Jf,this.promoteId=n,this.is3DTile=!1}insert(e,n,o,s,l,d=0,p=0){let m=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,s,l,d);let _=this.grid;for(let b=0;b<n.length;b++){let C=n[b],O=[1/0,1/0,-1/0,-1/0];for(let E=0;E<C.length;E++){let k=C[E];O[0]=Math.min(O[0],k.x),O[1]=Math.min(O[1],k.y),O[2]=Math.max(O[2],k.x),O[3]=Math.max(O[3],k.y)}p!==0&&(O[0]-=p,O[1]-=p,O[2]+=p,O[3]+=p),O[0]<ht&&O[1]<ht&&O[2]>=0&&O[3]>=0&&_.insert(m,O[0],O[1],O[2],O[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new q_(new Kd(this.rawTileData)).layers,this.sourceLayerCoder=new Wb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(let e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,n,o,s){this.loadVTLayers();let l=e.params||{},d=wr(l.filter),p=e.tileResult,m=e.transform,_=p.bufferedTilespaceBounds,b=this.grid.query(_.min.x,_.min.y,_.max.x,_.max.y,(k,R,L,V)=>gy(p.bufferedTilespaceGeometry,k,R,L,V));b.sort(QO);let C=null;m.elevation&&b.length>0&&(C=Zd.create(m.elevation,this.tileID));let O={},E;for(let k=0;k<b.length;k++){let R=b[k];if(R===E)continue;E=R;let L=this.featureIndexArray.get(R),V=null;if(this.is3DTile){let Y=this.bucketLayerIDs[0][0],J=n[Y];if(J.type!=="model")continue;let{queryFeature:K,intersectionZ:ae}=J.queryIntersectsMatchingFeature(p,L.featureIndex,d,m);K&&this.appendToResult(O,Y,L.featureIndex,K,ae)}else this.loadMatchingFeature(O,L,d,l.layers,l.availableImages,n,o,s,(Y,J,K,ae=0)=>(V||(V=so(Y,this.tileID.canonical,e.tileTransform)),J.queryIntersectsFeature(p,Y,K,V,this.z,e.transform,e.pixelPosMatrix,C,ae)))}return O}loadMatchingFeature(e,n,o,s,l,d,p,m,_){let{featureIndex:b,bucketIndex:C,sourceLayerIndex:O,layoutVertexArrayOffset:E}=n,k=this.bucketLayerIDs[C];if(s&&!function(Y,J){for(let K=0;K<Y.length;K++)if(J.indexOf(Y[K])>=0)return!0;return!1}(s,k))return;let R=this.sourceLayerCoder.decode(O),L=this.vtLayers[R].feature(b);if(o.needGeometry){let Y=qi(L,!0);if(!o.filter(new vi(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!o.filter(new vi(this.tileID.overscaledZ),L))return;let V=this.getId(L,R);for(let Y=0;Y<k.length;Y++){let J=k[Y];if(s&&s.indexOf(J)<0)continue;let K=d[J];if(!K)continue;let ae={};V!==void 0&&m&&(ae=m.getState(K.sourceLayer||"_geojsonTileLayer",V));let ie=!_||_(L,K,ae,E);if(!ie)continue;let de=new Zb(L,this.z,this.x,this.y,V),me=to({},p[J]);me.paint=Yb(me.paint,K.paint,L,ae,l),me.layout=Yb(me.layout,K.layout,L,ae,l),de.layer=me,this.appendToResult(e,J,b,de,ie)}}appendToResult(e,n,o,s,l){let d=e[n];d===void 0&&(d=e[n]=[]),d.push({featureIndex:o,feature:s,intersectionZ:l})}lookupSymbolFeatures(e,n,o,s,l,d,p,m){let _={};this.loadVTLayers();let b=wr(l);for(let C of e)this.loadMatchingFeature(_,{bucketIndex:o,sourceLayerIndex:s,featureIndex:C,layoutVertexArrayOffset:0},b,d,p,m,n);return _}loadFeature(e){let{featureIndex:n,sourceLayerIndex:o}=e;this.loadVTLayers();let s=this.sourceLayerCoder.decode(o),l=this.vtFeatures[s];if(l[n])return l[n];let d=this.vtLayers[s].feature(n);return l[n]=d,d}hasLayer(e){for(let n of this.bucketLayerIDs)for(let o of n)if(e===o)return!0;return!1}getId(e,n){let o=e.id;if(this.promoteId){let s=typeof this.promoteId=="string"?this.promoteId:this.promoteId[n];s!=null&&(o=e.properties[s]),typeof o=="boolean"&&(o=Number(o))}return o}}function Yb(t,e,n,o,s){return ki(t,(l,d)=>{let p=e instanceof Pu?e.get(d):null;return p&&p.evaluate?p.evaluate(n,o,s):p})}function QO(t,e){return e-t}xt(qb,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});let C0=new Float32Array(262144),Ku=new Uint8Array(262144);function Xb(t){let e=0;if(t.meshes)for(let n of t.meshes)e=Math.max(e,n.aabb.max[2]);if(t.children)for(let n of t.children)e=Math.max(e,Xb(n));return e}function Qb(t,e,n){if(t.meshes)for(let o of t.meshes)o.aabb.min[0]!==1/0&&n.insert(e,o.aabb.min[0],o.aabb.min[1],o.aabb.max[0],o.aabb.max[1]);if(t.children)for(let o of t.children)Qb(o,e,n)}let Kb=["","wall","door","roof","window","lamp","logo"];class Jb{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:Xb(e)}}}getLocalBounds(){if(!this.node.meshes)return new Si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let e=0,n=new Si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(let o of this.node.meshes)this.node.lightMeshIndex!==e&&n.encapsulate(o.aabb),e++;this.aabb=n}return this.aabb}}class tm{constructor(e,n,o,s,l,d){this.id=n,this.modelTraits|=ih.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,o&&(this.modelTraits|=ih.HasMapboxMeshFeatures),s&&(this.modelTraits|=ih.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=l,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(let p of e)this.nodesInfo.push(new Jb(p)),Qb(p,d.featureIndexArray.length,d.grid),d.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,d.bucketLayerIDs.length-1,0)}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;let n=this.getNodesInfo();for(let o of n){let s=o.node;this.uploaded?this.updatePbrBuffer(s):g0(s,e,!0)}for(let o of n)Xg(o.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let n=!1;if(!e.meshes)return n;for(let o of e.meshes)o.pbrBuffer&&(o.pbrBuffer.updateData(o.featureArray),n=!0);return n}needsReEvaluation(e,n,o){let s=e.transform.projectionOptions,l=e.style.getBrightness(),d=this.brightness!==l;return!!(!this.uploaded||this.dirty||s.name!==this.projection.name||jp(o.paint.get("model-color").value,d)||jp(o.paint.get("model-color-mix-intensity").value,d)||jp(o.paint.get("model-roughness").value,d)||jp(o.paint.get("model-emissive-strength").value,d)||jp(o.paint.get("model-height-based-emissive-strength-multiplier").value,d))&&(this.projection=s,this.brightness=l,!0)}evaluateScale(e,n){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;let o=this.getNodesInfo(),s=this.id.canonical;for(let l of o){let d=l.feature;l.evaluatedScale=n.paint.get("model-scale").evaluate(d,{},s)}}evaluate(e){let n=this.getNodesInfo();for(let o of n){if(!o.node.meshes)continue;let s=o.feature,l=o.node.meshes&&o.node.meshes[0].featureData,d=o.evaluatedColor[2],p=o.evaluatedRMEA[2],m=this.id.canonical;if(o.hasTranslucentParts=!1,l){for(let _=0;_<Kb.length;_++){let b=Kb[_];b.length&&(s.properties.part=b);let C=e.paint.get("model-color").evaluate(s,{},m),O=e.paint.get("model-color-mix-intensity").evaluate(s,{},m);o.evaluatedColor[_]=[C.r,C.g,C.b,O],o.evaluatedRMEA[_][0]=e.paint.get("model-roughness").evaluate(s,{},m),o.evaluatedRMEA[_][2]=e.paint.get("model-emissive-strength").evaluate(s,{},m),o.evaluatedRMEA[_][3]=C.a,o.emissionHeightBasedParams[_]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(s,{},m),!o.hasTranslucentParts&&C.a<1&&(o.hasTranslucentParts=!0)}delete s.properties.part,JO(o,d!==o.evaluatedColor[2]||p!==o.evaluatedRMEA[2],this.modelTraits)}else o.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(s,{},m);o.evaluatedScale=e.paint.get("model-scale").evaluate(s,{},m),this.updatePbrBuffer(o.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,n,o,s){let l=e.findDEMTileFor(o);if(l&&(l.tileID.canonical!==this.terrainTile||n!==this.terrainExaggeration)){if(l.dem&&l.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=l.tileID.overscaledZ;let d=Zd.create(e,o,l);if(!d)return;this.modelTraits&ih.HasMapboxMeshFeatures&&this.updateDEM(e,d,o,s);for(let p of this.getNodesInfo()){let m=p.node;if(!m.footprint||!m.footprint.vertices||!m.footprint.vertices.length)continue;let _=m.footprint.vertices,b=d.getElevationAt(_[0].x,_[0].y,!0,!0);for(let C=1;C<_.length;C++)b=Math.min(b,d.getElevationAt(_[C].x,_[C].y,!0,!0));m.elevation=b}}this.terrainTile=l.tileID.canonical,this.terrainExaggeration=n}}updateDEM(e,n,o,s){let l=n._dem._modifiedForSources[s];if(l===void 0&&(n._dem._modifiedForSources[s]=[],l=n._dem._modifiedForSources[s]),l.includes(o.canonical))return;let d=n._dem.dim;l.push(o.canonical);let p=!1;for(let m of this.getNodesInfo()){let _=m.node;if(!_.footprint||!_.footprint.grid)continue;let b=_.footprint.grid,C=n.tileCoordToPixel(b.min.x,b.min.y),O=n.tileCoordToPixel(b.max.x,b.max.y),E=Math.min(Math.min(d-O.y,C.x),Math.min(C.y,d-O.x));if(E<0)continue;let k=on(E,2,5),R=Math.max(0,C.x-k),L=Math.max(0,C.y-k),V=Math.min(O.x+k,d-1),Y=Math.min(O.y+k,d-1);for(let ie=L;ie<=Y;++ie)for(let de=R;de<=V;++de)Ku[ie*d+de]=255;let J=0,K=0;for(let ie=0;ie<b.cellsY;++ie)for(let de=0;de<b.cellsX;++de){if(!b.cells[ie*b.cellsX+de])continue;let me=n.tileCoordToPixel(b.min.x+de/b.xScale,b.min.y+ie/b.yScale),ve=n.tileCoordToPixel(b.min.x+(de+1)/b.xScale,b.min.y+(ie+1)/b.yScale);for(let Pe=me.y;Pe<=Math.min(ve.y+1,d-1);++Pe)for(let be=me.x;be<=Math.min(ve.x+1,d-1);++be)Ku[Pe*d+be]===255&&(Ku[Pe*d+be]=0,J+=n.getElevationAtPixel(be,Pe),K++)}let ae=J/K;R=Math.max(1,C.x-k),L=Math.max(1,C.y-k),V=Math.min(O.x+k,d-2),Y=Math.min(O.y+k,d-2),p=!0;for(let ie=L;ie<=Y;++ie)for(let de=R;de<=V;++de)Ku[ie*d+de]===0&&(C0[ie*d+de]=n._dem.set(de,ie,ae));for(let ie=1;ie<k;++ie){R=Math.max(1,C.x-ie),L=Math.max(1,C.y-ie),V=Math.min(O.x+ie,d-2),Y=Math.min(O.y+ie,d-2);for(let de=L;de<=Y;++de)for(let me=R;me<=V;++me){let ve=de*d+me;if(Ku[ve]===255){let Pe=0,be=0,Be=-1,Ue=-1;for(let Ie=-1;Ie<=1;++Ie)for(let je=-1;je<=1;++je){let Se=(de+Ie)*d+me+je;if(Ku[Se]>=ie)continue;let Ne=C0[Se],st=Math.abs(Ne);st>be&&(Pe=Ne,be=st,Be=je,Ue=Ie)}if(be>.1){let Ie=1-(ie+.5*Math.abs(Be*Ue))/k,je=n._dem.get(me,de)+Pe*Ie,Se=n._dem.get(me+Be,de+Ue),Ne=n._dem.get(me-Be,de-Ue,!0);(je-Se)*(je-Ne)>0&&(je=(Se+Ne)/2),C0[ve]=n._dem.set(me,de,je),Ku[ve]=ie}}}}}p&&(n._demTile.needsDEMTextureUpload=!0,n._dem._timestamp=Ke.now())}getNodesInfo(){return this.nodesInfo}destroy(){let e=this.getNodesInfo();for(let n of e)Xg(n.node),m0(n.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(e,n){if(n.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=n.updateTime;let o=n.getReplacementRegionsForTile(e.toUnwrapped()),s=this.getNodesInfo();for(let l=0;l<this.nodesInfo.length;l++){let d=s[l].node;s[l].hiddenByReplacement=!!d.footprint&&!o.find(p=>p.footprint===d.footprint)}}getHeightAtTileCoord(e,n){let o=this.getNodesInfo(),s=[];for(let l=0;l<this.nodesInfo.length;l++){let d=o[l],p=d.node.meshes[0];if(e<p.aabb.min[0]||n<p.aabb.min[1]||e>p.aabb.max[0]||n>p.aabb.max[1])continue;let m=(e-p.aabb.min[0])/(p.aabb.max[0]-p.aabb.min[0])*Xu|0,_=Math.min(63,(n-p.aabb.min[1])/(p.aabb.max[1]-p.aabb.min[1])*Xu|0)*Xu+Math.min(63,m);if(!(p.heightmap[_]<0&&d.node.footprint))return d.hiddenByReplacement?void 0:{height:p.heightmap[_],maxHeight:d.feature.properties.height,hidden:!1,verticalScale:d.evaluatedScale[2]};if(d.node.footprint.grid.query(new ut(e,n),new ut(e,n),s),s.length>0)return{height:void 0,maxHeight:d.feature.properties.height,hidden:d.hiddenByReplacement,verticalScale:d.evaluatedScale[2]}}}}function jp(t,e){return!t.isLightConstant&&e}function KO(t,e,n,o,s,l,d,p){let m=(61440&e|(61440&e)>>4)>>8,_=(3840&e|(3840&e)>>4)>>4,b=240&e|(240&e)>>4;n[3]>0&&(m=gn(m,255*n[0],n[3]),_=gn(_,255*n[1],n[3]),b=gn(b,255*n[2],n[3]));let C=m<<8|_,O=b<<8|Math.floor(255*o[3]),E=function(ie){let de=on(ie,0,2);return Math.min(Math.round(.5*de*255),255)}(o[2])<<8|15*o[0]<<4|15*o[1],k=on(s[0],0,1),R=on(s[1],0,1),L=on(s[2],0,1),V=on(s[3],0,1),Y,J,K,ae;if(k!==R&&d!==l&&R!==k){let ie=d-l;J=1/(ie*(R-k)),K=-(l+ie*k)/(ie*(R-k));let de=on(s[4],-1,1);ae=Math.pow(10,de),Y=255*L<<8|255*V}else Y=65535,J=0,K=1,ae=1;if(t.emplaceBack(C,O,E,Y,J,K,ae),p){let ie=p.length;p.clear();for(let de=0;de<ie;de++)p.emplaceBack(C,O,E,Y,J,K,ae)}}function JO(t,e,n){let o=t.node,s=0,l=n&ih.HasMeshoptCompression;for(let d of o.meshes){if(o.lights&&o.lightMeshIndex===s||!d.featureData)continue;d.featureArray=new Nu,d.featureArray.reserve(d.featureData.length);let p=e;for(let m of d.featureData){let _=l?65535&m:m>>16&65535,b=l?m>>16&65535:65535&m,C=(15&b)<8?15&b:0,O=t.evaluatedRMEA[C],E=t.evaluatedColor[C],k=t.emissionHeightBasedParams[C],R;if(p&&C===2&&o.lights&&(R=new Nu,R.resize(10*o.lights.length)),KO(d.featureArray,_,E,O,k,d.aabb.min[2],d.aabb.max[2],R),R&&p){p=!1;let L=o.meshes[o.lightMeshIndex];L.featureArray=R,L.featureArray._trim()}}d.featureArray._trim(),s++}}function ew(t,e,n,o){let s=1<<t.z;e.lat=Mn((o/ht+t.y)/s),e.lng=$t((n/ht+t.x)/s)}xt(tm,"Tiled3dModelBucket",{omit:["layers"]}),xt(Jb,"Tiled3dModelFeature");let eT={circle:class extends ir{constructor(t,e,n){super(t,W2,e,n)}createBucket(t){return new ar(t)}queryRadius(t){let e=t;return Hd("circle-radius",this,e)+Hd("circle-stroke-width",this,e)+lg(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,o,s,l,d,p){let m=_y(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),l.angle,t.pixelToTileUnitsFactor),_=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Hx(t,o,l,d,p,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",m,_)}getProgramIds(){return["circle"]}getDefaultProgramParams(t,e){let n=Gx(this);return{config:new F(this,e),defines:n,overrideFog:!1}}},heatmap:class extends ir{createBucket(t){return new Wx(t)}constructor(t,e,n){super(t,CA,e,n),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Hd("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,o,s,l,d,p){let m=this.paint.get("heatmap-radius").evaluate(e,n);return Hx(t,o,l,d,p,!0,!0,new ut(0,0),m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(t,e){return t==="heatmap"?{config:new F(this,e),overrideFog:!1}:{}}},hillshade:class extends ir{constructor(t,e,n){super(t,AA,e,n)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(t,e){return{overrideFog:!1}}},fill:class extends ir{constructor(t,e,n){super(t,NA,e,n)}getProgramIds(){let t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getDefaultProgramParams(t,e){return{config:new F(this,e),overrideFog:!1}}recalculate(t,e){super.recalculate(t,e);let n=this.paint._values["fill-outline-color"];n.value.kind==="constant"&&n.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Z_(t)}queryRadius(){return lg(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,o,s,l){return!t.queryGeometry.isAboveHorizon&&Pl(my(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),l.angle,t.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends ir{constructor(t,e,n){super(t,pP,e,n),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new Tg(t)}queryRadius(){return lg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(t,e,n,o,s,l,d,p,m){let _=_y(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),l.angle,t.pixelToTileUnitsFactor),b=this.paint.get("fill-extrusion-height").evaluate(e,n),C=this.paint.get("fill-extrusion-base").evaluate(e,n),O=[0,0],E=p&&l.elevation,k=l.elevation?l.elevation.exaggeration():1,R=t.tile.getBucket(this);if(E&&R instanceof Tg){let K=R.centroidVertexArray,ae=m+1;ae<K.length&&(O[0]=K.geta_centroid_pos0(ae),O[1]=K.geta_centroid_pos1(ae))}if(O[0]===0&&O[1]===1)return!1;l.projection.name==="globe"&&(o=Ov([o],[new ut(0,0),new ut(ht,ht)],t.tileID.canonical).map(K=>K.polygon).flat());let L=E?p:null,[V,Y]=function(K,ae,ie,de,me,ve,Pe,be,Be,Ue,Ie){return K.projection.name==="globe"?function(je,Se,Ne,st,Ge,bt,mt,qe,Nt,Tt,vt){let Ye=[],Bt=[],tn=je.projection.upVectorScale(vt,je.center.lat,je.worldSize).metersToTile,Vt=[0,0,0,1],nn=[0,0,0,1],Ht=(qt,ei,In,zn)=>{qt[0]=ei,qt[1]=In,qt[2]=zn,qt[3]=1},xn=Pv();Ne>0&&(Ne+=xn),st+=xn;for(let qt of Se){let ei=[],In=[];for(let zn of qt){let Nn=zn.x+Ge.x,Dn=zn.y+Ge.y,gi=je.projection.projectTilePoint(Nn,Dn,vt),Zn=je.projection.upVector(vt,zn.x,zn.y),Di=Ne,Ji=st;if(mt){let vo=Sv(Nn,Dn,Ne,st,mt,qe,Nt,Tt);Di+=vo.base,Ji+=vo.top}Ne!==0?Ht(Vt,gi.x+Zn[0]*tn*Di,gi.y+Zn[1]*tn*Di,gi.z+Zn[2]*tn*Di):Ht(Vt,gi.x,gi.y,gi.z),Ht(nn,gi.x+Zn[0]*tn*Ji,gi.y+Zn[1]*tn*Ji,gi.z+Zn[2]*tn*Ji),r.N.transformMat4(Vt,Vt,bt),r.N.transformMat4(nn,nn,bt),ei.push(new qd(Vt[0],Vt[1],Vt[2])),In.push(new qd(nn[0],nn[1],nn[2]))}Ye.push(ei),Bt.push(In)}return[Ye,Bt]}(K,ae,ie,de,me,ve,Pe,be,Be,Ue,Ie):Pe?function(je,Se,Ne,st,Ge,bt,mt,qe,Nt){let Tt=[],vt=[],Ye=[0,0,0,1];for(let Bt of je){let tn=[],Vt=[];for(let nn of Bt){let Ht=nn.x+st.x,xn=nn.y+st.y,qt=Sv(Ht,xn,Se,Ne,bt,mt,qe,Nt);Ye[0]=Ht,Ye[1]=xn,Ye[2]=qt.base,Ye[3]=1,r.a7.transformMat4(Ye,Ye,Ge),Ye[3]=Math.max(Ye[3],1e-5);let ei=new qd(Ye[0]/Ye[3],Ye[1]/Ye[3],Ye[2]/Ye[3]);Ye[0]=Ht,Ye[1]=xn,Ye[2]=qt.top,Ye[3]=1,r.a7.transformMat4(Ye,Ye,Ge),Ye[3]=Math.max(Ye[3],1e-5);let In=new qd(Ye[0]/Ye[3],Ye[1]/Ye[3],Ye[2]/Ye[3]);tn.push(ei),Vt.push(In)}Tt.push(tn),vt.push(Vt)}return[Tt,vt]}(ae,ie,de,me,ve,Pe,be,Be,Ue):function(je,Se,Ne,st,Ge){let bt=[],mt=[],qe=Ge[8]*Se,Nt=Ge[9]*Se,Tt=Ge[10]*Se,vt=Ge[11]*Se,Ye=Ge[8]*Ne,Bt=Ge[9]*Ne,tn=Ge[10]*Ne,Vt=Ge[11]*Ne;for(let nn of je){let Ht=[],xn=[];for(let qt of nn){let ei=qt.x+st.x,In=qt.y+st.y,zn=Ge[0]*ei+Ge[4]*In+Ge[12],Nn=Ge[1]*ei+Ge[5]*In+Ge[13],Dn=Ge[2]*ei+Ge[6]*In+Ge[14],gi=Ge[3]*ei+Ge[7]*In+Ge[15],Zn=zn+qe,Di=Nn+Nt,Ji=Dn+Tt,vo=Math.max(gi+vt,1e-5),hi=zn+Ye,Mi=Nn+Bt,fo=Dn+tn,go=Math.max(gi+Vt,1e-5);Ht.push(new qd(Zn/vo,Di/vo,Ji/vo)),xn.push(new qd(hi/go,Mi/go,fo/go))}bt.push(Ht),mt.push(xn)}return[bt,mt]}(ae,ie,de,me,ve)}(l,o,C,b,_,d,L,O,k,l.center.lat,t.tileID.canonical),J=t.queryGeometry;return function(K,ae,ie){let de=1/0;Pl(ie,ae)&&(de=Tv(ie,ae[0]));for(let me=0;me<ae.length;me++){let ve=ae[me],Pe=K[me];for(let be=0;be<ve.length-1;be++){let Be=ve[be],Ue=[Be,ve[be+1],Pe[be+1],Pe[be],Be];Da(ie,Ue)&&(de=Math.min(de,Tv(ie,Ue)))}}return de!==1/0&&de}(V,Y,J.isPointQuery()?J.screenBounds:J.screenGeometry)}},line:class extends ir{constructor(t,e,n){super(t,Iv,e,n),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){let e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof _l,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Fv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new X_(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(t,e){let n=zv(this);return{config:new F(this,e),defines:n,overrideFog:!1}}queryRadius(t){let e=t,n=Lv(Hd("line-width",this,e),Hd("line-gap-width",this,e)),o=Hd("line-offset",this,e);return n/2+Math.abs(o)+lg(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,o,s,l){if(t.queryGeometry.isAboveHorizon)return!1;let d=my(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),l.angle,t.pixelToTileUnitsFactor),p=t.pixelToTileUnitsFactor/2*Lv(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),m=this.paint.get("line-offset").evaluate(e,n);return m&&(o=function(_,b){let C=[],O=new ut(0,0);for(let E=0;E<_.length;E++){let k=_[E],R=[];for(let L=0;L<k.length;L++){let V=k[L],Y=k[L+1],J=L===0?O:V.sub(k[L-1])._unit()._perp(),K=L===k.length-1?O:Y.sub(V)._unit()._perp(),ae=J._add(K)._unit();ae._mult(1/(ae.x*K.x+ae.y*K.y)),R.push(ae._mult(b)._add(V))}C.push(R)}return C}(o,m*t.pixelToTileUnitsFactor)),function(_,b,C){for(let O=0;O<b.length;O++){let E=b[O];if(_.length>=3){for(let k=0;k<E.length;k++)if(ns(_,E[k]))return!0}if(Hu(_,E,C))return!0}return!1}(d,o,p)}isTileClipped(){return!0}},symbol:Hg,background:class extends ir{constructor(t,e,n){super(t,mO,e,n)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(t,e){return{overrideFog:!1}}},raster:Cb,"raster-particle":Mb,sky:class extends ir{constructor(t,e,n){super(t,MO,e,n),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="sky-gradient"?this._updateColorRamp():t!=="sky-atmosphere-sun"&&t!=="sky-atmosphere-halo-color"&&t!=="sky-atmosphere-color"&&t!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=vp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){let e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if(this.paint.get("sky-type")==="atmosphere"){let o=this.paint.get("sky-atmosphere-sun"),s=!o,l=t.style.light,d=l.properties.get("position");return s&&l.properties.get("anchor")==="viewport"&&ci("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),s?h0(d.azimuthal,90-d.polar,e):h0(o[0],90-o[1],e)}let n=this.paint.get("sky-gradient-center");return h0(n[0],90-n[1],e)}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){let t=this.paint.get("sky-type");return t==="atmosphere"?["skyboxCapture","skybox"]:t==="gradient"?["skyboxGradient"]:null}},slot:class extends ir{constructor(t,e,n){super(t,AO,e)}},model:class extends ir{constructor(t,e,n){super(t,RO,e,n),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(t){return new f0(t)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(t){return t instanceof tm?ht-1:0}queryIntersectsFeature(t,e,n,o,s,l){if(!this.modelManager)return!1;let d=this.modelManager,p=t.tile.getBucket(this);if(!(p&&p instanceof f0))return!1;let m=p;for(let _ in m.instancesPerModel){let b=m.instancesPerModel[_];if(b.idToFeaturesIndex.hasOwnProperty(e.id)){let C=b.features[b.idToFeaturesIndex[e.id]],O=d.getModel(_,this.scope);if(!O)return!1;let E=r.a6.create(),k=new xe(0,0),R=m.canonical,L=Number.MAX_VALUE;for(let V=0;V<C.instancedDataCount;++V){let Y=16*(C.instancedDataOffset+V),J=b.instancedDataArray.float32,K=[J[Y+4],J[Y+5],J[Y+6]];ew(R,k,J[Y],0|J[Y+1]),kb(E,O,l,k,C.rotation,C.scale,K,!1,!1,!1),l.projection.name==="globe"&&(E=p0(E,l));let ae=r.a6.multiply([],l.projMatrix,E),ie=t.queryGeometry,de=Eb(ie.isPointQuery()?ie.screenBounds:ie.screenGeometry,l,ae,O.aabb);de!=null&&(L=Math.min(de,L))}return L!==Number.MAX_VALUE&&L}}return!1}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven()||t!=="model-color"&&t!=="model-color-mix-intensity"&&t!=="model-rotation"&&t!=="model-scale"&&t!=="model-translation"&&t!=="model-emissive-strength")}_isPropertyZoomDependent(t){let e=this._transitionablePaint._values[t];return e!=null&&e.value!=null&&e.value.expression!=null&&e.value.expression instanceof wu}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(t,e,n,o){let s=t.tile,l=s.getBucket(this),d=null,p=Number.MAX_VALUE;if(!(l&&l instanceof tm))return{queryFeature:d,intersectionZ:p};let m=l.getNodesInfo()[e];if(m.hiddenByReplacement||!m.node.meshes||!n.filter(new vi(s.tileID.overscaledZ),m.feature,s.tileID.canonical))return{queryFeature:d,intersectionZ:p};let _=m.node,b=o.calculatePosMatrix(s.tileID.toUnwrapped(),o.worldSize),C=m.evaluatedScale,O=0;o.elevation&&_.elevation&&(O=_.elevation*o.elevation.exaggeration()),r.a6.translate(b,b,[(_.anchor?_.anchor[0]:0)*(C[0]-1),(_.anchor?_.anchor[1]:0)*(C[1]-1),O]),r.a6.scale(b,b,C),r.a6.multiply(b,b,_.matrix);let E=t.queryGeometry,k=E.isPointQuery()?E.screenBounds:E.screenGeometry,R=function(V){let Y=r.a6.multiply([],b,V.matrix),J=r.a6.multiply(Y,o.expandedFarZProjMatrix,Y);for(let K=0;K<V.meshes.length;++K){let ae=V.meshes[K];if(K===V.lightMeshIndex)continue;let ie=Eb(k,o,J,ae.aabb);ie!=null&&(p=Math.min(ie,p))}if(V.children)for(let K of V.children)R(K)};if(R(_),p===Number.MAX_VALUE)return{queryFeature:d,intersectionZ:p};let L=new xe(0,0);return ew(s.tileID.canonical,L,m.node.anchor[0],m.node.anchor[1]),d={type:"Feature",geometry:{type:"Point",coordinates:[L.lng,L.lat]},properties:m.feature.properties,id:m.feature.id,state:{},layer:this.serialize()},{queryFeature:d,intersectionZ:p}}}},Xt={read:function(t,e){return t.readFields(Xt._readField,{header_length:0,x:0,y:0,z:0,layers:[]},e)},_readField:function(t,e,n){t===1?e.header_length=n.readFixed32():t===2?e.x=n.readVarint():t===3?e.y=n.readVarint():t===4?e.z=n.readVarint():t===5&&e.layers.push(Xt.Layer.read(n,n.readVarint()+n.pos))},PixelFormat:{PIXEL_FORMAT_UNKNOWN:{value:0,options:{}},PIXEL_FORMAT_UINT32:{value:1,options:{}},PIXEL_FORMAT_UINT16:{value:2,options:{}},PIXEL_FORMAT_UINT8:{value:3,options:{}}},Filter:{}};Xt.Filter.read=function(t,e){return t.readFields(Xt.Filter._readField,{delta_filter:null,filter:null,zigzag_filter:null,bitshuffle_filter:null,byteshuffle_filter:null},e)},Xt.Filter._readField=function(t,e,n){t===1?(e.delta_filter=Xt.Filter.Delta.read(n,n.readVarint()+n.pos),e.filter="delta_filter"):t===2?(e.zigzag_filter=Xt.Filter.Zigzag.read(n,n.readVarint()+n.pos),e.filter="zigzag_filter"):t===3?(e.bitshuffle_filter=Xt.Filter.BitShuffle.read(n,n.readVarint()+n.pos),e.filter="bitshuffle_filter"):t===4&&(e.byteshuffle_filter=Xt.Filter.ByteShuffle.read(n,n.readVarint()+n.pos),e.filter="byteshuffle_filter")},Xt.Filter.Delta={},Xt.Filter.Delta.read=function(t,e){return t.readFields(Xt.Filter.Delta._readField,{block_size:0},e)},Xt.Filter.Delta._readField=function(t,e,n){t===1&&(e.block_size=n.readVarint())},Xt.Filter.Zigzag={},Xt.Filter.Zigzag.read=function(t,e){return t.readFields(Xt.Filter.Zigzag._readField,{},e)},Xt.Filter.Zigzag._readField=function(t,e,n){},Xt.Filter.BitShuffle={},Xt.Filter.BitShuffle.read=function(t,e){return t.readFields(Xt.Filter.BitShuffle._readField,{},e)},Xt.Filter.BitShuffle._readField=function(t,e,n){},Xt.Filter.ByteShuffle={},Xt.Filter.ByteShuffle.read=function(t,e){return t.readFields(Xt.Filter.ByteShuffle._readField,{},e)},Xt.Filter.ByteShuffle._readField=function(t,e,n){},Xt.Codec={},Xt.Codec.read=function(t,e){return t.readFields(Xt.Codec._readField,{gzip_data:null,codec:null,jpeg_image:null,webp_image:null,png_image:null},e)},Xt.Codec._readField=function(t,e,n){t===1?(e.gzip_data=Xt.Codec.GzipData.read(n,n.readVarint()+n.pos),e.codec="gzip_data"):t===2?(e.jpeg_image=Xt.Codec.JpegImage.read(n,n.readVarint()+n.pos),e.codec="jpeg_image"):t===3?(e.webp_image=Xt.Codec.WebpImage.read(n,n.readVarint()+n.pos),e.codec="webp_image"):t===4&&(e.png_image=Xt.Codec.PngImage.read(n,n.readVarint()+n.pos),e.codec="png_image")},Xt.Codec.GzipData={},Xt.Codec.GzipData.read=function(t,e){return t.readFields(Xt.Codec.GzipData._readField,{},e)},Xt.Codec.GzipData._readField=function(t,e,n){},Xt.Codec.JpegImage={},Xt.Codec.JpegImage.read=function(t,e){return t.readFields(Xt.Codec.JpegImage._readField,{},e)},Xt.Codec.JpegImage._readField=function(t,e,n){},Xt.Codec.WebpImage={},Xt.Codec.WebpImage.read=function(t,e){return t.readFields(Xt.Codec.WebpImage._readField,{},e)},Xt.Codec.WebpImage._readField=function(t,e,n){},Xt.Codec.PngImage={},Xt.Codec.PngImage.read=function(t,e){return t.readFields(Xt.Codec.PngImage._readField,{},e)},Xt.Codec.PngImage._readField=function(t,e,n){},Xt.DataIndexEntry={},Xt.DataIndexEntry.read=function(t,e){return t.readFields(Xt.DataIndexEntry._readField,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},e)},Xt.DataIndexEntry._readField=function(t,e,n){t===1?e.first_byte=n.readFixed64():t===2?e.last_byte=n.readFixed64():t===3?e.filters.push(Xt.Filter.read(n,n.readVarint()+n.pos)):t===4?e.codec=Xt.Codec.read(n,n.readVarint()+n.pos):t===5?e.offset=n.readFloat():t===6?e.scale=n.readFloat():t===7&&e.bands.push(n.readString())},Xt.Layer={},Xt.Layer.read=function(t,e){return t.readFields(Xt.Layer._readField,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},e)},Xt.Layer._readField=function(t,e,n){t===1?e.version=n.readVarint():t===2?e.name=n.readString():t===3?e.units=n.readString():t===4?e.tilesize=n.readVarint():t===5?e.buffer=n.readVarint():t===6?e.pixel_format=n.readVarint():t===7&&e.data_index.push(Xt.DataIndexEntry.read(n,n.readVarint()+n.pos))};let ls={read:function(t,e){return t.readFields(ls._readField,{uint32_values:null,values:null,fixed32_values:null},e)},_readField:function(t,e,n){t===2?(e.uint32_values=ls.Uint32Values.read(n,n.readVarint()+n.pos),e.values="uint32_values"):t===3&&(e.fixed32_values=ls.Fixed32Values.read(n,n.readVarint()+n.pos),e.values="fixed32_values")},Uint32Values:{}};ls.Uint32Values.read=function(t,e){return t.readFields(ls.Uint32Values._readField,{values:[]},e)},ls.Uint32Values._readField=function(t,e,n){t===1&&(e.readValuesInto=function(o){if(o.type!==2)throw new Error(`Unsupported pbf type "${o.type}"`);let s=function(d){return d.type===2?d.readVarint()+d.pos:d.pos+1}(o),l=o.pos;return o.pos=s,function(d){o.pos=l;let p=0;for(;o.pos<s;){let m=o.readVarint();d[p++]=m}return d}}(n))},ls.Fixed32Values={},ls.Fixed32Values.read=function(t,e){return t.readFields(ls.Fixed32Values._readField,{values:[]},e)},ls.Fixed32Values._readField=function(t,e,n){throw new Error("Not implemented")};class tT{constructor(e=0,n=0,o=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=o,this.size=0,this.ttl=n}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){let n=this.items[e];delete this.items[e],this.size--,n.prev!==null&&(n.prev.next=n.next),n.next!==null&&(n.next.prev=n.prev),this.first===n&&(this.first=n.next),this.last===n&&(this.last=n.prev)}return this}entries(e=this.keys()){return e.map(n=>[n,this.get(n)])}evict(e=!1){if(e||this.size>0){let n=this.first;delete this.items[n.key],--this.size==0?(this.first=null,this.last=null):(this.first=n.next,this.first.prev=null)}return this}expiresAt(e){let n;return this.has(e)&&(n=this.items[e].expiry),n}get(e){let n;if(this.has(e)){let o=this.items[e];this.ttl>0&&o.expiry<=Date.now()?this.delete(e):(n=o.value,this.set(e,n,!0))}return n}has(e){return e in this.items}keys(){let e=[],n=this.first;for(;n!==null;)e.push(n.key),n=n.next;return e}set(e,n,o=!1,s=this.resetTtl){let l;if(o||this.has(e)){if(l=this.items[e],l.value=n,o===!1&&s&&(l.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.last!==l){let d=this.last,p=l.next,m=l.prev;this.first===l&&(this.first=l.next),l.next=null,l.prev=this.last,d.next=l,m!==null&&(m.next=p),p!==null&&(p.prev=m)}}else this.max>0&&this.size===this.max&&this.evict(!0),l=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:n},++this.size==1?this.first=l:this.last.next=l;return this.last=l,this}values(e=this.keys()){return e.map(n=>this.get(n))}}function nT(t,e){if(e.length!==4)throw new Error(`Expected data of dimension 4 but got ${e.length}.`);let n=e[3];for(let o=2;o>=1;o--){let s=o===1?1:0,l=o===2?1:0;for(let d=0;d<e[0];d++){let p=e[1]*d;for(let m=s;m<e[1];m++){let _=e[2]*(m+p);for(let b=l;b<e[2];b++){let C=e[3]*(b+_);for(let O=0;O<e[3];O++){let E=C+O;t[E]+=t[E-n]}}}}n*=e[o]}return t}function iT(t){for(let e=0,n=t.length;e<n;e++)t[e]=t[e]>>>1^-(1&t[e]);return t}function oT(t,e){switch(e){case"uint32":return t;case"uint16":for(let n=0;n<t.length;n+=2){let o=t[n],s=t[n+1];t[n]=(240&o)>>4|(61440&o)>>8|(240&s)<<4|61440&s,t[n+1]=15&o|(3840&o)>>4|(15&s)<<8|(3840&s)<<4}return t;case"uint8":for(let n=0;n<t.length;n+=4){let o=t[n],s=t[n+1],l=t[n+2],d=t[n+3];t[n+0]=(192&o)>>6|(192&s)>>4|(192&l)>>2|192&d,t[n+1]=(48&o)>>4|(48&s)>>2|48&l|(48&d)<<2,t[n+2]=(12&o)>>2|12&s|(12&l)<<2|(12&d)<<4,t[n+3]=3&o|(3&s)<<2|(3&l)<<4|(3&d)<<6}return t;default:throw new Error(`Invalid pixel format, "${e}"`)}}class Tc extends Error{constructor(e){super(e),this.name="MRTError"}}var na=Uint8Array,ah=Uint16Array,rT=Int32Array,tw=new na([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nw=new na([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aT=new na([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iw=function(t,e){for(var n=new ah(31),o=0;o<31;++o)n[o]=e+=1<<t[o-1];var s=new rT(n[30]);for(o=1;o<30;++o)for(var l=n[o];l<n[o+1];++l)s[l]=l-n[o]<<5|o;return{b:n,r:s}},ow=iw(tw,2),rw=ow.b,sT=ow.r;rw[28]=258,sT[258]=28;for(var lT=iw(nw,0).b,M0=new ah(32768),Hi=0;Hi<32768;++Hi){var sh=(43690&Hi)>>1|(21845&Hi)<<1;M0[Hi]=((65280&(sh=(61680&(sh=(52428&sh)>>2|(13107&sh)<<2))>>4|(3855&sh)<<4))>>8|(255&sh)<<8)>>1}var Up=function(t,e,n){for(var o=t.length,s=0,l=new ah(e);s<o;++s)t[s]&&++l[t[s]-1];var d,p=new ah(e);for(s=1;s<e;++s)p[s]=p[s-1]+l[s-1]<<1;if(n){d=new ah(1<<e);var m=15-e;for(s=0;s<o;++s)if(t[s])for(var _=s<<4|t[s],b=e-t[s],C=p[t[s]-1]++<<b,O=C|(1<<b)-1;C<=O;++C)d[M0[C]>>m]=_}else for(d=new ah(o),s=0;s<o;++s)t[s]&&(d[s]=M0[p[t[s]-1]++]>>15-t[s]);return d},Gp=new na(288);for(Hi=0;Hi<144;++Hi)Gp[Hi]=8;for(Hi=144;Hi<256;++Hi)Gp[Hi]=9;for(Hi=256;Hi<280;++Hi)Gp[Hi]=7;for(Hi=280;Hi<288;++Hi)Gp[Hi]=8;var aw=new na(32);for(Hi=0;Hi<32;++Hi)aw[Hi]=5;var cT=Up(Gp,9,1),uT=Up(aw,5,1),A0=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cs=function(t,e,n){var o=e/8|0;return(t[o]|t[o+1]<<8)>>(7&e)&n},P0=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},dT=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],us=function(t,e,n){var o=new Error(e||dT[t]);if(o.code=t,Error.captureStackTrace&&Error.captureStackTrace(o,us),!n)throw o;return o},hT=new na(0),pT=typeof TextDecoder<"u"&&new TextDecoder;try{pT.decode(hT,{stream:!0})}catch{}let fT={gzip_data:"gzip"},gT={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},mT={uint32:1,uint16:2,uint8:4},_T={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};class sw{constructor(e=1){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=e}getLayer(e){return this.layers[e]}getHeaderLength(e){let n=new Uint8Array(e),o=new DataView(e);if(n[0]!==13)throw new Tc("File is not a valid MRT.");return o.getUint32(1,!0)}parseHeader(e){let n=new Uint8Array(e),o=this.getHeaderLength(e);if(n.length<o)throw new Tc(`Expected header with length >= ${o} but got buffer of length ${n.length}`);let s=new Kd(n.subarray(0,o)),l=Xt.read(s);if(!isNaN(this.x)&&(this.x!==l.x||this.y!==l.y||this.z!==l.z))throw new Tc(`Invalid attempt to parse header ${l.z}/${l.x}/${l.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=l.x,this.y=l.y,this.z=l.z;for(let d of l.layers)this.layers[d.name]=new yT(d,{cacheSize:this._cacheSize});return this}createDecodingTask(e){let n=[],o=this.getLayer(e.layerName);for(let s=0;s<o.dataIndex.length;s++){let l=o.dataIndex[s],d=l.first_byte-e.firstByte,p=l.last_byte+1-e.firstByte;if(s<e.firstBlock||s>e.lastBlock||o._blocksInProgress.has(s))continue;let m={layerName:o.name,firstByte:d,lastByte:p,pixelFormat:o.pixelFormat,blockIndex:s,blockShape:[l.bands.length].concat(o.bandShape),buffer:o.buffer,codec:l.codec.codec,filters:l.filters.map(_=>_.filter)};o._blocksInProgress.add(s),n.push(m)}return new lw(n,()=>{n.forEach(s=>o._blocksInProgress.delete(s.blockIndex))},(s,l)=>{if(n.forEach(d=>o._blocksInProgress.delete(d.blockIndex)),s)throw s;l.forEach(d=>{this.getLayer(d.layerName).processDecodedData(d)})})}}class yT{constructor({version:e,name:n,units:o,tilesize:s,pixel_format:l,buffer:d,data_index:p},m){if(this.version=e,this.version!==1)throw new Tc(`Cannot parse raster layer encoded with MRT version ${e}`);this.name=n,this.units=o,this.tileSize=s,this.buffer=d,this.pixelFormat=gT[l],this.dataIndex=p,this.bandShape=[s+2*d,s+2*d,mT[this.pixelFormat]],this._decodedBlocks=function(_=1e3,b=0,C=!1){if(isNaN(_)||_<0)throw new TypeError("Invalid max value");if(isNaN(b)||b<0)throw new TypeError("Invalid ttl value");if(typeof C!="boolean")throw new TypeError("Invalid resetTtl value");return new tT(_,b,C)}(m?m.cacheSize:5),this._blocksInProgress=new Set}processDecodedData(e){let n=e.blockIndex.toString();this._decodedBlocks.get(n)||this._decodedBlocks.set(n,e.data)}getBlockForBand(e){let n=0;switch(typeof e){case"string":for(let[o,s]of this.dataIndex.entries()){for(let[l,d]of s.bands.entries())if(d===e)return{bandIndex:n+l,blockIndex:o,blockBandIndex:l};n+=s.bands.length}break;case"number":for(let[o,s]of this.dataIndex.entries()){if(e>=n&&e<n+s.bands.length)return{bandIndex:e,blockIndex:o,blockBandIndex:e-n};n+=s.bands.length}break;default:throw new Tc(`Invalid band \`${JSON.stringify(e)}\`. Expected string or integer.`)}throw new Tc(`Band not found: ${JSON.stringify(e)}`)}getDataRange(e){let n=1/0,o=-1/0,s=1/0,l=-1/0;for(let d of e){let{blockIndex:p}=this.getBlockForBand(d);if(p<0)throw new Tc(`Invalid band: ${JSON.stringify(d)}`);let m=this.dataIndex[p];s=Math.min(s,p),l=Math.max(l,p),n=Math.min(n,m.first_byte),o=Math.max(o,m.last_byte)}return{layerName:this.name,firstByte:n,lastByte:o,firstBlock:s,lastBlock:l}}hasBand(e){let{blockIndex:n}=this.getBlockForBand(e);return n>=0}hasDataForBand(e){let{blockIndex:n}=this.getBlockForBand(e);return n>=0&&!!this._decodedBlocks.get(n.toString())}getBandView(e){let{blockIndex:n,blockBandIndex:o}=this.getBlockForBand(e),s=this._decodedBlocks.get(n.toString());if(!s)throw new Tc(`Data for band ${JSON.stringify(e)} of layer "${this.name}" not decoded.`);let l=this.dataIndex[n],d=this.bandShape.reduce((_,b)=>_*b,1),p=o*d,m=s.subarray(p,p+d);return{data:m,bytes:new Uint8Array(m.buffer).subarray(m.byteOffset,m.byteOffset+m.byteLength),tileSize:this.tileSize,buffer:this.buffer,offset:l.offset,scale:l.scale}}}class lw{constructor(e,n,o){this.tasks=e,this._onCancel=n,this._onComplete=o,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(e,n){this._finalized||(this._onComplete(e,n),this._finalized=!0)}}sw.performDecoding=function(t,e){return Promise.all(e.tasks.map(n=>{let{layerName:o,firstByte:s,lastByte:l,pixelFormat:d,blockShape:p,blockIndex:m,filters:_,codec:b}=n,C=new Uint8Array(t).subarray(s,l+1),O=new Uint32Array(p[0]*p[1]*p[2]),E;if(b!=="gzip_data")throw new Error(`Unhandled codec: ${b}`);return E=function(k,R){if(!globalThis.DecompressionStream&&R==="gzip_data")return Promise.resolve(((J=function(ie){ie[0]==31&&ie[1]==139&&ie[2]==8||us(6,"invalid gzip data");var de=ie[3],me=10;4&de&&(me+=2+(ie[10]|ie[11]<<8));for(var ve=(de>>3&1)+(de>>4&1);ve>0;ve-=!ie[me++]);return me+(2&de)}(Y=k))+8>Y.length&&us(6,"invalid gzip data"),function(ie,de,me,ve){var Pe=ie.length;if(!Pe||de.f&&!de.l)return me||new na(0);var be=!me,Be=be||de.i!=2,Ue=de.i;be&&(me=new na(3*Pe));var Ie=function(sr){var $o=me.length;if(sr>$o){var ia=new na(Math.max(2*$o,sr));ia.set(me),me=ia}},je=de.f||0,Se=de.p||0,Ne=de.b||0,st=de.l,Ge=de.d,bt=de.m,mt=de.n,qe=8*Pe;do{if(!st){je=cs(ie,Se,1);var Nt=cs(ie,Se+1,3);if(Se+=3,!Nt){var Tt=ie[(In=4+((Se+7)/8|0))-4]|ie[In-3]<<8,vt=In+Tt;if(vt>Pe){Ue&&us(0);break}Be&&Ie(Ne+Tt),me.set(ie.subarray(In,vt),Ne),de.b=Ne+=Tt,de.p=Se=8*vt,de.f=je;continue}if(Nt==1)st=cT,Ge=uT,bt=9,mt=5;else if(Nt==2){var Ye=cs(ie,Se,31)+257,Bt=cs(ie,Se+10,15)+4,tn=Ye+cs(ie,Se+5,31)+1;Se+=14;for(var Vt=new na(tn),nn=new na(19),Ht=0;Ht<Bt;++Ht)nn[aT[Ht]]=cs(ie,Se+3*Ht,7);Se+=3*Bt;var xn=A0(nn),qt=(1<<xn)-1,ei=Up(nn,xn,1);for(Ht=0;Ht<tn;){var In,zn=ei[cs(ie,Se,qt)];if(Se+=15&zn,(In=zn>>4)<16)Vt[Ht++]=In;else{var Nn=0,Dn=0;for(In==16?(Dn=3+cs(ie,Se,3),Se+=2,Nn=Vt[Ht-1]):In==17?(Dn=3+cs(ie,Se,7),Se+=3):In==18&&(Dn=11+cs(ie,Se,127),Se+=7);Dn--;)Vt[Ht++]=Nn}}var gi=Vt.subarray(0,Ye),Zn=Vt.subarray(Ye);bt=A0(gi),mt=A0(Zn),st=Up(gi,bt,1),Ge=Up(Zn,mt,1)}else us(1);if(Se>qe){Ue&&us(0);break}}Be&&Ie(Ne+131072);for(var Di=(1<<bt)-1,Ji=(1<<mt)-1,vo=Se;;vo=Se){var hi=(Nn=st[P0(ie,Se)&Di])>>4;if((Se+=15&Nn)>qe){Ue&&us(0);break}if(Nn||us(2),hi<256)me[Ne++]=hi;else{if(hi==256){vo=Se,st=null;break}var Mi=hi-254;hi>264&&(Mi=cs(ie,Se,(1<<(mo=tw[Ht=hi-257]))-1)+rw[Ht],Se+=mo);var fo=Ge[P0(ie,Se)&Ji],go=fo>>4;if(fo||us(3),Se+=15&fo,Zn=lT[go],go>3){var mo=nw[go];Zn+=P0(ie,Se)&(1<<mo)-1,Se+=mo}if(Se>qe){Ue&&us(0);break}Be&&Ie(Ne+131072);var li=Ne+Mi;if(Ne<Zn){var kr=0-Zn,Sc=Math.min(Zn,li);for(kr+Ne<0&&us(3);Ne<Sc;++Ne)me[Ne]=ve[kr+Ne]}for(;Ne<li;++Ne)me[Ne]=me[Ne-Zn]}}de.l=st,de.p=vo,de.b=Ne,de.f=je,st&&(je=1,de.m=bt,de.d=Ge,de.n=mt)}while(!je);return Ne!=me.length&&be?function(sr,$o,ia){return($o==null||$o<0)&&($o=0),(ia==null||ia>sr.length)&&(ia=sr.length),new na(sr.subarray($o,ia))}(me,0,Ne):me.subarray(0,Ne)}(Y.subarray(J,-8),{i:2},new na(((L=Y)[(V=L.length)-4]|L[V-3]<<8|L[V-2]<<16|L[V-1]<<24)>>>0),void 0)));var L,V,Y,J;let K=fT[R];if(!K)throw new Error(`Unhandled codec: ${R}`);let ae=new globalThis.DecompressionStream(K);return new Response(new Blob([k]).stream().pipeThrough(ae)).arrayBuffer().then(ie=>new Uint8Array(ie))}(C,b).then(k=>{let R=ls.read(new Kd(k));if(R.values==="uint32_values")return R.uint32_values.readValuesInto(O),new _T[d](O.buffer);throw new Error(`Unhandled numeric data "${R.values}"`)}),E.then(k=>{for(let R=_.length-1;R>=0;R--)switch(_[R]){case"delta_filter":nT(k,p);break;case"zigzag_filter":iT(k);break;case"bitshuffle_filter":oT(k,d);break;default:throw new Error(`Unhandled filter "${_[R]}"`)}return{layerName:o,blockIndex:m,data:k}}).catch(k=>{throw k})}))},xt(lw,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});let cw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class O0{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[n,o]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");let s=o>>4;if(s!==1)throw new Error(`Got v${s} data when expected v1.`);let l=cw[15&o];if(!l)throw new Error("Unrecognized array type.");let[d]=new Uint16Array(e,2,1),[p]=new Uint32Array(e,4,1);return new O0(p,d,l,e)}constructor(e,n=64,o=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=o,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;let l=cw.indexOf(this.ArrayType),d=2*e*this.ArrayType.BYTES_PER_ELEMENT,p=e*this.IndexArrayType.BYTES_PER_ELEMENT,m=(8-p%8)%8;if(l<0)throw new Error(`Unexpected typed array class: ${o}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+p+m,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+d+p+m),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+p+m,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+l]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){let o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=e,this.coords[this._pos++]=n,o}finish(){let e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return T0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,o,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:l,coords:d,nodeSize:p}=this,m=[0,l.length-1,0],_=[];for(;m.length;){let b=m.pop()||0,C=m.pop()||0,O=m.pop()||0;if(C-O<=p){for(let L=O;L<=C;L++){let V=d[2*L],Y=d[2*L+1];V>=e&&V<=o&&Y>=n&&Y<=s&&_.push(l[L])}continue}let E=O+C>>1,k=d[2*E],R=d[2*E+1];k>=e&&k<=o&&R>=n&&R<=s&&_.push(l[E]),(b===0?e<=k:n<=R)&&(m.push(O),m.push(E-1),m.push(1-b)),(b===0?o>=k:s>=R)&&(m.push(E+1),m.push(C),m.push(1-b))}return _}within(e,n,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:s,coords:l,nodeSize:d}=this,p=[0,s.length-1,0],m=[],_=o*o;for(;p.length;){let b=p.pop()||0,C=p.pop()||0,O=p.pop()||0;if(C-O<=d){for(let L=O;L<=C;L++)dw(l[2*L],l[2*L+1],e,n)<=_&&m.push(s[L]);continue}let E=O+C>>1,k=l[2*E],R=l[2*E+1];dw(k,R,e,n)<=_&&m.push(s[E]),(b===0?e-o<=k:n-o<=R)&&(p.push(O),p.push(E-1),p.push(1-b)),(b===0?e+o>=k:n+o>=R)&&(p.push(E+1),p.push(C),p.push(1-b))}return m}}function T0(t,e,n,o,s,l){if(s-o<=n)return;let d=o+s>>1;uw(t,e,d,o,s,l),T0(t,e,n,o,d-1,1-l),T0(t,e,n,d+1,s,1-l)}function uw(t,e,n,o,s,l){for(;s>o;){if(s-o>600){let _=s-o+1,b=n-o+1,C=Math.log(_),O=.5*Math.exp(2*C/3),E=.5*Math.sqrt(C*O*(_-O)/_)*(b-_/2<0?-1:1);uw(t,e,n,Math.max(o,Math.floor(n-b*O/_+E)),Math.min(s,Math.floor(n+(_-b)*O/_+E)),l)}let d=e[2*n+l],p=o,m=s;for(Hp(t,e,o,n),e[2*s+l]>d&&Hp(t,e,o,s);p<m;){for(Hp(t,e,p,m),p++,m--;e[2*p+l]<d;)p++;for(;e[2*m+l]>d;)m--}e[2*o+l]===d?Hp(t,e,o,m):(m++,Hp(t,e,m,s)),m<=n&&(o=m+1),n<=m&&(s=m-1)}}function Hp(t,e,n,o){S0(t,n,o),S0(e,2*n,2*o),S0(e,2*n+1,2*o+1)}function S0(t,e,n){let o=t[e];t[e]=t[n],t[n]=o}function dw(t,e,n,o){let s=t-n,l=e-o;return s*s+l*l}r.$=fb,r.A=Sa,r.B=Ln,r.C=_n,r.D=Me,r.E=ga,r.F=bi,r.G=at,r.H=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return gr(t.expression.evaluate(e))}interpolate(t,e,n){return{x:gn(t.x,e.x,n),y:gn(t.y,e.y,n),z:gn(t.z,e.z,n),azimuthal:gn(t.azimuthal,e.azimuthal,n),polar:gn(t.polar,e.polar,n)}}},r.I=n0,r.J=Ja,r.K=vi,r.L=Tn,r.M=class{constructor(t,e,n,o){this.id=t,this.position=e!=null?new xe(e[0],e[1]):new xe(0,0),this.orientation=n??[0,0,0],this.nodes=o,this.uploaded=!1,this.aabb=new Si([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(t,e){if(r.a6.multiply(t.matrix,e,t.matrix),t.meshes)for(let n of t.meshes){let o=Si.applyTransform(n.aabb,t.matrix);this.aabb.encapsulate(o)}if(t.children)for(let n of t.children)this._applyTransformations(n,t.matrix)}computeBoundsAndApplyParent(){let t=r.a6.identity([]);for(let e of this.nodes)this._applyTransformations(e,t)}computeModelMatrix(t,e,n,o,s,l,d=!1){kb(this.matrix,this,t.transform,this.position,e,n,o,s,l,d)}upload(t){if(!this.uploaded){for(let e of this.nodes)g0(e,t);for(let e of this.nodes)Xg(e);this.uploaded=!0}}destroy(){for(let t of this.nodes)m0(t)}},r.O=On,r.P=ut,r.Q=Pu,r.R=bn,r.S=xc,r.T=d0,r.U=gn,r.V=ht,r.W=cd,r.X=class{constructor(t){this.specification=t}possiblyEvaluate(t,e){return function([n,o]){let s=gr([1,n,o]);return{x:s.x,y:s.y,z:s.z}}(t.expression.evaluate(e))}interpolate(t,e,n){return{x:gn(t.x,e.x,n),y:gn(t.y,e.y,n),z:gn(t.z,e.z,n)}}},r.Y=function(t,e,n=0,o=!0){let s=new ut(n,n),l=t.sub(s),d=e.add(s),p=[l,new ut(d.x,l.y),d,new ut(l.x,d.y)];return o&&p.push(l.clone()),p},r.Z=wu,r._=function(t,e){let n=[];for(let o=0;o<t.length;o++){let s=ha(o-1,-1,t.length-1),l=ha(o+1,-1,t.length-1),d=t[o],p=t[l],m=t[s].sub(d).unit(),_=p.sub(d).unit(),b=_.angleWithSep(m.x,m.y),C=m.add(_).unit().mult(-1*e/Math.sin(b/2));n.push(d.add(C))}return n},r.a=Gc,r.a$=function(t){let e=[];for(let n in t)e.push(t[n]);return e},r.a0=gy,r.a1=function(t,e,n=0){return r.N.fromValues(((e.x-n)*t.scale-t.x)*ht,(e.y*t.scale-t.y)*ht,ii(e.z,e.y))},r.a2=I_,r.a3=Dv,r.a4=function(t){let e=1/0,n=1/0,o=-1/0,s=-1/0;for(let l of t)e=Math.min(e,l.x),n=Math.min(n,l.y),o=Math.max(o,l.x),s=Math.max(s,l.y);return{min:new ut(e,n),max:new ut(o,s)}},r.a5=Qt,r.a8=ns,r.a9=Fn,r.aA=Td,r.aB=Ii,r.aC=We,r.aD=Wf,r.aE=Gg,r.aF=function(){br.isLoading()||br.isLoaded()||Fs()!=="deferred"||Xh()},r.aG=wr,r.aH=qi,r.aI=Zb,r.aJ=mr,r.aK=X_,r.aL=Z_,r.aM=so,r.aN=Qr,r.aO=up,r.aP=Rx,r.aQ=bg,r.aR=u0,r.aS=function(t,e){let n=xc(e.zoom);if(n===0)return $s(t);let o=fg(t),s=z_(o),l=Qt(o.getWest())*e.worldSize,d=Qt(o.getEast())*e.worldSize,p=Gt(o.getNorth())*e.worldSize,m=Gt(o.getSouth())*e.worldSize,_=[l,p,0],b=[d,p,0],C=[l,m,0],O=[d,m,0],E=r.a6.invert([],e.globeMatrix);return r.N.transformMat4(_,_,E),r.N.transformMat4(b,b,E),r.N.transformMat4(C,C,E),r.N.transformMat4(O,O,E),s[0]=Il(s[0],C,n),s[1]=Il(s[1],O,n),s[2]=Il(s[2],b,n),s[3]=Il(s[3],_,n),Si.fromPoints(s)},r.aT=mg,r.aU=xp,r.aV=Il,r.aW=Go,r.aX=pA,r.aY=Gr,r.aZ=sw,r.a_=De,r.aa=on,r.ab=X,r.ac=function(t,e){let n={};for(let o=0;o<e.length;o++){let s=e[o];s in t&&(n[s]=t[s])}return n},r.ad=Te,r.ae=Gt,r.af=class{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,o){let s=this.entries[t]=this.entries[t]||{callbacks:[]};if(s.result){let[l,d]=s.result;return this.scheduler?this.scheduler.add(()=>{o(l,d)},e):o(l,d),()=>{}}return s.callbacks.push(o),s.cancel||(s.cancel=n((l,d)=>{s.result=[l,d];for(let p of s.callbacks)this.scheduler?this.scheduler.add(()=>{p(l,d)},e):p(l,d);setTimeout(()=>delete this.entries[t],3e3)})),()=>{s.result||(s.callbacks=s.callbacks.filter(l=>l!==o),s.callbacks.length||(s.cancel(),delete this.entries[t]))}}},r.ag=np,r.ah=function(t,e,n){let o=JSON.stringify(t.request);return t.data&&(this.deduped.entries[o]={result:[null,t.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},s=>{let l=De(t.request,(d,p,m,_)=>{d?s(d):p&&s(null,{vectorTile:n?void 0:new q_(new Kd(p)),rawData:p,cacheControl:m,expires:_})});return()=>{l.cancel(),s()}},e)},r.ai=function(t){Bn++,Bn>wt&&(t.getActor().send("enforceCacheSizeLimit",Fe),Bn=0)},r.aj=Li,r.ak=Le,r.al=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},r.am=Je,r.an=Cb,r.ao=Mb,r.ap=wb,r.aq=function(t,e){let n=document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let o=0;o<t.length;o++){let s=document.createElement("source");He(t[o])||(n.crossOrigin="Anonymous"),s.src=t[o],n.appendChild(s)}return{cancel:()=>{}}},r.ar=$g,r.as=Ip,r.at=$t,r.au=Mn,r.av=es,r.aw=ro,r.ax=zi,r.ay=Hn,r.az=Al,r.b=Va,r.b$=jf,r.b0=function(t,e){let n=[];for(let o in t)o in e||n.push(o);return n},r.b1=pr,r.b2=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.b3=function(t,e){let{x:n,y:o}=t.point,s=Vx(n,o,t.worldSize/t._pixelsPerMercatorPixel,0,0);return r.a6.multiply(s,s,B_($s(e)))},r.b5=Yd,r.b6=ta,r.b7=Sg,r.b8=function(t,e,n,o,s){let l=5*e+2;t.float32[l+0]=n,t.float32[l+1]=o,t.float32[l+2]=s},r.b9=Ug,r.bA=qg,r.bB=Ab,r.bC=function(t){let e=Ab(t,!0);return r.b4.invert([],[e[0],e[1],e[4],e[5]])},r.bD=D_,r.bE=function(t){let{x:e,y:n}=t.point,{lng:o,lat:s}=t._center;return Vx(e,n,t.worldSize,o,s)},r.bF=Qi,r.bG=te,r.bH=function(t){let e=Math.round((t+45+360)%360/90)%4;return Nl[e]},r.bI=45,r.bJ=St,r.bK=u,r.bL=js,r.bM=sg,r.bN=Eo,r.bO=jd,r.bP=c,r.bQ=function(t,e,n){let o=Math.sqrt(t*t+e*e+n*n),s=o>0?Math.acos(n/o)*ol:0,l=t!==0||e!==0?Math.atan2(-e,-t)*ol+90:0;return l<0&&(l+=360),[o,l,s]},r.bR=hn,r.bS=Si,r.bT=gr,r.bU=function(t){return[Math.pow(t[0],1/2.2),Math.pow(t[1],1/2.2),Math.pow(t[2],1/2.2)]},r.bV=function(t){return t({pluginStatus:nr,pluginURL:Bs}),Yh.on("pluginStateChange",t),t},r.bW=_0,r.bX=Qg,r.bY=eh,r.bZ=i0,r.b_=ai,r.ba=ib,r.bb=Da,r.bc=Ao,r.bd=ub,r.be=r0,r.bf=t0,r.bg=O0,r.bh=ha,r.bj=mn,r.bk=oe,r.bl=Zt,r.bm=function(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]},r.bn=xe,r.bo=xb,r.bp=it,r.bq=k_,r.br=Pb,r.bs=Ze,r.bt=Fx,r.bu=function(t,e,n,o,s,l,d,p,m){if(m.name==="globe")return Fx(t,e,new Ze(n,o,s),!1);let _=Ip({z:n,x:o,y:s},m);return new Si([(l+_.x/_.scale)*e,e*(_.y/_.scale),d],[(l+_.x2/_.scale)*e,e*(_.y2/_.scale),p])},r.bv=function(t,e,n){let o=0;for(let s=0;s<2;++s){let l=n?n[s]:0;t[s]>l&&(o+=(t[s]-l)*(t[s]-l)),e[s]<l&&(o+=(l-e[s])*(l-e[s]))}return o},r.bw=un,r.bx=Z,r.by=function(t){let e=r.a6.identity(new Float64Array(16));r.a6.multiply(e,t.pixelMatrix,t.globeMatrix);let n=[0,fe,0],o=[0,Ae,0];return r.N.transformMat4(n,n,e),r.N.transformMat4(o,o,e),[n[0]>0&&n[0]<=t.width&&n[1]>0&&n[1]<=t.height&&!L_(t,new xe(t.center.lat,90)),o[0]>0&&o[0]<=t.width&&o[1]>0&&o[1]<=t.height&&!L_(t,new xe(t.center.lat,-90))]},r.bz=function(t,e){let{scale:n}=t.tileTransform,o=n*ht/(t.tileSize*Math.pow(2,e.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return r.b4.scale(new Float32Array(4),e.inverseAdjustmentMatrix,[o,o])},r.c=$b,r.c$=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},r.c0=Qe,r.c1=Lo,r.c2=function(t,e,n){return t.type==="custom"?new wO(t,e):new eT[t.type](t,e,n)},r.c3=function(t){let e=t.indexOf(Rd);return e>=0?t.slice(0,e):t},r.c4=function(t){return t.indexOf(Rd)>=0},r.c5=function(t){let e=t.indexOf(Rd);return e>=0?t.slice(e+1):""},r.c6=function(t){let e=[],n=t.id;return n===void 0&&e.push({message:`layers.${n}: missing required property "id"`}),t.render===void 0&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&t.renderingMode!=="2d"&&t.renderingMode!=="3d"&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},r.c7=Fo,r.c8=Yh,r.c9=Re,r.cA=zv,r.cB=(t,e,n,o,s,l)=>{let d=t.transform;return{u_matrix:Rv(t,e,n,o),u_texsize:e.imageAtlasTexture?e.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:d.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:s,u_image:0,u_tile_units_to_pixels:kv(e,d),u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:l}},r.cC=(t,e,n,o,s,l,d)=>{let p=t.transform,m=p.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:Rv(t,e,n,o),u_pixels_to_tile_units:m,u_device_pixel_ratio:l,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:s,u_texsize:Bv(n)&&e.lineAtlasTexture?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:kv(e,t.transform),u_alpha_discard_threshold:0,u_trim_offset:d,u_emissive_strength:n.paint.get("line-emissive-strength")}},r.cD=pa,r.cE=vp,r.cF=Pv,r.cG=Ct,r.cH=Tg,r.cI=wc,r.cJ=450,r.cK=7,r.cL=xO,r.cM=256,r.cN=B_,r.cO=Vs,r.cP=cp,r.cQ=function(t,e,n,o,s){return on((t-e)/(n-e)*(s-o)+o,o,s)},r.cR=dn,r.cS=p0,r.cT=[1,1,1],r.cU=Zd,r.cV=ih,r.cW=Ea,r.cX=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(t){let e=rv(new ut(0,0),new ut(ht,ht),t),n=[];for(let o of this._activeRegions){if(o.hiddenByOverlap||!ov(e,o))continue;let s=JA(o.min,o.max,t);n.push({min:s.min,max:s.max,sourceId:this._sourceIds[o.priority],footprint:o.footprint,footprintTileId:o.tileId})}return n}setSources(t){this._setSources(t.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{let n=[];for(let o of e.cache.getVisibleCoordinates()){let s=e.cache.getTile(o).buckets[e.layer];if(s)for(let l of s.getNodesInfo()){let d=l.node;d.footprint&&n.push({footprint:d.footprint,id:o.toUnwrapped()})}}return n}})))}_addSource(t){let e=t.getFootprints();if(e.length!==0){for(let n of e){if(!n.footprint)continue;let o=rv(n.footprint.min,n.footprint.max,n.id);this._activeRegions.push({min:o.min,max:o.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:n.id,footprint:n.footprint})}this._sourceIds.push(t.getSourceId())}}_computeReplacement(){this._activeRegions.sort((e,n)=>e.priority-n.priority||Ag(e.min,n.min)||Ag(e.max,n.max));let t=this._activeRegions.length!==this._prevRegions.length;if(!t){let e=0,n=0;for(;!t&&e!==this._activeRegions.length;){let o=this._activeRegions[e],s=this._prevRegions[n];t=o.priority!==s.priority||!iv(o,s),++e,++n}}if(t){++this._updateTime;let e=n=>{let o=this._activeRegions;if(n>=o.length)return n;let s=o[n].priority;for(;n<o.length&&o[n].priority===s;)++n;return n};if(this._sourceIds.length>1){let n=0,o=e(n);for(;n!==o;){let s=n,l=n;for(;s!==o;){let d=this._activeRegions[s];d.hiddenByOverlap=!1;for(let p=0;p<l;p++){let m=this._activeRegions[p];if(!m.hiddenByOverlap&&ov(d,m)&&(d.hiddenByOverlap=sv(d.footprint,d.tileId,m.footprint,m.tileId),d.hiddenByOverlap))break}++s}n=o,o=e(n)}}}}_setSources(t){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let e=t.length-1;e>=0;e--)this._addSource(t[e]);this._computeReplacement()}},r.cY=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(let t of this._poleSegments)t.destroy();for(let t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy()}_fillGridMeshWithLods(t,e){let n=new Qr,o=new ro,s=[],l=t+1+2,d=e[0]+1,p=e[0]+1+(1+e.length),m=(_,b,C)=>{let O=_===l-1?_-2:_===0?_:_-1;return O+=C?24575:0,[O,b]};for(let _=0;_<l;++_)n.emplaceBack(...m(_,0,!0));for(let _=0;_<d;++_)for(let b=0;b<l;++b)n.emplaceBack(...m(b,_,(b===0||b===l-1)&&!0));for(let _=0;_<e.length;++_){let b=e[_];for(let C=0;C<l;++C)n.emplaceBack(...m(C,b,!0))}for(let _=0;_<e.length;++_){let b=o.length,C=e[_]+1+2,O=new ro;for(let R=0;R<C-1;R++){let L=R===C-2,V=L?l*(p-e.length+_-R):l;for(let Y=0;Y<l-1;Y++){let J=R*l+Y;R===0||L||Y===0||Y===l-2?(O.emplaceBack(J+1,J,J+V),O.emplaceBack(J+V,J+V+1,J+1)):(o.emplaceBack(J+1,J,J+V),o.emplaceBack(J+V,J+V+1,J+1))}}let E=Ii.simpleSegment(0,b,n.length,o.length-b);for(let R=0;R<O.uint16.length;R+=3)o.emplaceBack(O.uint16[R],O.uint16[R+1],O.uint16[R+2]);let k=Ii.simpleSegment(0,b,n.length,o.length-b);s.push({withoutSkirts:E,withSkirts:k})}return{vertices:n,indices:o,segments:s}}_createGrid(t){let e=this._fillGridMeshWithLods(le,ue);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,Rx.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){let e=new ro;for(let d=0;d<=le;d++)e.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);let n=new Vs,o=new Vs,s=new Vs,l=new Vs;this._poleSegments=[];for(let d=0,p=0;d<te;d++){let m=360/(1<<d);n.emplaceBack(0,-X,0,.5,0),o.emplaceBack(0,-X,0,.5,1),s.emplaceBack(0,-X,0,.5,.5),l.emplaceBack(0,-X,0,.5,.5);for(let _=0;_<=le;_++){let b=_/le,C=0,O=gn(0,m,b),[E,k,R]=ye(mA,_A,O,X);n.emplaceBack(E,k,R,b,C),o.emplaceBack(E,k,R,b,1-C);let L=mn(O);b=.5+.5*Math.sin(L),C=.5+.5*Math.cos(L),s.emplaceBack(E,k,R,b,C),l.emplaceBack(E,k,R,b,1-C)}this._poleSegments.push(Ii.simpleSegment(p,0,66,64)),p+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(n,hg,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(o,hg,!1),this._texturedPoleNorthVertexBuffer=t.createVertexBuffer(s,hg,!1),this._texturedPoleSouthVertexBuffer=t.createVertexBuffer(l,hg,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t,e){return[e?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,e?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}},r.cZ=function(t){return fa.has(t)},r.c_=hr,r.ca=i,r.cb=class extends ts{constructor(t){super(t),this.current=h}set(t,e,n){if(this.fetchUniformLocation(t,e)){for(let o=0;o<9;o++)if(n[o]!==this.current[o]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}},r.cc=ft,r.cd=function(t,e,n){let o=xc(n.zoom),s=t.style.map._antialias,l=e.options.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return o===0&&!s&&!l},r.ce=function(t){let e=t.pixelsPerMeter,n=e/Zt(1,t.center.lat),o=r.a6.identity(new Float64Array(16));return r.a6.translate(o,o,[t.point.x,t.point.y,0]),r.a6.scale(o,o,[n,n,e]),Float32Array.from(o)},r.cf=fg,r.cg=function(t){let e=un-5;t=on(t,-e,e)/e*90;let n=Math.pow(Math.abs(Math.sin(mn(t))),3);return Math.round(n*(ue.length-1))},r.ch=function(t,e,n,o){let s=e.getNorth(),l=e.getSouth(),d=e.getWest(),p=e.getEast(),m=1<<t.z,_=p-d,b=s-l,C=_/le,O=-b/ue[n],E=[0,C,0,O,0,0,s,d,0];if(t.z>0){let k=180/o;r.co.multiply(E,E,[k/_+1,0,0,0,k/b+1,0,-.5*k/C,.5*k/O,1])}return E[2]=m,E[5]=t.x,E[8]=t.y,E},r.ci=$s,r.cj=function(t,e,n){let o=r.a6.identity(new Float64Array(16)),s=(e/(1<<t)-.5)*Math.PI*2;return r.a6.rotateY(o,n.globeMatrix,s),Float32Array.from(o)},r.ck=class{isDataAvailableAtPoint(t){let e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;let n=e.getSource().maxzoom,o=1<<n,s=Math.floor(t.x),l=Math.floor((t.x-s)*o),d=Math.floor(t.y*o),p=this.findDEMTileFor(new Je(n,s,n,l,d));return!(!p||!p.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);let o=this._source();if(!o||t.y<0||t.y>1)return e;let s=o.getSource().maxzoom,l=1<<s,d=Math.floor(t.x),p=t.x-d,m=new Je(s,d,s,Math.floor(p*l),Math.floor(t.y*l)),_=this.findDEMTileFor(m);if(!_||!_.dem)return e;let b=_.dem,C=1<<_.tileID.canonical.z,O=(p*C-_.tileID.canonical.x)*b.dim,E=(t.y*C-_.tileID.canonical.y)*b.dim,k=Math.floor(O),R=Math.floor(E);return(n?this.exaggeration():1)*gn(gn(b.get(k,R),b.get(k,R+1),E-R),gn(b.get(k+1,R),b.get(k+1,R+1),E-R),O-k)}getAtTileOffset(t,e,n){let o=1<<t.canonical.z;return this.getAtPointOrZero(new Tn(t.wrap+(t.canonical.x+e/ht)/o,(t.canonical.y+n/ht)/o))}getAtTileOffsetFunc(t,e,n,o){return s=>{let l=this.getAtTileOffset(t,s.x,s.y),d=o.upVector(t.canonical,s.x,s.y),p=o.upVectorScale(t.canonical,e,n).metersToTile;return r.N.scale(d,d,l*p),d}}getForTilePoints(t,e,n,o){if(this.isUsingMockSource())return!1;let s=Zd.create(this,t,o);return!!s&&(e.forEach(l=>{l[2]=this.exaggeration()*s.getElevationAt(l[0],l[1],n)}),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;let e=this.findDEMTileFor(t);if(!e||!e.dem)return null;let n=e.dem.tree,o=e.tileID,s=1<<t.canonical.z-o.canonical.z,l=t.canonical.x/s-o.canonical.x,d=t.canonical.y/s-o.canonical.y,p=0;for(let m=0;m<t.canonical.z-o.canonical.z&&!n.leaves[p];m++){l*=2,d*=2;let _=2*Math.floor(d)+Math.floor(l);p=n.childOffsets[p]+_,l%=1,d%=1}return{min:this.exaggeration()*n.minimums[p],max:this.exaggeration()*n.maximums[p]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){let t=this.visibleDemTiles;if(t.length===0)return null;let e=!1,n=Number.MAX_VALUE,o=Number.MIN_VALUE;for(let s of t){let l=this.getMinMaxForTile(s.tileID);l&&(n=Math.min(n,l.min),o=Math.max(o,l.max),e=!0)}return e?{min:n,max:o}:null}},r.cl=pg,r.cm=Yx,r.cn=function(t,e){return[Math.pow(t[0],2.2)*e,Math.pow(t[1],2.2)*e,Math.pow(t[2],2.2)*e]},r.cp=Nx,r.cq=256,r.cr=function(t,e){let n=[0,0,0],o=mg($s(e.canonical));return r.N.transformMat4(n,n,o),r.N.transformMat4(n,n,t),n},r.cs=t=>({u_camera_to_center_distance:new Eo(t),u_extrude_scale:new y(t),u_device_pixel_ratio:new Eo(t),u_matrix:new u(t),u_inv_rot_matrix:new u(t),u_merc_center:new js(t),u_tile_id:new sg(t),u_zoom_transition:new Eo(t),u_up_dir:new sg(t),u_emissive_strength:new Eo(t)}),r.ct=t=>({u_matrix:new u(t),u_pixels_to_tile_units:new y(t),u_device_pixel_ratio:new Eo(t),u_units_to_pixels:new js(t),u_dash_image:new jd(t),u_gradient_image:new jd(t),u_image_height:new Eo(t),u_texsize:new js(t),u_tile_units_to_pixels:new Eo(t),u_alpha_discard_threshold:new Eo(t),u_trim_offset:new js(t),u_emissive_strength:new Eo(t)}),r.cu=t=>({u_matrix:new u(t),u_texsize:new js(t),u_pixels_to_tile_units:new y(t),u_device_pixel_ratio:new Eo(t),u_image:new jd(t),u_units_to_pixels:new js(t),u_tile_units_to_pixels:new Eo(t),u_alpha_discard_threshold:new Eo(t),u_trim_offset:new js(t)}),r.cv=Fd,r.cw=TP,r.cx=SP,r.cy=Gx,r.cz=(t,e,n,o,s,l)=>{let d=t.transform,p=d.projection.name==="globe",m;if(l.paint.get("circle-pitch-alignment")==="map")if(p){let b=Nx(d.zoom,e.canonical)*d._pixelsPerMercatorPixel;m=Float32Array.from([b,0,0,b])}else m=d.calculatePixelsToTileUnitsMatrix(n);else m=new Float32Array([d.pixelsToGLUnits[0],0,0,d.pixelsToGLUnits[1]]);let _={u_camera_to_center_distance:t.transform.getCameraToCenterDistance(d.projection),u_matrix:t.translatePosMatrix(e.projMatrix,n,l.paint.get("circle-translate"),l.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Ke.devicePixelRatio,u_extrude_scale:m,u_inv_rot_matrix:yA,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:l.paint.get("circle-emissive-strength")};if(p){_.u_inv_rot_matrix=o,_.u_merc_center=s,_.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],_.u_zoom_transition=xc(d.zoom);let b=s[0]*ht,C=s[1]*ht;_.u_up_dir=d.projection.upVector(new Ze(0,0,0),b,C)}return _},r.d=tt,r.d0=Co,r.d1=En,r.d2=ke,r.d3=function([t,e,n]){let o=Math.hypot(t,e,n),s=Math.atan2(t,n),l=.5*Math.PI-Math.acos(-e/o);return new xe(Qi(s),Qi(l))},r.d4=Ee,r.d5=we,r.d6=L_,r.d7=jx,r.d8=function(t){let e=[0,0,0],n=r.a6.identity(new Float64Array(16));return r.a6.multiply(n,t.pixelMatrix,t.globeMatrix),r.N.transformMat4(e,e,n),new ut(e[0],e[1])},r.d9=function(t){let e=t.navigator?t.navigator.userAgent:null;return!!function(n){if(Ve==null){let o=n.navigator?n.navigator.userAgent:null;Ve=!!n.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ve}(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},r.dA=as,r.dB=Wb,r.dC=qb,r.dD=Ev,r.dE=ki,r.dF=rb,r.dG=function(t,e,n,o,s,l,d,p,m,_,b){t.createArrays(),t.tilePixelRatio=ht/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;let C=t.layers[0].layout,O=t.layers[0]._unevaluatedLayout._values,E={};if(t.textSizeData.kind==="composite"){let{minZoom:V,maxZoom:Y}=t.textSizeData;E.compositeTextSizes=[O["text-size"].possiblyEvaluate(new vi(V),p),O["text-size"].possiblyEvaluate(new vi(Y),p)]}if(t.iconSizeData.kind==="composite"){let{minZoom:V,maxZoom:Y}=t.iconSizeData;E.compositeIconSizes=[O["icon-size"].possiblyEvaluate(new vi(V),p),O["icon-size"].possiblyEvaluate(new vi(Y),p)]}E.layoutTextSize=O["text-size"].possiblyEvaluate(new vi(m+1),p),E.layoutIconSize=O["icon-size"].possiblyEvaluate(new vi(m+1),p),E.textMaxSize=O["text-size"].possiblyEvaluate(new vi(18),p);let k=C.get("text-rotation-alignment")==="map"&&C.get("symbol-placement")!=="point",R=C.get("text-size"),L=!1;for(let V of t.features)if(V.icon&&V.icon.nameSecondary){L=!0;break}for(let V of t.features){let Y=C.get("text-font").evaluate(V,{},p).join(","),J=R.evaluate(V,{},p),K=E.layoutTextSize.evaluate(V,{},p),ae=(E.layoutIconSize.evaluate(V,{},p),{horizontal:{},vertical:void 0}),ie=V.text,de,me=[0,0];if(ie){let be=ie.toString(),Be=C.get("text-letter-spacing").evaluate(V,{},p)*Ao,Ue=C.get("text-line-height").evaluate(V,{},p)*Ao,Ie=l_(be)?Be:0,je=C.get("text-anchor").evaluate(V,{},p),Se=C.get("text-variable-anchor");if(!Se){let mt=C.get("text-radial-offset").evaluate(V,{},p);me=mt?ub(je,[mt*Ao,o0]):C.get("text-offset").evaluate(V,{},p).map(qe=>qe*Ao)}let Ne=k?"center":C.get("text-justify").evaluate(V,{},p),st=C.get("symbol-placement")==="point",Ge=st?C.get("text-max-width").evaluate(V,{},p)*Ao:1/0,bt=mt=>{t.allowVerticalPlacement&&zs(be)&&(ae.vertical=e0(ie,e,n,s,Y,Ge,Ue,je,mt,Ie,me,ta.vertical,!0,K,J))};if(!k&&Se){let mt=Ne==="auto"?Se.map(Nt=>r0(Nt)):[Ne],qe=!1;for(let Nt=0;Nt<mt.length;Nt++){let Tt=mt[Nt];if(!ae.horizontal[Tt])if(qe)ae.horizontal[Tt]=ae.horizontal[0];else{let vt=e0(ie,e,n,s,Y,Ge,Ue,"center",Tt,Ie,me,ta.horizontal,!1,K,J);vt&&(ae.horizontal[Tt]=vt,qe=vt.positionedLines.length===1)}}bt("left")}else{if(Ne==="auto"&&(Ne=r0(je)),st||C.get("text-writing-mode").indexOf("horizontal")>=0||!zs(be)){let mt=e0(ie,e,n,s,Y,Ge,Ue,je,Ne,Ie,me,ta.horizontal,!1,K,J);mt&&(ae.horizontal[Ne]=mt)}bt(st?"left":Ne)}}let ve=!1;if(V.icon&&V.icon.namePrimary){let be=o[V.icon.namePrimary];be&&(de=qP(s[V.icon.namePrimary],V.icon.nameSecondary?s[V.icon.nameSecondary]:void 0,C.get("icon-offset").evaluate(V,{},p),C.get("icon-anchor").evaluate(V,{},p)),ve=be.sdf,t.sdfIcons===void 0?t.sdfIcons=be.sdf:t.sdfIcons!==be.sdf&&ci("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==t.pixelRatio||C.get("icon-rotate").constantOr(1)!==0)&&(t.iconsNeedLinear=!0))}let Pe=hb(ae.horizontal)||ae.vertical;t.iconsInText||(t.iconsInText=!!Pe&&Pe.iconsInText),(Pe||de)&&tO(t,V,ae,de,o,E,K,0,me,ve,d,p,_,b,L)}l&&t.generateCollisionDebugBuffers(m,t.collisionBoxArray)},r.dH=q_,r.dI=Kd,r.dJ=Pg,r.dK=lo,r.dL=Cg,r.dM=wg,r.dN=da,r.dO=Vv,r.dP=function(t){let e=0;if(new Uint32Array(t,0,1)[0]!==Lb){let n=new Uint32Array(t,0,7),[,,o,s,l,d]=n;e=n.byteLength+s+l+d+l,(o!==t.byteLength||e>=t.byteLength)&&ci("Invalid b3dm header information.")}return Ub(t,e)},r.dQ=function(t,e){let n=$b(t);for(let o of n){for(let s of o.meshes)qO(s);o.lights&&(o.lightMeshIndex=o.meshes.length,o.meshes.push(YO(o.lights,e)))}return n},r.dR=tm,r.dS=Rb,r.dT=br,r.dU=function(t){Un(),gt&&gt.then(e=>{e.keys().then(n=>{for(let o=0;o<n.length-t;o++)e.delete(n[o])})})},r.da=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){let t=function(){let e="";for(let n=0;n<10;n++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",rt,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!Qe(t))return t;let n=Lt(t);return n.params.push(`sdk=js-${j}`),n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!Qe(t))return t;let n=Lt(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeModelURL(t,e){if(!Qe(t))return t;let n=Lt(t);return n.path=`/models/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e,n,o){if(!Qe(t))return t;let s=Lt(t);return s.path=`/v4/${s.authority}.json`,s.params.push("secure"),n&&s.params.push(`language=${n}`),o&&s.params.push(`worldview=${o}`),this._makeAPIURL(s,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,o){let s=Lt(t);return Qe(t)?(s.path=`/styles/v1${s.path}/sprite${e}${n}`,this._makeAPIURL(s,this._customAccessToken||o)):(s.path+=`${e}${n}`,fn(s))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Qe(t))return t;let o=Lt(t);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&o.authority!=="raster"&&n===512?"@2x":""}${Jt.supported?".webp":"$1"}`),o.authority==="raster"?o.path=`/${we.RASTER_URL_PREFIX}${o.path}`:o.authority==="rasterarrays"?o.path=`/${we.RASTERARRAYS_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${we.TILE_URL_VERSION}${o.path}`);let s=this._customAccessToken||function(l){for(let d of l){let p=d.match(/^access_token=(.*)$/);if(p)return p[1]}return null}(o.params)||we.ACCESS_TOKEN;return we.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&o.params.push(`sku=${this._skuToken}`),this._makeAPIURL(o,s)}canonicalizeTileURL(t,e){let n=Lt(t);if(!n.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let o="mapbox://";n.path.match(/^\/raster\/v1\//)?o+=`raster/${n.path.replace(`/${we.RASTER_URL_PREFIX}/`,"")}`:n.path.match(/^\/rasterarrays\/v1\//)?o+=`rasterarrays/${n.path.replace(`/${we.RASTERARRAYS_URL_PREFIX}/`,"")}`:o+=`tiles/${n.path.replace(`/${we.TILE_URL_VERSION}/`,"")}`;let s=n.params;return e&&(s=s.filter(l=>!l.match(/^access_token=/))),s.length&&(o+=`?${s.join("&")}`),o}canonicalizeTileset(t,e){let n=!!e&&Qe(e),o=[];for(let s of t.tiles||[])Oe(s)?o.push(this.canonicalizeTileURL(s,n)):o.push(s);return o}_makeAPIURL(t,e){let n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",o=Lt(we.API_URL);if(t.protocol=o.protocol,t.authority=o.authority,t.protocol==="http"){let s=t.params.indexOf("secure");s>=0&&t.params.splice(s,1)}if(o.path!=="/"&&(t.path=`${o.path}${t.path}`),!we.REQUIRE_ACCESS_TOKEN)return fn(t);if(e=e||we.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter(s=>s.indexOf("access_token")===-1),t.params.push(`access_token=${e||""}`),fn(t)}},r.db=function(t,e){e?fa.add(t):fa.delete(t)},r.dc=Jt,r.dd=_r,r.de=al,r.df=pt,r.dg=Sn,r.dh=function(t){fa.delete(t)},r.di=Zi,r.dj=no,r.dk=j,r.dl=function(t,e){Fe=t,wt=e},r.dm=function(t,e,n=!1){if(nr===Hh||nr===$h||nr===Wh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Bs=Ke.resolveURL(t),nr=Hh,Zh=e,qh(),n||Xh()},r.dn=Fs,r.dp=function(){Qg().acquire(y0)},r.dq=function(){let t=Np;t&&(t.isPreloaded()&&t.numActive()===1?(t.release(y0),Np=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},r.dr=Lp,r.ds=function(t){let e=rn();if(!e)return;let n=e.delete(yt);t&&n.catch(t).then(()=>t())},r.dt=Fp,r.du=zb,r.dv=function(t){x0=Ke.resolveURL(t),rh||(rh=new _0(Qg(),new ga)),rh.broadcast("setDracoUrl",x0)},r.dw=Bb,r.dx=function(t){oh=Ke.resolveURL(t),rh||(rh=new _0(Qg(),new ga)),rh.broadcast("setMeshoptUrl",oh)},r.dy=xt,r.dz=vc,r.e=to,r.f=Ke,r.g=function(t,e){return Re(to(t,{type:"json"}),e)},r.h=ea,r.i=vs,r.j=Wc,r.k=Ft,r.l=function(t){return fetch(t).then(e=>e.arrayBuffer()).then(e=>Ub(e,0,t))},r.m=Gn,r.n=bu,r.o=Tu,r.p=ob,r.q=Id,r.r=Ed,r.s=Ei,r.t=ml,r.u=Ou,r.v=oo,r.w=ci,r.x=Wa,r.z=Jh}),v(["./shared"],function(r){"use strict";function j(Ve){let Q=Ve?Ve.url.toString():void 0;return Q?performance.getEntriesByName(Q):[]}function ce(Ve){if(typeof Ve=="number"||typeof Ve=="boolean"||typeof Ve=="string"||Ve==null)return JSON.stringify(Ve);if(Array.isArray(Ve)){let oe="[";for(let pe of Ve)oe+=`${ce(pe)},`;return`${oe}]`}let Q="{";for(let oe of Object.keys(Ve).sort())Q+=`${oe}:${ce(Ve[oe])},`;return`${Q}}`}function we(Ve){let Q="";for(let oe of r.b2)Q+=`/${ce(Ve[oe])}`;return Q}class Oe{constructor(Q){this.keyCache={},this._layers={},this._layerConfigs={},Q&&this.replace(Q)}replace(Q,oe){this._layerConfigs={},this._layers={},this.update(Q,[],oe)}update(Q,oe,pe){this._options=pe;for(let Le of Q)this._layerConfigs[Le.id]=Le,(this._layers[Le.id]=r.c2(Le,this.scope,this._options)).compileFilter(),this.keyCache[Le.id]&&delete this.keyCache[Le.id];for(let Le of oe)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};let ze=function(Le,Ke){let yt={};for(let wt=0;wt<Le.length;wt++){let gt=Ke&&Ke[Le[wt].id]||we(Le[wt]);Ke&&(Ke[Le[wt].id]=gt);let At=yt[gt];At||(At=yt[gt]=[]),At.push(Le[wt])}let Fe=[];for(let wt in yt)Fe.push(yt[wt]);return Fe}(r.a$(this._layerConfigs),this.keyCache);for(let Le of ze){let Ke=Le.map(rn=>this._layers[rn.id]),yt=Ke[0];if(yt.visibility==="none")continue;let Fe=yt.source||"",wt=this.familiesBySource[Fe];wt||(wt=this.familiesBySource[Fe]={});let gt=yt.sourceLayer||"_geojsonTileLayer",At=wt[gt];At||(At=wt[gt]=[]),At.push(Ke)}}}let Qe=1*r.dA;class zt{constructor(Q){let oe={},pe=[];for(let yt in Q){let Fe=Q[yt],wt=oe[yt]={};for(let gt in Fe.glyphs){let At=Fe.glyphs[+gt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;let rn=At.metrics.localGlyph?Qe:1,Un={x:0,y:0,w:At.bitmap.width+2*rn,h:At.bitmap.height+2*rn};pe.push(Un),wt[gt]=Un}}let{w:ze,h:Le}=r.p(pe),Ke=new r.dz({width:ze||1,height:Le||1});for(let yt in Q){let Fe=Q[yt];for(let wt in Fe.glyphs){let gt=Fe.glyphs[+wt];if(!gt||gt.bitmap.width===0||gt.bitmap.height===0)continue;let At=oe[yt][wt],rn=gt.metrics.localGlyph?Qe:1;r.dz.copy(gt.bitmap,Ke,{x:0,y:0},{x:At.x+rn,y:At.y+rn},gt.bitmap)}}this.image=Ke,this.positions=oe}}r.dy(zt,"GlyphAtlas");class jt{constructor(Q){this.tileID=new r.am(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.tileZoom=Q.tileZoom,this.uid=Q.uid,this.zoom=Q.zoom,this.canonical=Q.tileID.canonical,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.scope=Q.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.promoteId=Q.promoteId,this.isSymbolTile=Q.isSymbolTile,this.tileTransform=r.as(Q.tileID.canonical,Q.projection),this.projection=Q.projection,this.brightness=Q.brightness,this.extraShadowCaster=!!Q.extraShadowCaster}parse(Q,oe,pe,ze,Le){this.status="parsing",this.data=Q,this.collisionBoxArray=new r.aD;let Ke=new r.dB(Object.keys(Q.layers).sort()),yt=new r.dC(this.tileID,this.promoteId);yt.bucketLayerIDs=[];let Fe={},wt=new r.dD(256,256),gt={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:wt,availableImages:pe,brightness:this.brightness},At=oe.familiesBySource[this.source];for(let vn in At){let ni=Q.layers[vn];if(!ni)continue;let oi=!1,Qn=!1,yo=!1;for(let ri of At[vn])ri[0].type==="symbol"?oi=!0:Qn=!0,ri[0].is3D()&&ri[0].type!=="model"&&(yo=!0);if(this.extraShadowCaster&&!yo||this.isSymbolTile===!0&&!oi||this.isSymbolTile===!1&&!Qn)continue;ni.version===1&&r.w(`Vector tile source "${this.source}" layer "${vn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let co=Ke.encode(vn),bn=[];for(let ri=0;ri<ni.length;ri++){let ai=ni.feature(ri),Re=yt.getId(ai,vn);bn.push({feature:ai,id:Re,index:ri,sourceLayerIndex:co})}for(let ri of At[vn]){let ai=ri[0];(!this.extraShadowCaster||ai.is3D()&&ai.type!=="model")&&(this.isSymbolTile!==void 0&&ai.type==="symbol"!==this.isSymbolTile||ai.minzoom&&this.zoom<Math.floor(ai.minzoom)||ai.maxzoom&&this.zoom>=ai.maxzoom||ai.visibility!=="none"&&(Wn(ri,this.zoom,gt.brightness,pe),(Fe[ai.id]=ai.createBucket({index:yt.bucketLayerIDs.length,layers:ri,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:co,sourceID:this.source,projection:this.projection.spec})).populate(bn,gt,this.tileID.canonical,this.tileTransform),yt.bucketLayerIDs.push(ri.map(Re=>Re.id))))}}let rn,Un,ti,Vn;wt.trim();let Bn={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Jt=()=>{if(rn)return this.status="done",Le(rn);if(this.extraShadowCaster)this.status="done",Le(null,{buckets:r.a$(Fe).filter(vn=>!vn.isEmpty()),featureIndex:yt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:gt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Un&&ti&&Vn){let vn=new zt(Un),ni=new r.dF(ti,Vn);for(let oi in Fe){let Qn=Fe[oi];Qn instanceof r.aE?(Wn(Qn.layers,this.zoom,gt.brightness,pe),r.dG(Qn,Un,vn.positions,ti,ni.iconPositions,this.showCollisionBoxes,pe,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Qn.hasPattern&&(Qn instanceof r.aK||Qn instanceof r.aL||Qn instanceof r.cH)&&(Wn(Qn.layers,this.zoom,gt.brightness,pe),Qn.addFeatures(gt,this.tileID.canonical,ni.patternPositions,pe,this.tileTransform,this.brightness))}this.status="done",Le(null,{buckets:r.a$(Fe).filter(oi=>!oi.isEmpty()),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vn.image,lineAtlas:wt,imageAtlas:ni,brightness:gt.brightness})}};if(!this.extraShadowCaster){let vn=r.dE(gt.glyphDependencies,Qn=>Object.keys(Qn).map(Number));Object.keys(vn).length?ze.send("getGlyphs",{uid:this.uid,stacks:vn,scope:this.scope},(Qn,yo)=>{rn||(rn=Qn,Un=yo,Jt())},void 0,!1,Bn):Un={};let ni=Object.keys(gt.iconDependencies);ni.length?ze.send("getImages",{icons:ni,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Qn,yo)=>{rn||(rn=Qn,ti=yo,Jt())},void 0,!1,Bn):ti={};let oi=Object.keys(gt.patternDependencies);oi.length?ze.send("getImages",{icons:oi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Qn,yo)=>{rn||(rn=Qn,Vn=yo,Jt())},void 0,!1,Bn):Vn={}}Jt()}}function Wn(Ve,Q,oe,pe){let ze=new r.K(Q,{brightness:oe});for(let Le of Ve)Le.recalculate(ze,pe)}class Ui extends r.E{constructor(Q,oe,pe,ze,Le,Ke){super(),this.actor=Q,this.layerIndex=oe,this.availableImages=pe,this.loadVectorData=Le||r.ah,this.loading={},this.loaded={},this.deduped=new r.af(Q.scheduler),this.isSpriteLoaded=ze,this.scheduler=Q.scheduler,this.brightness=Ke}loadTile(Q,oe){let pe=Q.uid,ze=Q&&Q.request,Le=ze&&ze.collectResourceTiming,Ke=this.loading[pe]=new jt(Q);Ke.abort=this.loadVectorData(Q,(yt,Fe)=>{let wt=!this.loading[pe];if(delete this.loading[pe],wt||yt||!Fe)return Ke.status="done",wt||(this.loaded[pe]=Ke),oe(yt);let gt=Fe.rawData,At={};Fe.expires&&(At.expires=Fe.expires),Fe.cacheControl&&(At.cacheControl=Fe.cacheControl),Ke.vectorTile=Fe.vectorTile||new r.dH(new r.dI(gt));let rn=()=>{Ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(Un,ti)=>{if(Un||!ti)return oe(Un);let Vn={};if(Le){let Bn=j(ze);Bn.length>0&&(Vn.resourceTiming=JSON.parse(JSON.stringify(Bn)))}oe(null,r.e({rawTileData:gt.slice(0)},ti,At,Vn))})};this.isSpriteLoaded?rn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(rn,{type:"parseTile",isSymbolTile:Q.isSymbolTile,zoom:Q.tileZoom}):rn()}),this.loaded=this.loaded||{},this.loaded[pe]=Ke})}reloadTile(Q,oe){let pe=this.loaded,ze=Q.uid,Le=this;if(pe&&pe[ze]){let Ke=pe[ze];Ke.showCollisionBoxes=Q.showCollisionBoxes,Ke.projection=Q.projection,Ke.brightness=Q.brightness,Ke.tileTransform=r.as(Q.tileID.canonical,Q.projection),Ke.extraShadowCaster=Q.extraShadowCaster;let yt=(Fe,wt)=>{let gt=Ke.reloadCallback;gt&&(delete Ke.reloadCallback,Ke.parse(Ke.vectorTile,Le.layerIndex,this.availableImages,Le.actor,gt)),oe(Fe,wt)};Ke.status==="parsing"?Ke.reloadCallback=yt:Ke.status==="done"&&(Ke.vectorTile?Ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,yt):yt())}else oe(null,void 0)}abortTile(Q,oe){let pe=Q.uid,ze=this.loading[pe];ze&&(ze.abort&&ze.abort(),delete this.loading[pe]),oe()}removeTile(Q,oe){let pe=this.loaded,ze=Q.uid;pe&&pe[ze]&&delete pe[ze],oe()}}class Bo{loadTile(Q,oe){let{uid:pe,encoding:ze,rawImageData:Le,padding:Ke}=Q,yt=ImageBitmap&&Le instanceof ImageBitmap?this.getImageData(Le,Ke):Le;oe(null,new r.dJ(pe,yt,ze,Ke<1))}getImageData(Q,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Q.width,Q.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Q.width,this.offscreenCanvas.height=Q.height,this.offscreenCanvasContext.drawImage(Q,0,0,Q.width,Q.height);let pe=this.offscreenCanvasContext.getImageData(-oe,-oe,Q.width+2*oe,Q.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),pe}}class lo{decodeRasterArray({task:Q,buffer:oe},pe){r.aZ.performDecoding(oe,Q).then(ze=>{pe(null,ze)},ze=>{pe(ze)})}}function Po(Ve,Q){if(Ve.length!==0){jr(Ve[0],Q);for(var oe=1;oe<Ve.length;oe++)jr(Ve[oe],!Q)}}function jr(Ve,Q){for(var oe=0,pe=0,ze=0,Le=Ve.length,Ke=Le-1;ze<Le;Ke=ze++){var yt=(Ve[ze][0]-Ve[Ke][0])*(Ve[Ke][1]+Ve[ze][1]),Fe=oe+yt;pe+=Math.abs(oe)>=Math.abs(yt)?oe-Fe+yt:yt-Fe+oe,oe=Fe}oe+pe>=0!=!!Q&&Ve.reverse()}var dr=r.dK(function Ve(Q,oe){var pe,ze=Q&&Q.type;if(ze==="FeatureCollection")for(pe=0;pe<Q.features.length;pe++)Ve(Q.features[pe],oe);else if(ze==="GeometryCollection")for(pe=0;pe<Q.geometries.length;pe++)Ve(Q.geometries[pe],oe);else if(ze==="Feature")Ve(Q.geometry,oe);else if(ze==="Polygon")Po(Q.coordinates,oe);else if(ze==="MultiPolygon")for(pe=0;pe<Q.coordinates.length;pe++)Po(Q.coordinates[pe],oe);return Q});let da=r.dL.prototype.toGeoJSON,Ur=class{constructor(Ve){this._feature=Ve,this.extent=r.V,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){let Ve=[];for(let Q of this._feature.geometry)Ve.push([new r.P(Q[0],Q[1])]);return Ve}{let Ve=[];for(let Q of this._feature.geometry){let oe=[];for(let pe of Q)oe.push(new r.P(pe[0],pe[1]));Ve.push(oe)}return Ve}}toGeoJSON(Ve,Q,oe){return da.call(this,Ve,Q,oe)}},ut=class{constructor(Ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.V,this.length=Ve.length,this._features=Ve}feature(Ve){return new Ur(this._features[Ve])}};var La={exports:{}},ol=r.dN,mn=r.dM.VectorTileFeature,Qi=Nl;function Nl(Ve,Q){this.options=Q||{},this.features=Ve,this.length=Ve.length}function ft(Ve,Q){this.id=typeof Ve.id=="number"?Ve.id:void 0,this.type=Ve.type,this.rawGeometry=Ve.type===1?[Ve.geometry]:Ve.geometry,this.properties=Ve.tags,this.extent=Q||4096}Nl.prototype.feature=function(Ve){return new ft(this.features[Ve],this.options.extent)},ft.prototype.loadGeometry=function(){var Ve=this.rawGeometry;this.geometry=[];for(var Q=0;Q<Ve.length;Q++){for(var oe=Ve[Q],pe=[],ze=0;ze<oe.length;ze++)pe.push(new ol(oe[ze][0],oe[ze][1]));this.geometry.push(pe)}return this.geometry},ft.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ve=this.geometry,Q=1/0,oe=-1/0,pe=1/0,ze=-1/0,Le=0;Le<Ve.length;Le++)for(var Ke=Ve[Le],yt=0;yt<Ke.length;yt++){var Fe=Ke[yt];Q=Math.min(Q,Fe.x),oe=Math.max(oe,Fe.x),pe=Math.min(pe,Fe.y),ze=Math.max(ze,Fe.y)}return[Q,pe,oe,ze]},ft.prototype.toGeoJSON=mn.prototype.toGeoJSON;var hr=r.dO,Co=Qi;function on(Ve){var Q=new hr;return function(oe,pe){for(var ze in oe.layers)pe.writeMessage(3,On,oe.layers[ze])}(Ve,Q),Q.finish()}function On(Ve,Q){var oe;Q.writeVarintField(15,Ve.version||1),Q.writeStringField(1,Ve.name||""),Q.writeVarintField(5,Ve.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<Ve.length;oe++)pe.feature=Ve.feature(oe),Q.writeMessage(2,ha,pe);var ze=pe.keys;for(oe=0;oe<ze.length;oe++)Q.writeStringField(3,ze[oe]);var Le=pe.values;for(oe=0;oe<Le.length;oe++)Q.writeMessage(4,rl,Le[oe])}function ha(Ve,Q){var oe=Ve.feature;oe.id!==void 0&&Q.writeVarintField(1,oe.id),Q.writeMessage(2,pr,Ve),Q.writeVarintField(3,oe.type),Q.writeMessage(4,We,oe)}function pr(Ve,Q){var oe=Ve.feature,pe=Ve.keys,ze=Ve.values,Le=Ve.keycache,Ke=Ve.valuecache;for(var yt in oe.properties){var Fe=oe.properties[yt],wt=Le[yt];if(Fe!==null){wt===void 0&&(pe.push(yt),Le[yt]=wt=pe.length-1),Q.writeVarint(wt);var gt=typeof Fe;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&(Fe=JSON.stringify(Fe));var At=gt+":"+Fe,rn=Ke[At];rn===void 0&&(ze.push(Fe),Ke[At]=rn=ze.length-1),Q.writeVarint(rn)}}}function to(Ve,Q){return(Q<<3)+(7&Ve)}function Na(Ve){return Ve<<1^Ve>>31}function We(Ve,Q){for(var oe=Ve.loadGeometry(),pe=Ve.type,ze=0,Le=0,Ke=oe.length,yt=0;yt<Ke;yt++){var Fe=oe[yt],wt=1;pe===1&&(wt=Fe.length),Q.writeVarint(to(1,wt));for(var gt=pe===3?Fe.length-1:Fe.length,At=0;At<gt;At++){At===1&&pe!==1&&Q.writeVarint(to(2,gt-1));var rn=Fe[At].x-ze,Un=Fe[At].y-Le;Q.writeVarint(Na(rn)),Q.writeVarint(Na(Un)),ze+=rn,Le+=Un}pe===3&&Q.writeVarint(to(7,1))}}function rl(Ve,Q){var oe=typeof Ve;oe==="string"?Q.writeStringField(1,Ve):oe==="boolean"?Q.writeBooleanField(7,Ve):oe==="number"&&(Ve%1!=0?Q.writeDoubleField(3,Ve):Ve<0?Q.writeSVarintField(6,Ve):Q.writeVarintField(5,Ve))}La.exports=on,La.exports.fromVectorTileJs=on,La.exports.fromGeojsonVt=function(Ve,Q){Q=Q||{};var oe={};for(var pe in Ve)oe[pe]=new Co(Ve[pe].features,Q),oe[pe].name=pe,oe[pe].version=Q.version,oe[pe].extent=Q.extent;return on({layers:oe})},La.exports.GeoJSONWrapper=Co;var pa=r.dK(La.exports);let gs={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ve=>Ve},Gr=Math.fround||(Fi=new Float32Array(1),Ve=>(Fi[0]=+Ve,Fi[0]));var Fi;let ki=3,Fo=5,Lo=6;class Vl{constructor(Q){this.options=Object.assign(Object.create(gs),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){let{log:oe,minZoom:pe,maxZoom:ze}=this.options;oe&&console.time("total time");let Le=`prepare ${Q.length} points`;oe&&console.time(Le),this.points=Q;let Ke=[];for(let Fe=0;Fe<Q.length;Fe++){let wt=Q[Fe];if(!wt.geometry)continue;let[gt,At]=wt.geometry.coordinates,rn=Gr(fr(gt)),Un=Gr(gr(At));Ke.push(rn,Un,1/0,Fe,-1,1),this.options.reduce&&Ke.push(0)}let yt=this.trees[ze+1]=this._createTree(Ke);oe&&console.timeEnd(Le);for(let Fe=ze;Fe>=pe;Fe--){let wt=+Date.now();yt=this.trees[Fe]=this._createTree(this._cluster(yt,Fe)),oe&&console.log("z%d: %d clusters in %dms",Fe,yt.numItems,+Date.now()-wt)}return oe&&console.timeEnd("total time"),this}getClusters(Q,oe){let pe=((Q[0]+180)%360+360)%360-180,ze=Math.max(-90,Math.min(90,Q[1])),Le=Q[2]===180?180:((Q[2]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)pe=-180,Le=180;else if(pe>Le){let At=this.getClusters([pe,ze,180,Ke],oe),rn=this.getClusters([-180,ze,Le,Ke],oe);return At.concat(rn)}let yt=this.trees[this._limitZoom(oe)],Fe=yt.range(fr(pe),gr(Ke),fr(Le),gr(ze)),wt=yt.data,gt=[];for(let At of Fe){let rn=this.stride*At;gt.push(wt[rn+Fo]>1?ci(wt,rn,this.clusterProps):this.points[wt[rn+ki]])}return gt}getChildren(Q){let oe=this._getOriginId(Q),pe=this._getOriginZoom(Q),ze="No cluster with the specified id.",Le=this.trees[pe];if(!Le)throw new Error(ze);let Ke=Le.data;if(oe*this.stride>=Ke.length)throw new Error(ze);let yt=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),Fe=Le.within(Ke[oe*this.stride],Ke[oe*this.stride+1],yt),wt=[];for(let gt of Fe){let At=gt*this.stride;Ke[At+4]===Q&&wt.push(Ke[At+Fo]>1?ci(Ke,At,this.clusterProps):this.points[Ke[At+ki]])}if(wt.length===0)throw new Error(ze);return wt}getLeaves(Q,oe,pe){let ze=[];return this._appendLeaves(ze,Q,oe=oe||10,pe=pe||0,0),ze}getTile(Q,oe,pe){let ze=this.trees[this._limitZoom(Q)],Le=Math.pow(2,Q),{extent:Ke,radius:yt}=this.options,Fe=yt/Ke,wt=(pe-Fe)/Le,gt=(pe+1+Fe)/Le,At={features:[]};return this._addTileFeatures(ze.range((oe-Fe)/Le,wt,(oe+1+Fe)/Le,gt),ze.data,oe,pe,Le,At),oe===0&&this._addTileFeatures(ze.range(1-Fe/Le,wt,1,gt),ze.data,Le,pe,Le,At),oe===Le-1&&this._addTileFeatures(ze.range(0,wt,Fe/Le,gt),ze.data,-1,pe,Le,At),At.features.length?At:null}getClusterExpansionZoom(Q){let oe=this._getOriginZoom(Q)-1;for(;oe<=this.options.maxZoom;){let pe=this.getChildren(Q);if(oe++,pe.length!==1)break;Q=pe[0].properties.cluster_id}return oe}_appendLeaves(Q,oe,pe,ze,Le){let Ke=this.getChildren(oe);for(let yt of Ke){let Fe=yt.properties;if(Fe&&Fe.cluster?Le+Fe.point_count<=ze?Le+=Fe.point_count:Le=this._appendLeaves(Q,Fe.cluster_id,pe,ze,Le):Le<ze?Le++:Q.push(yt),Q.length===pe)break}return Le}_createTree(Q){let oe=new r.bg(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pe=0;pe<Q.length;pe+=this.stride)oe.add(Q[pe],Q[pe+1]);return oe.finish(),oe.data=Q,oe}_addTileFeatures(Q,oe,pe,ze,Le,Ke){for(let yt of Q){let Fe=yt*this.stride,wt=oe[Fe+Fo]>1,gt,At,rn;if(wt)gt=Oo(oe,Fe,this.clusterProps),At=oe[Fe],rn=oe[Fe+1];else{let Vn=this.points[oe[Fe+ki]];gt=Vn.properties;let[Bn,Jt]=Vn.geometry.coordinates;At=fr(Bn),rn=gr(Jt)}let Un={type:1,geometry:[[Math.round(this.options.extent*(At*Le-pe)),Math.round(this.options.extent*(rn*Le-ze))]],tags:gt},ti;ti=wt||this.options.generateId?oe[Fe+ki]:this.points[oe[Fe+ki]].id,ti!==void 0&&(Un.id=ti),Ke.features.push(Un)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,oe){let{radius:pe,extent:ze,reduce:Le,minPoints:Ke}=this.options,yt=pe/(ze*Math.pow(2,oe)),Fe=Q.data,wt=[],gt=this.stride;for(let At=0;At<Fe.length;At+=gt){if(Fe[At+2]<=oe)continue;Fe[At+2]=oe;let rn=Fe[At],Un=Fe[At+1],ti=Q.within(Fe[At],Fe[At+1],yt),Vn=Fe[At+Fo],Bn=Vn;for(let Jt of ti){let vn=Jt*gt;Fe[vn+2]>oe&&(Bn+=Fe[vn+Fo])}if(Bn>Vn&&Bn>=Ke){let Jt,vn=rn*Vn,ni=Un*Vn,oi=-1,Qn=(At/gt<<5)+(oe+1)+this.points.length;for(let yo of ti){let co=yo*gt;if(Fe[co+2]<=oe)continue;Fe[co+2]=oe;let bn=Fe[co+Fo];vn+=Fe[co]*bn,ni+=Fe[co+1]*bn,Fe[co+4]=Qn,Le&&(Jt||(Jt=this._map(Fe,At,!0),oi=this.clusterProps.length,this.clusterProps.push(Jt)),Le(Jt,this._map(Fe,co)))}Fe[At+4]=Qn,wt.push(vn/Bn,ni/Bn,1/0,Qn,-1,Bn),Le&&wt.push(oi)}else{for(let Jt=0;Jt<gt;Jt++)wt.push(Fe[At+Jt]);if(Bn>1)for(let Jt of ti){let vn=Jt*gt;if(!(Fe[vn+2]<=oe)){Fe[vn+2]=oe;for(let ni=0;ni<gt;ni++)wt.push(Fe[vn+ni])}}}}return wt}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,oe,pe){if(Q[oe+Fo]>1){let Ke=this.clusterProps[Q[oe+Lo]];return pe?Object.assign({},Ke):Ke}let ze=this.points[Q[oe+ki]].properties,Le=this.options.map(ze);return pe&&Le===ze?Object.assign({},Le):Le}}function ci(Ve,Q,oe){return{type:"Feature",id:Ve[Q+ki],properties:Oo(Ve,Q,oe),geometry:{type:"Point",coordinates:[(pe=Ve[Q],360*(pe-.5)),Ri(Ve[Q+1])]}};var pe}function Oo(Ve,Q,oe){let pe=Ve[Q+Fo],ze=pe>=1e4?`${Math.round(pe/1e3)}k`:pe>=1e3?Math.round(pe/100)/10+"k":pe,Le=Ve[Q+Lo],Ke=Le===-1?{}:Object.assign({},oe[Le]);return Object.assign(Ke,{cluster:!0,cluster_id:Ve[Q+ki],point_count:pe,point_count_abbreviated:ze})}function fr(Ve){return Ve/360+.5}function gr(Ve){let Q=Math.sin(Ve*Math.PI/180),oe=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return oe<0?0:oe>1?1:oe}function Ri(Ve){let Q=(180-360*Ve)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}var mr={exports:{}};mr.exports=function(){function Ve(Re,De,He,ot){for(var et,ct=ot,tt=He-De>>1,rt=He-De,pt=Re[De],lt=Re[De+1],Lt=Re[He],fn=Re[He+1],Pt=De+3;Pt<He;Pt+=3){var Yn=Q(Re[Pt],Re[Pt+1],pt,lt,Lt,fn);if(Yn>ct)et=Pt,ct=Yn;else if(Yn===ct){var ui=Math.abs(Pt-tt);ui<rt&&(et=Pt,rt=ui)}}ct>ot&&(et-De>3&&Ve(Re,De,et,ot),Re[et+2]=ct,He-et>3&&Ve(Re,et,He,ot))}function Q(Re,De,He,ot,et,ct){var tt=et-He,rt=ct-ot;if(tt!==0||rt!==0){var pt=((Re-He)*tt+(De-ot)*rt)/(tt*tt+rt*rt);pt>1?(He=et,ot=ct):pt>0&&(He+=tt*pt,ot+=rt*pt)}return(tt=Re-He)*tt+(rt=De-ot)*rt}function oe(Re,De,He,ot){var et={id:Re===void 0?null:Re,type:De,geometry:He,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ct){var tt=ct.geometry,rt=ct.type;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")pe(ct,tt);else if(rt==="Polygon"||rt==="MultiLineString")for(var pt=0;pt<tt.length;pt++)pe(ct,tt[pt]);else if(rt==="MultiPolygon")for(pt=0;pt<tt.length;pt++)for(var lt=0;lt<tt[pt].length;lt++)pe(ct,tt[pt][lt])}(et),et}function pe(Re,De){for(var He=0;He<De.length;He+=3)Re.minX=Math.min(Re.minX,De[He]),Re.minY=Math.min(Re.minY,De[He+1]),Re.maxX=Math.max(Re.maxX,De[He]),Re.maxY=Math.max(Re.maxY,De[He+1])}function ze(Re,De,He,ot){if(De.geometry){var et=De.geometry.coordinates,ct=De.geometry.type,tt=Math.pow(He.tolerance/((1<<He.maxZoom)*He.extent),2),rt=[],pt=De.id;if(He.promoteId?pt=De.properties[He.promoteId]:He.generateId&&(pt=ot||0),ct==="Point")Le(et,rt);else if(ct==="MultiPoint")for(var lt=0;lt<et.length;lt++)Le(et[lt],rt);else if(ct==="LineString")Ke(et,rt,tt,!1);else if(ct==="MultiLineString"){if(He.lineMetrics){for(lt=0;lt<et.length;lt++)Ke(et[lt],rt=[],tt,!1),Re.push(oe(pt,"LineString",rt,De.properties));return}yt(et,rt,tt,!1)}else if(ct==="Polygon")yt(et,rt,tt,!0);else{if(ct!=="MultiPolygon"){if(ct==="GeometryCollection"){for(lt=0;lt<De.geometry.geometries.length;lt++)ze(Re,{id:pt,geometry:De.geometry.geometries[lt],properties:De.properties},He,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(lt=0;lt<et.length;lt++){var Lt=[];yt(et[lt],Lt,tt,!0),rt.push(Lt)}}Re.push(oe(pt,ct,rt,De.properties))}}function Le(Re,De){De.push(Fe(Re[0])),De.push(wt(Re[1])),De.push(0)}function Ke(Re,De,He,ot){for(var et,ct,tt=0,rt=0;rt<Re.length;rt++){var pt=Fe(Re[rt][0]),lt=wt(Re[rt][1]);De.push(pt),De.push(lt),De.push(0),rt>0&&(tt+=ot?(et*lt-pt*ct)/2:Math.sqrt(Math.pow(pt-et,2)+Math.pow(lt-ct,2))),et=pt,ct=lt}var Lt=De.length-3;De[2]=1,Ve(De,0,Lt,He),De[Lt+2]=1,De.size=Math.abs(tt),De.start=0,De.end=De.size}function yt(Re,De,He,ot){for(var et=0;et<Re.length;et++){var ct=[];Ke(Re[et],ct,He,ot),De.push(ct)}}function Fe(Re){return Re/360+.5}function wt(Re){var De=Math.sin(Re*Math.PI/180),He=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return He<0?0:He>1?1:He}function gt(Re,De,He,ot,et,ct,tt,rt){if(ot/=De,ct>=(He/=De)&&tt<ot)return Re;if(tt<He||ct>=ot)return null;for(var pt=[],lt=0;lt<Re.length;lt++){var Lt=Re[lt],fn=Lt.geometry,Pt=Lt.type,Yn=et===0?Lt.minX:Lt.minY,ui=et===0?Lt.maxX:Lt.maxY;if(Yn>=He&&ui<ot)pt.push(Lt);else if(!(ui<He||Yn>=ot)){var Kn=[];if(Pt==="Point"||Pt==="MultiPoint")At(fn,Kn,He,ot,et);else if(Pt==="LineString")rn(fn,Kn,He,ot,et,!1,rt.lineMetrics);else if(Pt==="MultiLineString")ti(fn,Kn,He,ot,et,!1);else if(Pt==="Polygon")ti(fn,Kn,He,ot,et,!0);else if(Pt==="MultiPolygon")for(var Li=0;Li<fn.length;Li++){var no=[];ti(fn[Li],no,He,ot,et,!0),no.length&&Kn.push(no)}if(Kn.length){if(rt.lineMetrics&&Pt==="LineString"){for(Li=0;Li<Kn.length;Li++)pt.push(oe(Lt.id,Pt,Kn[Li],Lt.tags));continue}Pt!=="LineString"&&Pt!=="MultiLineString"||(Kn.length===1?(Pt="LineString",Kn=Kn[0]):Pt="MultiLineString"),Pt!=="Point"&&Pt!=="MultiPoint"||(Pt=Kn.length===3?"Point":"MultiPoint"),pt.push(oe(Lt.id,Pt,Kn,Lt.tags))}}}return pt.length?pt:null}function At(Re,De,He,ot,et){for(var ct=0;ct<Re.length;ct+=3){var tt=Re[ct+et];tt>=He&&tt<=ot&&(De.push(Re[ct]),De.push(Re[ct+1]),De.push(Re[ct+2]))}}function rn(Re,De,He,ot,et,ct,tt){for(var rt,pt,lt=Un(Re),Lt=et===0?Bn:Jt,fn=Re.start,Pt=0;Pt<Re.length-3;Pt+=3){var Yn=Re[Pt],ui=Re[Pt+1],Kn=Re[Pt+2],Li=Re[Pt+3],no=Re[Pt+4],Sn=et===0?Yn:ui,No=et===0?Li:no,_r=!1;tt&&(rt=Math.sqrt(Math.pow(Yn-Li,2)+Math.pow(ui-no,2))),Sn<He?No>He&&(pt=Lt(lt,Yn,ui,Li,no,He),tt&&(lt.start=fn+rt*pt)):Sn>ot?No<ot&&(pt=Lt(lt,Yn,ui,Li,no,ot),tt&&(lt.start=fn+rt*pt)):Vn(lt,Yn,ui,Kn),No<He&&Sn>=He&&(pt=Lt(lt,Yn,ui,Li,no,He),_r=!0),No>ot&&Sn<=ot&&(pt=Lt(lt,Yn,ui,Li,no,ot),_r=!0),!ct&&_r&&(tt&&(lt.end=fn+rt*pt),De.push(lt),lt=Un(Re)),tt&&(fn+=rt)}var Zi=Re.length-3;Yn=Re[Zi],ui=Re[Zi+1],Kn=Re[Zi+2],(Sn=et===0?Yn:ui)>=He&&Sn<=ot&&Vn(lt,Yn,ui,Kn),Zi=lt.length-3,ct&&Zi>=3&&(lt[Zi]!==lt[0]||lt[Zi+1]!==lt[1])&&Vn(lt,lt[0],lt[1],lt[2]),lt.length&&De.push(lt)}function Un(Re){var De=[];return De.size=Re.size,De.start=Re.start,De.end=Re.end,De}function ti(Re,De,He,ot,et,ct){for(var tt=0;tt<Re.length;tt++)rn(Re[tt],De,He,ot,et,ct,!1)}function Vn(Re,De,He,ot){Re.push(De),Re.push(He),Re.push(ot)}function Bn(Re,De,He,ot,et,ct){var tt=(ct-De)/(ot-De);return Re.push(ct),Re.push(He+(et-He)*tt),Re.push(1),tt}function Jt(Re,De,He,ot,et,ct){var tt=(ct-He)/(et-He);return Re.push(De+(ot-De)*tt),Re.push(ct),Re.push(1),tt}function vn(Re,De){for(var He=[],ot=0;ot<Re.length;ot++){var et,ct=Re[ot],tt=ct.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")et=ni(ct.geometry,De);else if(tt==="MultiLineString"||tt==="Polygon"){et=[];for(var rt=0;rt<ct.geometry.length;rt++)et.push(ni(ct.geometry[rt],De))}else if(tt==="MultiPolygon")for(et=[],rt=0;rt<ct.geometry.length;rt++){for(var pt=[],lt=0;lt<ct.geometry[rt].length;lt++)pt.push(ni(ct.geometry[rt][lt],De));et.push(pt)}He.push(oe(ct.id,tt,et,ct.tags))}return He}function ni(Re,De){var He=[];He.size=Re.size,Re.start!==void 0&&(He.start=Re.start,He.end=Re.end);for(var ot=0;ot<Re.length;ot+=3)He.push(Re[ot]+De,Re[ot+1],Re[ot+2]);return He}function oi(Re,De){if(Re.transformed)return Re;var He,ot,et,ct=1<<Re.z,tt=Re.x,rt=Re.y;for(He=0;He<Re.features.length;He++){var pt=Re.features[He],lt=pt.geometry,Lt=pt.type;if(pt.geometry=[],Lt===1)for(ot=0;ot<lt.length;ot+=2)pt.geometry.push(Qn(lt[ot],lt[ot+1],De,ct,tt,rt));else for(ot=0;ot<lt.length;ot++){var fn=[];for(et=0;et<lt[ot].length;et+=2)fn.push(Qn(lt[ot][et],lt[ot][et+1],De,ct,tt,rt));pt.geometry.push(fn)}}return Re.transformed=!0,Re}function Qn(Re,De,He,ot,et,ct){return[Math.round(He*(Re*ot-et)),Math.round(He*(De*ot-ct))]}function yo(Re,De,He,ot,et){for(var ct=De===et.maxZoom?0:et.tolerance/((1<<De)*et.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:He,y:ot,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},rt=0;rt<Re.length;rt++){tt.numFeatures++,co(tt,Re[rt],ct,et);var pt=Re[rt].minX,lt=Re[rt].minY,Lt=Re[rt].maxX,fn=Re[rt].maxY;pt<tt.minX&&(tt.minX=pt),lt<tt.minY&&(tt.minY=lt),Lt>tt.maxX&&(tt.maxX=Lt),fn>tt.maxY&&(tt.maxY=fn)}return tt}function co(Re,De,He,ot){var et=De.geometry,ct=De.type,tt=[];if(ct==="Point"||ct==="MultiPoint")for(var rt=0;rt<et.length;rt+=3)tt.push(et[rt]),tt.push(et[rt+1]),Re.numPoints++,Re.numSimplified++;else if(ct==="LineString")bn(tt,et,Re,He,!1,!1);else if(ct==="MultiLineString"||ct==="Polygon")for(rt=0;rt<et.length;rt++)bn(tt,et[rt],Re,He,ct==="Polygon",rt===0);else if(ct==="MultiPolygon")for(var pt=0;pt<et.length;pt++){var lt=et[pt];for(rt=0;rt<lt.length;rt++)bn(tt,lt[rt],Re,He,!0,rt===0)}if(tt.length){var Lt=De.tags||null;if(ct==="LineString"&&ot.lineMetrics){for(var fn in Lt={},De.tags)Lt[fn]=De.tags[fn];Lt.mapbox_clip_start=et.start/et.size,Lt.mapbox_clip_end=et.end/et.size}var Pt={geometry:tt,type:ct==="Polygon"||ct==="MultiPolygon"?3:ct==="LineString"||ct==="MultiLineString"?2:1,tags:Lt};De.id!==null&&(Pt.id=De.id),Re.features.push(Pt)}}function bn(Re,De,He,ot,et,ct){var tt=ot*ot;if(ot>0&&De.size<(et?tt:ot))He.numPoints+=De.length/3;else{for(var rt=[],pt=0;pt<De.length;pt+=3)(ot===0||De[pt+2]>tt)&&(He.numSimplified++,rt.push(De[pt]),rt.push(De[pt+1])),He.numPoints++;et&&function(lt,Lt){for(var fn=0,Pt=0,Yn=lt.length,ui=Yn-2;Pt<Yn;ui=Pt,Pt+=2)fn+=(lt[Pt]-lt[ui])*(lt[Pt+1]+lt[ui+1]);if(fn>0===Lt)for(Pt=0,Yn=lt.length;Pt<Yn/2;Pt+=2){var Kn=lt[Pt],Li=lt[Pt+1];lt[Pt]=lt[Yn-2-Pt],lt[Pt+1]=lt[Yn-1-Pt],lt[Yn-2-Pt]=Kn,lt[Yn-1-Pt]=Li}}(rt,ct),Re.push(rt)}}function ri(Re,De){var He=(De=this.options=function(et,ct){for(var tt in ct)et[tt]=ct[tt];return et}(Object.create(this.options),De)).debug;if(He&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var ot=function(et,ct){var tt=[];if(et.type==="FeatureCollection")for(var rt=0;rt<et.features.length;rt++)ze(tt,et.features[rt],ct,rt);else ze(tt,et.type==="Feature"?et:{geometry:et},ct);return tt}(Re,De);this.tiles={},this.tileCoords=[],He&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ot=function(et,ct){var tt=ct.buffer/ct.extent,rt=et,pt=gt(et,1,-1-tt,tt,0,-1,2,ct),lt=gt(et,1,1-tt,2+tt,0,-1,2,ct);return(pt||lt)&&(rt=gt(et,1,-tt,1+tt,0,-1,2,ct)||[],pt&&(rt=vn(pt,1).concat(rt)),lt&&(rt=rt.concat(vn(lt,-1)))),rt}(ot,De)).length&&this.splitTile(ot,0,0,0),He&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ai(Re,De,He){return 32*((1<<Re)*He+De)+Re}return ri.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ri.prototype.splitTile=function(Re,De,He,ot,et,ct,tt){for(var rt=[Re,De,He,ot],pt=this.options,lt=pt.debug;rt.length;){ot=rt.pop(),He=rt.pop(),De=rt.pop(),Re=rt.pop();var Lt=1<<De,fn=ai(De,He,ot),Pt=this.tiles[fn];if(!Pt&&(lt>1&&console.time("creation"),Pt=this.tiles[fn]=yo(Re,De,He,ot,pt),this.tileCoords.push({z:De,x:He,y:ot}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,He,ot,Pt.numFeatures,Pt.numPoints,Pt.numSimplified),console.timeEnd("creation"));var Yn="z"+De;this.stats[Yn]=(this.stats[Yn]||0)+1,this.total++}if(Pt.source=Re,et){if(De===pt.maxZoom||De===et)continue;var ui=1<<et-De;if(He!==Math.floor(ct/ui)||ot!==Math.floor(tt/ui))continue}else if(De===pt.indexMaxZoom||Pt.numPoints<=pt.indexMaxPoints)continue;if(Pt.source=null,Re.length!==0){lt>1&&console.time("clipping");var Kn,Li,no,Sn,No,_r,Zi=.5*pt.buffer/pt.extent,al=.5-Zi,fa=.5+Zi,Yo=1+Zi;Kn=Li=no=Sn=null,No=gt(Re,Lt,He-Zi,He+fa,0,Pt.minX,Pt.maxX,pt),_r=gt(Re,Lt,He+al,He+Yo,0,Pt.minX,Pt.maxX,pt),Re=null,No&&(Kn=gt(No,Lt,ot-Zi,ot+fa,1,Pt.minY,Pt.maxY,pt),Li=gt(No,Lt,ot+al,ot+Yo,1,Pt.minY,Pt.maxY,pt),No=null),_r&&(no=gt(_r,Lt,ot-Zi,ot+fa,1,Pt.minY,Pt.maxY,pt),Sn=gt(_r,Lt,ot+al,ot+Yo,1,Pt.minY,Pt.maxY,pt),_r=null),lt>1&&console.timeEnd("clipping"),rt.push(Kn||[],De+1,2*He,2*ot),rt.push(Li||[],De+1,2*He,2*ot+1),rt.push(no||[],De+1,2*He+1,2*ot),rt.push(Sn||[],De+1,2*He+1,2*ot+1)}}},ri.prototype.getTile=function(Re,De,He){var ot=this.options,et=ot.extent,ct=ot.debug;if(Re<0||Re>24)return null;var tt=1<<Re,rt=ai(Re,De=(De%tt+tt)%tt,He);if(this.tiles[rt])return oi(this.tiles[rt],et);ct>1&&console.log("drilling down to z%d-%d-%d",Re,De,He);for(var pt,lt=Re,Lt=De,fn=He;!pt&&lt>0;)lt--,Lt=Math.floor(Lt/2),fn=Math.floor(fn/2),pt=this.tiles[ai(lt,Lt,fn)];return pt&&pt.source?(ct>1&&console.log("found parent tile z%d-%d-%d",lt,Lt,fn),ct>1&&console.time("drilling down"),this.splitTile(pt.source,lt,Lt,fn,Re,De,He),ct>1&&console.timeEnd("drilling down"),this.tiles[rt]?oi(this.tiles[rt],et):null):null},function(Re,De){return new ri(Re,De)}}();var qn=r.dK(mr.exports);function Xn(Ve,Q){let oe=Ve.tileID.canonical;if(!this._geoJSONIndex)return Q(null,null);let pe=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!pe)return Q(null,null);let ze=new ut(pe.features),Le=pa(ze);Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),Q(null,{vectorTile:ze,rawData:Le.buffer})}class Or extends Ui{constructor(Q,oe,pe,ze,Le,Ke){super(Q,oe,pe,ze,Xn,Ke),Le&&(this.loadGeoJSON=Le)}loadData(Q,oe){let pe=Q&&Q.request,ze=pe&&pe.collectResourceTiming;this.loadGeoJSON(Q,(Le,Ke)=>{if(Le||!Ke)return oe(Le);if(typeof Ke!="object")return oe(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));{dr(Ke,!0);try{if(Q.filter){let Fe=r.r(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(gt=>`${gt.key}: ${gt.message}`).join(", "));Ke={type:"FeatureCollection",features:Ke.features.filter(gt=>Fe.value.evaluate({zoom:0},gt))}}this._geoJSONIndex=Q.cluster?new Vl(function({superclusterOptions:Fe,clusterProperties:wt}){if(!wt||!Fe)return Fe;let gt={},At={},rn={accumulated:null,zoom:0},Un={properties:null},ti=Object.keys(wt);for(let Vn of ti){let[Bn,Jt]=wt[Vn],vn=r.r(Jt),ni=r.r(typeof Bn=="string"?[Bn,["accumulated"],["get",Vn]]:Bn);gt[Vn]=vn.value,At[Vn]=ni.value}return Fe.map=Vn=>{Un.properties=Vn;let Bn={};for(let Jt of ti)Bn[Jt]=gt[Jt].evaluate(rn,Un);return Bn},Fe.reduce=(Vn,Bn)=>{Un.properties=Bn;for(let Jt of ti)rn.accumulated=Vn[Jt],Vn[Jt]=At[Jt].evaluate(rn,Un)},Fe}(Q)).load(Ke.features):qn(Ke,Q.geojsonVtOptions)}catch(Fe){return oe(Fe)}this.loaded={};let yt={};if(ze){let Fe=j(pe);Fe&&(yt.resourceTiming={},yt.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Fe)))}oe(null,yt)}})}reloadTile(Q,oe){let pe=this.loaded;return pe&&pe[Q.uid]?super.reloadTile(Q,oe):this.loadTile(Q,oe)}loadGeoJSON(Q,oe){if(Q.request)r.g(Q.request,oe);else{if(typeof Q.data!="string")return oe(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(Q.data))}catch{return oe(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Q,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(pe){oe(pe)}}getClusterChildren(Q,oe){try{oe(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(pe){oe(pe)}}getClusterLeaves(Q,oe){try{oe(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(pe){oe(pe)}}}class qo{constructor(Q,oe){this.tileID=new r.am(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.tileZoom=Q.tileZoom,this.uid=Q.uid,this.zoom=Q.zoom,this.canonical=Q.tileID.canonical,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=Q.projection,this.brightness=oe}parse(Q,oe,pe,ze){this.status="parsing";let Le=new r.am(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),Ke={},yt=oe.familiesBySource[pe.source],Fe=new r.dC(Le,pe.promoteId);return Fe.bucketLayerIDs=[],Fe.is3DTile=!0,r.dP(Q).then(wt=>{if(!wt)return ze(new Error("Could not parse tile"));let gt=r.dQ(wt,1/r.bR(pe.tileID.canonical)),At=wt.json.extensionsUsed&&wt.json.extensionsUsed.includes("MAPBOX_mesh_features")||wt.json.asset.extras&&wt.json.asset.extras.MAPBOX_mesh_features,rn=wt.json.extensionsUsed&&wt.json.extensionsUsed.includes("EXT_meshopt_compression"),Un=new r.K(this.zoom,{brightness:this.brightness});for(let ti in yt)for(let Vn of yt[ti]){let Bn=Vn[0];Fe.bucketLayerIDs.push(Vn.map(vn=>vn.id)),Bn.recalculate(Un,[]);let Jt=new r.dR(gt,Le,At,rn,this.brightness,Fe);At||(Jt.needsUpload=!0),Ke[Bn.fqid]=Jt,Jt.evaluate(Bn)}this.status="done",ze(null,{buckets:Ke,featureIndex:Fe})}).catch(wt=>ze(new Error(wt.message)))}}class Tr{constructor(Q,oe,pe,ze,Le,Ke){this.actor=Q,this.layerIndex=oe,this.brightness=Ke,this.loading={},this.loaded={}}loadTile(Q,oe){let pe=Q.uid,ze=this.loading[pe]=new qo(Q,this.brightness);r.a_(Q.request,(Le,Ke)=>{let yt=!this.loading[pe];return delete this.loading[pe],yt||Le?(ze.status="done",yt||(this.loaded[pe]=ze),oe(Le)):Ke&&Ke.byteLength!==0?void ze.parse(Ke,this.layerIndex,Q,(Fe,wt)=>{ze.status="done",this.loaded=this.loaded||{},this.loaded[pe]=ze,Fe||!wt?oe(Fe):oe(null,wt)}):(ze.status="done",this.loaded[pe]=ze,oe())})}reloadTile(Q,oe){let pe=this.loaded,ze=Q.uid;if(pe&&pe[ze]){let Le=pe[ze];Le.projection=Q.projection,Le.brightness=Q.brightness;let Ke=(yt,Fe)=>{Le.reloadCallback&&(delete Le.reloadCallback,this.loadTile(Q,oe)),oe(yt,Fe)};Le.status==="parsing"?Le.reloadCallback=Ke:Le.status==="done"&&this.loadTile(Q,oe)}}abortTile(Q,oe){let pe=Q.uid;this.loading[pe]&&delete this.loading[pe],oe()}removeTile(Q,oe){let pe=this.loaded,ze=Q.uid;pe&&pe[ze]&&delete pe[ze],oe()}}class Sr{constructor(Q){this.self=Q,this.actor=new r.dS(Q,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=r.bo({name:"mercator"}),this.workerSourceTypes={vector:Ui,geojson:Or,"batched-model":Tr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,pe)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=pe},this.self.registerRTLTextPlugin=oe=>{if(r.dT.isParsed())throw new Error("RTL text plugin already registered.");r.dT.applyArabicShaping=oe.applyArabicShaping,r.dT.processBidirectionalText=oe.processBidirectionalText,r.dT.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(Q,oe,pe){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.workerSources[Q],delete this.demWorkerSources[Q],delete this.rasterArrayWorkerSource,pe()}checkIfReady(Q,oe,pe){pe()}setReferrer(Q,oe){this.referrer=oe}spriteLoaded(Q,{scope:oe,isLoaded:pe}){if(this.isSpriteLoaded[Q]||(this.isSpriteLoaded[Q]={}),this.isSpriteLoaded[Q][oe]=pe,this.workerSources[Q]&&this.workerSources[Q][oe])for(let ze in this.workerSources[Q][oe]){let Le=this.workerSources[Q][oe][ze];for(let Ke in Le)Le[Ke]instanceof Ui&&(Le[Ke].isSpriteLoaded=pe,Le[Ke].fire(new r.b("isSpriteLoaded")))}}setImages(Q,{scope:oe,images:pe},ze){if(this.availableImages[Q]||(this.availableImages[Q]={}),this.availableImages[Q][oe]=pe,this.workerSources[Q]&&this.workerSources[Q][oe]){for(let Le in this.workerSources[Q][oe]){let Ke=this.workerSources[Q][oe][Le];for(let yt in Ke)Ke[yt].availableImages=pe}ze()}else ze()}setProjection(Q,oe){this.projections[Q]=r.bo(oe)}setBrightness(Q,oe,pe){this.brightness=oe,pe()}setLayers(Q,oe,pe){this.getLayerIndex(Q,oe.scope).replace(oe.layers,oe.options),pe()}updateLayers(Q,oe,pe){this.getLayerIndex(Q,oe.scope).update(oe.layers,oe.removedIds,oe.options),pe()}loadTile(Q,oe,pe){oe.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,oe.type,oe.source,oe.scope).loadTile(oe,pe)}loadDEMTile(Q,oe,pe){this.getDEMWorkerSource(Q,oe.source,oe.scope).loadTile(oe,pe)}decodeRasterArray(Q,oe,pe){this.getRasterArrayWorkerSource().decodeRasterArray(oe,pe)}reloadTile(Q,oe,pe){oe.projection=this.projections[Q]||this.defaultProjection,this.getWorkerSource(Q,oe.type,oe.source,oe.scope).reloadTile(oe,pe)}abortTile(Q,oe,pe){this.getWorkerSource(Q,oe.type,oe.source,oe.scope).abortTile(oe,pe)}removeTile(Q,oe,pe){this.getWorkerSource(Q,oe.type,oe.source,oe.scope).removeTile(oe,pe)}removeSource(Q,oe,pe){if(!(this.workerSources[Q]&&this.workerSources[Q][oe.scope]&&this.workerSources[Q][oe.scope][oe.type]&&this.workerSources[Q][oe.scope][oe.type][oe.source]))return;let ze=this.workerSources[Q][oe.scope][oe.type][oe.source];delete this.workerSources[Q][oe.scope][oe.type][oe.source],ze.removeSource!==void 0?ze.removeSource(oe,pe):pe()}loadWorkerSource(Q,oe,pe){try{this.self.importScripts(oe.url),pe()}catch(ze){pe(ze.toString())}}syncRTLPluginState(Q,oe,pe){try{r.dT.setState(oe);let ze=r.dT.getPluginURL();if(r.dT.isLoaded()&&!r.dT.isParsed()&&ze!=null){this.self.importScripts(ze);let Le=r.dT.isParsed();pe(Le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Le)}}catch(ze){pe(ze.toString())}}setDracoUrl(Q,oe){this.dracoUrl=oe}getAvailableImages(Q,oe){this.availableImages[Q]||(this.availableImages[Q]={});let pe=this.availableImages[Q][oe];return pe||(pe=[]),pe}getLayerIndex(Q,oe){this.layerIndexes[Q]||(this.layerIndexes[Q]={});let pe=this.layerIndexes[Q][oe];return pe||(pe=this.layerIndexes[Q][oe]=new Oe,pe.scope=oe),pe}getWorkerSource(Q,oe,pe,ze){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][ze]||(this.workerSources[Q][ze]={}),this.workerSources[Q][ze][oe]||(this.workerSources[Q][ze][oe]={}),this.isSpriteLoaded[Q]||(this.isSpriteLoaded[Q]={}),!this.workerSources[Q][ze][oe][pe]){let Le={send:(Ke,yt,Fe,wt,gt,At)=>{this.actor.send(Ke,yt,Fe,Q,gt,At)},scheduler:this.actor.scheduler};this.workerSources[Q][ze][oe][pe]=new this.workerSourceTypes[oe](Le,this.getLayerIndex(Q,ze),this.getAvailableImages(Q,ze),this.isSpriteLoaded[Q][ze],void 0,this.brightness)}return this.workerSources[Q][ze][oe][pe]}getDEMWorkerSource(Q,oe,pe){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][pe]||(this.demWorkerSources[Q][pe]={}),this.demWorkerSources[Q][pe][oe]||(this.demWorkerSources[Q][pe][oe]=new Bo),this.demWorkerSources[Q][pe][oe]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new lo),this.rasterArrayWorkerSource}enforceCacheSizeLimit(Q,oe){r.dU(oe)}getWorkerPerformanceMetrics(Q,oe,pe){pe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Sr(self)),Sr}),v(["./shared"],function(r){"use strict";function j(c,i){if(Array.isArray(c)){if(!Array.isArray(i)||c.length!==i.length)return!1;for(let a=0;a<c.length;a++)if(!j(c[a],i[a]))return!1;return!0}if(typeof c=="object"&&c!==null&&i!==null){if(typeof i!="object"||Object.keys(c).length!==Object.keys(i).length)return!1;for(let a in c)if(!j(c[a],i[a]))return!1;return!0}return c===i}var ce=we;function we(c){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var u,h,f=new Blob([""],{type:"text/javascript"}),y=URL.createObjectURL(f);try{h=new Worker(y),u=!0}catch{u=!1}return h&&h.terminate(),URL.revokeObjectURL(y),u}()?function(){var u=document.createElement("canvas");u.width=u.height=1;var h=u.getContext("2d");if(!h)return!1;var f=h.getImageData(0,0,1,1);return f&&f.width===u.width}()?(Oe[a=i&&i.failIfMajorPerformanceCaveat]===void 0&&(Oe[a]=function(u){var h,f=function(y){var w=document.createElement("canvas"),A=Object.create(we.webGLContextAttributes);return A.failIfMajorPerformanceCaveat=y,w.getContext("webgl2",A)}(u);if(!f)return!1;try{h=f.createShader(f.VERTEX_SHADER)}catch{return!1}return!(!h||f.isContextLost())&&(f.shaderSource(h,"void main() {}"),f.compileShader(h),f.getShaderParameter(h,f.COMPILE_STATUS)===!0)}(a)),Oe[a]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var a}(c)}var Oe={};function Qe(c,i,a){let u=document.createElement(c);return i!=null&&(u.className=i),a&&a.appendChild(u),u}function zt(c,i,a){let u=document.createElementNS("http://www.w3.org/2000/svg",c);for(let h of Object.keys(i))u.setAttributeNS(null,h,String(i[h]));return a&&a.appendChild(u),u}we.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};let jt=typeof document<"u"?document.documentElement&&document.documentElement.style:null,Wn=jt&&jt.userSelect!==void 0?"userSelect":"WebkitUserSelect",Ui;function Bo(){jt&&Wn&&(Ui=jt[Wn],jt[Wn]="none")}function lo(){jt&&Wn&&(jt[Wn]=Ui)}function Po(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",Po,!0)}function jr(){window.addEventListener("click",Po,!0),window.setTimeout(()=>{window.removeEventListener("click",Po,!0)},0)}function dr(c,i){let a=c.getBoundingClientRect();return ut(c,a,i)}function da(c,i){let a=c.getBoundingClientRect(),u=[];for(let h=0;h<i.length;h++)u.push(ut(c,a,i[h]));return u}function Ur(c){return window.InstallTrigger!==void 0&&c.button===2&&c.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:c.button}function ut(c,i,a){let u=c.offsetWidth===i.width?1:c.offsetWidth/i.width;return new r.P((a.clientX-i.left)*u,(a.clientY-i.top)*u)}class La{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(i,a){this._updatedSourceCaches[i]=a,this.setDirty()}discardSourceCacheUpdate(i){delete this._updatedSourceCaches[i]}updateLayer(i){let a=i.scope;this._updatedLayers[a]=this._updatedLayers[a]||new Set,this._updatedLayers[a].add(i.id),this.setDirty()}removeLayer(i){let a=i.scope;this._removedLayers[a]=this._removedLayers[a]||{},this._updatedLayers[a]=this._updatedLayers[a]||new Set,this._removedLayers[a][i.id]=i,this._updatedLayers[a].delete(i.id),this._updatedPaintProps.delete(i.fqid),this.setDirty()}getRemovedLayer(i){return this._removedLayers[i.scope]?this._removedLayers[i.scope][i.id]:null}discardLayerRemoval(i){this._removedLayers[i.scope]&&delete this._removedLayers[i.scope][i.id]}getLayerUpdatesByScope(){let i={};for(let a in this._updatedLayers)i[a]=i[a]||{},i[a].updatedIds=Array.from(this._updatedLayers[a].values());for(let a in this._removedLayers)i[a]=i[a]||{},i[a].removedIds=Object.keys(this._removedLayers[a]);return i}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(i){this._updatedPaintProps.add(i.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(i){this._updatedImages.add(i),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}class ol extends r.E{constructor(i){super(),this.requestManager=i,this.models={"":{}},this.numModelsLoading={}}loadModel(i,a){return r.l(this.requestManager.transformRequest(a,r.R.Model).url).then(u=>{if(!u)return;let h=r.c(u),f=new r.M(i,void 0,void 0,h);return f.computeBoundsAndApplyParent(),f}).catch(u=>{this.fire(new r.a(new Error(`Could not load model ${i} from ${a}: ${u.message}`)))})}load(i,a){this.models[a]||(this.models[a]={});let u=Object.keys(i);this.numModelsLoading[a]=(this.numModelsLoading[a]||0)+u.length;let h=[];for(let f of u)h.push(this.loadModel(f,i[f]));Promise.allSettled(h).then(f=>{for(let y=0;y<f.length;y++){let{status:w,value:A}=f[y];w==="fulfilled"&&A&&(this.models[a][u[y]]=A)}this.numModelsLoading[a]-=u.length,this.fire(new r.b("data",{dataType:"style"}))}).catch(f=>{this.fire(new r.a(new Error(`Could not load models: ${f.message}`)))})}isLoaded(){for(let i in this.numModelsLoading)if(this.numModelsLoading[i]>0)return!1;return!0}hasModel(i,a){return!!this.getModel(i,a)}getModel(i,a){return this.models[a]||(this.models[a]={}),this.models[a][i]}addModel(i,a,u){this.models[u]||(this.models[u]={}),this.hasModel(i,u)&&this.removeModel(i,u),this.load({[i]:this.requestManager.normalizeModelURL(a)},u)}addModels(i,a){let u={};for(let h in i)u[h]=this.requestManager.normalizeModelURL(i[h]);this.load(u,a)}removeModel(i,a){this.models[a]||(this.models[a]={});let u=this.models[a][i];delete this.models[a][i],u.destroy()}listModels(i){return this.models[i]||(this.models[i]={}),Object.keys(this.models[i])}upload(i,a){this.models[a]||(this.models[a]={});for(let u in this.models[a])this.models[a][u].upload(i.context)}}class mn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,a,u){let h=String(a);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][h]=this.stateChanges[i][h]||{},r.e(this.stateChanges[i][h],u),this.deletedStates[i]===null){this.deletedStates[i]={};for(let f in this.state[i])f!==h&&(this.deletedStates[i][f]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][h]===null){this.deletedStates[i][h]={};for(let f in this.state[i][h])u[f]||(this.deletedStates[i][h][f]=null)}else for(let f in u)this.deletedStates[i]&&this.deletedStates[i][h]&&this.deletedStates[i][h][f]===null&&delete this.deletedStates[i][h][f]}removeFeatureState(i,a,u){if(this.deletedStates[i]===null)return;let h=String(a);if(this.deletedStates[i]=this.deletedStates[i]||{},u&&a!==void 0)this.deletedStates[i][h]!==null&&(this.deletedStates[i][h]=this.deletedStates[i][h]||{},this.deletedStates[i][h][u]=null);else if(a!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][h])for(u in this.deletedStates[i][h]={},this.stateChanges[i][h])this.deletedStates[i][h][u]=null;else this.deletedStates[i][h]=null;else this.deletedStates[i]=null}getState(i,a){let u=String(a),h=r.e({},(this.state[i]||{})[u],(this.stateChanges[i]||{})[u]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){let f=this.deletedStates[i][a];if(f===null)return{};for(let y in f)delete h[y]}return h}initializeTileState(i,a){i.setFeatureState(this.state,a)}coalesceChanges(i,a){let u={};for(let h in this.stateChanges){this.state[h]=this.state[h]||{};let f={};for(let y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),r.e(this.state[h][y],this.stateChanges[h][y]),f[y]=this.state[h][y];u[h]=f}for(let h in this.deletedStates){this.state[h]=this.state[h]||{};let f={};if(this.deletedStates[h]===null)for(let y in this.state[h])f[y]={},this.state[h][y]={};else for(let y in this.deletedStates[h]){if(this.deletedStates[h][y]===null)this.state[h][y]={};else if(this.state[h][y])for(let w of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][w];f[y]=this.state[h][y]}u[h]=u[h]||{},r.e(u[h],f)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(let h in i)i[h].setFeatureState(u,a)}}function Qi(c){let{userImage:i}=c;return!!(i&&i.render&&i.render())&&(c.data.replace(new Uint8Array(i.data.buffer)),!0)}class Nl extends r.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(i){this.images[i]={},this.loaded[i]=!1,this.updatedImages[i]={},this.patterns[i]={},this.callbackDispatchedThisFrame[i]={},this.atlasImage[i]=new r.h({width:1,height:1})}isLoaded(){for(let i in this.loaded)if(!this.loaded[i])return!1;return!0}setLoaded(i,a){if(this.loaded[a]!==i&&(this.loaded[a]=i,i)){for(let{ids:u,callback:h}of this.requestors)this._notify(u,a,h);this.requestors=[]}}hasImage(i,a){return!!this.getImage(i,a)}getImage(i,a){return this.images[a][i]}addImage(i,a,u){this._validate(i,u)&&(this.images[a][i]=u)}_validate(i,a){let u=!0;return this._validateStretch(a.stretchX,a.data&&a.data.width)||(this.fire(new r.a(new Error(`Image "${i}" has invalid "stretchX" value`))),u=!1),this._validateStretch(a.stretchY,a.data&&a.data.height)||(this.fire(new r.a(new Error(`Image "${i}" has invalid "stretchY" value`))),u=!1),this._validateContent(a.content,a)||(this.fire(new r.a(new Error(`Image "${i}" has invalid "content" value`))),u=!1),u}_validateStretch(i,a){if(!i)return!0;let u=0;for(let h of i){if(h[0]<u||h[1]<h[0]||a<h[1])return!1;u=h[1]}return!0}_validateContent(i,a){return!(i&&(i.length!==4||i[0]<0||a.data.width<i[0]||i[1]<0||a.data.height<i[1]||i[2]<0||a.data.width<i[2]||i[3]<0||a.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,a,u){u.version=this.images[a][i].version+1,this.images[a][i]=u,this.updatedImages[a][i]=!0}removeImage(i,a){let u=this.images[a][i];delete this.images[a][i],delete this.patterns[a][i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(i){return Object.keys(this.images[i])}getImages(i,a,u){let h=!0,f=!!this.loaded[a];if(!f)for(let y of i)this.images[a][y]||(h=!1);f||h?this._notify(i,a,u):this.requestors.push({ids:i,scope:a,callback:u})}getUpdatedImages(i){return this.updatedImages[i]}_notify(i,a,u){let h={};for(let f of i){this.images[a][f]||this.fire(new r.b("styleimagemissing",{id:f}));let y=this.images[a][f];y?h[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:r.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,h)}getPixelSize(i){let{width:a,height:u}=this.atlasImage[i];return{width:a,height:u}}getPattern(i,a){let u=this.patterns[a][i],h=this.getImage(i,a);if(!h)return null;if(u&&u.position.version===h.version)return u.position;if(u)u.position.version=h.version;else{let f={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new r.I(f,h);this.patterns[a][i]={bin:f,position:y}}return this._updatePatternAtlas(a),this.patterns[a][i].position}bind(i,a){let u=i.gl,h=this.atlasTexture[a];h?this.dirty&&(h.update(this.atlasImage[a]),this.dirty=!1):(h=new r.T(i,this.atlasImage[a],u.RGBA),this.atlasTexture[a]=h),h.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(i){let a=[];for(let y in this.patterns[i])a.push(this.patterns[i][y].bin);let{w:u,h}=r.p(a),f=this.atlasImage[i];f.resize({width:u||1,height:h||1});for(let y in this.patterns[i]){let{bin:w}=this.patterns[i][y],A=w.x+1,T=w.y+1,S=this.images[i][y].data,D=S.width,z=S.height;r.h.copy(S,f,{x:0,y:0},{x:A,y:T},{width:D,height:z}),r.h.copy(S,f,{x:0,y:z-1},{x:A,y:T-1},{width:D,height:1}),r.h.copy(S,f,{x:0,y:0},{x:A,y:T+z},{width:D,height:1}),r.h.copy(S,f,{x:D-1,y:0},{x:A-1,y:T},{width:1,height:z}),r.h.copy(S,f,{x:0,y:0},{x:A+D,y:T},{width:1,height:z})}this.dirty=!0}beginFrame(){for(let i in this.images)this.callbackDispatchedThisFrame[i]={}}dispatchRenderCallbacks(i,a){for(let u of i){if(this.callbackDispatchedThisFrame[a][u])continue;this.callbackDispatchedThisFrame[a][u]=!0;let h=this.images[a][u];Qi(h)&&this.updateImage(u,a,h)}}}class ft{constructor(i,a,u,h){this.message=(i?`${i}: `:"")+u,h&&(this.identifier=h),a!=null&&a.__line__&&(this.line=a.__line__)}}class hr extends ft{}function Co(c){let i=c.key,a=c.value,u=c.valueSpec||{},h=c.objectElementValidators||{},f=c.style,y=c.styleSpec,w=[],A=r.i(a);if(A!=="object")return[new ft(i,a,`object expected, ${A} found`)];for(let T in a){let S=T.split(".")[0],D;h[S]?D=h[S]:u[S]?D=qn:h["*"]?D=h["*"]:u["*"]&&(D=qn),D?w=w.concat(D({key:(i&&`${i}.`)+T,value:a[T],valueSpec:u[S]||u["*"],style:f,styleSpec:y,object:a,objectKey:T},a)):w.push(new hr(i,a[T],`unknown property "${T}"`))}for(let T in u)h[T]||u[T].required&&u[T].default===void 0&&a[T]===void 0&&w.push(new ft(i,a,`missing required property "${T}"`));return w}function on(c){let i=c.value,a=c.valueSpec,u=c.style,h=c.styleSpec,f=c.key,y=c.arrayElementValidator||qn;if(r.i(i)!=="array")return[new ft(f,i,`array expected, ${r.i(i)} found`)];if(a.length&&i.length!==a.length)return[new ft(f,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new ft(f,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let w={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};h.$version<7&&(w.function=a.function),r.i(a.value)==="object"&&(w=a.value);let A=[];for(let T=0;T<i.length;T++)A=A.concat(y({array:i,arrayIndex:T,value:i[T],valueSpec:w,style:u,styleSpec:h,key:`${f}[${T}]`},!0));return A}function On(c){let i=c.key,a=c.value,u=c.valueSpec,h=r.i(a);if(h==="number"&&a!=a&&(h="NaN"),h!=="number")return[new ft(i,a,`number expected, ${h} found`)];if("minimum"in u){let f=u.minimum;if(r.i(u.minimum)==="array"&&(f=u.minimum[c.arrayIndex]),a<f)return[new ft(i,a,`${a} is less than the minimum value ${f}`)]}if("maximum"in u){let f=u.maximum;if(r.i(u.maximum)==="array"&&(f=u.maximum[c.arrayIndex]),a>f)return[new ft(i,a,`${a} is greater than the maximum value ${f}`)]}return[]}function ha(c){let i=c.valueSpec,a=r.u(c.value.type),u,h,f,y={},w=a!=="categorical"&&c.value.property===void 0,A=!w,T=r.i(c.value.stops)==="array"&&r.i(c.value.stops[0])==="array"&&r.i(c.value.stops[0][0])==="object",S=Co({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(F){if(a==="identity")return[new ft(F.key,F.value,'identity function may not have a "stops" property')];let G=[],U=F.value;return G=G.concat(on({key:F.key,value:U,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:D})),r.i(U)==="array"&&U.length===0&&G.push(new ft(F.key,U,"array must have at least one stop")),G},default:function(F){return qn({key:F.key,value:F.value,valueSpec:i,style:F.style,styleSpec:F.styleSpec})}}});return a==="identity"&&w&&S.push(new ft(c.key,c.value,'missing required property "property"')),a==="identity"||c.value.stops||S.push(new ft(c.key,c.value,'missing required property "stops"')),a==="exponential"&&c.valueSpec.expression&&!r.s(c.valueSpec)&&S.push(new ft(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(A&&!r.k(c.valueSpec)?S.push(new ft(c.key,c.value,"property functions not supported")):w&&!r.m(c.valueSpec)&&S.push(new ft(c.key,c.value,"zoom functions not supported"))),a!=="categorical"&&!T||c.value.property!==void 0||S.push(new ft(c.key,c.value,'"property" property is required')),S;function D(F){let G=[],U=F.value,$=F.key;if(r.i(U)!=="array")return[new ft($,U,`array expected, ${r.i(U)} found`)];if(U.length!==2)return[new ft($,U,`array length 2 expected, length ${U.length} found`)];if(T){if(r.i(U[0])!=="object")return[new ft($,U,`object expected, ${r.i(U[0])} found`)];if(U[0].zoom===void 0)return[new ft($,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new ft($,U,"object stop key must have value")];let N=r.u(U[0].zoom);if(typeof N!="number")return[new ft($,U[0].zoom,"stop zoom values must be numbers")];if(f&&f>N)return[new ft($,U[0].zoom,"stop zoom values must appear in ascending order")];N!==f&&(f=N,h=void 0,y={}),G=G.concat(Co({key:`${$}[0]`,value:U[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:On,value:z}}))}else G=G.concat(z({key:`${$}[0]`,value:U[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},U));return r.n(r.o(U[1]))?G.concat([new ft(`${$}[1]`,U[1],"expressions are not allowed in function stops.")]):G.concat(qn({key:`${$}[1]`,value:U[1],valueSpec:i,style:F.style,styleSpec:F.styleSpec}))}function z(F,G){let U=r.i(F.value),$=r.u(F.value),N=F.value!==null?F.value:G;if(u){if(U!==u)return[new ft(F.key,N,`${U} stop domain type must match previous stop domain type ${u}`)]}else u=U;if(U!=="number"&&U!=="string"&&U!=="boolean"&&typeof $!="number"&&typeof $!="string"&&typeof $!="boolean")return[new ft(F.key,N,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&a!=="categorical"){let q=`number expected, ${U} found`;return r.k(i)&&a===void 0&&(q+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ft(F.key,N,q)]}return a!=="categorical"||U!=="number"||typeof $=="number"&&isFinite($)&&Math.floor($)===$?a!=="categorical"&&U==="number"&&typeof $=="number"&&typeof h=="number"&&h!==void 0&&$<h?[new ft(F.key,N,"stop domain values must appear in ascending order")]:(h=$,a==="categorical"&&$ in y?[new ft(F.key,N,"stop domain values must be unique")]:(y[$]=!0,[])):[new ft(F.key,N,`integer expected, found ${String($)}`)]}}function pr(c){let i=(c.expressionContext==="property"?r.q:r.r)(r.o(c.value),c.valueSpec);if(i.result==="error")return i.value.map(u=>new ft(`${c.key}${u.key}`,c.value,u.message));let a=i.value.expression||i.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!a.outputDefined())return[new ft(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!r.t(a))return[new ft(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter")return to(a,c);if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!r.v(a,["zoom","feature-state"]))return[new ft(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!r.x(a))return[new ft(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function to(c,i){let a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(let h of i.valueSpec.expression.parameters)a.delete(h);if(a.size===0)return[];let u=[];return c instanceof r.C&&a.has(c.name)?[new ft(i.key,i.value,`["${c.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(c.eachChild(h=>{u.push(...to(h,i))}),u)}function Na(c){let i=c.key,a=c.value,u=c.valueSpec,h=[];return Array.isArray(u.values)?u.values.indexOf(r.u(a))===-1&&h.push(new ft(i,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(r.u(a))===-1&&h.push(new ft(i,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),h}function We(c){return r.z(r.o(c.value))?pr(r.j({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):rl(c)}function rl(c){let i=c.value,a=c.key;if(r.i(i)!=="array")return[new ft(a,i,`array expected, ${r.i(i)} found`)];let u=c.styleSpec,h,f=[];if(i.length<1)return[new ft(a,i,"filter array must have at least 1 element")];switch(f=f.concat(Na({key:`${a}[0]`,value:i[0],valueSpec:u.filter_operator,style:c.style,styleSpec:c.styleSpec})),r.u(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&r.u(i[1])==="$type"&&f.push(new ft(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&f.push(new ft(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(h=r.i(i[1]),h!=="string"&&f.push(new ft(`${a}[1]`,i[1],`string expected, ${h} found`)));for(let y=2;y<i.length;y++)h=r.i(i[y]),r.u(i[1])==="$type"?f=f.concat(Na({key:`${a}[${y}]`,value:i[y],valueSpec:u.geometry_type,style:c.style,styleSpec:c.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&f.push(new ft(`${a}[${y}]`,i[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<i.length;y++)f=f.concat(rl({key:`${a}[${y}]`,value:i[y],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":h=r.i(i[1]),i.length!==2?f.push(new ft(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):h!=="string"&&f.push(new ft(`${a}[1]`,i[1],`string expected, ${h} found`))}return f}function pa(c,i){let a=c.key,u=c.style,h=c.layer,f=c.styleSpec,y=c.value,w=c.objectKey,A=f[`${i}_${c.layerType}`];if(!A)return[];let T=w.match(/^(.*)-transition$/);if(i==="paint"&&T&&A[T[1]]&&A[T[1]].transition)return qn({key:a,value:y,valueSpec:f.transition,style:u,styleSpec:f});let S=c.valueSpec||A[w];if(!S)return[new hr(a,y,`unknown property "${w}"`)];let D;if(r.i(y)==="string"&&r.k(S)&&!S.tokens&&(D=/^{([^}]+)}$/.exec(y))){let F=`\`{ "type": "identity", "property": ${D?JSON.stringify(D[1]):'"_"'} }\``;return[new ft(a,y,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${F}.`)]}let z=[];if(c.layerType==="symbol")w!=="text-field"||!u||u.glyphs||u.imports||z.push(new ft(a,y,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&r.A(r.o(y))&&r.u(y.type)==="identity"&&z.push(new ft(a,y,'"text-font" does not support identity functions'));else if(c.layerType==="model"&&i==="paint"&&h&&h.layout&&h.layout.hasOwnProperty("model-id")&&r.k(S)&&(r.B(S)||r.m(S))){let F=r.q(r.o(y),S),G=F.value.expression||F.value._styleExpression.expression;G&&!r.v(G,["measure-light"])&&(w==="model-emissive-strength"&&r.x(G)&&r.t(G)||z.push(new ft(a,y,`${w} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return z.concat(qn({key:c.key,value:y,valueSpec:S,style:u,styleSpec:f,expressionContext:"property",propertyType:i,propertyKey:w}))}function gs(c){return pa(c,"paint")}function Gr(c){return pa(c,"layout")}function Fi(c){let i=[],a=c.value,u=c.key,h=c.style,f=c.styleSpec;a.type||a.ref||i.push(new ft(u,a,'either "type" or "ref" is required'));let y=r.u(a.type),w=r.u(a.ref);if(a.id){let A=r.u(a.id);for(let T=0;T<c.arrayIndex;T++){let S=h.layers[T];r.u(S.id)===A&&i.push(new ft(u,a.id,`duplicate layer id "${a.id}", previously used at line ${S.id.__line__}`))}}if("ref"in a){let A;["type","source","source-layer","filter","layout"].forEach(T=>{T in a&&i.push(new ft(u,a[T],`"${T}" is prohibited for ref layers`))}),h.layers.forEach(T=>{r.u(T.id)===w&&(A=T)}),A?A.ref?i.push(new ft(u,a.ref,"ref cannot reference another ref layer")):y=r.u(A.type):typeof w=="string"&&i.push(new ft(u,a.ref,`ref layer "${w}" not found`))}else if(y!=="background"&&y!=="sky"&&y!=="slot")if(a.source){let A=h.sources&&h.sources[a.source],T=A&&r.u(A.type);A?T==="vector"&&y==="raster"?i.push(new ft(u,a.source,`layer "${a.id}" requires a raster source`)):T==="raster"&&y!=="raster"?i.push(new ft(u,a.source,`layer "${a.id}" requires a vector source`)):T!=="vector"||a["source-layer"]?T==="raster-dem"&&y!=="hillshade"?i.push(new ft(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="raster-array"||["raster","raster-particle"].includes(y)?y!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||T==="geojson"&&A.lineMetrics?y==="raster-particle"&&T!=="raster-array"&&i.push(new ft(u,a.source,`layer "${a.id}" requires a 'raster-array' source.`)):i.push(new ft(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ft(u,a.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new ft(u,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new ft(u,a.source,`source "${a.source}" not found`))}else i.push(new ft(u,a,'missing required property "source"'));return i=i.concat(Co({key:u,value:a,valueSpec:f.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qn({key:`${u}.type`,value:a.type,valueSpec:f.layer.type,style:c.style,styleSpec:c.styleSpec,object:a,objectKey:"type"}),filter:A=>We(r.j({layerType:y},A)),layout:A=>Co({layer:a,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":T=>Gr(r.j({layerType:y},T))}}),paint:A=>Co({layer:a,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":T=>gs(r.j({layerType:y,layer:a},T))}})}})),i}function ki(c){let i=c.value,a=c.key,u=r.i(i);return u!=="string"?[new ft(a,i,`string expected, ${u} found`)]:[]}let Fo={promoteId:function({key:c,value:i}){if(r.i(i)==="string")return ki({key:c,value:i});{let a=[];for(let u in i)a.push(...ki({key:`${c}.${u}`,value:i[u]}));return a}}};function Lo(c){let i=c.value,a=c.key,u=c.styleSpec,h=c.style;if(!i.type)return[new ft(a,i,'"type" is required')];let f=r.u(i.type),y=[];switch(["vector","raster","raster-dem","raster-array"].includes(f)&&(i.url||i.tiles||y.push(new hr(a,i,'Either "url" or "tiles" is required.'))),f){case"vector":case"raster":case"raster-dem":case"raster-array":return y=y.concat(Co({key:a,value:i,valueSpec:u[`source_${f.replace("-","_")}`],style:c.style,styleSpec:u,objectElementValidators:Fo})),y;case"geojson":if(y=Co({key:a,value:i,valueSpec:u.source_geojson,style:h,styleSpec:u,objectElementValidators:Fo}),i.cluster)for(let w in i.clusterProperties){let[A,T]=i.clusterProperties[w],S=typeof A=="string"?[A,["accumulated"],["get",w]]:A;y.push(...pr({key:`${a}.${w}.map`,value:T,expressionContext:"cluster-map"})),y.push(...pr({key:`${a}.${w}.reduce`,value:S,expressionContext:"cluster-reduce"}))}return y;case"video":return Co({key:a,value:i,valueSpec:u.source_video,style:h,styleSpec:u});case"image":return Co({key:a,value:i,valueSpec:u.source_image,style:h,styleSpec:u});case"canvas":return[new ft(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Na({key:`${a}.type`,value:i.type,valueSpec:{values:Vl(u)},style:h,styleSpec:u})}}function Vl(c){return c.source.reduce((i,a)=>{let u=c[a];return u.type.type==="enum"&&(i=i.concat(Object.keys(u.type.values))),i},[])}function ci(c){let i=c.value,a=[];if(!i)return a;let u=r.i(i);return u!=="string"?(a=a.concat([new ft(c.key,i,`string expected, "${u}" found`)]),a):(function(h){let f=h.indexOf("://")===-1;try{return new URL(h,f?"http://example.com":void 0),!0}catch{return!1}}(i)||(a=a.concat([new ft(c.key,i,`invalid url "${i}"`)])),a)}function Oo(c){let i=c.value,a=c.styleSpec,u=a.light,h=c.style,f=[],y=r.i(i);if(i===void 0)return f;if(y!=="object")return f=f.concat([new ft("light",i,`object expected, ${y} found`)]),f;for(let w in i){let A=w.match(/^(.*)-transition$/);f=f.concat(A&&u[A[1]]&&u[A[1]].transition?qn({key:w,value:i[w],valueSpec:a.transition,style:h,styleSpec:a}):u[w]?qn({key:w,value:i[w],valueSpec:u[w],style:h,styleSpec:a}):[new ft(w,i[w],`unknown property "${w}"`)])}return f}function fr(c){let i=c.value,a=[];if(!i)return a;let u=r.i(i);if(u!=="object")return a=a.concat([new ft("light-3d",i,`object expected, ${u} found`)]),a;let h=c.styleSpec,f=h["light-3d"],y=c.key,w=c.style,A=c.style.lights;for(let D of["type","id"])if(!(D in i))return a=a.concat([new ft("light-3d",i,`missing property ${D} on light`)]),a;if(i.type&&A)for(let D=0;D<c.arrayIndex;D++){let z=r.u(i.type),F=A[D];r.u(F.type)===z&&a.push(new ft(y,i.id,`duplicate light type "${i.type}", previously defined at line ${F.id.__line__}`))}let T=`properties_light_${i.type}`;if(!(T in h))return a=a.concat([new ft("light-3d",i,`Invalid light type ${i.type}`)]),a;let S=h[T];for(let D in i)if(D==="properties"){let z=i[D],F=r.i(z);if(F!=="object")return a=a.concat([new ft("properties",z,`object expected, ${F} found`)]),a;for(let G in z)a=a.concat(S[G]?qn({key:G,value:z[G],valueSpec:S[G],style:w,styleSpec:h}):[new hr(c.key,z[G],`unknown property "${G}"`)])}else{let z=D.match(/^(.*)-transition$/);a=a.concat(z&&f[z[1]]&&f[z[1]].transition?qn({key:D,value:i[D],valueSpec:h.transition,style:w,styleSpec:h}):f[D]?qn({key:D,value:i[D],valueSpec:f[D],style:w,styleSpec:h}):[new hr(D,i[D],`unknown property "${D}"`)])}return a}function gr(c){let i=c.value,a=c.key,u=c.style,h=c.styleSpec,f=h.terrain,y=[],w=r.i(i);if(i===void 0||w==="null")return y;if(w!=="object")return y=y.concat([new ft("terrain",i,`object expected, ${w} found`)]),y;for(let A in i){let T=A.match(/^(.*)-transition$/);y=y.concat(T&&f[T[1]]&&f[T[1]].transition?qn({key:A,value:i[A],valueSpec:h.transition,style:u,styleSpec:h}):f[A]?qn({key:A,value:i[A],valueSpec:f[A],style:u,styleSpec:h}):[new hr(A,i[A],`unknown property "${A}"`)])}if(i.source){let A=u.sources&&u.sources[i.source],T=A&&r.u(A.type);A?T!=="raster-dem"&&y.push(new ft(a,i.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):y.push(new ft(a,i.source,`source "${i.source}" not found`))}else y.push(new ft(a,i,'terrain is missing required property "source"'));return y}function Ri(c){let i=c.value,a=c.style,u=c.styleSpec,h=u.fog,f=[],y=r.i(i);if(i===void 0)return f;if(y!=="object")return f=f.concat([new ft("fog",i,`object expected, ${y} found`)]),f;for(let w in i){let A=w.match(/^(.*)-transition$/);f=f.concat(A&&h[A[1]]&&h[A[1]].transition?qn({key:w,value:i[w],valueSpec:u.transition,style:a,styleSpec:u}):h[w]?qn({key:w,value:i[w],valueSpec:h[w],style:a,styleSpec:u}):[new hr(w,i[w],`unknown property "${w}"`)])}return f}let mr={"*":()=>[],array:on,boolean:function(c){let i=c.value,a=c.key,u=r.i(i);return u!=="boolean"?[new ft(a,i,`boolean expected, ${u} found`)]:[]},number:On,color:function(c){let i=c.key,a=c.value,u=r.i(a);return u!=="string"?[new ft(i,a,`color expected, ${u} found`)]:r.y(a)===null?[new ft(i,a,`color expected, "${a}" found`)]:[]},enum:Na,filter:We,function:ha,layer:Fi,object:Co,source:Lo,model:ci,light:Oo,"light-3d":fr,terrain:gr,fog:Ri,string:ki,formatted:function(c){return ki(c).length===0?[]:pr(c)},resolvedImage:function(c){return ki(c).length===0?[]:pr(c)},projection:function(c){let i=c.value,a=c.styleSpec,u=a.projection,h=c.style,f=[],y=r.i(i);if(y==="object")for(let w in i)f=f.concat(qn({key:w,value:i[w],valueSpec:u[w],style:h,styleSpec:a}));else y!=="string"&&(f=f.concat([new ft("projection",i,`object or string expected, ${y} found`)]));return f},import:function(c){let{value:i,styleSpec:a}=c,y=i,{data:u}=y,h=bw(y,["data"]);Object.defineProperty(h,"__line__",{value:i.__line__,enumerable:!1});let f=Co(r.j({},c,{value:h,valueSpec:a.import}));return r.u(h.id)===""&&f.push(new ft(`${c.key}.id`,h,"import id can't be an empty string")),u&&(f=f.concat(Or(u,a,{key:`${c.key}.data`}))),f}};function qn(c,i=!1){let a=c.value,u=c.valueSpec,h=c.styleSpec;if(u.expression&&r.A(r.u(a)))return ha(c);if(u.expression&&r.n(r.o(a)))return pr(c);if(u.type&&mr[u.type]){let f=mr[u.type](c);return i===!0&&f.length>0&&r.i(c.value)==="array"?pr(c):f}return Co(r.j({},c,{valueSpec:u.type?h[u.type]:u}))}function Xn(c){let i=c.value,a=c.key,u=ki(c);return u.length||(i.indexOf("{fontstack}")===-1&&u.push(new ft(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&u.push(new ft(a,i,'"glyphs" url must include a "{range}" token'))),u}function Or(c,i=r.D,a={}){return qn({key:a.key||"",value:c,valueSpec:i.$root,styleSpec:i,style:c,objectElementValidators:{glyphs:Xn,"*":()=>[]}})}function qo(c,i=r.D){return Fe(Or(c,i))}let Tr=c=>Fe(Lo(c)),Sr=c=>Fe(Oo(c)),Ve=c=>Fe(fr(c)),Q=c=>Fe(gr(c)),oe=c=>Fe(Ri(c)),pe=c=>Fe(Fi(c)),ze=c=>Fe(We(c)),Le=c=>Fe(gs(c)),Ke=c=>Fe(Gr(c)),yt=c=>Fe(ci(c));function Fe(c){return c.slice().sort((i,a)=>i.line&&a.line?i.line-a.line:0)}function wt(c,i){let a=!1;if(i&&i.length)for(let u of i)u instanceof hr?r.w(u.message):(c.fire(new r.a(new Error(u.message))),a=!0);return a}let gt=new r.F({anchor:new r.G(r.D.light.anchor),position:new r.H(r.D.light.position),color:new r.G(r.D.light.color),intensity:new r.G(r.D.light.intensity)});class At extends r.E{constructor(i,a="flat"){super(),this._transitionable=new r.J(gt),this.setLight(i,a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,a,u={}){this._validate(Sr,i,u)||(this._transitionable.setTransitionOrValue(i),this.id=a)}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,a,u){return(!u||u.validate!==!1)&&wt(this,i.call(qo,r.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:r.D})))}}let rn=new r.F({source:new r.G(r.D.terrain.source),exaggeration:new r.G(r.D.terrain.exaggeration)}),Un=class extends r.E{constructor(c,i,a,u){super(),this.scope=a,this._transitionable=new r.J(rn,a,u),this._transitionable.setTransitionOrValue(c,u),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(c,i){this._transitionable.setTransitionOrValue(c,i)}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}getExaggeration(c){return this._transitioning.possiblyEvaluate(new r.K(c)).get("exaggeration")}isZoomDependent(){let c=this._transitionable._values.exaggeration;return c!=null&&c.value!=null&&c.value.expression!=null&&c.value.expression instanceof r.Z}},ti=45,Vn=65,Bn=.05;function Jt(c,i,a,u){let h=r.O(ti,Vn,a),[f,y]=vn(c,u),w=1-Math.min(1,Math.exp((i-f)/(y-f)*-6));return w*=w*w,w=Math.min(1,1.00747*w),w*h*c.alpha}function vn(c,i){let a=.5/Math.tan(.5*i);return[c.range[0]+a,c.range[1]+a]}function ni(c,i,a,u,h){let f=r.N.transformMat4([],[i,a,u],h.mercatorFogMatrix);return Jt(c,r.N.length(f),h.pitch,h._fov)}function oi(c,i,a,u,h,f,y){let w=[[a,u,0],[h,u,0],[h,f,0],[a,f,0]],A=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let S of w){let D=r.N.transformMat4([],S,i),z=r.N.length(D);A=Math.min(A,z),T=Math.max(T,z)}return[Jt(c,A,y.pitch,y._fov),Jt(c,T,y.pitch,y._fov)]}let Qn=new r.F({range:new r.G(r.D.fog.range),color:new r.G(r.D.fog.color),"high-color":new r.G(r.D.fog["high-color"]),"space-color":new r.G(r.D.fog["space-color"]),"horizon-blend":new r.G(r.D.fog["horizon-blend"]),"star-intensity":new r.G(r.D.fog["star-intensity"]),"vertical-range":new r.G(r.D.fog["vertical-range"])});class yo extends r.E{constructor(i,a,u,h){super(),this._transitionable=new r.J(Qn,u,new Map(h)),this.set(i,h),this._transitioning=this._transitionable.untransitioned(),this._transform=a,this.properties=new r.Q(Qn)}get state(){let i=this._transform,a=i.projection.name==="globe",u=r.S(i.zoom),h=this.properties.get("range"),f=[.5,3];return{range:a?[r.U(f[0],h[0],u),r.U(f[1],h[1],u)]:h,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,a,u={}){if(this._validate(oe,i,u))return;let h=r.e({},i);for(let f of Object.keys(r.D.fog))h[f]===void 0&&(h[f]=r.D.fog[f].default);this._options=h,this._transitionable.setTransitionOrValue(this._options,a)}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;let a=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:r.O(ti,Vn,i))*a.a}getOpacityAtLatLng(i,a){return this._transform.projection.supportsFog?function(u,h,f){let y=r.L.fromLngLat(h),w=f.elevation?f.elevation.getAtPointOrZero(y):0;return ni(u,y.x,y.y,w,f)}(this.state,i,a):0}getOpacityForTile(i){if(!this._transform.projection.supportsFog)return[1,1];let a=this._transform.calculateFogTileMatrix(i.toUnwrapped());return oi(this.state,a,0,0,r.V,r.V,this._transform)}getOpacityForBounds(i,a,u,h,f){return this._transform.projection.supportsFog?oi(this.state,i,a,u,h,f,this._transform):[1,1]}getFovAdjustedRange(i){return this._transform.projection.supportsFog?vn(this.state,i):[0,1]}isVisibleOnFrustum(i){if(!this._transform.projection.supportsFog)return!1;let a=[4,5,6,7];for(let u of a){let h=i.points[u],f;if(h[2]>=0)f=h;else{let y=i.points[u-4];f=r.W(y,h,y[2]/(y[2]-h[2]))}if(ni(this.state,f[0],f[1],0,this._transform)>=Bn)return!0}return!1}updateConfig(i){this._transitionable.setTransitionOrValue(this._options,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,a,u){return(!u||u.validate!==!1)&&wt(this,i.call(qo,r.e({value:a,style:{glyphs:!0,sprite:!0},styleSpec:r.D})))}}class co extends r.E{constructor(i,a,u,h){super(),this.scope=u,this._options=i,this.properties=new r.Q(a),this._transitionable=new r.J(a,u,new Map(h)),this._transitionable.setTransitionOrValue(i.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(i){this._transitionable.setTransitionOrValue(this._options.properties,new Map(i))}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(i,a){this._options=i,this._transitionable.setTransitionOrValue(i.properties,a)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let bn=new r.F({color:new r.G(r.D.properties_light_ambient.color),intensity:new r.G(r.D.properties_light_ambient.intensity)}),ri=new r.F({direction:new r.X(r.D.properties_light_directional.direction),color:new r.G(r.D.properties_light_directional.color),intensity:new r.G(r.D.properties_light_directional.intensity),"cast-shadows":new r.G(r.D.properties_light_directional["cast-shadows"]),"shadow-intensity":new r.G(r.D.properties_light_directional["shadow-intensity"])});class ai{constructor(i,a,u,h){this.screenBounds=i,this.cameraPoint=a,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=u,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,h)}static createFromScreenPoints(i,a){let u,h;if(i instanceof r.P||typeof i[0]=="number"){let f=r.P.convert(i);u=[f],h=a.isPointAboveHorizon(f)}else{let f=r.P.convert(i[0]),y=r.P.convert(i[1]);u=[f,y],h=r.Y(f,y).every(w=>a.isPointAboveHorizon(w))}return new ai(u,a.getCameraPoint(),h,a)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return r.Y(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){let a=this.screenBounds[0],u=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],h=r.Y(a,u,0,!1);return this.cameraPoint.y>u.y&&(this.cameraPoint.x>a.x&&this.cameraPoint.x<u.x?h.splice(3,0,this.cameraPoint):this.cameraPoint.x>=u.x?h[2]=this.cameraPoint:this.cameraPoint.x<=a.x&&(h[3]=this.cameraPoint)),r._(h,i)}bufferedCameraGeometryGlobe(i){let a=this.screenBounds[0],u=this.screenBounds.length===1?this.screenBounds[0].add(new r.P(1,1)):this.screenBounds[1],h=r.Y(a,u,i),f=this.cameraPoint.clone();switch(3*((f.y>a.y)+(f.y>u.y))+((f.x>a.x)+(f.x>u.x))){case 0:h[0]=f,h[4]=f.clone();break;case 1:h.splice(1,0,f);break;case 2:h[1]=f;break;case 3:h.splice(4,0,f);break;case 5:h.splice(2,0,f);break;case 6:h[3]=f;break;case 7:h.splice(3,0,f);break;case 8:h[2]=f}return h}containsTile(i,a,u,h=0){let f=i.queryPadding/a._pixelsPerMercatorPixel+1,y=u?this._bufferedCameraMercator(f,a):this._bufferedScreenMercator(f,a),w=i.tileID.wrap+(y.unwrapped?h:0),A=y.polygon.map($=>r.$(i.tileTransform,$,w));if(!r.a0(A,0,0,r.V,r.V))return;w=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?h:0);let T=this.screenGeometryMercator.polygon.map($=>r.a1(i.tileTransform,$,w)),S=T.map($=>new r.P($[0],$[1])),D=a.getFreeCameraOptions().position||new r.L(0,0,0),z=r.a1(i.tileTransform,D,w),F=T.map($=>{let N=r.N.sub($,$,z);return r.N.normalize(N,N),new r.a2(z,N)}),G=r.a3(i,1,a.zoom)*a._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:S,tilespaceRays:F,bufferedTilespaceGeometry:A,bufferedTilespaceBounds:(U=r.a4(A),U.min.x=r.aa(U.min.x,0,r.V),U.min.y=r.aa(U.min.y,0,r.V),U.max.x=r.aa(U.max.x,0,r.V),U.max.y=r.aa(U.max.y,0,r.V),U),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:G};var U}_bufferedScreenMercator(i,a){let u=He(i);if(this._screenRaycastCache[u])return this._screenRaycastCache[u];{let h;return h=a.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),a):{polygon:this.bufferedScreenGeometry(i).map(f=>a.pointCoordinate3D(f)),unwrapped:!0},this._screenRaycastCache[u]=h,h}}_bufferedCameraMercator(i,a){let u=He(i);if(this._cameraRaycastCache[u])return this._cameraRaycastCache[u];{let h;return h=a.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),a):{polygon:this.bufferedCameraGeometry(i).map(f=>a.pointCoordinate3D(f)),unwrapped:!0},this._cameraRaycastCache[u]=h,h}}_projectAndResample(i,a){let u=function(f,y){let w=r.a6.multiply([],y.pixelMatrix,y.globeMatrix),A=[0,-r.ab,0,1],T=[0,r.ab,0,1],S=[0,0,0,1];r.a7.transformMat4(A,A,w),r.a7.transformMat4(T,T,w),r.a7.transformMat4(S,S,w);let D=new r.P(A[0]/A[3],A[1]/A[3]),z=new r.P(T[0]/T[3],T[1]/T[3]),F=r.a8(f,D)&&A[3]<S[3],G=r.a8(f,z)&&T[3]<S[3];if(!F&&!G)return null;let U=function(ne,le,ue){for(let fe=1;fe<ne.length;fe++){let Ae=De(le.pointCoordinate3D(ne[fe-1]).x),ye=De(le.pointCoordinate3D(ne[fe]).x);if(ue<0){if(Ae<ye)return{idx:fe,t:-Ae/(ye-1-Ae)}}else if(ye<Ae)return{idx:fe,t:(1-Ae)/(ye+1-Ae)}}return null}(f,y,F?-1:1);if(!U)return null;let{idx:$,t:N}=U,q=$>1?Re(f.slice(0,$),y):[],ee=$<f.length?Re(f.slice($),y):[];q=q.map(ne=>new r.P(De(ne.x),ne.y)),ee=ee.map(ne=>new r.P(De(ne.x),ne.y));let X=[...q];X.length===0&&X.push(ee[ee.length-1]);let te=r.U(X[X.length-1].y,(ee.length===0?q[0]:ee[0]).y,N),Z;return Z=F?[new r.P(0,te),new r.P(0,0),new r.P(1,0),new r.P(1,te)]:[new r.P(1,te),new r.P(1,1),new r.P(0,1),new r.P(0,te)],X.push(...Z),ee.length===0?X.push(q[0]):X.push(...ee),{polygon:X.map(ne=>new r.L(ne.x,ne.y)),unwrapped:!1}}(i,a);if(u)return u;let h=function(f,y){let w=!1,A=-1/0,T=0;for(let D=0;D<f.length-1;D++)f[D].x>A&&(A=f[D].x,T=D);for(let D=0;D<f.length-1;D++){let z=(T+D)%(f.length-1),F=f[z],G=f[z+1];Math.abs(F.x-G.x)>.5&&(F.x<G.x?(F.x+=1,z===0&&(f[f.length-1].x+=1)):(G.x+=1,z+1===f.length-1&&(f[0].x+=1)),w=!0)}let S=r.a5(y.center.lng);return w&&S<Math.abs(S-1)&&f.forEach(D=>{D.x-=1}),{polygon:f,unwrapped:w}}(Re(i,a).map(f=>new r.P(De(f.x),f.y)),a);return{polygon:h.polygon.map(f=>new r.L(f.x,f.y)),unwrapped:h.unwrapped}}}function Re(c,i){return r.a9(c,a=>{let u=i.pointCoordinate3D(a);a.x=u.x,a.y=u.y},1/256)}function De(c){return c<0?1+c%1:c%1}function He(c){return 100*c|0}function ot(c,i,a,u,h){let f=function(y,w){if(y)return h(y);if(w){c.url&&w.tiles&&c.tiles&&delete c.tiles;let A=r.ac(r.e(w,c),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(A.vectorLayers=w.vector_layers,A.vectorLayerIds=A.vectorLayers.map(T=>T.id)),w.raster_layers&&(A.rasterLayers=w.raster_layers,A.rasterLayerIds=A.rasterLayers.map(T=>T.id)),A.tiles=i.canonicalizeTileset(A,c.url),h(null,A)}};return c.url?r.g(i.transformRequest(i.normalizeSourceURL(c.url,null,a,u),r.R.Source),f):r.f.frame(()=>f(null,c))}class et{constructor(i,a,u){this.bounds=r.ad.convert(this.validateBounds(i)),this.minzoom=a||0,this.maxzoom=u||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){let a=Math.pow(2,i.z),u=Math.floor(r.a5(this.bounds.getWest())*a),h=Math.floor(r.ae(this.bounds.getNorth())*a),f=Math.ceil(r.a5(this.bounds.getEast())*a),y=Math.ceil(r.ae(this.bounds.getSouth())*a);return i.x>=u&&i.x<f&&i.y>=h&&i.y<y}}class ct extends r.E{constructor(i,a,u,h){if(super(),this.id=i,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.e(this,r.ac(a,["url","scheme","tileSize","promoteId"])),this._options=r.e({type:"vector"},a),this._collectResourceTiming=!!a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h),this._tileWorkers={},this._deduped=new r.af}load(i){this._loaded=!1,this.fire(new r.b("dataloading",{dataType:"source"}));let a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map._worldview;this._tileJSONRequest=ot(this._options,this.map._requestManager,a,u,(h,f)=>{this._tileJSONRequest=null,this._loaded=!0,h?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new r.a(h))):f&&(r.e(this,f),f.bounds&&(this.tileBounds=new et(f.bounds,this.minzoom,this.maxzoom)),r.aj(f.tiles,this.map._requestManager._customAccessToken),this.fire(new r.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.b("data",{dataType:"source",sourceDataType:"content"}))),i&&i(h)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();let i=r.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return r.e({},this._options)}loadTile(i,a){let u=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),h={request:this.map._requestManager.transformRequest(u,r.R.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:r.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:i.isExtraShadowCaster};if(h.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=a:i.request=i.actor.send("reloadTile",h,f.bind(this));else if(i.actor=this._tileWorkers[u]=this._tileWorkers[u]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",h,f.bind(this),void 0,!0);else{let y=r.ah.call({deduped:this._deduped},h,(w,A)=>{w||!A?f.call(this,w):(h.data={cacheControl:A.cacheControl,expires:A.expires,rawData:A.rawData.slice(0)},i.actor&&i.actor.send("loadTile",h,f.bind(this),void 0,!0))},!0);i.request={cancel:y}}function f(y,w){return delete i.request,i.aborted?a(null):y&&y.status!==404?a(y):(w&&w.resourceTiming&&(i.resourceTiming=w.resourceTiming),this.map._refreshExpiredTiles&&w&&i.setExpiryData(w),i.loadVectorData(w,this.map.painter),r.ai(this.dispatcher),a(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(i){i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id,scope:this.scope}),i.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class tt extends r.E{constructor(i,a,u,h){super(),this.id=i,this.dispatcher=u,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.e({type:"raster"},a),r.e(this,r.ac(a,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new r.b("dataloading",{dataType:"source"})),this._tileJSONRequest=ot(this._options,this.map._requestManager,null,null,(a,u)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new r.a(a)):u&&(r.e(this,u),u.bounds&&(this.tileBounds=new et(u.bounds,this.minzoom,this.maxzoom)),r.aj(u.tiles),this.fire(new r.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.b("data",{dataType:"source",sourceDataType:"content"}))),i&&i(a)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest();let i=r.ag(this.id,this.scope);this.load(()=>this.map.style.clearSource(i))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return r.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,a){let u=r.f.devicePixelRatio>=2,h=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),u,this.tileSize);i.request=r.d(this.map._requestManager.transformRequest(h,r.R.Tile),(f,y,w,A)=>(delete i.request,i.aborted?(i.state="unloaded",a(null)):f?(i.state="errored",a(f)):y?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:w,expires:A}),i.setTexture(y,this.map.painter),i.state="loaded",r.ai(this.dispatcher),void a(null)):a(null)))}abortTile(i,a){i.request&&(i.request.cancel(),delete i.request),a()}unloadTile(i,a){i.texture&&i.texture instanceof r.T?(i.destroy(!0),i.texture&&i.texture instanceof r.T&&this.map.painter.saveTileTexture(i.texture)):i.destroy(),a()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class rt extends tt{constructor(i,a,u,h){super(i,a,u,h),this.type="raster-array",this.maxzoom=22,this._options=r.e({type:"raster-array"},a)}triggerRepaint(i){let a=this.map.painter._terrain,u=this.map.style.getSourceCache(this.id);a&&a.enabled&&u&&a._clearRenderCacheForTile(u.id,i.tileID),this.map.triggerRepaint()}loadTile(i,a){let u=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),h=this.map._requestManager.transformRequest(u,r.R.Tile);i.requestParams=h,i.actor||(i.actor=this.dispatcher.getActor()),i.request=i.fetchHeader(void 0,(f,y,w,A)=>{if(delete i.request,i.aborted)return i.state="unloaded",a(null);if(f)return f.code===20?void 0:(i.state="errored",a(f));this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:w,expires:A}),i.state="empty",a(null)})}unloadTile(i){let a=i.texture;a&&a instanceof r.T?(i.destroy(!0),this.map.painter.saveTileTexture(a)):(i.destroy(),i.flushQueues(),i._isHeaderLoaded=!1,delete i._mrt,delete i.textureDescriptor),i.fbo&&(i.fbo.destroy(),delete i.fbo),delete i.request,delete i.requestParams,delete i.neighboringTiles,i.state="unloaded"}prepareTile(i,a,u){i._isHeaderLoaded&&(i.state!=="empty"&&(i.state="reloading"),i.fetchBand(a,u,(h,f)=>{if(h)return i.state="errored",this.fire(new r.a(h)),void this.triggerRepaint(i);f&&(i.setTexture(f,this.map.painter),i.state="loaded",this.triggerRepaint(i))}))}getInitialBand(i){if(!this.rasterLayers)return 0;let a=this.rasterLayers.find(({id:f})=>f===i),u=a&&a.fields,h=u&&u.bands&&u.bands;return h?h[0]:0}getTextureDescriptor(i,a,u){if(!i)return;let h=a.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!h)return;let f=null;a instanceof r.an?f=a.paint.get("raster-array-band"):a instanceof r.ao&&(f=a.paint.get("raster-particle-array-band"));let y=f||this.getInitialBand(h);if(y!=null)if(i.textureDescriptor){if(!i.updateNeeded(h,y)||u)return Object.assign({},i.textureDescriptor,{texture:i.texture})}else this.prepareTile(i,h,y)}}let pt=32,lt=33,Lt=new Uint16Array(8184);for(let c=0;c<2046;c++){let i=c+2,a=0,u=0,h=0,f=0,y=0,w=0;for(1&i?h=f=y=pt:a=u=w=pt;(i>>=1)>1;){let T=a+h>>1,S=u+f>>1;1&i?(h=a,f=u,a=y,u=w):(a=h,u=f,h=y,f=w),y=T,w=S}let A=4*c;Lt[A+0]=a,Lt[A+1]=u,Lt[A+2]=h,Lt[A+3]=f}let fn=new Uint16Array(2178),Pt=new Uint8Array(1089),Yn=new Uint16Array(1089);function ui(c){return c===0?-.03125:c===32?.03125:0}let Kn=(()=>{class c{constructor(a,u,h,f){this.id=c.uniqueIdxCounter,c.uniqueIdxCounter++,this.context=a;let y=a.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||f||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=c.uniqueIdxCounter,c.uniqueIdxCounter++;let u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}return c.uniqueIdxCounter=0,c})(),Li={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class no{constructor(i,a,u,h,f,y){this.length=a.length,this.attributes=u,this.itemSize=a.bytesPerElement,this.dynamicDraw=h,this.instanceCount=y,this.context=i;let w=i.gl;this.buffer=w.createBuffer(),i.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||f||a.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){let a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,a){for(let u=0;u<this.attributes.length;u++){let h=a.attributes[this.attributes[u].name];h!==void 0&&i.enableVertexAttribArray(h)}}setVertexAttribPointers(i,a,u){for(let h=0;h<this.attributes.length;h++){let f=this.attributes[h],y=a.attributes[f.name];y!==void 0&&i.vertexAttribPointer(y,f.components,i[Li[f.type]],!1,this.itemSize,f.offset+this.itemSize*(u||0))}}setVertexAttribDivisor(i,a,u){for(let h=0;h<this.attributes.length;h++){let f=a.attributes[this.attributes[h].name];f!==void 0&&this.instanceCount&&this.instanceCount>0&&i.vertexAttribDivisor(f,u)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Sn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class No extends Sn{getDefault(){return r.ax.transparent}set(i){let a=this.current;(i.r!==a.r||i.g!==a.g||i.b!==a.b||i.a!==a.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class _r extends Sn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Zi extends Sn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class al extends Sn{getDefault(){return[!0,!0,!0,!0]}set(i){let a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||i[3]!==a[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class fa extends Sn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Yo extends Sn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Uc extends Sn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){let a=this.current;(i.func!==a.func||i.ref!==a.ref||i.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Va extends Sn{getDefault(){let i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){let a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Gc extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;i?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=i,this.dirty=!1}}class ga extends Sn{getDefault(){return[0,1]}set(i){let a=this.current;(i[0]!==a[0]||i[1]!==a[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ld extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;i?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=i,this.dirty=!1}}class jl extends Sn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Hc extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;i?a.enable(a.BLEND):a.disable(a.BLEND),this.current=i,this.dirty=!1}}class Ul extends Sn{getDefault(){let i=this.gl;return[i.ONE,i.ZERO,i.ONE,i.ZERO]}set(i){let a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||i[3]!==a[3]||this.dirty)&&(this.gl.blendFuncSeparate(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class $c extends Sn{getDefault(){return r.ax.transparent}set(i){let a=this.current;(i.r!==a.r||i.g!==a.g||i.b!==a.b||i.a!==a.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class jn extends Sn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(i,i),this.current=i,this.dirty=!1)}}class zi extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;i?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=i,this.dirty=!1}}class gn extends Sn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class cd extends Sn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let Gl=class extends Sn{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}};class Wc extends Sn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class kh extends Sn{getDefault(){let i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){let a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||i[3]!==a[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Xo extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ja extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ud extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.bindTexture(a.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Hr extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class nt extends Sn{getDefault(){return null}set(i){let a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class kn extends Sn{getDefault(){return null}set(i){this.gl&&(i!==this.current||this.dirty)&&(this.gl.bindVertexArray(i),this.current=i,this.dirty=!1)}}class Rn extends Sn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Qo extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ua extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class wn extends Sn{constructor(i,a){super(i),this.context=i,this.parent=a}getDefault(){return null}}class Hl extends wn{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ms extends wn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,this.attachment(),a.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class _s extends wn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,this.attachment(),a.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class To extends ms{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Oi{constructor(i,a,u,h,f){this.context=i,this.width=a,this.height=u;let y=this.framebuffer=i.gl.createFramebuffer();h&&(this.colorAttachment=new Hl(i,y)),f&&(this.depthAttachmentType=f,this.depthAttachment=f==="renderbuffer"?new ms(i,y):new _s(i,y))}destroy(){let i=this.context.gl;if(this.colorAttachment){let a=this.colorAttachment.get();a&&i.deleteTexture(a)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){let a=this.depthAttachment.get();a&&i.deleteRenderbuffer(a)}else{let a=this.depthAttachment.get();a&&i.deleteTexture(a)}i.deleteFramebuffer(this.framebuffer)}}class kt{constructor(i,a,u){this.func=i,this.mask=a,this.range=u}}kt.ReadOnly=!1,kt.ReadWrite=!0,kt.disabled=new kt(519,kt.ReadOnly,[0,1]);let Ga=7680;class Ut{constructor(i,a,u,h,f,y){this.test=i,this.ref=a,this.mask=u,this.fail=h,this.depthFail=f,this.pass=y}}Ut.disabled=new Ut({func:519,mask:0},0,0,Ga,Ga,Ga);let ma=771;class an{constructor(i,a,u,h){this.blendFunction=i,this.blendColor=a,this.mask=u,this.blendEquation=h}}an.Replace=[1,0,1,0],an.disabled=new an(an.Replace,r.ax.transparent,[!1,!1,!1,!1]),an.unblended=new an(an.Replace,r.ax.transparent,[!0,!0,!0,!0]),an.alphaBlended=new an([1,ma,1,ma],r.ax.transparent,[!0,!0,!0,!0]),an.multiply=new an([774,0,774,0],r.ax.transparent,[!0,!0,!0,!0]);let ys=1029,io=2305;class Dt{constructor(i,a,u){this.enable=i,this.mode=a,this.frontFace=u}}Dt.disabled=new Dt(!1,ys,io),Dt.backCCW=new Dt(!0,ys,io),Dt.backCW=new Dt(!0,ys,2304),Dt.frontCW=new Dt(!0,1028,2304),Dt.frontCCW=new Dt(!0,1028,io);class dd{constructor(i,a){this.gl=i,this.clearColor=new No(this),this.clearDepth=new _r(this),this.clearStencil=new Zi(this),this.colorMask=new al(this),this.depthMask=new fa(this),this.stencilMask=new Yo(this),this.stencilFunc=new Uc(this),this.stencilOp=new Va(this),this.stencilTest=new Gc(this),this.depthRange=new ga(this),this.depthTest=new ld(this),this.depthFunc=new jl(this),this.blend=new Hc(this),this.blendFunc=new Ul(this),this.blendColor=new $c(this),this.blendEquation=new jn(this),this.cullFace=new zi(this),this.cullFaceSide=new gn(this),this.frontFace=new cd(this),this.program=new Gl(this),this.activeTexture=new Wc(this),this.viewport=new kh(this),this.bindFramebuffer=new Xo(this),this.bindRenderbuffer=new ja(this),this.bindTexture=new ud(this),this.bindVertexBuffer=new Hr(this),this.bindElementBuffer=new nt(this),this.bindVertexArrayOES=new kn(this),this.pixelStoreUnpack=new Rn(this),this.pixelStoreUnpackPremultiplyAlpha=new Qo(this),this.pixelStoreUnpackFlipY=new Ua(this),this.options=a?Et({},a):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=i.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxPointSize=i.getParameter(i.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,a,u){return new Kn(this,i,a,u)}createVertexBuffer(i,a,u,h,f){return new no(this,i,a,u,h,f)}createRenderbuffer(i,a,u){let h=this.gl,f=h.createRenderbuffer();return this.bindRenderbuffer.set(f),h.renderbufferStorage(h.RENDERBUFFER,i,a,u),this.bindRenderbuffer.set(null),f}createFramebuffer(i,a,u,h){return new Oi(this,i,a,u,h)}clear({color:i,depth:a,stencil:u,colorMask:h}){let f=this.gl,y=0;i&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set(h||[!0,!0,!0,!0])),a!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),u!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),f.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){j(i.blendFunction,an.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor),i.blendEquation?this.blendEquation.set(i.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(i.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}var _a=r.ay([{name:"a_pos",type:"Float32",components:3}]);class Ni{constructor(i,a,u,h){let f={width:u[0],height:u[1],data:null},y=i.gl;this.targetColorTexture=new r.T(i,f,y.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new r.T(i,f,y.RGBA,{useMipmap:!1}),this.context=i,this.setNumParticles(a,h),this.lastInvalidatedAt=0}setNumParticles(i,a){if(this.numParticles===a)return;(this.particleVertices0||this.particleVertices1||this.particleSegment)&&(this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy());let u=new r.az;u.reserve(Math.round(a));let h=r.aA(i.key);for(let f=0;f<a;f++)u.emplaceBack(h(),h(),h());this.particleVertices0=this.context.createVertexBuffer(u,_a.members,!0),this.particleVertices1=this.context.createVertexBuffer(u,_a.members,!0),this.particleSegment=r.aB.simpleSegment(0,0,this.particleVertices0.length,0),this.numParticles=a}update(i){return!(this.lastInvalidatedAt<i&&(this.lastInvalidatedAt=r.f.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleVertices0.destroy(),this.particleVertices1.destroy(),this.particleSegment.destroy()}}let Ko={type:2,extent:r.V,loadGeometry:()=>[[new r.P(0,0),new r.P(r.V+1,0),new r.P(r.V+1,r.V+1),new r.P(0,r.V+1),new r.P(0,0)]]};class Vo{constructor(i,a,u,h,f){this.tileID=i,this.uid=r.aC(),this.uses=0,this.tileSize=a,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=f,h&&h.style&&(this._lastUpdatedBrightness=h.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(i){let a=i+this.timeAdded;a<r.f.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=r.as(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,a,u){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(h,f){let y={};if(!f)return y;for(let w of h){let A=w.layerIds.map(T=>f.getLayer(T)).filter(Boolean);if(A.length!==0){w.layers=A,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(T=>A.filter(S=>S.id===T)[0]));for(let T of A)y[T.fqid]=w}}return y}(i.buckets,a.style),this.hasSymbolBuckets=!1;for(let h in this.buckets){let f=this.buckets[h];if(f instanceof r.aE){if(this.hasSymbolBuckets=!0,!u)break;f.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let h in this.buckets){let f=this.buckets[h];if(f instanceof r.aE&&f.hasRTLText){this.hasRTLText=!0,r.aF();break}}this.queryPadding=0;for(let h in this.buckets){let f=this.buckets[h],y=a.style.getOwnLayer(h);if(!y)continue;let w=y.queryRadius(f);this.queryPadding=Math.max(this.queryPadding,w)}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas),this._lastUpdatedBrightness=i.brightness}else this.collisionBoxArray=new r.aD}unloadVectorData(){if(this.hasData()){for(let i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.fqid]}upload(i){for(let h in this.buckets){let f=this.buckets[h];f.uploadPending()&&f.upload(i)}let a=i.gl,u=this.imageAtlas;if(u&&!u.uploaded){let h=!!Object.keys(u.patternPositions).length;this.imageAtlasTexture=new r.T(i,u.image,a.RGBA,{useMipmap:h}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new r.T(i,this.glyphAtlasImage,a.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new r.T(i,this.lineAtlas.image,a.R8),this.lineAtlas.uploaded=!0)}prepare(i,a,u){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture,u),!a||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;let h=a.style.getBrightness();(this._lastUpdatedBrightness||h)&&(this._lastUpdatedBrightness&&h&&Math.abs(this._lastUpdatedBrightness-h)<.001||(this._lastUpdatedBrightness=h,this.updateBuckets(void 0,a)))}queryRenderedFeatures(i,a,u,h,f,y,w,A){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:w,transform:y,params:f,tileTransform:this.tileTransform},i,a,u):{}}querySourceFeatures(i,a){let u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;let h=u.loadVTLayers(),f=a?a.sourceLayer:"",y=h._geojsonTileLayer||h[f];if(!y)return;let w=r.aG(a&&a.filter),{z:A,x:T,y:S}=this.tileID.canonical,D={z:A,x:T,y:S};for(let z=0;z<y.length;z++){let F=y.feature(z);if(w.needGeometry){let $=r.aH(F,!0);if(!w.filter(new r.K(this.tileID.overscaledZ),$,this.tileID.canonical))continue}else if(!w.filter(new r.K(this.tileID.overscaledZ),F))continue;let G=u.getId(F,f),U=new r.aI(F,A,T,S,G);U.tile=D,i.push(U)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(let i in this.buckets)if(this.buckets[i].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let a=this.expirationTime;if(i.cacheControl){let u=r.aJ(i.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let u=Date.now(),h=!1;if(this.expirationTime>u)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{let f=this.expirationTime-a;f?this.expirationTime=u+Math.max(f,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,a){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(i).length!==0&&a&&this.updateBuckets(i,a)}updateBuckets(i,a){if(!this.latestFeatureIndex)return;let u=this.latestFeatureIndex.loadVTLayers(),h=a.style.listImages(),f=a.style.getBrightness();for(let y in this.buckets){if(!a.style.hasLayer(y))continue;let w=this.buckets[y],A=w.layers[0].sourceLayer||"_geojsonTileLayer",T=u[A],S={};if(i&&(S=i[A],!T||!S||Object.keys(S).length===0))continue;if(w.update(S,T,h,this.imageAtlas&&this.imageAtlas.patternPositions||{},f),w instanceof r.aK||w instanceof r.aL){let z=a.style.getOwnSourceCache(w.layers[0].source);a._terrain&&a._terrain.enabled&&z&&w.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(z.id,this.tileID)}let D=a&&a.style&&a.style.getOwnLayer(y);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.f.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=r.f.now()+i}setTexture(i,a){let u=a.context,h=u.gl;this.texture=this.texture||a.getTileTexture(i.width),this.texture&&this.texture instanceof r.T?this.texture.update(i,{useMipmap:!0}):(this.texture=new r.T(u,i,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE))}setDependencies(i,a){let u={};for(let h of a)u[h]=!0;this.dependencies[i]=u}hasDependency(i,a){for(let u of i){let h=this.dependencies[u];if(h){for(let f of a)if(h[f])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;let u=r.aM(Ko,this.tileID.canonical,this.tileTransform)[0],h=new r.aN,f=new r.aO;for(let y=0;y<u.length;y++){let{x:w,y:A}=u[y];h.emplaceBack(w,A),f.emplaceBack(y)}f.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(f),this._tileDebugBuffer=i.createVertexBuffer(h,r.aP.members),this._tileDebugSegments=r.aB.simpleSegment(0,0,h.length,f.length)}_makeTileBoundsBuffers(i,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;let u=r.aM(Ko,this.tileID.canonical,this.tileTransform)[0],h,f;if(this.isRaster){let y=function(w,A){let T=r.as(w,A),S=Math.pow(2,w.z);for(let $=0;$<lt;$++)for(let N=0;N<lt;N++){let q=r.at((w.x+(N+ui(N))/pt)/S),ee=r.au((w.y+($+ui($))/pt)/S),X=A.project(q,ee),te=$*lt+N;fn[2*te+0]=Math.round((X.x*T.scale-T.x)*r.V),fn[2*te+1]=Math.round((X.y*T.scale-T.y)*r.V)}Pt.fill(0),Yn.fill(0);for(let $=2045;$>=0;$--){let N=4*$,q=Lt[N+0],ee=Lt[N+1],X=Lt[N+2],te=Lt[N+3],Z=q+X>>1,ne=ee+te>>1,le=Z+ne-ee,ue=ne+q-Z,fe=ee*lt+q,Ae=te*lt+X,ye=ne*lt+Z,ke=Math.hypot((fn[2*fe+0]+fn[2*Ae+0])/2-fn[2*ye+0],(fn[2*fe+1]+fn[2*Ae+1])/2-fn[2*ye+1])>=16;Pt[ye]=Pt[ye]||(ke?1:0),$<1022&&(Pt[ye]=Pt[ye]||Pt[(ee+ue>>1)*lt+(q+le>>1)]||Pt[(te+ue>>1)*lt+(X+le>>1)])}let D=new r.av,z=new r.aw,F=0;function G($,N){let q=N*lt+$;return Yn[q]===0&&(D.emplaceBack(fn[2*q+0],fn[2*q+1],$*r.V/pt,N*r.V/pt),Yn[q]=++F),Yn[q]-1}function U($,N,q,ee,X,te){let Z=$+q>>1,ne=N+ee>>1;if(Math.abs($-X)+Math.abs(N-te)>1&&Pt[ne*lt+Z])U(X,te,$,N,Z,ne),U(q,ee,X,te,Z,ne);else{let le=G($,N),ue=G(q,ee),fe=G(X,te);z.emplaceBack(le,ue,fe)}}return U(0,0,pt,pt,pt,0),U(pt,pt,0,0,0,pt),{vertices:D,indices:z}}(this.tileID.canonical,a);h=y.vertices,f=y.indices}else{h=new r.av,f=new r.aw;for(let{x:w,y:A}of u)h.emplaceBack(w,A,0,0);let y=r.aQ(h.int16,void 0,4);for(let w=0;w<y.length;w+=3)f.emplaceBack(y[w],y[w+1],y[w+2])}this._tileBoundsBuffer=i.createVertexBuffer(h,r.aR.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(f),this._tileBoundsSegments=r.aB.simpleSegment(0,0,h.length,f.length)}_makeGlobeTileDebugBuffers(i,a){let u=a.projection;if(!u||u.name!=="globe"||a.freezeTileCoverage)return;let h=this.tileID.canonical,f=r.aS(h,a),y=r.aT(f),w=r.S(a.zoom),A;w>0&&(A=r.a6.invert(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,h,a,y,A,w),this._makeGlobeTileDebugTextBuffer(i,h,a,y,A,w)}_globePoint(i,a,u,h,f,y,w){let A=r.aU(i,a,u);if(y){let T=1<<u.z,S=r.a5(h.center.lng),D=r.ae(h.center.lat),z=(u.x+.5)/T-S,F=0;z>.5?F=-1:z<-.5&&(F=1);let G=(i/r.V+u.x)/T+F,U=(a/r.V+u.y)/T;G=(G-S)*h._pixelsPerMercatorPixel+S,U=(U-D)*h._pixelsPerMercatorPixel+D;let $=[G*h.worldSize,U*h.worldSize,0];r.N.transformMat4($,$,y),A=r.aV(A,$,w)}return r.N.transformMat4(A,A,f)}_makeGlobeTileDebugBorderBuffer(i,a,u,h,f,y){let w=new r.aN,A=new r.aO,T=new r.aW,S=(z,F,G,U,$)=>{let N=(G-z)/($-1),q=(U-F)/($-1),ee=w.length;for(let X=0;X<$;X++){let te=z+X*N,Z=F+X*q;w.emplaceBack(te,Z);let ne=this._globePoint(te,Z,a,u,h,f,y);T.emplaceBack(ne[0],ne[1],ne[2]),A.emplaceBack(ee+X)}},D=r.V;S(0,0,D,0,16),S(D,0,D,D,16),S(D,D,0,D,16),S(0,D,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(A),this._tileDebugBuffer=i.createVertexBuffer(w,r.aP.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(T,r.aX.members),this._tileDebugSegments=r.aB.simpleSegment(0,0,w.length,A.length)}_makeGlobeTileDebugTextBuffer(i,a,u,h,f,y){let w=r.V/4,A=new r.aN,T=new r.aw,S=new r.aW,D=25;T.reserve(32),A.reserve(D),S.reserve(D);let z=(F,G)=>D*F+G;for(let F=0;F<D;F++){let G=F*w;for(let U=0;U<D;U++){let $=U*w;A.emplaceBack($,G);let N=this._globePoint($,G,a,u,h,f,y);S.emplaceBack(N[0],N[1],N[2])}}for(let F=0;F<4;F++)for(let G=0;G<4;G++){let U=z(F,G),$=z(F,G+1),N=z(F+1,G),q=z(F+1,G+1);T.emplaceBack(U,$,N),T.emplaceBack(N,$,q)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(T),this._tileDebugTextBuffer=i.createVertexBuffer(A,r.aP.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(S,r.aX.members),this._tileDebugTextSegments=r.aB.simpleSegment(0,0,D,32)}destroy(i=!1){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!i&&this.texture&&this.texture instanceof r.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}let Er={vector:ct,raster:tt,"raster-dem":class extends tt{constructor(c,i,a,u){super(c,i,a,u),this.type="raster-dem",this.maxzoom=22,this._options=r.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(c,i){let a=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function u(h,f){h&&(c.state="errored",i(h)),f&&(c.dem=f,c.dem.onDeserialize(),c.needsHillshadePrepare=!0,c.needsDEMTextureUpload=!0,c.state="loaded",i(null))}c.request=r.d(this.map._requestManager.transformRequest(a,r.R.Tile),(function(h,f,y,w){if(delete c.request,c.aborted)c.state="unloaded",i(null);else if(h)c.state="errored",i(h);else if(f){this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:y,expires:w});let A=ImageBitmap&&f instanceof ImageBitmap&&r.ak(),T=1-(f.width-r.al(f.width))/2;T<1||c.neighboringTiles||(c.neighboringTiles=this._getNeighboringTiles(c.tileID));let S=A?f:r.f.getImageData(f,T),D={uid:c.uid,coord:c.tileID,source:this.id,scope:this.scope,rawImageData:S,encoding:this.encoding,padding:T};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",D,u.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(c){let i=c.canonical,a=Math.pow(2,i.z),u=(i.x-1+a)%a,h=i.x===0?c.wrap-1:c.wrap,f=(i.x+1+a)%a,y=i.x+1===a?c.wrap+1:c.wrap,w={};return w[new r.am(c.overscaledZ,h,i.z,u,i.y).key]={backfilled:!1},w[new r.am(c.overscaledZ,y,i.z,f,i.y).key]={backfilled:!1},i.y>0&&(w[new r.am(c.overscaledZ,h,i.z,u,i.y-1).key]={backfilled:!1},w[new r.am(c.overscaledZ,c.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},w[new r.am(c.overscaledZ,y,i.z,f,i.y-1).key]={backfilled:!1}),i.y+1<a&&(w[new r.am(c.overscaledZ,h,i.z,u,i.y+1).key]={backfilled:!1},w[new r.am(c.overscaledZ,c.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},w[new r.am(c.overscaledZ,y,i.z,f,i.y+1).key]={backfilled:!1}),w}},"raster-array":rt,geojson:class extends r.E{constructor(c,i,a,u){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=a.getActor(),this.setEventedParent(u),this._data=i.data,this._options=r.e({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;let h=r.V/this.tileSize;this.workerOptions=r.e({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*h,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*h,extent:r.V,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:r.V,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*h,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(c){this.map=c,this.setData(this._data)}setData(c){return this._data=c,this._updateWorkerData(),this}getClusterExpansionZoom(c,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id,scope:this.scope},i),this}getClusterChildren(c,i){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id,scope:this.scope},i),this}getClusterLeaves(c,i,a,u){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:c,limit:i,offset:a},u),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new r.b("dataloading",{dataType:"source"})),this._loaded=!1;let c=r.e({},this.workerOptions);c.scope=this.scope;let i=this._data;typeof i=="string"?(c.request=this.map._requestManager.transformRequest(r.f.resolveURL(i),r.R.Source),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,c,(a,u)=>{if(this._loaded=!0,this._pendingLoad=null,a)this.fire(new r.a(a));else{let h={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&u&&u.resourceTiming&&u.resourceTiming[this.id]&&(h.resourceTiming=u.resourceTiming[this.id]),this.fire(new r.b("data",h)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(c,i){let a=c.actor?"reloadTile":"loadTile";c.actor=this.actor;let u={type:this.type,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:r.f.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};c.request=this.actor.send(a,u,(h,f)=>(delete c.request,c.destroy(),c.aborted?i(null):h?i(h):(c.loadVectorData(f,this.map.painter,a==="reloadTile"),i(null))),void 0,a==="loadTile")}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0}unloadTile(c){this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope}),c.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return r.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends r.ap{constructor(c,i,a,u){super(c,i,a,u),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;let c=this.options;this.urls=[];for(let i of c.urls)this.urls.push(this.map._requestManager.transformRequest(i,r.R.Source).url);r.aq(this.urls,(i,a)=>{this._loaded=!0,i?this.fire(new r.a(i)):a&&(this.video=a,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){let i=this.video.seekable;c<i.start(0)||c>i.end(0)?this.fire(new r.a(new ft(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let c=this.map.painter.context,i=c.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new r.T(c,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(c)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:r.ap,model:class extends r.E{constructor(c,i,a,u){super(),this.id=c,this.type="model",this.models=[],this._loaded=!1,this._options=i}load(){let c=[];for(let i in this._options.models){let a=this._options.models[i],u=r.l(this.map._requestManager.transformRequest(a.uri,r.R.Model).url).then(h=>{if(!h)return;let f=r.c(h),y=new r.M(i,a.position,a.orientation,f);y.computeBoundsAndApplyParent(),this.models.push(y)}).catch(h=>{this.fire(new r.a(new Error(`Could not load model ${i} from ${a.uri}: ${h.message}`)))});c.push(u)}return Promise.allSettled(c).then(()=>{this._loaded=!0,this.fire(new r.b("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(i=>{this.fire(new r.a(new Error(`Could not load models: ${i.message}`)))})}onAdd(c){this.map=c,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(c,i){}serialize(){return{type:"model"}}},"batched-model":class extends r.E{constructor(c,i,a,u){super(),this.type="batched-model",this.id=c,this.tileSize=512,this._options=i,this.tiles=this._options.tiles,this.maxzoom=i.maxzoom||19,this.minzoom=i.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=a,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(u)}onAdd(c){this.map=c,this.load()}load(c){this._loaded=!1,this.fire(new r.b("dataloading",{dataType:"source"}));let i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,a=this.map._worldview;this._tileJSONRequest=ot(this._options,this.map._requestManager,i,a,(u,h)=>{this._tileJSONRequest=null,this._loaded=!0,u?(i&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${i}`),a&&a.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${a}`),this.fire(new r.a(u))):h&&(r.e(this,h),h.bounds&&(this.tileBounds=new et(h.bounds,this.minzoom,this.maxzoom)),r.aj(h.tiles,this.map._requestManager._customAccessToken),this.fire(new r.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.b("data",{dataType:"source",sourceDataType:"content"}))),c&&c(u)})}hasTransition(){return!1}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loaded(){return this._loaded}loadTile(c,i){let a=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),u={request:this.map._requestManager.transformRequest(a,r.R.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:c.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(c.actor&&c.state!=="expired")if(c.state==="loading")c.reloadCallback=i;else{if(c.buckets){let f=Object.values(c.buckets);for(let y of f)y.dirty=!0;return void(c.state="loaded")}c.request=c.actor.send("reloadTile",u,h.bind(this))}else c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",u,h.bind(this),void 0,!0);function h(f,y){return c.aborted?i(null):f&&f.status!==404?i(f):(y&&(y.resourceTiming&&(c.resourceTiming=y.resourceTiming),this.map._refreshExpiredTiles&&c.setExpiryData(y),c.buckets=Et(Et({},c.buckets),y.buckets),y.featureIndex&&(c.latestFeatureIndex=y.featureIndex)),c.state="loaded",void i(null))}}serialize(){return r.e({},this._options)}},canvas:class extends r.ap{constructor(c,i,a,u){super(c,i,a,u),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(h=>!Array.isArray(h)||h.length!==2||h.some(f=>typeof f!="number"))||this.fire(new r.a(new ft(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.a(new ft(`sources.${c}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new r.a(new ft(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof HTMLCanvasElement||this.fire(new r.a(new ft(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.a(new ft(`sources.${c}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.a(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let i=this.map.painter.context;this.texture?!c&&!this._playing||this.texture instanceof r.ar||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.T(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}},custom:class extends r.E{constructor(c,i,a,u){super(),this.id=c,this.type="custom",this._dataType="raster",this._dispatcher=a,this._implementation=i,this.setEventedParent(u),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new r.a(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new r.a(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new et(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),r.e(this,r.ac(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return r.ac(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new r.b("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.b("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(c){this._map=c,this._loaded=!1,this.fire(new r.b("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(c),this.load()}onRemove(c){this._implementation.onRemove&&this._implementation.onRemove(c)}hasTile(c){if(this._implementation.hasTile){let{x:i,y:a,z:u}=c.canonical;return this._implementation.hasTile({x:i,y:a,z:u})}return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,i){let{x:a,y:u,z:h}=c.tileID.canonical,f=new AbortController;c.request=Promise.resolve(this._implementation.loadTile({x:a,y:u,z:h},{signal:f.signal})).then((function(y){return delete c.request,c.aborted?(c.state="unloaded",i(null)):y===void 0?(c.state="errored",i(null)):y===null?(this.loadTileData(c,{width:this.tileSize,height:this.tileSize,data:null}),c.state="loaded",i(null)):function(w){return w instanceof ImageData||w instanceof HTMLCanvasElement||w instanceof ImageBitmap||w instanceof HTMLImageElement}(y)?(this.loadTileData(c,y),c.state="loaded",void i(null)):(c.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(y=>{y.code!==20&&(c.state="errored",i(y))}),c.request.cancel=()=>f.abort()}loadTileData(c,i){c.setTexture(i,this._map.painter)}unloadTile(c,i){if(c.texture&&c.texture instanceof r.T?(c.destroy(!0),c.texture&&c.texture instanceof r.T&&this._map.painter.saveTileTexture(c.texture)):c.destroy(),this._implementation.unloadTile){let{x:a,y:u,z:h}=c.tileID.canonical;this._implementation.unloadTile({x:a,y:u,z:h})}i()}abortTile(c,i){c.request&&c.request.cancel&&(c.request.cancel(),delete c.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(c=>({x:c.canonical.x,y:c.canonical.y,z:c.canonical.z}))}_clearTiles(){let c=r.ag(this.id,this.scope);this._map.style.clearSource(c)}_update(){this.fire(new r.b("data",{dataType:"source",sourceDataType:"content"}))}}},Vi=function(c,i,a,u){let h=new Er[i.type](c,i,a,u);if(h.id!==c)throw new Error(`Expected Source id to be ${c} instead of ${h.id}`);return r.aY(["load","abort","unload","serialize","prepare"],h),h};function sl(c,i){let a=r.a6.identity([]);return r.a6.scale(a,a,[.5*c.width,.5*-c.height,1]),r.a6.translate(a,a,[1,-1,0]),r.a6.multiply(a,a,c.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(a)}function $l(c,i,a,u,h,f,y,w=!1){let A=c.tilesIn(u,y,w);A.sort(xs);let T=[];for(let D of A)T.push({wrappedTileID:D.tile.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(i,a,c._state,D,h,f,sl(c.transform,D.tile.tileID),w)});let S=function(D){let z={},F={};for(let G of D){let U=G.queryResults,$=G.wrappedTileID,N=F[$]=F[$]||{};for(let q in U){let ee=U[q],X=N[q]=N[q]||{},te=z[q]=z[q]||[];for(let Z of ee)X[Z.featureIndex]||(X[Z.featureIndex]=!0,te.push(Z))}}return z}(T);for(let D in S)S[D].forEach(z=>{let F=z.feature,G=F.layer;G&&G.type!=="background"&&G.type!=="sky"&&G.type!=="slot"&&(F.source=G.source,G["source-layer"]&&(F.sourceLayer=G["source-layer"]),F.state=F.id!==void 0?c.getFeatureState(G["source-layer"],F.id):{})});return S}function $r(c,i){let a=c.getRenderableIds().map(f=>c.getTileByID(f)),u=[],h={};for(let f=0;f<a.length;f++){let y=a[f],w=y.tileID.canonical.key;h[w]||(h[w]=!0,y.querySourceFeatures(u,i))}return u}function xs(c,i){let a=c.tileID,u=i.tileID;return a.overscaledZ-u.overscaledZ||a.canonical.y-u.canonical.y||a.wrap-u.wrap||a.canonical.x-u.canonical.x}class Ha extends Vo{constructor(i,a,u,h,f){super(i,a,u,h,f),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(i,a){let u=a.context,h=u.gl;this.texture=this.texture||a.getTileTexture(i.width),this.texture&&this.texture instanceof r.T?this.texture.update(i,{useMipmap:!1,premultiply:!1}):this.texture=new r.T(u,i,h.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(i=16384,a){let u=this._mrt=new r.aZ(30),h=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(i-1)}});return this.entireBuffer=null,this.request=r.a_(h,(f,y,w,A)=>{if(f)a(f);else try{let T=u.getHeaderLength(y);if(T>i)return void(this.request=this.fetchHeader(T,a));u.parseHeader(y),this._isHeaderLoaded=!0;let S=0;for(let D of Object.values(u.layers))S=Math.max(S,D.dataIndex[D.dataIndex.length-1].last_byte);y.byteLength>=S&&(this.entireBuffer=y),a(null,this.entireBuffer||y,w,A)}catch(T){a(T)}}),this.request}fetchBand(i,a,u){let h=this._mrt;if(!this._isHeaderLoaded||!h)return void u(new Error("Tile header is not ready"));let f=this.actor;if(!f)return void u(new Error("Can't fetch tile band without an actor"));let y,w=(D,z)=>{y.complete(D,z),D?u(D):(this.updateTextureDescriptor(i,a),u(null,this.textureDescriptor&&this.textureDescriptor.img))},A=(D,z)=>{if(D)return u(D);let F=f.send("decodeRasterArray",{buffer:z,task:y},w,void 0,!0);this._workQueue.push(()=>{F&&F.cancel(),y.cancel()})},T=h.getLayer(i);if(!T)return void u(new Error(`Unknown sourceLayer "${i}"`));if(T.hasDataForBand(a))return this.updateTextureDescriptor(i,a),void u(null,this.textureDescriptor?this.textureDescriptor.img:null);let S=T.getDataRange([a]);if(y=h.createDecodingTask(S),!y||y.tasks.length)if(this.flushQueues(),this.entireBuffer)A(null,this.entireBuffer.slice(S.firstByte,S.lastByte+1));else{let D=Object.assign({},this.requestParams,{headers:{Range:`bytes=${S.firstByte}-${S.lastByte}`}}),z=r.a_(D,A);this._fetchQueue.push(()=>{z.cancel(),y.cancel()})}else u(null)}updateNeeded(i,a){return(!this.textureDescriptor||this.textureDescriptor.band!==a||this.textureDescriptor.layer!==i)&&this.state!=="errored"}updateTextureDescriptor(i,a){if(!this._mrt)return;let u=this._mrt.getLayer(i);if(!u||!u.hasBand(a)||!u.hasDataForBand(a))return;let{bytes:h,tileSize:f,buffer:y,offset:w,scale:A}=u.getBandView(a),T=f+2*y,S={data:h,width:T,height:T},D=this.texture;D&&D instanceof r.T&&D.update(S,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:i,band:a,img:S,buffer:y,offset:w,tileSize:f,format:u.pixelFormat,mix:[A,256*A,65536*A,16777216*A]}}}class vs{constructor(i,a){this.max=i,this.onRemove=a,this.reset()}reset(){for(let i in this.data)for(let a of this.data[i])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(i,a,u){let h=i.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);let f={value:a,timeout:void 0};if(u!==void 0&&(f.timeout=setTimeout(()=>{this.remove(i,f)},u)),this.data[h].push(f),this.order.push(h),this.order.length>this.max){let y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){let a=this.data[i].shift();return a.timeout&&clearTimeout(a.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),a.value}getByKey(i){let a=this.data[i];return a?a[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,a){if(!this.has(i))return this;let u=i.wrapped().key,h=a===void 0?0:this.data[u].indexOf(a),f=this.data[u][h];return this.data[u].splice(h,1),f.timeout&&clearTimeout(f.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(f.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){let a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(i){let a=[];for(let u in this.data)for(let h of this.data[u])i(h.value)||a.push(h);for(let u of a)this.remove(u.value.tileID,u)}}class yr extends r.E{constructor(i,a,u){super(),this.id=i,this._onlySymbols=u,a.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new vs(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new mn,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(let i in this._tiles){let a=this._tiles[i];if(a.state!=="errored"&&(a.state!=="loaded"||!a.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,a){return i.isSymbolTile=this._onlySymbols,i.isExtraShadowCaster=this._shadowCasterTiles[i.tileID.key],this._source.loadTile(i,a)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let a in this._tiles){let u=this._tiles[a];u.upload(i),u.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return r.a$(this._tiles).map(i=>i.tileID).sort(Wl).map(i=>i.key)}getRenderableIds(i,a){let u=[];for(let h in this._tiles)this._isIdRenderable(+h,i,a)&&u.push(this._tiles[h]);return i?u.sort((h,f)=>{let y=h.tileID,w=f.tileID,A=new r.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),T=new r.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||T.y-A.y||T.x-A.x}).map(h=>h.tileID.key):u.map(h=>h.tileID).sort(Wl).map(h=>h.key)}hasRenderableParent(i){let a=this.findLoadedParent(i,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(i,a,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(a||!this._tiles[i].holdingForFade())&&(u||!this._shadowCasterTiles[i])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,a){let u=this._tiles[i];u&&(u.state!=="loading"&&(u.state=a),this._loadTile(u,this._tileLoaded.bind(this,u,i,a)))}_tileLoaded(i,a,u,h){if(h)if(i.state="errored",h.status!==404)this._source.fire(new r.a(h,{tile:i}));else{if(!(i.tileID.key in this._loadedParentTiles))return void this._source.fire(new r.b("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){let f=this.map.painter.terrain;this.update(this.transform,f.getScaledDemTileSize(),!0),f.resetTileLookupCache(this.id)}else this.update(this.transform)}else i.timeAdded=r.f.now(),u==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(a,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new r.b("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){let a=this.getRenderableIds();for(let h=0;h<a.length;h++){let f=a[h];if(i.neighboringTiles&&i.neighboringTiles[f]){let y=this.getTileByID(f);u(i,y),u(y,i)}}function u(h,f){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=f.tileID.canonical.x-h.tileID.canonical.x,w=f.tileID.canonical.y-h.tileID.canonical.y,A=Math.pow(2,h.tileID.canonical.z),T=f.tileID.key;y===0&&w===0||Math.abs(w)>1||(Math.abs(y)>1&&(Math.abs(y+A)===1?y+=A:Math.abs(y-A)===1&&(y-=A)),f.dem&&h.dem&&(h.dem.backfillBorder(f.dem,y,w),h.neighboringTiles&&h.neighboringTiles[T]&&(h.neighboringTiles[T].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,a,u,h){for(let f in this._tiles){let y=this._tiles[f];if(h[f]||!y.hasData()||y.tileID.overscaledZ<=a||y.tileID.overscaledZ>u)continue;let w=y.tileID;for(;y&&y.tileID.overscaledZ>a+1;){let T=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[T.key],y&&y.hasData()&&(w=T)}let A=w;for(;A.overscaledZ>a;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){h[w.key]=w;break}}}findLoadedParent(i,a){if(i.key in this._loadedParentTiles){let u=this._loadedParentTiles[i.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=i.overscaledZ-1;u>=a;u--){let h=i.scaledTo(u),f=this._getLoadedTile(h);if(f)return f}}_getLoadedTile(i){let a=this._tiles[i.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,a){a=a||this._source.tileSize;let u=Math.ceil(i.width/a)+1,h=Math.ceil(i.height/a)+1,f=Math.floor(u*h*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,f):f,w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(i){let a=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,a){let u={};for(let h in this._tiles){let f=this._tiles[h];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+a),u[f.tileID.key]=f}this._tiles=u;for(let h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(let h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(i,a,u,h){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let f;if(this.updateCacheSize(i,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain)if(this._source.tileID)f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(A=>new r.am(A.canonical.z,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y));else if(this.tileCoverLift!==0){let A=i.clone();A.tileCoverLift=this.tileCoverLift,f=A.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.minzoom<=1&&i.projection.name==="globe"&&(f.push(new r.am(1,0,1,0,0)),f.push(new r.am(1,0,1,1,0)),f.push(new r.am(1,0,1,0,1)),f.push(new r.am(1,0,1,1,1)))}else f=i.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(A=>this._source.hasTile(A)));else f=[];if(f.length>0&&this.castsShadows&&h&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!So(this._source.type)){let A=i.coveringZoomLevel({tileSize:a||this._source.tileSize,roundZoom:this._source.roundZoom&&!u}),T=Math.min(A,this._source.maxzoom),S=i.extendTileCoverForShadows(f,h,T);for(let D of S)this._shadowCasterTiles[D.key]=!0,f.push(D)}let y=this._updateRetainedTiles(f);if(So(this._source.type)&&f.length!==0){let A={},T={},S=Object.keys(y);for(let z of S){let F=y[z],G=this._tiles[z];if(!G||G.fadeEndTime&&G.fadeEndTime<=r.f.now())continue;let U=this.findLoadedParent(F,Math.max(F.overscaledZ-yr.maxOverzooming,this._source.minzoom));U&&(this._addTile(U.tileID),A[U.tileID.key]=U.tileID),T[z]=F}let D=f[f.length-1].overscaledZ;for(let z in this._tiles){let F=this._tiles[z];if(y[z]||!F.hasData())continue;let G=F.tileID;for(;G.overscaledZ>D;){G=G.scaledTo(G.overscaledZ-1);let U=this._tiles[G.key];if(U&&U.hasData()&&T[G.key]){y[z]=F.tileID;break}}}for(let z in A)y[z]||(this._coveredTiles[z]=!0,y[z]=A[z])}for(let A in y)this._tiles[A].clearFadeHold();let w=r.b0(this._tiles,y);for(let A of w){let T=this._tiles[A];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+A)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(let i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){let a={};if(i.length===0)return a;let u={},h=i.reduce((T,S)=>Math.min(T,S.overscaledZ),1/0),f=i[0].overscaledZ,y=Math.max(f-yr.maxOverzooming,this._source.minzoom),w=Math.max(f+yr.maxUnderzooming,this._source.minzoom),A={};for(let T of i){let S=this._addTile(T);a[T.key]=T,S.hasData()||h<this._source.maxzoom&&(A[T.key]=T)}this._retainLoadedChildren(A,h,w,a);for(let T of i){let S=this._tiles[T.key];if(S.hasData())continue;if(T.canonical.z>=this._source.maxzoom){let z=T.children(this._source.maxzoom)[0],F=this.getTile(z);if(F&&F.hasData()){a[z.key]=z;continue}}else{let z=T.children(this._source.maxzoom);if(a[z[0].key]&&a[z[1].key]&&a[z[2].key]&&a[z[3].key])continue}let D=S.wasRequested();for(let z=T.overscaledZ-1;z>=y;--z){let F=T.scaledTo(z);if(u[F.key]||(u[F.key]=!0,S=this.getTile(F),!S&&D&&(S=this._addTile(F)),S&&(a[F.key]=F,D=S.wasRequested(),S.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let i in this._tiles){let a=[],u,h=this._tiles[i].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){u=this._loadedParentTiles[h.key];break}a.push(h.key);let f=h.scaledTo(h.overscaledZ-1);if(u=this._getLoadedTile(f),u)break;h=f}for(let f of a)this._loadedParentTiles[f]=u}}_addTile(i){let a=this._tiles[i.key];if(a)return a.isExtraShadowCaster!==!0||this._shadowCasterTiles[i.key]||this._reloadTile(i.key,"reloading"),a;a=this._cache.getAndRemove(i),a&&(this._setTileReloadTimer(i.key,a),a.tileID=i,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,a)));let u=!!a;if(!u){let h=this.map?this.map.painter:null,f=this._source.tileSize*i.overscaleFactor();a=this._source.type==="raster-array"?new Ha(i,f,this.transform.tileZoom,h,this._isRaster):new Vo(i,f,this.transform.tileZoom,h,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,i.key,a.state))}return a?(a.uses++,this._tiles[i.key]=a,u||this._source.fire(new r.b("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(i,a){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);let u=a.getExpiryTimeout();u&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},u))}_removeTile(i){let a=this._tiles[i];a&&(a.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),a.uses>0||(a.hasData()&&a.state!=="reloading"||a.state==="empty"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,a,u){let h=[],f=this.transform;if(!f)return h;let y=f.projection.name==="globe",w=r.a5(f.center.lng);for(let A in this._tiles){let T=this._tiles[A];if(u&&T.clearQueryDebugViz(),T.holdingForFade())continue;let S;if(y){let D=T.tileID.canonical;if(D.z===0){let z=[Math.abs(r.aa(w,...ll(D,-1))-w),Math.abs(r.aa(w,...ll(D,1))-w)];S=[0,2*z.indexOf(Math.min(...z))-1]}else{let z=[Math.abs(r.aa(w,...ll(D,-1))-w),Math.abs(r.aa(w,...ll(D,0))-w),Math.abs(r.aa(w,...ll(D,1))-w)];S=[z.indexOf(Math.min(...z))-1]}}else S=[0];for(let D of S){let z=i.containsTile(T,f,a,D);z&&h.push(z)}}return h}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(i){return this._getRenderableCoordinates(i)}_getRenderableCoordinates(i,a){let u=this.getRenderableIds(i,a).map(f=>this._tiles[f].tileID),h=this.transform.projection.name==="globe";for(let f of u)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped()),f.expandedProjMatrix=h?this.transform.calculateProjMatrix(f.toUnwrapped(),!1,!0):f.projMatrix;return u}sortCoordinatesByDistance(i){let a=i.slice(),u=this.transform._camera.position,h=this.transform._camera.forward(),f={};for(let y of a){let w=1/(1<<y.canonical.z);f[y.key]=((y.canonical.x+.5)*w+y.wrap-u[0])*h[0]+((y.canonical.y+.5)*w-u[1])*h[1]-u[2]*h[2]}return a.sort((y,w)=>f[y.key]-f[w.key]),a}hasTransition(){if(this._source.hasTransition())return!0;if(So(this._source.type))for(let i in this._tiles){let a=this._tiles[i];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=r.f.now())return!0}return!1}setFeatureState(i,a,u){this._state.updateState(i=i||"_geojsonTileLayer",a,u)}removeFeatureState(i,a,u){this._state.removeFeatureState(i=i||"_geojsonTileLayer",a,u)}getFeatureState(i,a){return this._state.getState(i=i||"_geojsonTileLayer",a)}setDependencies(i,a,u){let h=this._tiles[i];h&&h.setDependencies(a,u)}reloadTilesForDependencies(i,a){for(let u in this._tiles)this._tiles[u].hasDependency(i,a)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(i,a))}_preloadTiles(i,a){if(!this._sourceLoaded){let A=()=>{this._sourceLoaded&&(this._source.off("data",A),this._preloadTiles(i,a))};return void this._source.on("data",A)}let u=new Map,h=Array.isArray(i)?i:[i],f=this.map.painter.terrain,y=this.usedForTerrain&&f?f.getScaledDemTileSize():this._source.tileSize;for(let A of h){let T=A.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(let S of T)u.set(S.key,S);this.usedForTerrain&&A.updateElevation(!1)}let w=Array.from(u.values());r.b1(w,(A,T)=>{let S=new Vo(A,this._source.tileSize*A.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(S,D=>{this._source.type==="raster-dem"&&S.dem&&this._backfillDEM(S),T(D,S)})},a)}}function Wl(c,i){let a=Math.abs(2*c.wrap)-+(c.wrap<0),u=Math.abs(2*i.wrap)-+(i.wrap<0);return c.overscaledZ-i.overscaledZ||u-a||i.canonical.y-c.canonical.y||i.canonical.x-c.canonical.x}function So(c){return c==="raster"||c==="image"||c==="video"||c==="custom"}function ll(c,i){let a=1<<c.z;return[c.x/a+i,(c.x+1)/a+i]}yr.maxOverzooming=10,yr.maxUnderzooming=3;class Zc{constructor(i){this.style=i,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];let i=!1,a=!1;for(let u in this.style._mergedLayers){let h=this.style._mergedLayers[u];if(h.type==="fill-extrusion")this.layers.push({layer:h,visible:i,visibilityChanged:a});else if(h.type==="model"){let f=this.style.getLayerSource(h);f&&f.type==="batched-model"&&this.layers.push({layer:h,visible:i,visibilityChanged:a})}}}onNewFrame(i){this.layersGotHidden=!1;for(let a of this.layers){let u=a.layer,h=!1;u.type==="fill-extrusion"?h=!u.isHidden(i)&&u.paint.get("fill-extrusion-opacity")>0:u.type==="model"&&(h=!u.isHidden(i)&&u.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!h&&a.visible,a.visible=h}}updateZOffset(i,a){this.currentBuildingBuckets=[];for(let h of this.layers){let f=h.layer,y=this.style.getLayerSourceCache(f),w=1;f.type==="fill-extrusion"&&(w=h.visible?f.paint.get("fill-extrusion-vertical-scale"):0);let A=y?y.getTile(a):null;if(!A&&y&&a.canonical.z>y.getSource().minzoom){let T=a.scaledTo(Math.min(y.getSource().maxzoom,a.overscaledZ-1));for(;T.overscaledZ>=y.getSource().minzoom&&(A=y.getTile(T),!A&&T.overscaledZ!==0);)T=T.scaledTo(T.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:A?A.getBucket(f):null,tileID:A?A.tileID:a,verticalScale:w})}i.hasAnyZOffset=!1;let u=!1;for(let h=0;h<i.symbolInstances.length;h++){let f=i.symbolInstances.get(h),y=f.zOffset,w=this._getHeightAtTileOffset(a,f.tileAnchorX,f.tileAnchorY);f.zOffset=w!==Number.NEGATIVE_INFINITY?w:y,u||y===f.zOffset||(u=!0),i.hasAnyZOffset||f.zOffset===0||(i.hasAnyZOffset=!0)}u&&(i.zOffsetBuffersNeedUpload=!0,i.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(i,a,u,h){let f=a,y=u;if(i.canonical.z!==h.canonical.z){let w=h.canonical,A=1/(1<<i.canonical.z-w.z);f=(a+i.canonical.x*r.V)*A-w.x*r.V|0,y=(u+i.canonical.y*r.V)*A-w.y*r.V|0}return{tileX:f,tileY:y}}_getHeightAtTileOffset(i,a,u){let h,f;for(let y=0;y<this.layers.length;++y){if(this.layers[y].layer.type!=="fill-extrusion")continue;let{bucket:w,tileID:A,verticalScale:T}=this.currentBuildingBuckets[y];if(!w)continue;let{tileX:S,tileY:D}=this._mapCoordToOverlappingTile(i,a,u,A),z=w.getHeightAtTileCoord(S,D);z&&z.height!==void 0&&(z.hidden?h=z.height:f=Math.max(z.height*T,f||0))}if(f!==void 0)return f;for(let y=0;y<this.layers.length;++y){let w=this.layers[y];if(w.layer.type!=="model"||!w.visible)continue;let{bucket:A,tileID:T}=this.currentBuildingBuckets[y];if(!A)continue;let{tileX:S,tileY:D}=this._mapCoordToOverlappingTile(i,a,u,T),z=A.getHeightAtTileCoord(S,D);if(z&&!z.hidden)return z.height===void 0&&h!==void 0?Math.min(z.maxHeight,h)*z.verticalScale:(z.height||0)*z.verticalScale}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function ya(c,i){let a={};for(let u in c)u!=="ref"&&(a[u]=c[u]);return r.b2.forEach(u=>{u in i&&(a[u]=i[u])}),a}function hd(c){c=c.slice();let i=Object.create(null);for(let a=0;a<c.length;a++)i[c[a].id]=c[a];for(let a=0;a<c.length;a++)"ref"in c[a]&&(c[a]=ya(c[a],i[c[a].ref]));return c}let _n={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function cl(c,i,a){a.push({command:_n.addSource,args:[c,i[c]]})}function qc(c,i,a){i.push({command:_n.removeSource,args:[c]}),a[c]=!0}function Rh(c,i,a,u){qc(c,a,u),cl(c,i,a)}function zh(c,i,a){let u;for(u in c[a])if(c[a].hasOwnProperty(u)&&u!=="data"&&!j(c[a][u],i[a][u]))return!1;for(u in i[a])if(i[a].hasOwnProperty(u)&&u!=="data"&&!j(c[a][u],i[a][u]))return!1;return!0}function xa(c,i,a,u,h,f){let y;for(y in i=i||{},c=c||{})c.hasOwnProperty(y)&&(j(c[y],i[y])||a.push({command:f,args:[u,y,i[y],h]}));for(y in i)i.hasOwnProperty(y)&&!c.hasOwnProperty(y)&&(j(c[y],i[y])||a.push({command:f,args:[u,y,i[y],h]}))}function jo(c){return c.id}function Zl(c,i){return c[i.id]=i,c}class bs{constructor(i,a){this.reset(i,a)}reset(i,a){this.points=i||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=r.aa(i,0,1);let a=1,u=this._distances[a],h=i*this.paddedLength+this.padding;for(;u<h&&a<this._distances.length;)u=this._distances[++a];let f=a-1,y=this._distances[f],w=u-y,A=w>0?(h-y)/w:0;return this.points[f].mult(1-A).add(this.points[a].mult(A))}}class ql{constructor(i,a,u){let h=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(i/u),this.yCellCount=Math.ceil(a/u);for(let y=0;y<this.xCellCount*this.yCellCount;y++)h.push([]),f.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=a,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,a,u,h,f){this._forEachCell(a,u,h,f,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(f)}insertCircle(i,a,u,h){this._forEachCell(a-h,u-h,a+h,u+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(a),this.circles.push(u),this.circles.push(h)}_insertBoxCell(i,a,u,h,f,y){this.boxCells[f].push(y)}_insertCircleCell(i,a,u,h,f,y){this.circleCells[f].push(y)}_query(i,a,u,h,f,y){if(u<0||i>this.width||h<0||a>this.height)return!f&&[];let w=[];if(i<=0&&a<=0&&this.width<=u&&this.height<=h){if(f)return!0;for(let A=0;A<this.boxKeys.length;A++)w.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){let T=this.circles[3*A],S=this.circles[3*A+1],D=this.circles[3*A+2];w.push({key:this.circleKeys[A],x1:T-D,y1:S-D,x2:T+D,y2:S+D})}return y?w.filter(y):w}return this._forEachCell(i,a,u,h,this._queryCell,w,{hitTest:f,seenUids:{box:{},circle:{}}},y),f?w.length>0:w}_queryCircle(i,a,u,h,f){let y=i-u,w=i+u,A=a-u,T=a+u;if(w<0||y>this.width||T<0||A>this.height)return!h&&[];let S=[];return this._forEachCell(y,A,w,T,this._queryCellCircle,S,{hitTest:h,circle:{x:i,y:a,radius:u},seenUids:{box:{},circle:{}}},f),h?S.length>0:S}query(i,a,u,h,f){return this._query(i,a,u,h,!1,f)}hitTest(i,a,u,h,f){return this._query(i,a,u,h,!0,f)}hitTestCircle(i,a,u,h){return this._queryCircle(i,a,u,!0,h)}_queryCell(i,a,u,h,f,y,w,A){let T=w.seenUids,S=this.boxCells[f];if(S!==null){let z=this.bboxes;for(let F of S)if(!T.box[F]){T.box[F]=!0;let G=4*F;if(i<=z[G+2]&&a<=z[G+3]&&u>=z[G+0]&&h>=z[G+1]&&(!A||A(this.boxKeys[F]))){if(w.hitTest)return y.push(!0),!0;y.push({key:this.boxKeys[F],x1:z[G],y1:z[G+1],x2:z[G+2],y2:z[G+3]})}}}let D=this.circleCells[f];if(D!==null){let z=this.circles;for(let F of D)if(!T.circle[F]){T.circle[F]=!0;let G=3*F;if(this._circleAndRectCollide(z[G],z[G+1],z[G+2],i,a,u,h)&&(!A||A(this.circleKeys[F]))){if(w.hitTest)return y.push(!0),!0;{let U=z[G],$=z[G+1],N=z[G+2];y.push({key:this.circleKeys[F],x1:U-N,y1:$-N,x2:U+N,y2:$+N})}}}}}_queryCellCircle(i,a,u,h,f,y,w,A){let T=w.circle,S=w.seenUids,D=this.boxCells[f];if(D!==null){let F=this.bboxes;for(let G of D)if(!S.box[G]){S.box[G]=!0;let U=4*G;if(this._circleAndRectCollide(T.x,T.y,T.radius,F[U+0],F[U+1],F[U+2],F[U+3])&&(!A||A(this.boxKeys[G])))return y.push(!0),!0}}let z=this.circleCells[f];if(z!==null){let F=this.circles;for(let G of z)if(!S.circle[G]){S.circle[G]=!0;let U=3*G;if(this._circlesCollide(F[U],F[U+1],F[U+2],T.x,T.y,T.radius)&&(!A||A(this.circleKeys[G])))return y.push(!0),!0}}}_forEachCell(i,a,u,h,f,y,w,A){let T=this._convertToXCellCoord(i),S=this._convertToYCellCoord(a),D=this._convertToXCellCoord(u),z=this._convertToYCellCoord(h);for(let F=T;F<=D;F++)for(let G=S;G<=z;G++)if(f.call(this,i,a,u,h,this.xCellCount*G+F,y,w,A))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,a,u,h,f,y){let w=h-i,A=f-a,T=u+y;return T*T>w*w+A*A}_circleAndRectCollide(i,a,u,h,f,y,w){let A=(y-h)/2,T=Math.abs(i-(h+A));if(T>A+u)return!1;let S=(w-f)/2,D=Math.abs(a-(f+S));if(D>S+u)return!1;if(T<=A||D<=S)return!0;let z=T-A,F=D-S;return z*z+F*F<=u*u}}let Wr={unknown:0,flipRequired:1,flipNotRequired:2},Mo=Math.tan(85*Math.PI/180);function ul(c,i,a,u,h,f,y){let w=r.a6.create();if(a)if(f.name==="globe"){let A=r.b3(h,i);r.a6.multiply(w,w,A)}else{let A=r.b4.invert([],y);w[0]=A[0],w[1]=A[1],w[4]=A[2],w[5]=A[3],u||r.a6.rotateZ(w,w,h.angle)}else r.a6.multiply(w,h.labelPlaneMatrix,c);return w}function Yl(c,i,a,u,h,f,y){let w=ul(c,i,a,u,h,f,y);return f.name==="globe"&&a||(w[2]=w[6]=w[10]=w[14]=0),w}function $a(c,i,a,u,h,f,y){if(a){if(f.name==="globe"){let w=ul(c,i,a,u,h,f,y);return r.a6.invert(w,w),r.a6.multiply(w,c,w),w}{let w=r.a6.clone(c),A=r.a6.identity([]);return A[0]=y[0],A[1]=y[1],A[4]=y[2],A[5]=y[3],r.a6.multiply(w,w,A),u||r.a6.rotateZ(w,w,-h.angle),w}}return h.glCoordMatrix}function Jo(c,i,a,u){let h=[c,i,a,1];a?r.a7.transformMat4(h,h,u):Kc(h,h,u);let f=h[3];return h[0]/=f,h[1]/=f,h[2]/=f,h}function pd(c,i){return Math.min(.5+c/i*.5,1.5)}function Yc(c,i){let a=c[0]/c[3],u=c[1]/c[3];return a>=-i[0]&&a<=i[0]&&u>=-i[1]&&u<=i[1]}function Xl(c,i,a,u,h,f,y,w,A,T){let S=a.transform,D=u?c.textSizeData:c.iconSizeData,z=r.b5(D,a.transform.zoom),F=S.projection.name==="globe",G=[256/a.width*2+1,256/a.height*2+1],U=u?c.text.dynamicLayoutVertexArray:c.icon.dynamicLayoutVertexArray;U.clear();let $=null;F&&($=u?c.text.globeExtVertexArray:c.icon.globeExtVertexArray);let N=c.lineVertexArray,q=u?c.text.placedSymbolArray:c.icon.placedSymbolArray,ee=a.transform.width/a.transform.height,X,te=!1;for(let Z=0;Z<q.length;Z++){let ne=q.get(Z),{numGlyphs:le,writingMode:ue}=ne;if(ue!==r.b6.vertical||te||X===r.b6.horizontal||(te=!0),X=ue,(ne.hidden||ue===r.b6.vertical)&&!te){ba(le,U);continue}te=!1;let fe=new r.P(ne.tileAnchorX,ne.tileAnchorY),{x:Ae,y:ye,z:ke}=S.projection.projectTilePoint(fe.x,fe.y,T.canonical);if(A){let[dt,Ct,It]=A(fe);Ae+=dt,ye+=Ct,ke+=It}let Ee=[Ae,ye,ke,1];if(r.a7.transformMat4(Ee,Ee,i),!Yc(Ee,G)){ba(le,U);continue}let $e=Ee[3],xe=pd(a.transform.getCameraToCenterDistance(S.projection),$e),Te=r.b7(D,z,ne),he=y?Te/xe:Te*xe,Ce=Jo(Ae,ye,ke,h);if(Ce[3]<=0){ba(le,U);continue}let Ze={},it=y?null:A,Je=Qc(ne,he,!1,w,i,h,f,c.glyphOffsetArray,N,U,$,Ce,fe,Ze,ee,it,S.projection,T,y);te=Je.useVertical,it&&Je.needsFlipping&&(Ze={}),(Je.notEnoughRoom||te||Je.needsFlipping&&Qc(ne,he,!0,w,i,h,f,c.glyphOffsetArray,N,U,$,Ce,fe,Ze,ee,it,S.projection,T,y).notEnoughRoom)&&ba(le,U)}u?(c.text.dynamicLayoutVertexBuffer.updateData(U),$&&c.text.globeExtVertexBuffer&&c.text.globeExtVertexBuffer.updateData($)):(c.icon.dynamicLayoutVertexBuffer.updateData(U),$&&c.icon.globeExtVertexBuffer&&c.icon.globeExtVertexBuffer.updateData($))}function va(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U){let{lineStartIndex:$,glyphStartIndex:N,segment:q}=w,ee=N+w.numGlyphs,X=$+w.lineLength,te=i.getoffsetX(N),Z=i.getoffsetX(ee-1),ne=dl(c*te,a,u,h,f,y,q,$,X,A,T,S,D,z,!0,F,G,U);if(!ne)return null;let le=dl(c*Z,a,u,h,f,y,q,$,X,A,T,S,D,z,!0,F,G,U);return le?{first:ne,last:le}:null}function Xc(c,i,a,u){return c===r.b6.horizontal&&Math.abs(u)>Math.abs(a)?{useVertical:!0}:c===r.b6.vertical?u>0?{needsFlipping:!0}:null:i!==Wr.unknown&&function(h,f){return h===0||Math.abs(f/h)>Mo}(a,u)?i===Wr.flipRequired?{needsFlipping:!0}:null:a<0?{needsFlipping:!0}:null}function Qc(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N,q){let ee=i/24,X=c.lineOffsetX*ee,te=c.lineOffsetY*ee,{lineStartIndex:Z,glyphStartIndex:ne,numGlyphs:le,segment:ue,writingMode:fe,flipState:Ae}=c,ye=Z+c.lineLength,ke=Ee=>{if(S){let[he,Ce,Ze]=Ee.up,it=T.length;r.b8(S,it+0,he,Ce,Ze),r.b8(S,it+1,he,Ce,Ze),r.b8(S,it+2,he,Ce,Ze),r.b8(S,it+3,he,Ce,Ze)}let[$e,xe,Te]=Ee.point;r.b9(T,$e,xe,Te,Ee.angle)};if(le>1){let Ee=va(ee,w,X,te,a,D,z,c,A,f,F,U,!1,$,N,q);if(!Ee)return{notEnoughRoom:!0};if(u&&!a){let[$e,xe,Te]=Ee.first.point,[he,Ce,Ze]=Ee.last.point;[$e,xe]=Jo($e,xe,Te,y),[he,Ce]=Jo(he,Ce,Ze,y);let it=Xc(fe,Ae,(he-$e)*G,Ce-xe);if(c.flipState=it&&it.needsFlipping?Wr.flipRequired:Wr.flipNotRequired,it)return it}ke(Ee.first);for(let $e=ne+1;$e<ne+le-1;$e++){let xe=dl(ee*w.getoffsetX($e),X,te,a,D,z,ue,Z,ye,A,f,F,U,!1,!1,$,N,q);if(!xe)return T.length-=4*($e-ne),{notEnoughRoom:!0};ke(xe)}ke(Ee.last)}else{if(u&&!a){let $e=Jo(z.x,z.y,0,h),xe=Z+ue+1,Te=new r.P(A.getx(xe),A.gety(xe)),he=Jo(Te.x,Te.y,0,h),Ce=he[3]>0?he:Ql(z,Te,$e,1,h,void 0,$,N.canonical),Ze=Xc(fe,Ae,(Ce[0]-$e[0])*G,Ce[1]-$e[1]);if(c.flipState=Ze&&Ze.needsFlipping?Wr.flipRequired:Wr.flipNotRequired,Ze)return Ze}let Ee=dl(ee*w.getoffsetX(ne),X,te,a,D,z,ue,Z,ye,A,f,F,U,!1,!1,$,N,q);if(!Ee)return{notEnoughRoom:!0};ke(Ee)}return{}}function ws(c,i,a,u,h){let{x:f,y,z:w}=u.projectTilePoint(c.x,c.y,i);if(!h)return Jo(f,y,w,a);let[A,T,S]=h(c);return Jo(f+A,y+T,w+S,a)}function Ql(c,i,a,u,h,f,y,w){let A=ws(c.sub(i)._unit()._add(c),w,h,y,f);return r.N.sub(A,a,A),r.N.normalize(A,A),r.N.scaleAndAdd(A,a,A,u)}function dl(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N){let q=u?c-i:c+i,ee=q>0?1:-1,X=0;u&&(ee*=-1,X=Math.PI),ee<0&&(X+=Math.PI);let te=w+y+(ee>0?0:1)|0,Z=h,ne=h,le=0,ue=0,fe=Math.abs(q),Ae=[],ye=[],ke=f,Ee=ke,$e=()=>Ql(Ee,ke,ne,fe-le+1,S,z,U,$.canonical);for(;le+ue<=fe;){if(te+=ee,te<w||te>=A)return null;if(ne=Z,Ee=ke,Ae.push(ne),F&&ye.push(Ee),ke=new r.P(T.getx(te),T.gety(te)),Z=D[te],!Z){let Ct=ws(ke,$.canonical,S,U,z);Z=Ct[3]>0?D[te]=Ct:$e()}le+=ue,ue=r.N.distance(ne,Z)}G&&z&&(D[te]&&(Z=$e(),ue=r.N.distance(ne,Z)),D[te]=Z);let xe=(fe-le)/ue,Te=ke.sub(Ee)._mult(xe)._add(Ee),he=r.N.sub([],Z,ne),Ce=r.N.scaleAndAdd([],ne,he,xe),Ze=[0,0,1],it=he[0],Je=he[1];if(N&&(Ze=U.upVector($.canonical,Te.x,Te.y),Ze[0]!==0||Ze[1]!==0||Ze[2]!==1)){let Ct=[Ze[2],0,-Ze[0]],It=r.N.cross([],Ze,Ct);r.N.normalize(Ct,Ct),r.N.normalize(It,It),it=r.N.dot(he,Ct),Je=r.N.dot(he,It)}if(a){let Ct=r.N.cross([],Ze,he);r.N.normalize(Ct,Ct),r.N.scaleAndAdd(Ce,Ce,Ct,a*ee)}let dt=X+Math.atan2(Je,it);return Ae.push(Ce),F&&ye.push(Te),{point:Ce,angle:dt,path:Ae,tilePath:ye,up:Ze}}function ba(c,i){let a=i.length,u=a+4*c;i.resize(u),i.float32.fill(-1/0,4*a,4*u)}function Kc(c,i,a){let u=i[0],h=i[1];return c[0]=a[0]*u+a[4]*h+a[12],c[1]=a[1]*u+a[5]*h+a[13],c[3]=a[3]*u+a[7]*h+a[15],c}let er=100;class ht{constructor(i,a,u=new ql(i.width+200,i.height+200,25),h=new ql(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=h,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+er,this.screenBottomBoundary=i.height+er,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=a}placeCollisionBox(i,a,u,h,f,y,w,A){let T=u.projectedAnchorX,S=u.projectedAnchorY,D=u.projectedAnchorZ,z=u.elevation,F=u.tileID,G=i.getProjection();if(z&&F){let[Z,ne,le]=G.upVector(F.canonical,u.tileAnchorX,u.tileAnchorY),ue=G.upVectorScale(F.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;T+=Z*z*ue,S+=ne*z*ue,D+=le*z*ue}let U=this.projectAndGetPerspectiveRatio(w,T,S,D,u.tileID,G.name==="globe"||!!z||this.transform.pitch>0,G),$=y*U.perspectiveRatio,N=(u.x1*a+h.x-u.padding)*$+U.point.x,q=(u.y1*a+h.y-u.padding)*$+U.point.y,ee=(u.x2*a+h.x+u.padding)*$+U.point.x,X=(u.y2*a+h.y+u.padding)*$+U.point.y,te=U.perspectiveRatio<=.55||U.occluded;return!this.isInsideGrid(N,q,ee,X)||!f&&this.grid.hitTest(N,q,ee,X,A)||te?{box:[],offscreen:!1,occluded:U.occluded}:{box:[N,q,ee,X],offscreen:this.isOffscreen(N,q,ee,X),occluded:!1}}placeCollisionCircles(i,a,u,h,f,y,w,A,T,S,D,z,F,G,U){let $=[],N=this.transform.elevation,q=i.getProjection(),ee=N?N.getAtTileOffsetFunc(U,this.transform.center.lat,this.transform.worldSize,q):null,X=new r.P(u.tileAnchorX,u.tileAnchorY),{x:te,y:Z,z:ne}=q.projectTilePoint(X.x,X.y,U.canonical);if(ee){let[Te,he,Ce]=ee(X);te+=Te,Z+=he,ne+=Ce}let le=q.name==="globe",ue=this.projectAndGetPerspectiveRatio(w,te,Z,ne,U,le||!!N||this.transform.pitch>0,q),{perspectiveRatio:fe}=ue,Ae=(D?y/fe:y*fe)/r.bc,ye=Jo(te,Z,ne,A),ke=ue.signedDistanceFromCamera>0?va(Ae,f,u.lineOffsetX*Ae,u.lineOffsetY*Ae,!1,ye,X,u,h,A,{},N&&!D?ee:null,D&&!!N,q,U,D):null,Ee=!1,$e=!1,xe=!0;if(ke&&!ue.occluded){let Te=.5*F*fe+G,he=new r.P(-100,-100),Ce=new r.P(this.screenRightBoundary,this.screenBottomBoundary),Ze=new bs,{first:it,last:Je}=ke,dt=it.path.length,Ct=[];for(let St=dt-1;St>=1;St--)Ct.push(it.path[St]);for(let St=1;St<Je.path.length;St++)Ct.push(Je.path[St]);let It=2.5*Te;T&&(Ct=Ct.map(([St,Qt,Gt],Zt)=>(ee&&!le&&(Gt=ee(Zt<dt-1?it.tilePath[dt-1-Zt]:Je.tilePath[Zt-dt+2])[2]),Jo(St,Qt,Gt,T))),Ct.some(St=>St[3]<=0)&&(Ct=[]));let Ot=[];if(Ct.length>0){let St=1/0,Qt=-1/0,Gt=1/0,Zt=-1/0;for(let $t of Ct)St=Math.min(St,$t[0]),Gt=Math.min(Gt,$t[1]),Qt=Math.max(Qt,$t[0]),Zt=Math.max(Zt,$t[1]);Qt>=he.x&&St<=Ce.x&&Zt>=he.y&&Gt<=Ce.y&&(Ot=[Ct.map($t=>new r.P($t[0],$t[1]))],(St<he.x||Qt>Ce.x||Gt<he.y||Zt>Ce.y)&&(Ot=r.ba(Ot,he.x,he.y,Ce.x,Ce.y)))}for(let St of Ot){Ze.reset(St,.25*Te);let Qt=0;Qt=Ze.length<=.5*Te?1:Math.ceil(Ze.paddedLength/It)+1;for(let Gt=0;Gt<Qt;Gt++){let Zt=Gt/Math.max(Qt-1,1),$t=Ze.lerp(Zt),Mn=$t.x+er,ii=$t.y+er;$.push(Mn,ii,Te,0);let un=Mn-Te,wi=ii-Te,dn=Mn+Te,En=ii+Te;if(xe=xe&&this.isOffscreen(un,wi,dn,En),$e=$e||this.isInsideGrid(un,wi,dn,En),!a&&this.grid.hitTestCircle(Mn,ii,Te,z)&&(Ee=!0,!S))return{circles:[],offscreen:!1,collisionDetected:Ee,occluded:!1}}}}return{circles:!S&&Ee||!$e?[]:$,offscreen:xe,collisionDetected:Ee,occluded:ue.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let a=[],u=1/0,h=1/0,f=-1/0,y=-1/0;for(let S of i){let D=new r.P(S.x+er,S.y+er);u=Math.min(u,D.x),h=Math.min(h,D.y),f=Math.max(f,D.x),y=Math.max(y,D.y),a.push(D)}let w=this.grid.query(u,h,f,y).concat(this.ignoredGrid.query(u,h,f,y)),A={},T={};for(let S of w){let D=S.key;if(A[D.bucketInstanceId]===void 0&&(A[D.bucketInstanceId]={}),A[D.bucketInstanceId][D.featureIndex])continue;let z=[new r.P(S.x1,S.y1),new r.P(S.x2,S.y1),new r.P(S.x2,S.y2),new r.P(S.x1,S.y2)];r.bb(a,z)&&(A[D.bucketInstanceId][D.featureIndex]=!0,T[D.bucketInstanceId]===void 0&&(T[D.bucketInstanceId]=[]),T[D.bucketInstanceId].push(D.featureIndex))}return T}insertCollisionBox(i,a,u,h,f){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:h,collisionGroupID:f},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,a,u,h,f){let y=a?this.ignoredGrid:this.grid,w={bucketInstanceId:u,featureIndex:h,collisionGroupID:f};for(let A=0;A<i.length;A+=4)y.insertCircle(w,i[A],i[A+1],i[A+2])}projectAndGetPerspectiveRatio(i,a,u,h,f,y,w){let A=[a,u,h,1],T=!1;h||this.transform.pitch>0?(r.a7.transformMat4(A,A,i),this.fogState&&f&&w.name!=="globe"&&(T=function(z,F,G,U,$,N){let q=N.calculateFogTileMatrix($),ee=[F,G,U];return r.N.transformMat4(ee,ee,q),Jt(z,r.N.length(ee),N.pitch,N._fov)}(this.fogState,a,u,h,f.toUnwrapped(),this.transform)>.9)):Kc(A,A,i);let S=A[3];return{point:new r.P((A[0]/S+1)/2*this.transform.width+er,(-A[1]/S+1)/2*this.transform.height+er),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(w)/S*.5,1.5),signedDistanceFromCamera:S,occluded:y&&A[2]>S||T}}isOffscreen(i,a,u,h){return u<er||i>=this.screenRightBoundary||h<er||a>this.screenBottomBoundary}isInsideGrid(i,a,u,h){return u>=0&&i<this.gridRightBoundary&&h>=0&&a<this.gridBottomBoundary}getViewportMatrix(){let i=r.a6.identity([]);return r.a6.translate(i,i,[-100,-100,0]),i}}function Kl(c,i,a){let u=i.createTileMatrix(c,c.worldSize,a.toUnwrapped());return r.a6.multiply(new Float32Array(16),c.projMatrix,u)}function Jl(c,i,a){if(i.projection.name===a.projection.name)return c.projMatrix;let u=a.clone();return u.setProjection(i.projection),Kl(u,i.getProjection(),c)}function Cs(c,i,a){return i.name===a.projection.name?c.projMatrix:Kl(a,i,c)}class Ms{constructor(i,a,u,h){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?a:-a))):h&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class wa{constructor(i,a,u,h,f,y=!1){this.text=new Ms(i?i.text:null,a,u,f),this.icon=new Ms(i?i.icon:null,a,h,f),this.clipped=y}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class xr{constructor(i,a,u,h=!1){this.text=i,this.icon=a,this.skipFade=u,this.clipped=h}}class Jc{constructor(){this.invProjMatrix=r.a6.create(),this.viewportMatrix=r.a6.create(),this.circles=[]}}class Ca{constructor(i,a,u,h,f){this.bucketInstanceId=i,this.featureIndex=a,this.sourceLayerIndex=u,this.bucketIndex=h,this.tileID=f}}class ec{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){let a=++this.maxGroupID;this.collisionGroups[i]={ID:a,predicate:u=>u.collisionGroupID===a}}return this.collisionGroups[i]}}function Zr(c,i,a,u,h){let{horizontalAlign:f,verticalAlign:y}=r.bf(c),w=-(f-.5)*i,A=-(y-.5)*a,T=r.bd(c,u);return new r.P(w+T[0]*h,A+T[1]*h)}function tc(c,i,a,u,h){let f=new r.P(c,i);return a&&f._rotate(u?h:-h),f}class fd{constructor(i,a,u,h,f,y){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new ht(this.transform,f),this.buildingIndex=y,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new ec(u),this.collisionCircleArrays={},this.prevPlacement=h,h&&(h.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,a,u,h){let f=u.getBucket(a),y=u.latestFeatureIndex;if(!f||!y||a.fqid!==f.layerIds[0])return;let w=f.layers[0].layout,A=u.collisionBoxArray,T=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),S=u.tileSize/r.V,D=u.tileID.toUnwrapped();this.transform.setProjection(f.projection);let z=(F=u.tileID,G=f.getProjection(),U=this.transform,G.name===this.projection?U.calculateProjMatrix(F.toUnwrapped()):Kl(U,G,F));var F,G,U;let $=w.get("text-pitch-alignment")==="map",N=w.get("text-rotation-alignment")==="map";a.compileFilter();let q=a.dynamicFilter(),ee=a.dynamicFilterNeedsFeature(),X=this.transform.calculatePixelsToTileUnitsMatrix(u),te=Yl(z,u.tileID.canonical,$,N,this.transform,f.getProjection(),X),Z=null;if($){let ue=$a(z,u.tileID.canonical,$,N,this.transform,f.getProjection(),X);Z=r.a6.multiply([],this.transform.labelPlaneMatrix,ue)}let ne=null;q&&u.latestFeatureIndex&&(ne={unwrappedTileID:D,dynamicFilter:q,dynamicFilterNeedsFeature:ee,featureIndex:u.latestFeatureIndex}),this.retainedQueryData[f.bucketInstanceId]=new Ca(f.bucketInstanceId,y,f.sourceLayerIndex,f.index,u.tileID);let le={bucket:f,layout:w,posMatrix:z,textLabelPlaneMatrix:te,labelToScreenMatrix:Z,clippingData:ne,scale:T,textPixelRatio:S,holdingForFade:u.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:r.b5(f.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:r.b5(f.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(f.sourceID)};if(h)for(let ue of f.sortKeyRanges){let{sortKey:fe,symbolInstanceStart:Ae,symbolInstanceEnd:ye}=ue;i.push({sortKey:fe,symbolInstanceStart:Ae,symbolInstanceEnd:ye,parameters:le})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:f.symbolInstances.length,parameters:le})}attemptAnchorPlacement(i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N,q){let{textOffset0:ee,textOffset1:X,crossTileID:te}=z,Z=[ee,X],ne=Zr(i,u,h,Z,f),le=this.collisionIndex.placeCollisionBox(G,f,a,tc(ne.x,ne.y,y,w,this.transform.angle),D,A,T,S.predicate);if($){let ue=G.getSymbolInstanceIconSize(q,this.transform.zoom,z.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(G,ue,$,tc(ne.x,ne.y,y,w,this.transform.angle),D,A,T,S.predicate).box.length===0)return}if(le.box.length>0){let ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[te]&&this.prevPlacement.placements[te]&&this.prevPlacement.placements[te].text&&(ue=this.prevPlacement.variableOffsets[te].anchor),this.variableOffsets[te]={textOffset:Z,width:u,height:h,anchor:i,textScale:f,prevAnchor:ue},this.markUsedJustification(G,i,z,U),G.allowVerticalPlacement&&(this.markUsedOrientation(G,U,z),this.placedOrientations[te]=U),{shift:ne,placedGlyphBoxes:le}}}placeLayerBucketPart(i,a,u,h){let{bucket:f,layout:y,posMatrix:w,textLabelPlaneMatrix:A,labelToScreenMatrix:T,clippingData:S,textPixelRatio:D,holdingForFade:z,collisionBoxArray:F,partiallyEvaluatedTextSize:G,partiallyEvaluatedIconSize:U,collisionGroup:$}=i.parameters,N=y.get("text-optional"),q=y.get("icon-optional"),ee=y.get("text-allow-overlap"),X=y.get("icon-allow-overlap"),te=y.get("text-rotation-alignment")==="map",Z=y.get("text-pitch-alignment")==="map",ne=y.get("symbol-z-order")==="viewport-y",le=y.get("symbol-z-elevate");this.transform.setProjection(f.projection);let ue=ee&&(X||!f.hasIconData()||q),fe=X&&(ee||!f.hasTextData()||N);!f.collisionArrays&&F&&f.deserializeCollisionBoxes(F),u&&h&&f.updateCollisionDebugBuffers(this.transform.zoom,F);let Ae=(ye,ke,Ee)=>{let{crossTileID:$e,numVerticalGlyphVertices:xe}=ye;if(S){let dn={zoom:this.transform.zoom,pitch:this.transform.pitch},En=null;if(S.dynamicFilterNeedsFeature){let hn=this.retainedQueryData[f.bucketInstanceId];En=S.featureIndex.loadFeature({featureIndex:ye.featureIndex,bucketIndex:hn.bucketIndex,sourceLayerIndex:hn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,S.dynamicFilter)(dn,En,this.retainedQueryData[f.bucketInstanceId].tileID.canonical,new r.P(ye.tileAnchorX,ye.tileAnchorY),this.transform.calculateDistanceTileData(S.unwrappedTileID)))return this.placements[$e]=new xr(!1,!1,!1,!0),void a.add($e)}if(a.has($e))return;if(z)return void(this.placements[$e]=new xr(!1,!1,!1));let Te=!1,he=!1,Ce=!0,Ze=!1,it=!1,Je=null,dt={box:null,offscreen:null,occluded:null},Ct={box:null,offscreen:null,occluded:null},It=null,Ot=null,St=null,Qt=0,Gt=0,Zt=0;Ee.textFeatureIndex?Qt=Ee.textFeatureIndex:ye.useRuntimeCollisionCircles&&(Qt=ye.featureIndex),Ee.verticalTextFeatureIndex&&(Gt=Ee.verticalTextFeatureIndex);let $t=dn=>{dn.tileID=this.retainedQueryData[f.bucketInstanceId].tileID;let En=this.transform.elevation;dn.elevation=ye.zOffset+(En?En.getAtTileOffset(dn.tileID,dn.tileAnchorX,dn.tileAnchorY):0)},Mn=Ee.textBox;if(Mn){$t(Mn);let dn=hn=>{let Tn=r.b6.horizontal;if(f.allowVerticalPlacement&&!hn&&this.prevPlacement){let si=this.prevPlacement.placedOrientations[$e];si&&(this.placedOrientations[$e]=si,Tn=si,this.markUsedOrientation(f,Tn,ye))}return Tn},En=(hn,Tn)=>{if(f.allowVerticalPlacement&&xe>0&&Ee.verticalTextBox){for(let si of f.writingModes)if(si===r.b6.vertical?(dt=Tn(),Ct=dt):dt=hn(),dt&&dt.box&&dt.box.length)break}else dt=hn()};if(y.get("text-variable-anchor")){let hn=y.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[$e]){let Fn=this.prevPlacement.variableOffsets[$e];hn.indexOf(Fn.anchor)>0&&(hn=hn.filter(ao=>ao!==Fn.anchor),hn.unshift(Fn.anchor))}let Tn=(Fn,ao,xo)=>{let or=f.getSymbolInstanceTextSize(G,ye,this.transform.zoom,ke),Ia=(Fn.x2-Fn.x1)*or+2*Fn.padding,rr=(Fn.y2-Fn.y1)*or+2*Fn.padding,so=ye.hasIconTextFit&&!X?ao:null;so&&$t(so);let qi={box:[],offscreen:!1,occluded:!1},Io=ee?2*hn.length:hn.length;for(let Ho=0;Ho<Io;++Ho){let ar=this.attemptAnchorPlacement(hn[Ho%hn.length],Fn,Ia,rr,or,te,Z,D,w,$,Ho>=hn.length,ye,ke,f,xo,so,G,U);if(ar&&(qi=ar.placedGlyphBoxes,qi&&qi.box&&qi.box.length)){Te=!0,Je=ar.shift;break}}return qi};En(()=>Tn(Mn,Ee.iconBox,r.b6.horizontal),()=>{let Fn=Ee.verticalTextBox;return Fn&&$t(Fn),f.allowVerticalPlacement&&!(dt&&dt.box&&dt.box.length)&&xe>0&&Fn?Tn(Fn,Ee.verticalIconBox,r.b6.vertical):{box:null,offscreen:null,occluded:null}}),dt&&(Te=dt.box,Ce=dt.offscreen,Ze=dt.occluded);let si=dn(!(!dt||!dt.box));if(!Te&&this.prevPlacement){let Fn=this.prevPlacement.variableOffsets[$e];Fn&&(this.variableOffsets[$e]=Fn,this.markUsedJustification(f,Fn.anchor,ye,si))}}else{let hn=(Tn,si)=>{let Fn=f.getSymbolInstanceTextSize(G,ye,this.transform.zoom,ke),ao=this.collisionIndex.placeCollisionBox(f,Fn,Tn,new r.P(0,0),ee,D,w,$.predicate);return ao&&ao.box&&ao.box.length&&(this.markUsedOrientation(f,si,ye),this.placedOrientations[$e]=si),ao};En(()=>hn(Mn,r.b6.horizontal),()=>{let Tn=Ee.verticalTextBox;return f.allowVerticalPlacement&&xe>0&&Tn?($t(Tn),hn(Tn,r.b6.vertical)):{box:null,offscreen:null,occluded:null}}),dn(!!(dt&&dt.box&&dt.box.length))}}if(It=dt,Te=It&&It.box&&It.box.length>0,Ce=It&&It.offscreen,Ze=It&&It.occluded,ye.useRuntimeCollisionCircles){let dn=f.text.placedSymbolArray.get(ye.centerJustifiedTextSymbolIndex>=0?ye.centerJustifiedTextSymbolIndex:ye.verticalPlacedTextSymbolIndex),En=r.b7(f.textSizeData,G,dn),hn=y.get("text-padding");Ot=this.collisionIndex.placeCollisionCircles(f,ee,dn,f.lineVertexArray,f.glyphOffsetArray,En,w,A,T,u,Z,$.predicate,ye.collisionCircleDiameter*En/r.bc,hn,this.retainedQueryData[f.bucketInstanceId].tileID),Te=ee||Ot.circles.length>0&&!Ot.collisionDetected,Ce=Ce&&Ot.offscreen,Ze=Ot.occluded}if(Ee.iconFeatureIndex&&(Zt=Ee.iconFeatureIndex),Ee.iconBox){let dn=En=>{$t(En);let hn=ye.hasIconTextFit&&Je?tc(Je.x,Je.y,te,Z,this.transform.angle):new r.P(0,0),Tn=f.getSymbolInstanceIconSize(U,this.transform.zoom,ye.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(f,Tn,En,hn,X,D,w,$.predicate)};Ct&&Ct.box&&Ct.box.length&&Ee.verticalIconBox?(St=dn(Ee.verticalIconBox),he=St.box.length>0):(St=dn(Ee.iconBox),he=St.box.length>0),Ce=Ce&&St.offscreen,it=St.occluded}let ii=N||ye.numHorizontalGlyphVertices===0&&xe===0,un=q||ye.numIconVertices===0;if(ii||un?un?ii||(he=he&&Te):Te=he&&Te:he=Te=he&&Te,Te&&It&&It.box&&this.collisionIndex.insertCollisionBox(It.box,y.get("text-ignore-placement"),f.bucketInstanceId,Ct&&Ct.box&&Gt?Gt:Qt,$.ID),he&&St&&this.collisionIndex.insertCollisionBox(St.box,y.get("icon-ignore-placement"),f.bucketInstanceId,Zt,$.ID),Ot&&(Te&&this.collisionIndex.insertCollisionCircles(Ot.circles,y.get("text-ignore-placement"),f.bucketInstanceId,Qt,$.ID),u)){let dn=f.bucketInstanceId,En=this.collisionCircleArrays[dn];En===void 0&&(En=this.collisionCircleArrays[dn]=new Jc);for(let hn=0;hn<Ot.circles.length;hn+=4)En.circles.push(Ot.circles[hn+0]),En.circles.push(Ot.circles[hn+1]),En.circles.push(Ot.circles[hn+2]),En.circles.push(Ot.collisionDetected?1:0)}let wi=f.projection.name!=="globe";ue=ue&&(wi||!Ze),fe=fe&&(wi||!it),this.placements[$e]=new xr(Te||ue,he||fe,Ce||f.justReloaded),a.add($e)};if(le&&this.buildingIndex&&(this.buildingIndex.updateZOffset(f,this.retainedQueryData[f.bucketInstanceId].tileID),f.updateZOffset()),ne){let ye=f.getSortedSymbolIndexes(this.transform.angle);for(let ke=ye.length-1;ke>=0;--ke){let Ee=ye[ke];Ae(f.symbolInstances.get(Ee),Ee,f.collisionArrays[Ee])}f.hasAnyZOffset&&r.w(`${f.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(f.hasAnyZOffset){let ye=f.getSortedIndexesByZOffset();for(let ke=0;ke<ye.length;++ke){let Ee=ye[ke];Ae(f.symbolInstances.get(Ee),Ee,f.collisionArrays[Ee])}}else for(let ye=i.symbolInstanceStart;ye<i.symbolInstanceEnd;ye++)Ae(f.symbolInstances.get(ye),ye,f.collisionArrays[ye]);if(u&&f.bucketInstanceId in this.collisionCircleArrays){let ye=this.collisionCircleArrays[f.bucketInstanceId];r.a6.invert(ye.invProjMatrix,w),ye.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(i,a,u,h){let{leftJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:y,rightJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:A,crossTileID:T}=u,S=r.be(a),D=h===r.b6.vertical?A:S==="left"?f:S==="center"?y:S==="right"?w:-1;f>=0&&(i.text.placedSymbolArray.get(f).crossTileID=D>=0&&f!==D?0:T),y>=0&&(i.text.placedSymbolArray.get(y).crossTileID=D>=0&&y!==D?0:T),w>=0&&(i.text.placedSymbolArray.get(w).crossTileID=D>=0&&w!==D?0:T),A>=0&&(i.text.placedSymbolArray.get(A).crossTileID=D>=0&&A!==D?0:T)}markUsedOrientation(i,a,u){let h=a===r.b6.horizontal||a===r.b6.horizontalOnly?a:0,f=a===r.b6.vertical?a:0,{leftJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:w,rightJustifiedTextSymbolIndex:A,verticalPlacedTextSymbolIndex:T}=u,S=i.text.placedSymbolArray;y>=0&&(S.get(y).placedOrientation=h),w>=0&&(S.get(w).placedOrientation=h),A>=0&&(S.get(A).placedOrientation=h),T>=0&&(S.get(T).placedOrientation=f)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;let a=this.prevPlacement,u=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;let h=a?a.symbolFadeChange(i):1,f=a?a.opacities:{},y=a?a.variableOffsets:{},w=a?a.placedOrientations:{};for(let A in this.placements){let T=this.placements[A],S=f[A];S?(this.opacities[A]=new wa(S,h,T.text,T.icon,null,T.clipped),u=u||T.text!==S.text.placed||T.icon!==S.icon.placed):(this.opacities[A]=new wa(null,h,T.text,T.icon,T.skipFade,T.clipped),u=u||T.text||T.icon)}for(let A in f){let T=f[A];if(!this.opacities[A]){let S=new wa(T,h,!1,!1);S.isHidden()||(this.opacities[A]=S,u=u||T.text.placed||T.icon.placed)}}for(let A in y)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=y[A]);for(let A in w)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=w[A]);u?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:i)}updateLayerOpacities(i,a){let u=new Set;for(let h of a){let f=h.getBucket(i);f&&h.latestFeatureIndex&&i.fqid===f.layerIds[0]&&(this.updateBucketOpacities(f,u,h.collisionBoxArray),f.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(f,h.tileID),f.updateZOffset()))}}updateBucketOpacities(i,a,u){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let h=i.layers[0].layout,f=!!i.layers[0].dynamicFilter(),y=new wa(null,0,!1,!1,!0),w=h.get("text-allow-overlap"),A=h.get("icon-allow-overlap"),T=h.get("text-variable-anchor"),S=h.get("text-rotation-alignment")==="map",D=h.get("text-pitch-alignment")==="map",z=new wa(null,0,w&&(A||!i.hasIconData()||h.get("icon-optional")),A&&(w||!i.hasTextData()||h.get("text-optional")),!0);!i.collisionArrays&&u&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(u);let F=(U,$,N)=>{for(let q=0;q<$/4;q++)U.opacityVertexArray.emplaceBack(N)},G=0;for(let U=0;U<i.symbolInstances.length;U++){let $=i.symbolInstances.get(U),{numHorizontalGlyphVertices:N,numVerticalGlyphVertices:q,crossTileID:ee,numIconVertices:X}=$,te=a.has(ee),Z=this.opacities[ee];te?Z=y:Z||(Z=z,this.opacities[ee]=Z),a.add(ee);let ne=N>0||q>0,le=X>0,ue=this.placedOrientations[ee],fe=ue===r.b6.vertical,Ae=ue===r.b6.horizontal||ue===r.b6.horizontalOnly;if(!ne&&!le||Z.isHidden()||G++,ne){let ye=tu(Z.text);F(i.text,N,fe?As:ye),F(i.text,q,Ae?As:ye);let ke=Z.text.isHidden(),{leftJustifiedTextSymbolIndex:Ee,centerJustifiedTextSymbolIndex:$e,rightJustifiedTextSymbolIndex:xe,verticalPlacedTextSymbolIndex:Te}=$,he=i.text.placedSymbolArray,Ce=ke||fe?1:0;Ee>=0&&(he.get(Ee).hidden=Ce),$e>=0&&(he.get($e).hidden=Ce),xe>=0&&(he.get(xe).hidden=Ce),Te>=0&&(he.get(Te).hidden=ke||Ae?1:0);let Ze=this.variableOffsets[ee];Ze&&this.markUsedJustification(i,Ze.anchor,$,ue);let it=this.placedOrientations[ee];it&&(this.markUsedJustification(i,"left",$,it),this.markUsedOrientation(i,it,$))}if(le){let ye=tu(Z.icon),{placedIconSymbolIndex:ke,verticalPlacedIconSymbolIndex:Ee}=$,$e=i.icon.placedSymbolArray,xe=Z.icon.isHidden()?1:0;ke>=0&&(F(i.icon,X,fe?As:ye),$e.get(ke).hidden=xe),Ee>=0&&(F(i.icon,$.numVerticalIconVertices,Ae?As:ye),$e.get(Ee).hidden=xe)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let ye=i.collisionArrays[U];if(ye){let ke=new r.P(0,0),Ee=!0;if(ye.textBox||ye.verticalTextBox){if(T){let xe=this.variableOffsets[ee];xe?(ke=Zr(xe.anchor,xe.width,xe.height,xe.textOffset,xe.textScale),S&&ke._rotate(D?this.transform.angle:-this.transform.angle)):Ee=!1}f&&(Ee=!Z.clipped),ye.textBox&&Ma(i.textCollisionBox.collisionVertexArray,Z.text.placed,!Ee||fe,ke.x,ke.y),ye.verticalTextBox&&Ma(i.textCollisionBox.collisionVertexArray,Z.text.placed,!Ee||Ae,ke.x,ke.y)}let $e=Ee&&!!(!Ae&&ye.verticalIconBox);ye.iconBox&&Ma(i.iconCollisionBox.collisionVertexArray,Z.icon.placed,$e,$.hasIconTextFit?ke.x:0,$.hasIconTextFit?ke.y:0),ye.verticalIconBox&&Ma(i.iconCollisionBox.collisionVertexArray,Z.icon.placed,!$e,$.hasIconTextFit?ke.x:0,$.hasIconTextFit?ke.y:0)}}}if(i.fullyClipped=G===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){let U=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=U.invProjMatrix,i.placementViewportMatrix=U.viewportMatrix,i.collisionCircleArray=U.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,a){let u=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*u>i}setStale(){this.stale=!0}}function Ma(c,i,a,u,h){c.emplaceBack(i?1:0,a?1:0,u||0,h||0),c.emplaceBack(i?1:0,a?1:0,u||0,h||0),c.emplaceBack(i?1:0,a?1:0,u||0,h||0),c.emplaceBack(i?1:0,a?1:0,u||0,h||0)}let nc=Math.pow(2,25),gd=Math.pow(2,24),eu=Math.pow(2,17),ic=Math.pow(2,16),md=Math.pow(2,9),_d=Math.pow(2,8),yd=Math.pow(2,1);function tu(c){if(c.opacity===0&&!c.placed)return 0;if(c.opacity===1&&c.placed)return 4294967295;let i=c.placed?1:0,a=Math.floor(127*c.opacity);return a*nc+i*gd+a*eu+i*ic+a*md+i*_d+a*yd+i}let As=0;class xd{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,a,u,h,f){let y=this._bucketParts;for(;this._currentTileIndex<i.length;)if(a.getBucketParts(y,h,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,f())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,y.sort((w,A)=>w.sortKey-A.sortKey));this._currentPartIndex<y.length;){let w=y[this._currentPartIndex];if(a.placeLayerBucketPart(w,this._seenCrossTileIDs,u,w.symbolInstanceStart===0),this._currentPartIndex++,f())return!0}return!1}}class hl{constructor(i,a,u,h,f,y,w,A,T){this.placement=new fd(i,f,y,w,A,T),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=h,this._done=!1}isDone(){return this._done}continuePlacement(i,a,u,h){let f=r.f.now(),y=()=>{let w=r.f.now()-f;return!this._forceFullPlacement&&w>2};for(;this._currentPlacementIndex>=0;){let w=a[i[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=A)&&(!w.maxzoom||w.maxzoom>A)){let T=w,S=T.layout.get("symbol-z-elevate"),D=this._inProgressLayer=this._inProgressLayer||new xd(T),z=r.ag(w.source,w.scope);if(D.continuePlacement(S?h[z]:u[z],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}let Aa=512/r.V/2;class vd{constructor(i,a,u){this.tileID=i,this.bucketInstanceId=u,this.index=new r.bg(a.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];let h=i.canonical.x*r.V,f=i.canonical.y*r.V;for(let y=0;y<a.length;y++){let{key:w,crossTileID:A,tileAnchorX:T,tileAnchorY:S}=a.get(y),D=Math.floor((h+T)*Aa),z=Math.floor((f+S)*Aa);this.index.add(D,z),this.keys.push(w),this.crossTileIDs.push(A)}this.index.finish()}findMatches(i,a,u){let h=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z),f=Aa/Math.pow(2,a.canonical.z-this.tileID.canonical.z),y=a.canonical.x*r.V,w=a.canonical.y*r.V;for(let A=0;A<i.length;A++){let T=i.get(A);if(T.crossTileID)continue;let{key:S,tileAnchorX:D,tileAnchorY:z}=T,F=Math.floor((y+D)*f),G=Math.floor((w+z)*f),U=this.index.range(F-h,G-h,F+h,G+h);for(let $ of U){let N=this.crossTileIDs[$];if(this.keys[$]===S&&!u.has(N)){u.add(N),T.crossTileID=N;break}}}}}class nu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class oc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){let a=Math.round((i-this.lng)/360);if(a!==0)for(let u in this.indexes){let h=this.indexes[u],f={};for(let y in h){let w=h[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+a),f[w.tileID.key]=w}this.indexes[u]=f}this.lng=i}addBucket(i,a,u){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let f=0;f<a.symbolInstances.length;f++)a.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);let h=this.usedCrossTileIDs[i.overscaledZ];for(let f in this.indexes){let y=this.indexes[f];if(Number(f)>i.overscaledZ)for(let w in y){let A=y[w];A.tileID.isChildOf(i)&&A.findMatches(a.symbolInstances,i,h)}else{let w=y[i.scaledTo(Number(f)).key];w&&w.findMatches(a.symbolInstances,i,h)}}for(let f=0;f<a.symbolInstances.length;f++){let y=a.symbolInstances.get(f);y.crossTileID||(y.crossTileID=u.generate(),h.add(y.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new vd(i,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(i,a){for(let u of a.crossTileIDs)this.usedCrossTileIDs[i].delete(u)}removeStaleBuckets(i){let a=!1;for(let u in this.indexes){let h=this.indexes[u];for(let f in h)i[h[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,h[f]),delete h[f],a=!0)}return a}}class rc{constructor(){this.layerIndexes={},this.crossTileIDs=new nu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,a,u,h){let f=this.layerIndexes[i.fqid];f===void 0&&(f=this.layerIndexes[i.fqid]=new oc);let y=!1,w={};h.name!=="globe"&&f.handleWrapJump(u);for(let A of a){let T=A.getBucket(i);T&&i.fqid===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(A.tileID,T,this.crossTileIDs)&&(y=!0),w[T.bucketInstanceId]=!0)}return f.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(i){let a={};i.forEach(u=>{a[u]=!0});for(let u in this.layerIndexes)a[u]||delete this.layerIndexes[u]}}class Pa{constructor(i=0,a=0,u=0,h=0){if(isNaN(i)||i<0||isNaN(a)||a<0||isNaN(u)||u<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=a,this.left=u,this.right=h}interpolate(i,a,u){return a.top!=null&&i.top!=null&&(this.top=r.U(i.top,a.top,u)),a.bottom!=null&&i.bottom!=null&&(this.bottom=r.U(i.bottom,a.bottom,u)),a.left!=null&&i.left!=null&&(this.left=r.U(i.left,a.left,u)),a.right!=null&&i.right!=null&&(this.right=r.U(i.right,a.right,u)),this}getCenter(i,a){let u=r.aa((this.left+i-this.right)/2,0,i),h=r.aa((this.top+a-this.bottom)/2,0,a);return new r.P(u,h)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Pa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function pl(c,i){let a=r.bk(c,3);r.a6.fromQuat(c,i),r.bm(c,3,a)}function fl(c,i){let a=r.bi.identity([]);return r.bi.rotateZ(a,a,-i),r.bi.rotateX(a,a,-c),a}function iu(c,i){let a=[c[0],c[1],0],u=[i[0],i[1],0];if(r.N.length(a)>=1e-15){let y=r.N.normalize([],a);r.N.scale(u,y,r.N.dot(u,y)),i[0]=u[0],i[1]=u[1]}let h=r.N.cross([],i,c);if(r.N.len(h)<1e-15)return null;let f=Math.atan2(-h[1],h[0]);return fl(Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2]),f)}class gl{constructor(i,a){this.position=i,this.orientation=a}get position(){return this._position}set position(i){if(i){let a=i instanceof r.L?i:new r.L(i[0],i[1],i[2]);this._renderWorldCopies&&(a.x=r.bh(a.x,0,1)),this._position=a}else this._position=null}lookAtPoint(i,a){if(this.orientation=null,!this.position)return;let u=this.position,h=this._elevation?this._elevation.getAtPointOrZero(r.L.fromLngLat(i)):0,f=r.L.fromLngLat(i,h),y=[f.x-u.x,f.y-u.y,f.z-u.z];a||(a=[0,0,1]),a[2]=Math.abs(a[2]),this.orientation=iu(y,a)}setPitchBearing(i,a){this.orientation=fl(r.bj(i),r.bj(-a))}}class Ps{constructor(i,a){this._transform=r.a6.identity([]),this.orientation=a,this.position=i}get mercatorPosition(){let i=this.position;return new r.L(i[0],i[1],i[2])}get position(){let i=r.bk(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var a;i&&r.bm(this._transform,3,[(a=i)[0],a[1],a[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||r.bi.identity([]),i&&pl(this._transform,this._orientation)}getPitchBearing(){let i=this.forward(),a=this.right();return{bearing:Math.atan2(-a[1],a[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,a){this._orientation=fl(i,a),pl(this._transform,this._orientation)}forward(){let i=r.bk(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){let i=r.bk(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){let i=r.bk(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,a){let u=new Float64Array(16);return r.a6.invert(u,this.getWorldToCamera(i,a)),u}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(i,a,u){let h=this.position;r.N.scale(h,h,-i);let f=new Float64Array(16);return r.a6.fromScaling(f,[u,u,u]),r.a6.translate(f,f,h),f[10]*=a,f}getWorldToCamera(i,a){let u=new Float64Array(16),h=new Float64Array(4),f=this.position;return r.bi.conjugate(h,this._orientation),r.N.scale(f,f,-i),r.a6.fromQuat(u,h),r.a6.translate(u,u,f),u[1]*=-1,u[5]*=-1,u[9]*=-1,u[13]*=-1,u[8]*=a,u[9]*=a,u[10]*=a,u[11]*=a,u}getCameraToClipPerspective(i,a,u,h){let f=new Float64Array(16);return r.a6.perspective(f,i,a,u,h),f}getCameraToClipOrthographic(i,a,u,h,f,y){let w=new Float64Array(16);return r.a6.ortho(w,i,a,u,h,f,y),w}getDistanceToElevation(i,a=!1){let u=i===0?0:r.bl(i,a?r.au(this.position[1]):this.position[1]),h=this.forward();return(u-this.position[2])/h[2]}clone(){return new Ps([...this.position],[...this.orientation])}}let Wa=(c,i,a)=>(1-a)*c+a*i,ml=c=>c*c*c*c*c;class Os{constructor(i,a,u,h,f,y,w){this.tileSize=512,this._renderWorldCopies=f===void 0||f,this._minZoom=i||0,this._maxZoom=a||22,this._minPitch=u??0,this._maxPitch=h??60,this.setProjection(y),this.setMaxBounds(w),this.width=0,this.height=0,this._center=new r.bn(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Pa,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Ps,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){let i=new Os(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(i,a=!1){let u=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||u)&&this._updateCameraOnTerrain(),(i||u)&&this._constrainCamera(a),this._calcMatrices()}getProjection(){return r.ac(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};let a=this.projection?this.getProjection():void 0;this.projection=r.bo(this.projectionOptions);let u=!j(a,this.getProjection());return u&&this._calcMatrices(),this.mercatorFromTransition=!1,u}setOrthographicProjectionAtLowPitch(i){return this._orthographicProjectionAtLowPitch!==i&&(this._orthographicProjectionAtLowPitch=i,this._calcMatrices(),!0)}setMercatorFromTransition(){let i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=r.bo({name:"mercator"});let a=i!==this.projection.name;return a&&this._calcMatrices(),a}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){let i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){let i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return r.bl(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.P(this.width,this.height)}get bearing(){return r.bh(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){let a=-i*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=r.b4.create(),r.b4.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){let a=r.aa(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){let i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=r.bj(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){let a=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._setZoom(a),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(i){this._tileCoverLift!==i&&(this._tileCoverLift=i)}_updateCameraOnTerrain(){let i=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,a=this.elevation&&i===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||i===Number.NEGATIVE_INFINITY&&(!a||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);let u=this._elevation;a||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&u.exaggeration()&&this._centerAltitudeValidForExaggeration!==u.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*u.exaggeration(),this._centerAltitudeValidForExaggeration=u.exaggeration()):(this._centerAltitude=i||0,this._centerAltitudeValidForExaggeration=u.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;let i=this._elevation,a=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],u=this.horizonLineFromTop(),h=0,f=0;for(let y=0;y<a.length;y++){let w=new r.P(a[y][0]*this.width,u+a[y][1]*(this.height-u)),A=i.pointCoordinate(w);if(!A)continue;let T=1/Math.hypot(A[0]-this._camera.position[0],A[1]-this._camera.position[1]);h+=A[3]*T,f+=T}return f===0?NaN:h/f}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;let i=this._seaLevelZoom,a=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),u=this.pixelsPerMeter/this.worldSize*a,h=this._mercatorZfromZoom(i),f=this._mercatorZfromZoom(this._maxZoom),y=Math.max(h-u,f);this._setZoom(this._zoomFromMercatorZ(y))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){let a=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude())),u;u=i.z<this._camera.position[2]?[a.x,a.y,a.z]:[i.x,i.y,i.z];let h=r.N.length(r.N.sub([],this._camera.position,u));return r.aa(this._zoomFromMercatorZ(h),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let a=!1;if(i.orientation&&!r.bi.exactEquals(i.orientation,this._camera.orientation)&&(a=this._setCameraOrientation(i.orientation)),i.position){let u=[i.position.x,i.position.y,i.position.z];r.N.exactEquals(u,this._camera.position)||(this._setCameraPosition(u),a=!0)}a&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();let i=this._camera.position,a=new gl;return a.position=new r.L(i[0],i[1],i[2]),a.orientation=this._camera.orientation,a._elevation=this.elevation,a._renderWorldCopies=this.renderWorldCopies,a}_setCameraOrientation(i){if(!r.bi.length(i))return!1;r.bi.normalize(i,i);let a=r.N.transformQuat([],[0,0,-1],i),u=r.N.transformQuat([],[0,-1,0],i);if(u[2]<0)return!1;let h=iu(a,u);return!!h&&(this._camera.orientation=h,!0)}_setCameraPosition(i){let a=this.zoomScale(this.minZoom)*this.tileSize,u=this.zoomScale(this.maxZoom)*this.tileSize,h=this.cameraToCenterDistance;i[2]=r.aa(i[2],h/u,h/a),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,a,u){this._unmodified=!1,this._edgeInsets.interpolate(i,a,u),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){let a=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(i){let a=[new r.bp(0,i)];if(this.renderWorldCopies){let u=this.pointCoordinate(new r.P(0,0)),h=this.pointCoordinate(new r.P(this.width,0)),f=this.pointCoordinate(new r.P(this.width,this.height)),y=this.pointCoordinate(new r.P(0,this.height)),w=Math.floor(Math.min(u.x,h.x,f.x,y.x)),A=Math.floor(Math.max(u.x,h.x,f.x,y.x)),T=1;for(let S=w-T;S<=A+T;S++)S!==0&&a.push(new r.bp(S,i))}return a}isLODDisabled(i){return(!i||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(i,a,u){let h=[];if(a[0]===0&&a[1]===0)return h;for(let y of i){let w=y.canonical,A=y.overscaledZ,T=y.wrap,S=1<<w.z,D=w.x+1<S,z=w.x>0,F=w.y+1<S,G=w.y>0,U=y.wrap-(z?0:1),$=y.wrap+(D?0:1),N=z?w.x-1:S-1,q=D?w.x+1:0;a[0]<0?(h.push(new r.am(A,$,w.z,q,w.y)),a[1]<0&&F&&(h.push(new r.am(A,T,w.z,w.x,w.y+1)),h.push(new r.am(A,$,w.z,q,w.y+1))),a[1]>0&&G&&(h.push(new r.am(A,T,w.z,w.x,w.y-1)),h.push(new r.am(A,$,w.z,q,w.y-1)))):a[0]>0?(h.push(new r.am(A,U,w.z,N,w.y)),a[1]<0&&F&&(h.push(new r.am(A,T,w.z,w.x,w.y+1)),h.push(new r.am(A,U,w.z,N,w.y+1))),a[1]>0&&G&&(h.push(new r.am(A,T,w.z,w.x,w.y-1)),h.push(new r.am(A,U,w.z,N,w.y-1)))):a[1]<0&&F?h.push(new r.am(A,T,w.z,w.x,w.y+1)):G&&h.push(new r.am(A,T,w.z,w.x,w.y-1))}if(h.length>1){h.sort((A,T)=>A.overscaledZ-T.overscaledZ||A.wrap-T.wrap||A.canonical.z-T.canonical.z||A.canonical.x-T.canonical.x||A.canonical.y-T.canonical.y);let y=0,w=0;for(;w<h.length;)h[w].equals(h[y])?++w:h[++y]=h[w++];h.length=y+1}let f=[];for(let y of h)h.some(w=>y.isChildOf(w))||f.push(y);return h=f.filter(y=>!i.some(w=>!!(y.overscaledZ<u&&w.isChildOf(y))||y.equals(w)||y.isChildOf(w))),h}coveringTiles(i){let a=this.coveringZoomLevel(i),u=a,h=this.elevation&&this.elevation.exaggeration(),f=h&&!i.isTerrainDEM,y=this.projection.name==="mercator";if(i.minzoom!==void 0&&a<i.minzoom)return[];i.maxzoom!==void 0&&a>i.maxzoom&&(a=i.maxzoom);let w=this.locationCoordinate(this.center),A=this.center.lat,T=1<<a,S=[T*w.x,T*w.y,0],D=this.projection.name==="globe",z=!D,F=r.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,z),G=D?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),U=T*r.bl(1,this.center.lat),$=this._camera.position[2]/r.bl(1,this.center.lat),N=[T*G.x,T*G.y,$*(z?1:U)],q=D||h,ee=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),X=this.isLODDisabled(!0)?a:0,te;if(this._elevation&&i.isTerrainDEM)te=1e4*this._elevation.exaggeration();else if(this._elevation){let he=this._elevation.getMinMaxForVisibleTiles();te=he?he.max:this._centerAltitude}else te=this._centerAltitude;let Z=i.isTerrainDEM?-te:this._elevation?this._elevation.getMinElevationBelowMSL():0,ne=this.projection.isReprojectedInTileSpace?r.br(this):1,le=he=>{let Ze=new r.L(he.x+25e-6,he.y,he.z),it=new r.L(he.x,he.y+25e-6,he.z),Je=he.toLngLat(),dt=Ze.toLngLat(),Ct=it.toLngLat(),It=this.locationCoordinate(Je),Ot=this.locationCoordinate(dt),St=this.locationCoordinate(Ct),Qt=Math.hypot(Ot.x-It.x,Ot.y-It.y),Gt=Math.hypot(St.x-It.x,St.y-It.y);return Math.sqrt(Qt*Gt)*ne/25e-6},ue=he=>{let Ce=te,Ze=Z;return{aabb:r.bu(this,T,0,0,0,he,Ze,Ce,this.projection),zoom:0,x:0,y:0,minZ:Ze,maxZ:Ce,wrap:he,fullyVisible:!1}},fe=[],Ae=[],ye=a,ke=i.reparseOverscaled?u:a,Ee=he=>he*he,$e=Ee(($-this._centerAltitude)*U),xe=he=>{if(!this._elevation||!he.tileID||!y)return;let Ce=this._elevation.getMinMaxForTile(he.tileID),Ze=he.aabb;Ce?(Ze.min[2]=Ce.min,Ze.max[2]=Ce.max,Ze.center[2]=(Ze.min[2]+Ze.max[2])/2):(he.shouldSplit=Te(he),he.shouldSplit||(Ze.min[2]=Ze.max[2]=Ze.center[2]=this._centerAltitude))},Te=he=>{if(he.zoom<X)return!0;if(he.zoom===ye)return!1;if(he.shouldSplit!=null)return he.shouldSplit;let Ce=he.aabb.distanceX(N),Ze=he.aabb.distanceY(N),it=$e,Je=1;if(D){it=Ee(he.aabb.distanceZ(N));let It=Math.pow(2,he.zoom),Ot=r.au((he.y+1)/It),St=r.au(he.y/It),Qt=Math.min(Math.max(A,Ot),St),Gt=r.bJ(Qt)/r.bJ(A);if(Je=Qt===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Gt/this._mercatorScaleRatio),this.zoom<=r.bG&&he.zoom===ye-1&&Gt>=.9)return!0}else if(f&&(it=Ee(he.aabb.distanceZ(N)*U)),this.projection.isReprojectedInTileSpace&&u<=5){let It=Math.pow(2,he.zoom),Ot=le(new r.L((he.x+.5)/It,(he.y+.5)/It));Je=Ot>.85?1:Ot}let dt=Ce*Ce+Ze*Ze+it,Ct=Ee((1<<ye-he.zoom)*ee*Je*((It,Ot)=>{if(Ot*Ee(.707)<It)return 1;let St=Math.sqrt(Ot/It);return St/(1.4144271570014144+(Math.pow(1.1,St-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(it,$e),dt));return dt<Ct};if(this.renderWorldCopies)for(let he=1;he<=3;he++)fe.push(ue(-he)),fe.push(ue(he));for(fe.push(ue(0));fe.length>0;){let he=fe.pop(),Ce=he.x,Ze=he.y,it=he.fullyVisible,Je=()=>this.projection.name==="globe"&&(he.y===0||he.y===(1<<he.zoom)-1);if(!it){let dt=q?he.aabb.intersects(F):he.aabb.intersectsFlat(F);if(dt===0&&Je()){let Ct=new r.bs(he.zoom,Ce,Ze);dt=r.bt(this,T,Ct,!0).intersects(F)}if(dt===0)continue;it=dt===2}if(he.zoom!==ye&&Te(he))for(let dt=0;dt<4;dt++){let Ct=(Ce<<1)+dt%2,It=(Ze<<1)+(dt>>1),Ot={aabb:y?he.aabb.quadrant(dt):r.bu(this,T,he.zoom+1,Ct,It,he.wrap,he.minZ,he.maxZ,this.projection),zoom:he.zoom+1,x:Ct,y:It,wrap:he.wrap,fullyVisible:it,tileID:void 0,shouldSplit:void 0,minZ:he.minZ,maxZ:he.maxZ};f&&!D&&(Ot.tileID=new r.am(he.zoom+1===ye?ke:he.zoom+1,he.wrap,he.zoom+1,Ct,It),xe(Ot)),fe.push(Ot)}else{let dt=he.zoom===ye?ke:he.zoom;if(i.minzoom&&i.minzoom>dt)continue;if(!it){let St=q?he.aabb.intersectsPrecise(F):he.aabb.intersectsPreciseFlat(F);if(St===0&&Je()){let Qt=new r.bs(he.zoom,Ce,Ze);St=r.bt(this,T,Qt,!0).intersectsPrecise(F)}if(St===0)continue}let Ct=S[0]-(.5+Ce+(he.wrap<<he.zoom))*(1<<a-he.zoom),It=S[1]-.5-Ze,Ot=he.tileID?he.tileID:new r.am(dt,he.wrap,he.zoom,Ce,Ze);Ae.push({tileID:Ot,distanceSq:Ct*Ct+It*It})}}if(this.fogCullDistSq){let he=this.fogCullDistSq,Ce=this.horizonLineFromTop();Ae=Ae.filter(Ze=>{let it=[0,0,0,1],Je=[r.V,r.V,0,1],dt=this.calculateFogTileMatrix(Ze.tileID.toUnwrapped());r.a7.transformMat4(it,it,dt),r.a7.transformMat4(Je,Je,dt);let Ct=r.a7.min([],it,Je),It=r.a7.max([],it,Je),Ot=r.bv(Ct,It);if(Ot===0)return!0;let St=!1,Qt=this._elevation;if(Qt&&Ot>he&&Ce!==0){let Gt=this.calculateProjMatrix(Ze.tileID.toUnwrapped()),Zt;i.isTerrainDEM||(Zt=Qt.getMinMaxForTile(Ze.tileID)),Zt||(Zt={min:Z,max:te});let $t=r.bH(this.rotation),Mn=[$t[0]*r.V,$t[1]*r.V,Zt.max];r.N.transformMat4(Mn,Mn,Gt),St=(1-Mn[1])*this.height*.5<Ce}return Ot<he||St})}return Ae.sort((he,Ce)=>he.distanceSq-Ce.distanceSq).map(he=>he.tileID)}resize(i,a){this.width=i,this.height=a,this.pixelsToGLUnits=[2/i,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){let a=r.aa(i.lat,-r.bw,r.bw),u=this.projection.project(i.lng,a);return new r.P(u.x*this.worldSize,u.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/r.bl(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,a){let u,h,f=this.centerPoint;if(this.projection.name==="globe"){let w=this.worldSize;u=(a.x-f.x)/w,h=(a.y-f.y)/w}else{let w=this.pointCoordinate(a),A=this.pointCoordinate(f);u=w.x-A.x,h=w.y-A.y}let y=this.locationCoordinate(i);this.setLocation(new r.L(y.x-u,y.y-h))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,a){let u=a?r.bl(a,i.lat):void 0,h=this.projection.project(i.lng,i.lat);return new r.L(h.x,h.y,u)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,a){let u=a??this._centerAltitude,h=[i.x,i.y,0,1],f=[i.x,i.y,1,1];r.a7.transformMat4(h,h,this.pixelMatrixInverse),r.a7.transformMat4(f,f,this.pixelMatrixInverse);let y=f[3];r.a7.scale(h,h,1/h[3]),r.a7.scale(f,f,1/y);let w=h[2],A=f[2];return{p0:h,p1:f,t:w===A?0:(u-w)/(A-w)}}screenPointToMercatorRay(i){let a=[i.x,i.y,0,1],u=[i.x,i.y,1,1];return r.a7.transformMat4(a,a,this.pixelMatrixInverse),r.a7.transformMat4(u,u,this.pixelMatrixInverse),r.a7.scale(a,a,1/a[3]),r.a7.scale(u,u,1/u[3]),a[2]=r.bl(a[2],this._center.lat)*this.worldSize,u[2]=r.bl(u[2],this._center.lat)*this.worldSize,r.a7.scale(a,a,1/this.worldSize),r.a7.scale(u,u,1/this.worldSize),new r.a2([a[0],a[1],a[2]],r.N.normalize([],r.N.sub([],u,a)))}rayIntersectionCoordinate(i){let{p0:a,p1:u,t:h}=i,f=r.bl(a[2],this._center.lat),y=r.bl(u[2],this._center.lat);return new r.L(r.U(a[0],u[0],h)/this.worldSize,r.U(a[1],u[1],h)/this.worldSize,r.U(f,y,h))}pointCoordinate(i,a=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,a)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let a=this.projection.pointCoordinate3D(this,i.x,i.y);if(a)return new r.L(a[0],a[1],a[2]);let u=0,h=this.horizonLineFromTop();if(i.y>h)return this.pointCoordinate(i);let f=.02*h,y=i.clone();for(let w=0;w<10&&h-u>f;w++){y.y=r.U(u,h,.66);let A=this.projection.pointCoordinate3D(this,y.x,y.y);A?(h=y.y,a=A):u=y.y}return a?new r.L(a[0],a[1],a[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=r.bx)return!this.isPointAboveHorizon(i);let a=this.pointCoordinate(i);return a.y>=0&&a.y<=1}_coordinatePoint(i,a){let u=a&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,h=[i.x*this.worldSize,i.y*this.worldSize,u+i.toAltitude(),1];return r.a7.transformMat4(h,h,this.pixelMatrix),h[3]>0?new r.P(h[0]/h[3],h[1]/h[3]):new r.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){let{top:i,left:a}=this._edgeInsets,u=this.height-this._edgeInsets.bottom,h=this.width-this._edgeInsets.right,f=this.pointLocation3D(new r.P(a,i)),y=this.pointLocation3D(new r.P(h,i)),w=this.pointLocation3D(new r.P(h,u)),A=this.pointLocation3D(new r.P(a,u)),T=Math.min(f.lng,y.lng,w.lng,A.lng),S=Math.max(f.lng,y.lng,w.lng,A.lng),D=Math.min(f.lat,y.lat,w.lat,A.lat),z=Math.max(f.lat,y.lat,w.lat,A.lat),F=Math.pow(2,-this.zoom)/16*270,G=this.projection.name==="globe"?1:4,U=($,N,q,ee,X)=>{let te=($+q)/2,Z=(N+ee)/2,ne=new r.P(te,Z),{lng:le,lat:ue}=this.pointLocation3D(ne),fe=Math.max(0,T-le,D-ue,le-S,ue-z);T=Math.min(T,le),S=Math.max(S,le),D=Math.min(D,ue),z=Math.max(z,ue),(X<G||fe>F)&&(U($,N,te,Z,X+1),U(te,Z,q,ee,X+1))};if(U(a,i,h,i,1),U(h,i,h,u,1),U(h,u,a,u,1),U(a,u,a,i,1),this.projection.name==="globe"){let[$,N]=r.by(this);$?(z=90,S=180,T=-180):N&&(D=-90,S=180,T=-180)}return new r.ad(new r.bn(T,D),new r.bn(S,z))}_getBoundsRectangular(i,a){let{top:u,left:h}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,y=this.width-this._edgeInsets.right,w=new r.P(h,u),A=new r.P(y,u),T=new r.P(y,f),S=new r.P(h,f),D=this.pointCoordinate(w,i),z=this.pointCoordinate(A,i),F=this.pointCoordinate(T,a),G=this.pointCoordinate(S,a),U=($,N)=>(N.y-$.y)/(N.x-$.x);return D.y>1&&z.y>=0?D=new r.L((1-G.y)/U(G,D)+G.x,1):D.y<0&&z.y<=1&&(D=new r.L(-G.y/U(G,D)+G.x,0)),z.y>1&&D.y>=0?z=new r.L((1-F.y)/U(F,z)+F.x,1):z.y<0&&D.y<=1&&(z=new r.L(-F.y/U(F,z)+F.x,0)),new r.ad().extend(this.coordinateLocation(D)).extend(this.coordinateLocation(z)).extend(this.coordinateLocation(G)).extend(this.coordinateLocation(F))}_getBoundsRectangularTerrain(){let i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);let a=i.visibleDemTiles.reduce((u,h)=>{if(h.dem){let f=h.dem.tree;u.min=Math.min(u.min,f.minimums[0]),u.max=Math.max(u.max,f.maximums[0])}return u},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(a.min*i.exaggeration(),a.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){let a=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,u=this.height/2-a*(1-this._horizonShift);return i?Math.max(0,u):u}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-r.bw,this.maxLat=r.bw,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=r.a5(this.minLng)*this.tileSize,this.worldMaxX=r.a5(this.maxLng)*this.tileSize,this.worldMinY=r.ae(this.maxLat)*this.tileSize,this.worldMaxY=r.ae(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,a){return this.projection.createTileMatrix(this,a,i)}calculateDistanceTileData(i){let a=i.key,u=this._distanceTileDataCache;if(u[a])return u[a];let h=i.canonical,f=1/this.height,y=this.cameraWorldSize,w=y/this.zoomScale(h.z),A=(h.x+Math.pow(2,h.z)*i.wrap)*w,T=h.y*w,S=this.point;S.x*=y/this.worldSize,S.y*=y/this.worldSize;let D=this.angle,z=Math.sin(-D),F=-Math.cos(-D);return u[a]={bearing:[z,F],center:[(S.x-A)*f,(S.y-T)*f],scale:w/r.V*f},u[a]}calculateFogTileMatrix(i){let a=i.key,u=this._fogTileMatrixCache;if(u[a])return u[a];let h=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return r.a6.multiply(h,this.worldToFogMatrix,h),u[a]=new Float32Array(h),u[a]}calculateProjMatrix(i,a=!1,u=!1){let h=i.key,f;if(f=u?this._expandedProjMatrixCache:a?this._alignedProjMatrixCache:this._projMatrixCache,f[h])return f[h];let y=this.calculatePosMatrix(i,this.worldSize),w;return w=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:u?this.expandedFarZProjMatrix:a?this.alignedProjMatrix:this.projMatrix,r.a6.multiply(y,w,y),f[h]=new Float32Array(y),f[h]}calculatePixelsToTileUnitsMatrix(i){let a=i.tileID.key,u=this._pixelsToTileUnitsCache;if(u[a])return u[a];let h=r.bz(i,this);return u[a]=h,u[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){let i=1/this.worldSize,a=r.a6.fromScaling([],[i,i,i]);return r.a6.multiply(a,a,this.globeMatrix),a}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;let i=this._elevation;this._updateCameraState();let a=r.bl(1,this._center.lat)*this.worldSize,u=this._computeCameraPosition(a),h=this._camera.forward(),f=r.bl(1,this._center.lat);u[2]/=f,h[2]/=f,r.N.normalize(h,h);let y=i.raycast(u,h,i.exaggeration());if(y){let w=r.N.scaleAndAdd([],u,h,y),A=new r.L(w[0],w[1],r.bl(w[2],r.au(w[1]))),T=(A.z+r.N.length([A.x-u[0],A.y-u[1],A.z-u[2]*f]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(T),this._centerAltitude=A.toAltitude(),this._center=this.coordinateLocation(A),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;let a=this._elevation,u=r.bl(1,this._center.lat)*this.worldSize,h=this._computeCameraPosition(u),f=a.getAtPointOrZero(new r.L(...h)),y=this.pixelsPerMeter/this.worldSize*f,w=this._minimumHeightOverTerrain(),A=h[2]-y;if(A<=w)if(A<0||i){let T=this.locationCoordinate(this._center,this._centerAltitude),S=[h[0],h[1],T.z-h[2]],D=r.N.length(S);S[2]-=(w-A)/this._pixelsPerMercatorPixel;let z=r.N.length(S);if(z===0)return;r.N.scale(S,S,D/z*this._pixelsPerMercatorPixel),this._camera.position=[h[0],h[1],T.z*this._pixelsPerMercatorPixel-S[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){let z=this.center;return z.lat=r.aa(z.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(z.lng=r.aa(z.lng,this.minLng,this.maxLng)),this.center=z,void(this._constraining=!1)}let a=this._unmodified,{x:u,y:h}=this.point,f=0,y=u,w=h,A=this.width/2,T=this.height/2,S=this.worldMinY*this.scale,D=this.worldMaxY*this.scale;if(h-T<S&&(w=S+T),h+T>D&&(w=D-T),D-S<this.height&&(f=Math.max(f,this.height/(D-S)),w=(D+S)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){let z=this.worldMinX*this.scale,F=this.worldMaxX*this.scale,G=this.worldSize/2-(z+F)/2;y=(u+G+this.worldSize)%this.worldSize-G,y-A<z&&(y=z+A),y+A>F&&(y=F-A),F-z<this.width&&(f=Math.max(f,this.width/(F-z)),y=(F+z)/2)}y===u&&w===h||(this.center=this.unproject(new r.P(y,w))),f&&(this.zoom+=this.scaleZoom(f)),this._constrainCamera(),this._unmodified=a,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;let i=this.centerOffset,a=this.projection.name==="globe",u=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=r.bl(1,this.center.lat)/r.bl(1,r.bI));let h=r.bA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,h),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;let f=this.projection.zAxisUnit==="meters"?u:1,y=this._camera.getWorldToCamera(this.worldSize,f),w,A=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(A[8]=2*-i.x/this.width,A[9]=2*i.y/this.height,this.isOrthographic){let ue=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),fe=ue*this.aspect,Ae=-fe,ye=-ue;fe-=i.x,Ae-=i.x,ue+=i.y,ye+=i.y,w=this._camera.getCameraToClipOrthographic(Ae,fe,ye,ue,this._nearZ,this._farZ),((ke,Ee,$e,xe)=>{for(let Te=0;Te<16;Te++)ke[Te]=Wa(Ee[Te],$e[Te],xe)})(w,w,A,ml(this.pitch>=15?1:this.pitch/15))}else w=A;let T=r.a6.mul([],A,y),S=r.a6.mul([],w,y);if(this.projection.isReprojectedInTileSpace){let ue=this.locationCoordinate(this.center),fe=r.a6.identity([]);r.a6.translate(fe,fe,[ue.x*this.worldSize,ue.y*this.worldSize,0]),r.a6.multiply(fe,fe,r.bB(this)),r.a6.translate(fe,fe,[-ue.x*this.worldSize,-ue.y*this.worldSize,0]),r.a6.multiply(S,S,fe),r.a6.multiply(T,T,fe),this.inverseAdjustmentMatrix=r.bC(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=r.a6.scale([],S,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=S,this.invProjMatrix=r.a6.invert(new Float64Array(16),this.projMatrix),a){let ue=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);ue[8]=2*-i.x/this.width,ue[9]=2*i.y/this.height,this.expandedFarZProjMatrix=r.a6.mul([],ue,y)}else this.expandedFarZProjMatrix=this.projMatrix;let D=r.a6.invert([],w);this.frustumCorners=r.bD.fromInvProjectionMatrix(D,this.horizonLineFromTop(),this.height),this.cameraFrustum=r.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!a);let z=new Float32Array(16);r.a6.identity(z),r.a6.scale(z,z,[1,-1,1]),r.a6.rotateX(z,z,this._pitch),r.a6.rotateZ(z,z,this.angle);let F=r.a6.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=r.a6.clone(F);let G=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;F[8]=2*-i.x/this.width,F[9]=2*(i.y+G)/this.height,this.skyboxMatrix=r.a6.multiply(z,F,z);let U=this.point,$=U.x,N=U.y,q=this.width%2/2,ee=this.height%2/2,X=Math.cos(this.angle),te=Math.sin(this.angle),Z=$-Math.round($)+X*q+te*ee,ne=N-Math.round(N)+X*ee+te*q,le=new Float64Array(S);if(r.a6.translate(le,le,[Z>.5?Z-1:Z,ne>.5?ne-1:ne,0]),this.alignedProjMatrix=le,S=r.a6.create(),r.a6.scale(S,S,[this.width/2,-this.height/2,1]),r.a6.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=r.a6.create(),r.a6.scale(S,S,[1,-1,1]),r.a6.translate(S,S,[-1,-1,0]),r.a6.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=r.a6.multiply(new Float64Array(16),this.labelPlaneMatrix,T),this._calcFogMatrices(),this._distanceTileDataCache={},S=r.a6.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=S,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=r.bE(this);let ue=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=r.N.transformMat4(ue,ue,y),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=S;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};let i=this.cameraWorldSizeForFog,a=this.cameraPixelsPerMeter,u=this._camera.position,h=1/this.height/this._pixelsPerMercatorPixel,f=[i,i,a];r.N.scale(f,f,h),r.N.scale(u,u,-1),r.N.multiply(u,u,f);let y=r.a6.create();r.a6.translate(y,y,u),r.a6.scale(y,y,f),this.mercatorFogMatrix=y,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,a,h)}_computeCameraPosition(i){let a=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,u=this._camera.forward(),h=this.point,f=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*a-i/this.worldSize*this._centerAltitude;return[h.x/this.worldSize-u[0]*f,h.y/this.worldSize-u[1]*f,i/this.worldSize*this._centerAltitude-u[2]*f]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){let a=this._maxCameraBoundsDistance()*Math.cos(this._pitch),u=this._camera.position[2],h=i[2],f=1;this.projection.wrap&&(this.center=this.center.wrap()),h>0&&(f=Math.min((a-u)/h,1)),this._camera.position=r.N.scaleAndAdd([],this._camera.position,i,f),this._updateStateFromCamera()}_updateStateFromCamera(){let i=this._camera.position,a=this._camera.forward(),{pitch:u,bearing:h}=this._camera.getPitchBearing(),f=r.bl(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,y=this._mercatorZfromZoom(this._maxZoom)*Math.cos(r.bj(this._maxPitch)),w=Math.max((i[2]-f)/Math.cos(u),y),A=this._zoomFromMercatorZ(w);r.N.scaleAndAdd(i,i,a,w),this._pitch=r.aa(u,r.bj(this.minPitch),r.bj(this.maxPitch)),this.angle=r.bh(h,-Math.PI,Math.PI),this._setZoom(r.aa(A,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new r.L(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){let i=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let a=0,u=r.bx,h=0,f=1/0;for(;u-a>1e-6&&u>a;){let y=a+.5*(u-a),w=this.tileSize*Math.pow(2,y),A=this.getCameraToCenterDistance(this.projection,y,w),T=this.scaleZoom(A/(i*this.tileSize)),S=Math.abs(y-T);S<f&&(f=S,h=y),y<T?a=y:u=y}return h}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(r.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,a){let u=Math.min(i.x,a.x),h=Math.max(i.x,a.x),f=Math.min(i.y,a.y),y=Math.max(i.y,a.y);if(f<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;let w=[new r.P(u,f),new r.P(h,y),new r.P(u,y),new r.P(h,f)],A=this.renderWorldCopies?-3:0,T=this.renderWorldCopies?4:1;for(let S of w){let D=this.pointRayIntersection(S);if(D.t<0)return!0;let z=this.rayIntersectionCoordinate(D);if(z.x<A||z.y<0||z.x>T||z.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+r.bF(this.fovAboveCenter)>88||this.anyCornerOffEdge(new r.P(0,0),new r.P(this.width,this.height))}zoomDeltaToMovement(i,a){let u=r.N.length(r.N.sub([],this._camera.position,i)),h=this._zoomFromMercatorZ(u)+a;return u-this._mercatorZfromZoom(h)}getCameraPoint(){if(this.projection.name==="globe"){let i=function([a,u,h],f){let y=[a,u,h,1];r.a7.transformMat4(y,y,f);let w=y[3]=Math.max(y[3],1e-6);return y[0]/=w,y[1]/=w,y[2]/=w,y}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new r.P(i[0],i[1])}{let i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.P(0,i))}}getCameraToCenterDistance(i,a=this.zoom,u=this.worldSize){let h=r.bA(i,a,this.width,this.height,1024),f=i.pixelSpaceConversion(this.center.lat,u,h),y=.5/Math.tan(.5*this._fov)*this.height*f;return this.isOrthographic&&(y=Wa(1,y,ml(this.pitch>=15?1:this.pitch/15))),y}getWorldToCameraMatrix(){let i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&r.a6.multiply(i,i,this.globeMatrix),i}getFrustum(i){return r.bq.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,this.projection.zAxisUnit==="meters")}}let oo={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},qr=(c,i)=>{if(i>0&&c.terrain&&r.w("Cutoff is currently disabled on terrain"),i<=0||c.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};let a=c.transform,u=Math.max(Math.abs(a._zoom-(c.minCutoffZoom-1)),1),h=a.isLODDisabled(!1)?r.O(60,45,a.pitch):r.O(30,15,a.pitch),f=a._farZ-a._nearZ,y=i*a.height,w=((1-(A=h))*a.cameraToCenterDistance+A*(a._farZ+y))*u;var A;return{shouldRenderCutoff:h<1,uniformValues:{u_cutoff_params:[a._nearZ,a._farZ,(w-a._nearZ)/f,(w-y-a._nearZ)/f]}}},uo={cascadeCount:2,shadowMapResolution:2048};class ou{constructor(i,a){this.aabb=i,this.lastCascade=a}}class bd{add(i,a){let u=this.receivers[i.key];u!==void 0?(u.aabb.min[0]=Math.min(u.aabb.min[0],a.min[0]),u.aabb.min[1]=Math.min(u.aabb.min[1],a.min[1]),u.aabb.min[2]=Math.min(u.aabb.min[2],a.min[2]),u.aabb.max[0]=Math.max(u.aabb.max[0],a.max[0]),u.aabb.max[1]=Math.max(u.aabb.max[1],a.max[1]),u.aabb.max[2]=Math.max(u.aabb.max[2],a.max[2])):this.receivers[i.key]=new ou(a,null)}clear(){this.receivers={}}get(i){return this.receivers[i.key]}computeRequiredCascades(i,a,u){let h=r.bS.fromPoints(i.points),f=0;for(let y in this.receivers){let w=this.receivers[y];if(!w||!h.intersectsAabb(w.aabb))continue;w.aabb.min=h.closestPoint(w.aabb.min),w.aabb.max=h.closestPoint(w.aabb.max);let A=w.aabb.getCorners();for(let T=0;T<u.length;T++){let S=!0;for(let D of A){let z=[D[0]*a,D[1]*a,D[2]];if(r.N.transformMat4(z,z,u[T].matrix),z[0]<-1||z[0]>1||z[1]<-1||z[1]>1){S=!1;break}}if(w.lastCascade=T,f=Math.max(f,T),S)break}}return f+1}}class ru{constructor(i){this.painter=i,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new bd,this._depthMode=new kt(i.context.gl.LEQUAL,kt.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,i.tp.registerParameter(uo,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),i.tp.registerParameter(uo,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(let i of this._cascades)i.texture.destroy(),i.framebuffer.destroy();this._cascades=[]}updateShadowParameters(i,a){let u=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!a||!a.properties)return;let h=a.properties.get("shadow-intensity");if(!a.shadowsEnabled()||h<=0||(this._shadowLayerCount=u.style.order.reduce((G,U)=>{let $=u.style._mergedLayers[U];return G+($.hasShadowPass()&&!$.isHidden(i.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;let f=u.context,y=uo.shadowMapResolution,w=uo.shadowMapResolution;if(this._cascades.length===0||uo.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let G=0;G<uo.cascadeCount;++G){let U=u._shadowMapDebug,$=f.gl,N=f.createFramebuffer(y,w,U,"texture"),q=new r.T(f,{width:y,height:w,data:null},$.DEPTH_COMPONENT);if(N.depthAttachment.set(q.texture),U){let ee=new r.T(f,{width:y,height:w,data:null},$.RGBA);N.colorAttachment.set(ee.texture)}this._cascades.push({framebuffer:N,texture:q,matrix:[],far:0,boundingSphereRadius:0,frustum:new r.bq,scale:0})}}this.shadowDirection=qa(a);let A=0;if(i.elevation){let G=i.elevation,U=[1e4,-1e4];G.visibleDemTiles.filter($=>$.dem).forEach($=>{let N=$.dem.tree;U[0]=Math.min(U[0],N.minimums[0]),U[1]=Math.max(U[1],N.maximums[0])}),U[0]!==1e4&&(A=(U[1]-U[0])*G.exaggeration())}let T=1.5*i.cameraToCenterDistance,S=3*T,D=new Float64Array(16);for(let G=0;G<this._cascades.length;++G){let U=this._cascades[G],$=i.height/50,N=1;uo.cascadeCount===1?N=S:G===0?N=T:($=T,N=S);let[q,ee]=wd(i,this.shadowDirection,$,N,uo.shadowMapResolution,A);U.scale=i.scale,U.matrix=q,U.boundingSphereRadius=ee,r.a6.invert(D,U.matrix),U.frustum=r.bq.fromInvProjectionMatrix(D,1,0,!0),U.far=N}let z=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[z].far,this._cascades[z].far],this._uniformValues.u_shadow_intensity=h,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/uo.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=uo.shadowMapResolution,this._uniformValues.u_shadowmap_0=oo.ShadowMap0,this._uniformValues.u_shadowmap_1=oo.ShadowMap0+1,this._groundShadowTiles=u.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});let F=u.transform.elevation;for(let G of this._groundShadowTiles){let U={min:0,max:0};if(F){let $=F.getMinMaxForTile(G);$&&(U=$)}this.addShadowReceiver(G.toUnwrapped(),U.min,U.max)}}get enabled(){return this._enabled}set enabled(i){this._enabled=i}drawShadowPass(i,a){if(!this._enabled)return;let u=this.painter,h=u.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(u.transform.getFrustum(0),u.transform.worldSize,this._cascades),h.viewport.set([0,0,uo.shadowMapResolution,uo.shadowMapResolution]);for(let f=0;f<this._numCascadesToRender;++f){u.currentShadowCascade=f,h.bindFramebuffer.set(this._cascades[f].framebuffer.framebuffer),h.clear({color:r.ax.white,depth:1});for(let y of i.order){let w=i._mergedLayers[y];if(!w.hasShadowPass()||w.isHidden(u.transform.zoom))continue;let A=i.getLayerSourceCache(w),T=A?a[A.id]:void 0;(w.type==="model"||T&&T.length)&&u.renderLayer(u,A,w,T)}}u.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;let i=this.painter,a=i.style,u=i.context,h=a.directionalLight,f=a.ambientLight;if(!h||!f)return;let y=[],w=qr(i,i.longestCutoffRange);w.shouldRenderCutoff&&y.push("RENDER_CUTOFF");let A=_l(h,f),T=new kt(u.gl.LEQUAL,kt.ReadOnly,i.depthRangeFor3D);for(let S of this._groundShadowTiles){let D=S.toUnwrapped(),z=i.isTileAffectedByFog(S),F=i.getOrCreateProgram("groundShadow",{defines:y,overrideFog:z});this.setupShadows(D,F),i.uploadCommonUniforms(u,F,D,null,w);let G={u_matrix:i.transform.calculateProjMatrix(D),u_ground_shadow_factor:A};F.draw(i,u.gl.TRIANGLES,T,Ut.disabled,an.multiply,Dt.disabled,G,"ground_shadow",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments,{},i.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?an.unblended:an.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(i){let a=this.painter.transform,u=a.calculatePosMatrix(i,a.worldSize);return r.a6.multiply(u,this._cascades[this.painter.currentShadowCascade].matrix,u),Float32Array.from(u)}calculateShadowPassMatrixFromMatrix(i){return r.a6.multiply(i,this._cascades[this.painter.currentShadowCascade].matrix,i),Float32Array.from(i)}setupShadows(i,a,u,h=0){if(!this._enabled)return;let f=this.painter.transform,y=this.painter.context,w=y.gl,A=this._uniformValues,T=new Float64Array(16),S=f.calculatePosMatrix(i,f.worldSize);for(let D=0;D<this._cascades.length;D++)r.a6.multiply(T,this._cascades[D].matrix,S),A[D===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(T),y.activeTexture.set(w.TEXTURE0+oo.ShadowMap0+D),this._cascades[D].texture.bind(w.NEAREST,w.CLAMP_TO_EDGE);if(this.useNormalOffset=!!u,this.useNormalOffset){let D=r.bR(i.canonical),z=2/f.tileSize*r.V/uo.shadowMapResolution,F=z*this._cascades[0].boundingSphereRadius,G=z*this._cascades[this._cascades.length-1].boundingSphereRadius,U=(u==="vector-tile"?1:3)/Math.pow(2,h-i.canonical.z-(1-f.zoom+Math.floor(f.zoom)));A.u_shadow_normal_offset=[D,F*U,G*U],A.u_shadow_bias=[6e-5,.0012,.012]}else A.u_shadow_bias=[36e-5,.0012,.012];a.setShadowUniformValues(y,A)}setupShadowsFromMatrix(i,a,u=!1){if(!this._enabled)return;let h=this.painter.context,f=h.gl,y=this._uniformValues,w=new Float64Array(16);for(let A=0;A<uo.cascadeCount;A++)r.a6.multiply(w,this._cascades[A].matrix,i),y[A===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(w),h.activeTexture.set(f.TEXTURE0+oo.ShadowMap0+A),this._cascades[A].texture.bind(f.NEAREST,f.CLAMP_TO_EDGE);this.useNormalOffset=u,u?(y.u_shadow_normal_offset=[1,5,5],y.u_shadow_bias=[6e-5,.0012,.012]):y.u_shadow_bias=[36e-5,.0012,.012],a.setShadowUniformValues(h,y)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(i,a,u,h){if(h[2]>=0)return{};let f=function(A,T,S){let D=S/(1<<A.canonical.z);return new r.bS([A.canonical.x*D+A.wrap*S,A.canonical.y*D+A.wrap*S,0],[(A.canonical.x+1)*D+A.wrap*S,(A.canonical.y+1)*D+A.wrap*S,T])}(i,a,u).getCorners(),y=a/-h[2];h[0]<0?(r.N.add(f[0],f[0],[h[0]*y,0,0]),r.N.add(f[3],f[3],[h[0]*y,0,0])):h[0]>0&&(r.N.add(f[1],f[1],[h[0]*y,0,0]),r.N.add(f[2],f[2],[h[0]*y,0,0])),h[1]<0?(r.N.add(f[0],f[0],[0,h[1]*y,0]),r.N.add(f[1],f[1],[0,h[1]*y,0])):h[1]>0&&(r.N.add(f[2],f[2],[0,h[1]*y,0]),r.N.add(f[3],f[3],[0,h[1]*y,0]));let w={};return w.vertices=f,w.planes=[Za(f[1],f[0],f[4]),Za(f[2],f[1],f[5]),Za(f[3],f[2],f[6]),Za(f[0],f[3],f[7])],w}addShadowReceiver(i,a,u){this._receivers.add(i,r.bS.fromTileIdAndHeight(i,a,u))}getMaxCascadeForTile(i){let a=this._receivers.get(i);return a&&a.lastCascade?a.lastCascade:0}}function Za(c,i,a){let u=r.N.sub([],a,i),h=r.N.sub([],c,i),f=r.N.cross([],u,h),y=r.N.length(f);return y===0?[0,0,1,0]:(r.N.scale(f,f,1/y),[f[0],f[1],f[2],-r.N.dot(f,i)])}function qa(c){let i=c.properties.get("direction"),a=r.bQ(i.x,i.y,i.z);a[2]=r.aa(a[2],0,75);let u=r.bT([a[0],a[1],a[2]]);return r.N.fromValues(u.x,u.y,u.z)}function _l(c,i){let a=c.properties.get("color"),u=c.properties.get("intensity"),h=c.properties.get("direction"),f=[h.x,h.y,h.z],y=i.properties.get("color"),w=i.properties.get("intensity"),A=Math.max(r.N.dot([0,0,1],f),0),T=[0,0,0];r.N.scale(T,y.toArray01Linear().slice(0,3),w);let S=[0,0,0];return r.N.scale(S,a.toArray01Linear().slice(0,3),A*u),r.bU([T[0]>0?T[0]/(T[0]+S[0]):0,T[1]>0?T[1]/(T[1]+S[1]):0,T[2]>0?T[2]/(T[2]+S[2]):0])}function wd(c,i,a,u,h,f){let y=c.zoom,w=c.scale,A=c.worldSize,T=1/A,S=c.aspect,D=Math.sqrt(1+S*S)*Math.tan(.5*c.fovX),z=D*D,F=u-a,G=u+a,U,$;z>F/G?(U=u,$=u*D):(U=.5*G*(1+z),$=.5*Math.sqrt(F*F+2*(u*u+a*a)*z+G*G*z*z));let N=c.projection.pixelsPerMeter(c.center.lat,A),q=c._camera.getCameraToWorldMercator(),ee=[0,0,-U*T];r.N.transformMat4(ee,ee,q);let X=$*T,te=c._edgeInsets;if(!(te.left===0&&te.top===0&&te.right===0&&te.bottom===0||te.left===te.right&&te.top===te.bottom)){let it=c._camera.getWorldToCamera(c.worldSize,c.projection.zAxisUnit==="meters"?N:1),Je=c._camera.getCameraToClipPerspective(c._fov,c.width/c.height,a,u);Je[8]=2*-c.centerOffset.x/c.width,Je[9]=2*c.centerOffset.y/c.height;let dt=new Float64Array(16);r.a6.mul(dt,Je,it);let Ct=new Float64Array(16);r.a6.invert(Ct,dt);let It=r.bq.fromInvProjectionMatrix(Ct,A,y,!0);for(let Ot of It.points){let St=((Z=Ot)[0]/=w,Z[1]/=w,Z[2]=r.bl(Z[2],c._center.lat),Z);X=Math.max(X,r.N.len(r.N.subtract([],ee,St)))}}var Z;X*=h/(h-1);let ne=Math.acos(i[2]),le=Math.atan2(-i[0],-i[1]),ue=new Ps;ue.position=ee,ue.setPitchBearing(ne,le);let fe=ue.getWorldToCamera(A,N),Ae=X*A,ye=Math.min(c._mercatorZfromZoom(17)*A*-2,-2*Ae),ke=ue.getCameraToClipOrthographic(-Ae,Ae,-Ae,Ae,ye,(Ae+f*N)/i[2]),Ee=new Float64Array(16);r.a6.multiply(Ee,ke,fe);let $e=r.N.fromValues(Math.floor(1e6*ee[0])/1e6*A,Math.floor(1e6*ee[1])/1e6*A,0),xe=.5*h,Te=[0,0,0];r.N.transformMat4(Te,$e,Ee),r.N.scale(Te,Te,xe);let he=[Math.floor(Te[0]),Math.floor(Te[1]),Math.floor(Te[2])],Ce=[0,0,0];r.N.sub(Ce,Te,he),r.N.scale(Ce,Ce,-1/xe);let Ze=new Float64Array(16);return r.a6.identity(Ze),r.a6.translate(Ze,Ze,Ce),r.a6.multiply(Ee,Ze,Ee),[Ee,Ae]}let Oa=(c,i)=>wt(c,i&&i.filter(a=>a.identifier!=="source.canvas")),Cd=r.ac(_n,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),Ya=r.ac(_n,["setCenter","setZoom","setBearing","setPitch"]),au={version:8,layers:[],sources:{}},Md={duration:300,delay:0},Bh=new Set(["fill","line","background","hillshade","raster"]);class vr extends r.E{constructor(i,a={}){super(),this.map=i,this.scope=a.scope||"",this.fragments=[],this.importDepth=a.importDepth||0,this.importsCache=a.importsCache||new Map,this.resolvedImports=a.resolvedImports||new Set,this.transition=r.e({},Md),this._buildingIndex=new Zc(this),this.crossTileSymbolIndex=new rc,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=a.styleChanges||new La,this.dispatcher=a.dispatcher?a.dispatcher:new r.bW(r.bX(),this),a.imageManager?this.imageManager=a.imageManager:(this.imageManager=new Nl,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=a.glyphManager?a.glyphManager:new r.bY(i._requestManager,a.localFontFamily?r.bZ.all:a.localIdeographFontFamily?r.bZ.ideographs:r.bZ.none,a.localFontFamily||a.localIdeographFontFamily),a.modelManager?this.modelManager=a.modelManager:(this.modelManager=new ol(i._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=a.configOptions?a.configOptions:new Map,this._configDependentLayers=a.configDependentLayers?a.configDependentLayers:new Set,this._config=a.config,this.dispatcher.broadcast("setReferrer",r.b_());let u=this;this._rtlTextPluginCallback=vr.registerForPluginStateChange(h=>{u.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:h.pluginStatus,pluginURL:h.pluginURL},(f,y)=>{if(r.b$(f),y&&y.every(w=>w))for(let w in u._sourceCaches){let A=u._sourceCaches[w],T=A.getSource().type;T!=="vector"&&T!=="geojson"||A.reload()}})}),this.on("data",h=>{if(h.dataType!=="source"||h.sourceDataType!=="metadata")return;let f=this.getOwnSource(h.sourceId);if(f&&f.vectorLayerIds)for(let y in this._layers){let w=this._layers[y];w.source===f.id&&this._validateLayer(w)}})}loadURL(i,a={}){this.fire(new r.b("dataloading",{dataType:"style"}));let u=typeof a.validate=="boolean"?a.validate:!r.c0(i);i=this.map._requestManager.normalizeStyleURL(i,a.accessToken),this.resolvedImports.add(i);let h=this.importsCache.get(i);if(h)return this._load(h,u);let f=this.map._requestManager.transformRequest(i,r.R.Style);this._request=r.g(f,(y,w)=>{if(this._request=null,y)this.fire(new r.a(y));else if(w)return this.importsCache.set(i,w),this._load(w,u)})}loadJSON(i,a={}){this.fire(new r.b("dataloading",{dataType:"style"})),this._request=r.f.frame(()=>{this._request=null,this._load(i,a.validate!==!1)})}loadEmpty(){this.fire(new r.b("dataloading",{dataType:"style"})),this._load(au,!1)}_loadImports(i,a,u){if(this.importDepth>=4)return r.w("Style doesn't support nesting deeper than 5"),Promise.resolve();let h=[];for(let f of i){let y=this._createFragmentStyle(f),w=new Promise(S=>{y.once("style.import.load",S),y.once("error",S)}).then(()=>this.mergeAll());if(h.push(w),this.resolvedImports.has(f.url)){y.loadEmpty();continue}let A=f.data||this.importsCache.get(f.url);A?y.loadJSON(A,{validate:a}):f.url?y.loadURL(f.url,{validate:a}):y.loadEmpty();let T={style:y,id:f.id,config:f.config};if(u){let S=this.fragments.findIndex(({id:D})=>D===u);this.fragments=this.fragments.slice(0,S).concat(T).concat(this.fragments.slice(S))}else this.fragments.push(T)}return Promise.allSettled(h)}_createFragmentStyle(i){let a=this.scope?r.ag(i.id,this.scope):i.id,u=new vr(this.map,{scope:a,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:i.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return u.setEventedParent(this.map,{style:u}),u}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});let i=this.isRootStyle();this._shouldPrecompile=i,this.fire(new r.b(i?"style.load":"style.import.load"))}_load(i,a){let u=i.schema;if(this.isRootStyle()&&(i.fragment||u&&i.fragment!==!1)){let y=r.e({},au,{imports:[{id:"basemap",data:i,url:""}]});return void this._load(y,a)}if(this.setConfig(this._config,u),a&&Oa(this,qo(i)))return;this._loaded=!0,this.stylesheet=r.c1(i);for(let y in i.sources)this.addSource(y,i.sources[y],{validate:!1,isInitialLoad:!0});i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(i.glyphs,this.scope);let h=hd(this.stylesheet.layers);if(this._order=h.map(y=>y.id),this.stylesheet.light&&r.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){let y=this.stylesheet.lights[0];this.light=new At(y.properties,y.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new At(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(let y of h){let w=r.c2(y,this.scope,this.options);w.isConfigDependent&&this._configDependentLayers.add(w.fqid),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize();let A=this.getOwnLayerSourceCache(w),T=!!this.directionalLight&&this.directionalLight.shadowsEnabled();A&&w.canCastShadows()&&T&&(A.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);let f=this.stylesheet.terrain;f&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=r.f.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?r.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(f,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new r.b("data",{dataType:"style"})),i.imports?this._loadImports(i.imports,a).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let i,a,u,h,f,y,w,A;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(T=>{if(T.stylesheet){if(T.light!=null&&(i=T.light),T.stylesheet.lights)for(let S of T.stylesheet.lights)S.type==="ambient"&&T.ambientLight!=null&&(a=T.ambientLight),S.type==="directional"&&T.directionalLight!=null&&(u=T.directionalLight);h=this._prioritizeTerrain(h,T.terrain,T.stylesheet.terrain),T.stylesheet.fog&&T.fog!=null&&(f=T.fog),T.stylesheet.camera!=null&&(A=T.stylesheet.camera),T.stylesheet.projection!=null&&(y=T.stylesheet.projection),T.stylesheet.transition!=null&&(w=T.stylesheet.transition)}}),this.light=i,this.ambientLight=a,this.directionalLight=u,this.fog=f,h===null?delete this.terrain:this.terrain=h,this.camera=A||{"camera-projection":"perspective"},this.projection=y||{name:"mercator"},this.transition=r.e({},Md,w),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(i){let a=u=>{for(let h of u.fragments)a(h.style);i(u)};a(this)}_prioritizeTerrain(i,a,u){let h=i&&i.drapeRenderMode===0;return u===null?a&&a.drapeRenderMode===0?a:h?i:null:a!=null&&(!i||h||a&&a.drapeRenderMode===1)?a:i}mergeTerrain(){let i;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(a=>{i=this._prioritizeTerrain(i,a.terrain,a.stylesheet.terrain)}),i===null?delete this.terrain:this.terrain=i}mergeProjection(){let i;this.forEachFragmentStyle(a=>{a.stylesheet.projection!=null&&(i=a.stylesheet.projection)}),this.projection=i||{name:"mercator"}}mergeSources(){let i={},a={},u={};this.forEachFragmentStyle(h=>{for(let f in h._sourceCaches){let y=r.ag(f,h.scope);i[y]=h._sourceCaches[f]}for(let f in h._otherSourceCaches){let y=r.ag(f,h.scope);a[y]=h._otherSourceCaches[f]}for(let f in h._symbolSourceCaches){let y=r.ag(f,h.scope);u[y]=h._symbolSourceCaches[f]}}),this._mergedSourceCaches=i,this._mergedOtherSourceCaches=a,this._mergedSymbolSourceCaches=u}mergeLayers(){let i={},a=[],u={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(f=>{for(let y of f._order){let w=f._layers[y];if(w.type==="slot"){let A=r.c3(y);if(i[A])continue;i[A]=[]}w.slot&&i[w.slot]?i[w.slot].push(w):a.push(w)}}),this._mergedOrder=[];let h=(f=[])=>{for(let y of f)if(y.type==="slot"){let w=r.c3(y.id);i[w]&&h(i[w])}else{let w=r.ag(y.id,y.scope);this._mergedOrder.push(w),u[w]=y,y.is3D()&&(this._has3DLayers=!0),y.type==="circle"&&(this._hasCircleLayers=!0),y.type==="symbol"&&(this._hasSymbolLayers=!0)}};h(a),this._mergedLayers=u,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(i){return this.stylesheet.camera=r.e({},this.stylesheet.camera,i),this.camera=this.stylesheet.camera,this}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(i){this._spriteRequest=function(a,u,h){let f,y,w,A=r.f.devicePixelRatio>1?"@2x":"",T=r.g(u.transformRequest(u.normalizeSpriteURL(a,A,".json"),r.R.SpriteJSON),(z,F)=>{T=null,w||(w=z,f=F,D())}),S=r.d(u.transformRequest(u.normalizeSpriteURL(a,A,".png"),r.R.SpriteImage),(z,F)=>{S=null,w||(w=z,y=F,D())});function D(){if(w)h(w);else if(f&&y){let z=r.f.getImageData(y),F={};for(let G in f){let{width:U,height:$,x:N,y:q,sdf:ee,pixelRatio:X,stretchX:te,stretchY:Z,content:ne}=f[G],le=new r.h({width:U,height:$});r.h.copy(z,le,{x:N,y:q},{x:0,y:0},{width:U,height:$}),F[G]={data:le,pixelRatio:X,sdf:ee,stretchX:te,stretchY:Z,content:ne}}h(null,F)}}return{cancel(){T&&(T.cancel(),T=null),S&&(S.cancel(),S=null)}}}(i,this.map._requestManager,(a,u)=>{if(this._spriteRequest=null,a)this.fire(new r.a(a));else if(u)for(let h in u)this.imageManager.addImage(h,this.scope,u[h]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new r.b("data",{dataType:"style"}))})}_validateLayer(i){let a=this.getOwnSource(i.source);if(!a)return;let u=i.sourceLayer;u&&(a.type==="geojson"||a.vectorLayerIds&&a.vectorLayerIds.indexOf(u)===-1)&&this.fire(new r.a(new Error(`Source layer "${u}" does not exist on source "${a.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(let i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(let{style:i}of this.fragments)if(!i.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((i,a)=>{let u=this.fragments[a];return u&&u.style&&(i.data=u.style.serialize()),i})}_serializeSources(){let i={};for(let a in this._sourceCaches){let u=this._sourceCaches[a].getSource();i[u.id]||(i[u.id]=u.serialize())}return i}_serializeLayers(i){let a=[];for(let u of i){let h=this._layers[u];h&&h.type!=="custom"&&a.push(h.serialize())}return a}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(let i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(let i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(i){return!!this.terrain&&(typeof i.isLayerDraped=="function"?i.isLayerDraped(this.getLayerSourceCache(i)):Bh.has(i.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(i){let a=this.getOwnLayer(i);if(a)return a;this.fire(new r.a(new Error(`The layer '${i}' does not exist in the map's style.`)))}_checkSource(i){let a=this.getOwnSource(i);if(a)return a;this.fire(new r.a(new Error(`The source '${i}' does not exist in the map's style.`)))}update(i){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(i),this.directionalLight&&this.directionalLight.recalculate(i);let a=this.calculateLightsBrightness();i.brightness=a||0,a!==this._brightness&&(this._brightness=a,this.dispatcher.broadcast("setBrightness",a));let u=this._changes.isDirty();if(this._changes.isDirty()){let f=this._changes.getLayerUpdatesByScope();for(let y in f){let{updatedIds:w,removedIds:A}=f[y];(w||A)&&this._updateWorkerLayers(y,w,A)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(i),this.light&&this.light.updateTransitions(i),this.ambientLight&&this.ambientLight.updateTransitions(i),this.directionalLight&&this.directionalLight.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._changes.reset()}let h={};for(let f in this._mergedSourceCaches){let y=this._mergedSourceCaches[f];h[f]=y.used,y.used=!1,y.tileCoverLift=0}for(let f of this._mergedOrder){let y=this._mergedLayers[f];if(y.recalculate(i,this._availableImages),!y.isHidden(i.zoom)){let w=this.getLayerSourceCache(y);w&&(w.used=!0,w.tileCoverLift=Math.max(w.tileCoverLift,y.tileCoverLift()))}if(!this._precompileDone&&this._shouldPrecompile)for(let w=y.minzoom||0;w<(y.maxzoom||25.5);w++){let A=this.map.painter;if(A){let T=y.getProgramIds();if(!T)continue;for(let S of T){let D=y.getDefaultProgramParams(S,i.zoom);D&&(A.style=this,this.fog&&(A._fogVisible=!0,D.overrideFog=!0,A.getOrCreateProgram(S,D)),A._fogVisible=!1,D.overrideFog=!1,A.getOrCreateProgram(S,D),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(D.overrideRtt=!0,A.getOrCreateProgram(S,D)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(let f in h){let y=this._mergedSourceCaches[f];h[f]!==y.used&&y.getSource().fire(new r.b("data",{sourceDataType:"visibility",dataType:"source",sourceId:y.getSource().id}))}this.light&&this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),u&&this.fire(new r.b("data",{dataType:"style"}))}_updateTilesForChangedImages(){let i=this._changes.getUpdatedImages();if(i.length){for(let a in this._sourceCaches)this._sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],i);this._changes.resetUpdatedImages()}}_updateWorkerLayers(i,a,u){let h=this.getFragmentStyle(i);h&&this.dispatcher.broadcast("updateLayers",{layers:a?h._serializeLayers(a):[],scope:i,removedIds:u||[],options:h.options})}setState(i){if(this._checkLoaded(),Oa(this,qo(i)))return!1;(i=r.c1(i)).layers=hd(i.layers);let a=function(h,f){if(!h)return[{command:_n.setStyle,args:[f]}];let y=[];try{if(!j(h.version,f.version))return[{command:_n.setStyle,args:[f]}];j(h.center,f.center)||y.push({command:_n.setCenter,args:[f.center]}),j(h.zoom,f.zoom)||y.push({command:_n.setZoom,args:[f.zoom]}),j(h.bearing,f.bearing)||y.push({command:_n.setBearing,args:[f.bearing]}),j(h.pitch,f.pitch)||y.push({command:_n.setPitch,args:[f.pitch]}),j(h.sprite,f.sprite)||y.push({command:_n.setSprite,args:[f.sprite]}),j(h.glyphs,f.glyphs)||y.push({command:_n.setGlyphs,args:[f.glyphs]}),j(h.imports,f.imports)||function(D=[],z=[],F){z=z||[];let G=(D=D||[]).map(jo),U=z.map(jo),$=D.reduce(Zl,{}),N=z.reduce(Zl,{}),q=G.slice(),ee,X,te,Z;for(ee=0,X=0;ee<G.length;ee++)te=G[ee],N.hasOwnProperty(te)?X++:(F.push({command:_n.removeImport,args:[te]}),q.splice(q.indexOf(te,X),1));for(ee=0,X=0;ee<U.length;ee++)te=U[U.length-1-ee],q[q.length-1-ee]!==te&&($.hasOwnProperty(te)?(F.push({command:_n.removeImport,args:[te]}),q.splice(q.lastIndexOf(te,q.length-X),1)):X++,Z=q[q.length-ee],F.push({command:_n.addImport,args:[N[te],Z]}),q.splice(q.length-ee,0,te));for(let ne of z){let le=$[ne.id];le&&!j(le,ne)&&F.push({command:_n.updateImport,args:[ne.id,ne]})}}(h.imports,f.imports,y),j(h.transition,f.transition)||y.push({command:_n.setTransition,args:[f.transition]}),j(h.light,f.light)||y.push({command:_n.setLight,args:[f.light]}),j(h.fog,f.fog)||y.push({command:_n.setFog,args:[f.fog]}),j(h.projection,f.projection)||y.push({command:_n.setProjection,args:[f.projection]}),j(h.lights,f.lights)||y.push({command:_n.setLights,args:[f.lights]}),j(h.camera,f.camera)||y.push({command:_n.setCamera,args:[f.camera]});let w={},A=[];(function(D,z,F,G){let U;for(U in z=z||{},D=D||{})D.hasOwnProperty(U)&&(z.hasOwnProperty(U)||qc(U,F,G));for(U in z){if(!z.hasOwnProperty(U))continue;let $=z[U];D.hasOwnProperty(U)?j(D[U],$)||(D[U].type==="geojson"&&$.type==="geojson"&&zh(D,z,U)?F.push({command:_n.setGeoJSONSourceData,args:[U,$.data]}):Rh(U,z,F,G)):cl(U,z,F)}})(h.sources,f.sources,A,w);let T=[];h.layers&&h.layers.forEach(D=>{D.source&&w[D.source]?y.push({command:_n.removeLayer,args:[D.id]}):T.push(D)});let S=h.terrain;S&&w[S.source]&&(y.push({command:_n.setTerrain,args:[void 0]}),S=void 0),y=y.concat(A),j(S,f.terrain)||y.push({command:_n.setTerrain,args:[f.terrain]}),function(D,z,F){z=z||[];let G=(D=D||[]).map(jo),U=z.map(jo),$=D.reduce(Zl,{}),N=z.reduce(Zl,{}),q=G.slice(),ee=Object.create(null),X,te,Z,ne,le,ue,fe;for(X=0,te=0;X<G.length;X++)Z=G[X],N.hasOwnProperty(Z)?te++:(F.push({command:_n.removeLayer,args:[Z]}),q.splice(q.indexOf(Z,te),1));for(X=0,te=0;X<U.length;X++)Z=U[U.length-1-X],q[q.length-1-X]!==Z&&($.hasOwnProperty(Z)?(F.push({command:_n.removeLayer,args:[Z]}),q.splice(q.lastIndexOf(Z,q.length-te),1)):te++,ue=q[q.length-X],F.push({command:_n.addLayer,args:[N[Z],ue]}),q.splice(q.length-X,0,Z),ee[Z]=!0);for(X=0;X<U.length;X++)if(Z=U[X],ne=$[Z],le=N[Z],!ee[Z]&&!j(ne,le))if(j(ne.source,le.source)&&j(ne["source-layer"],le["source-layer"])&&j(ne.type,le.type)){for(fe in xa(ne.layout,le.layout,F,Z,null,_n.setLayoutProperty),xa(ne.paint,le.paint,F,Z,null,_n.setPaintProperty),j(ne.slot,le.slot)||F.push({command:_n.setSlot,args:[Z,le.slot]}),j(ne.filter,le.filter)||F.push({command:_n.setFilter,args:[Z,le.filter]}),j(ne.minzoom,le.minzoom)&&j(ne.maxzoom,le.maxzoom)||F.push({command:_n.setLayerZoomRange,args:[Z,le.minzoom,le.maxzoom]}),ne)ne.hasOwnProperty(fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&fe!=="slot"&&(fe.indexOf("paint.")===0?xa(ne[fe],le[fe],F,Z,fe.slice(6),_n.setPaintProperty):j(ne[fe],le[fe])||F.push({command:_n.setLayerProperty,args:[Z,fe,le[fe]]}));for(fe in le)le.hasOwnProperty(fe)&&!ne.hasOwnProperty(fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&fe!=="slot"&&(fe.indexOf("paint.")===0?xa(ne[fe],le[fe],F,Z,fe.slice(6),_n.setPaintProperty):j(ne[fe],le[fe])||F.push({command:_n.setLayerProperty,args:[Z,fe,le[fe]]}))}else F.push({command:_n.removeLayer,args:[Z]}),ue=q[q.lastIndexOf(Z)+1],F.push({command:_n.addLayer,args:[le,ue]})}(T,f.layers,y)}catch(w){console.warn("Unable to compute style diff:",w),y=[{command:_n.setStyle,args:[f]}]}return y}(this.serialize(),i).filter(h=>!(h.command in Ya));if(a.length===0)return!1;let u=a.filter(h=>!(h.command in Cd));if(u.length>0)throw new Error(`Unimplemented: ${u.map(h=>h.command).join(", ")}.`);return a.forEach(h=>{this[h.command].apply(this,h.args)}),this.stylesheet=i,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(i,a){return this.getImage(i)?this.fire(new r.a(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,this.scope,a),this._afterImageUpdated(i),this)}updateImage(i,a){this.imageManager.updateImage(i,this.scope,a)}getImage(i){return this.imageManager.getImage(i,this.scope)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i,this.scope),this._afterImageUpdated(i),this):this.fire(new r.a(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(i),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new r.b("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(i,a,u={}){return this._checkLoaded(),this._validate(yt,`models.${i}`,a,null,u)||(this.modelManager.addModel(i,a,this.scope),this._changes.setDirty()),this}hasModel(i){return this.modelManager.hasModel(i,this.scope)}removeModel(i){return this.hasModel(i)?(this.modelManager.removeModel(i,this.scope),this):this.fire(new r.a(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(i,a,u={}){if(this._checkLoaded(),this.getOwnSource(i)!==void 0)throw new Error(`There is already a source with ID "${i}".`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(Tr,`sources.${i}`,a,null,u))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);let h=Vi(i,a,this.dispatcher,this);h.scope=this.scope,h.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(h.id),source:h.serialize(),sourceId:h.id}));let f=y=>{let w=(y?"symbol:":"other:")+h.id,A=r.ag(w,this.scope),T=this._sourceCaches[w]=new yr(A,h,y);(y?this._symbolSourceCaches:this._otherSourceCaches)[h.id]=T,T.onAdd(this.map)};f(!1),a.type!=="vector"&&a.type!=="geojson"||f(!0),h.onAdd&&h.onAdd(this.map),u.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(i){this._checkLoaded();let a=this.getOwnSource(i);if(!a)throw new Error("There is no source with this ID");for(let h in this._layers)if(this._layers[h].source===i)return this.fire(new r.a(new Error(`Source "${i}" cannot be removed while layer "${h}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===i)return this.fire(new r.a(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));let u=this.getOwnSourceCaches(i);for(let h of u){let f=r.c3(h.id);delete this._sourceCaches[f],this._changes.discardSourceCacheUpdate(h.id),h.fire(new r.b("data",{sourceDataType:"metadata",dataType:"source",sourceId:h.getSource().id})),h.setEventedParent(null),h.clearTiles()}return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],this.mergeSources(),a.setEventedParent(null),a.onRemove&&a.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(i,a){this._checkLoaded(),this.getOwnSource(i).setData(a),this._changes.setDirty()}getOwnSource(i){let a=this.getOwnSourceCache(i);return a&&a.getSource()}getOwnSources(){let i=[];for(let a in this._otherSourceCaches){let u=this.getOwnSourceCache(a);u&&i.push(u.getSource())}return i}areTilesLoaded(){let i=this._mergedSourceCaches;for(let a in i){let u=i[a]._tiles;for(let h in u){let f=u[h];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}setLights(i){if(this._checkLoaded(),!i)return delete this.ambientLight,void delete this.directionalLight;let a=this._getTransitionParameters();for(let h of i){if(this._validate(Ve,"lights",h))return;switch(h.type){case"ambient":if(this.ambientLight){let f=this.ambientLight;f.set(h),f.updateTransitions(a)}else this.ambientLight=new co(h,bn,this.scope,this.options);break;case"directional":if(this.directionalLight){let f=this.directionalLight;f.set(h),f.updateTransitions(a)}else this.directionalLight=new co(h,ri,this.scope,this.options)}}let u=new r.K(this.z||0,a);this.ambientLight&&this.ambientLight.recalculate(u),this.directionalLight&&this.directionalLight.recalculate(u),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){let i=this.directionalLight,a=this.ambientLight;if(!i||!a)return;let u=D=>.2126*(D[0]<=.03928?D[0]/12.92:Math.pow((D[0]+.055)/1.055,2.4))+.7152*(D[1]<=.03928?D[1]/12.92:Math.pow((D[1]+.055)/1.055,2.4))+.0722*(D[2]<=.03928?D[2]/12.92:Math.pow((D[2]+.055)/1.055,2.4)),h=i.properties.get("color").toArray01(),f=i.properties.get("intensity"),y=i.properties.get("direction"),w=1-r.bQ(y.x,y.y,y.z)[2]/90,A=u(h)*f*w,T=a.properties.get("color").toArray01(),S=a.properties.get("intensity");return(A+u(T)*S)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;let i=[];return this.directionalLight&&i.push(this.directionalLight.get()),this.ambientLight&&i.push(this.ambientLight.get()),i}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(i){if(!i)return this;if(r.c4(i)){let a=r.c5(i),u=this.fragments.find(({id:f})=>f===a);if(!u)throw new Error(`Style import not found: ${i}`);let h=r.c3(i);return u.style.getFragmentStyle(h)}{let a=this.fragments.find(({id:u})=>u===i);if(!a)throw new Error(`Style import not found: ${i}`);return a.style}}getConfigProperty(i,a){let u=this.getFragmentStyle(i);if(!u)return null;let h=r.ag(a,u.scope),f=u.options.get(h),y=f?f.value||f.default:null;return y?y.serialize():null}setConfigProperty(i,a,u){let h=r.r(u);if(h.result!=="success")return void Oa(this,h.value);let f=h.value.expression,y=this.getFragmentStyle(i);if(!y)return;let w=r.ag(a,y.scope),A=y.options.get(w);A&&(this.options.set(w,$i(Et({},A),{value:f})),this.updateConfigDependencies())}setConfig(i,a){if(this._config=i,i||a)if(a)for(let u in a){let h,f,y=r.r(a[u].default);if(y.result==="success"&&(h=y.value.expression),i&&i[u]!==void 0){let z=r.r(i[u]);z.result==="success"&&(f=z.value.expression)}let{minValue:w,maxValue:A,stepValue:T,type:S,values:D}=a[u];if(h){let z=r.ag(u,this.scope);this.options.set(z,{default:h,value:f,minValue:w,maxValue:A,stepValue:T,type:S,values:D})}else this.fire(new r.a(new Error(`No schema defined for config option "${u}".`)))}else this.fire(new r.a(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(let i of this._configDependentLayers){let a=this.getLayer(i);a&&(a.possiblyEvaluateVisibility(),this._updateLayer(a))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this._changes.setDirty()}addLayer(i,a,u={}){this._checkLoaded();let h=i.id;if(this._layers[h])return void this.fire(new r.a(new Error(`Layer with id "${h}" already exists on this map`)));let f;if(i.type==="custom"){if(Oa(this,r.c6(i)))return;f=r.c2(i,this.scope,this.options)}else{if(typeof i.source=="object"&&(this.addSource(h,i.source),i=r.c1(i),i=r.e(i,{source:h})),this._validate(pe,`layers.${h}`,i,{arrayIndex:-1},u))return;f=r.c2(i,this.scope,this.options),this._validateLayer(f),f.setEventedParent(this,{layer:{id:h}}),this._serializedLayers[f.id]=f.serialize()}f.isConfigDependent&&this._configDependentLayers.add(f.fqid);let y=this._order.length;if(a){let S=this._order.indexOf(a);if(S===-1)return void this.fire(new r.a(new Error(`Layer with id "${a}" does not exist on this map.`)));f.slot===this._layers[a].slot?y=S:r.w(`Layer with id "${a}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(y,0,h),this._layerOrderChanged=!0,this._layers[h]=f;let w=this.getOwnLayerSourceCache(f),A=!!this.directionalLight&&this.directionalLight.shadowsEnabled();w&&f.canCastShadows()&&A&&(w.castsShadows=!0);let T=this._changes.getRemovedLayer(f);if(T&&f.source&&w&&f.type!=="custom"){this._changes.discardLayerRemoval(f);let S=r.ag(f.source,f.scope);T.type!==f.type?this._changes.updateSourceCache(S,"clear"):(this._changes.updateSourceCache(S,"reload"),w.pause())}this._updateLayer(f),f.onAdd&&f.onAdd(this.map),f.scope=this.scope,this.mergeLayers()}moveLayer(i,a){this._checkLoaded();let u=this._checkLayer(i);if(!u||i===a)return;let h=this._order.indexOf(i);this._order.splice(h,1);let f=this._order.length;if(a){let y=this._order.indexOf(a);if(y===-1)return void this.fire(new r.a(new Error(`Layer with id "${a}" does not exist on this map.`)));u.slot===this._layers[a].slot?f=y:r.w(`Layer with id "${a}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(f,0,i),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(i){this._checkLoaded();let a=this._checkLayer(i);if(!a)return;a.setEventedParent(null);let u=this._order.indexOf(i);this._order.splice(u,1),delete this._layers[i],delete this._serializedLayers[i],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(a.fqid),this._changes.removeLayer(a);let h=this.getOwnLayerSourceCache(a);if(h&&h.castsShadows){let f=!1;for(let y in this._layers)if(this._layers[y].source===a.source&&this._layers[y].canCastShadows()){f=!0;break}h.castsShadows=f}a.onRemove&&a.onRemove(this.map),this.mergeLayers()}getOwnLayer(i){return this._layers[i]}hasLayer(i){return i in this._mergedLayers}hasLayerType(i){for(let a in this._layers)if(this._layers[a].type===i)return!0;return!1}setLayerZoomRange(i,a,u){this._checkLoaded();let h=this._checkLayer(i);h&&(h.minzoom===a&&h.maxzoom===u||(a!=null&&(h.minzoom=a),u!=null&&(h.maxzoom=u),this._updateLayer(h)))}setSlot(i,a){this._checkLoaded();let u=this._checkLayer(i);u&&u.slot!==a&&(u.slot=a,this._updateLayer(u))}setFilter(i,a,u={}){this._checkLoaded();let h=this._checkLayer(i);if(h&&!j(h.filter,a))return a==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(ze,`layers.${h.id}.filter`,a,{layerType:h.type},u)||(h.filter=r.c1(a),this._updateLayer(h)))}getFilter(i){let a=this._checkLayer(i);if(a)return r.c1(a.filter)}setLayoutProperty(i,a,u,h={}){this._checkLoaded();let f=this._checkLayer(i);if(f&&!j(f.getLayoutProperty(a),u)){if(u!=null&&(!h||h.validate!==!1)&&Oa(f,Ke.call(qo,{key:`layers.${i}.layout.${a}`,layerType:f.type,objectKey:a,value:u,styleSpec:r.D,style:{glyphs:!0,sprite:!0}})))return;f.setLayoutProperty(a,u),f.isConfigDependent&&this._configDependentLayers.add(f.fqid),this._updateLayer(f)}}getLayoutProperty(i,a){let u=this._checkLayer(i);if(u)return u.getLayoutProperty(a)}setPaintProperty(i,a,u,h={}){this._checkLoaded();let f=this._checkLayer(i);if(!f||j(f.getPaintProperty(a),u)||u!=null&&(!h||h.validate!==!1)&&Oa(f,Le.call(qo,{key:`layers.${i}.paint.${a}`,layerType:f.type,objectKey:a,value:u,styleSpec:r.D})))return;let y=f.setPaintProperty(a,u);f.isConfigDependent&&this._configDependentLayers.add(f.fqid),y&&this._updateLayer(f),this._changes.updatePaintProperties(f)}getPaintProperty(i,a){let u=this._checkLayer(i);if(u)return u.getPaintProperty(a)}setFeatureState(i,a){this._checkLoaded();let u=i.source,h=i.sourceLayer,f=this._checkSource(u);if(!f)return;let y=f.type;if(y==="geojson"&&h)return void this.fire(new r.a(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(y==="vector"&&!h)return void this.fire(new r.a(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new r.a(new Error("The feature id parameter must be provided.")));let w=this.getOwnSourceCaches(u);for(let A of w)A.setFeatureState(h,i.id,a)}removeFeatureState(i,a){this._checkLoaded();let u=i.source,h=this._checkSource(u);if(!h)return;let f=h.type,y=f==="vector"?i.sourceLayer:void 0;if(f==="vector"&&!y)return void this.fire(new r.a(new Error("The sourceLayer parameter must be provided for vector source types.")));if(a&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new r.a(new Error("A feature id is required to remove its specific state property.")));let w=this.getOwnSourceCaches(u);for(let A of w)A.removeFeatureState(y,i.id,a)}getFeatureState(i){this._checkLoaded();let a=i.source,u=i.sourceLayer,h=this._checkSource(a);if(h){if(h.type!=="vector"||u)return i.id===void 0&&this.fire(new r.a(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(a)[0].getFeatureState(u,i.id);this.fire(new r.a(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(i){return this.stylesheet.transition=r.e({},this.stylesheet.transition,i),this.transition=this.stylesheet.transition,this}getTransition(){return r.e({},this.stylesheet.transition)}serialize(){this._checkLoaded();let i=this.getTerrain(),a=i&&this.terrain&&this.terrain.scope===this.scope?i:this.stylesheet.terrain;return r.c7({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:a,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(i){this._changes.updateLayer(i);let a=this.getLayerSourceCache(i),u=r.ag(i.source,i.scope),h=this._changes.getUpdatedSourceCaches();i.source&&!h[u]&&a&&a.getSource().type!=="raster"&&(this._changes.updateSourceCache(u,"reload"),a.pause()),i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){let a=w=>this._mergedLayers[w].type==="fill-extrusion"||this._mergedLayers[w].type==="model",u=this.order,h={},f=[];for(let w=u.length-1;w>=0;w--){let A=u[w];if(a(A)){h[A]=w;for(let T of i){let S=T[A];if(S)for(let D of S)f.push(D)}}}f.sort((w,A)=>A.intersectionZ-w.intersectionZ);let y=[];for(let w=u.length-1;w>=0;w--){let A=u[w];if(a(A))for(let T=f.length-1;T>=0;T--){let S=f[T].feature;if(h[S.layer.id]<w)break;y.push(S),f.pop()}else for(let T of i){let S=T[A];if(S)for(let D of S)y.push(D.feature)}}return y}queryRenderedFeatures(i,a,u){a&&a.filter&&this._validate(ze,"queryRenderedFeatures.filter",a.filter,null,a),a.scope=this.scope,a.availableImages=this._availableImages,a.serializedLayers=this._serializedLayers;let h={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new r.a(new Error("parameters.layers must be an Array."))),[];for(let T of a.layers){let S=this._mergedLayers[T];if(!S)return this.fire(new r.a(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];h[S.source]=!0}}let f=[],y=a.serializedLayers||{},w=a&&a.layers?a.layers.some(T=>{let S=this.getLayer(T);return S&&S.is3D()}):this.has3DLayers(),A=ai.createFromScreenPoints(i,u);for(let T in this._mergedSourceCaches){let S=this._mergedSourceCaches[T].getSource();if(!S||S.scope!==a.scope)continue;let D=this._mergedSourceCaches[T].getSource().id;a.layers&&!h[D]||f.push($l(this._mergedSourceCaches[T],this._mergedLayers,y,A,a,u,w,!!this.map._showQueryGeometry))}return this.placement&&f.push(function(T,S,D,z,F,G,U){let $={},N=G.queryRenderedSymbols(z),q=[];for(let ee of Object.keys(N).map(Number))q.push(U[ee]);q.sort(xs);for(let ee of q){let X=ee.featureIndex.lookupSymbolFeatures(N[ee.bucketInstanceId],S,ee.bucketIndex,ee.sourceLayerIndex,F.filter,F.layers,F.availableImages,T);for(let te in X){let Z=$[te]=$[te]||[],ne=X[te];ne.sort((le,ue)=>{let fe=ee.featureSortOrder;if(fe){let Ae=fe.indexOf(le.featureIndex);return fe.indexOf(ue.featureIndex)-Ae}return ue.featureIndex-le.featureIndex});for(let le of ne)Z.push(le)}}for(let ee in $)$[ee].forEach(X=>{let te=X.feature,Z=D(T[ee]);if(!Z)return;let ne=Z.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ne});return $}(this._mergedLayers,y,this.getLayerSourceCache.bind(this),A.screenGeometry,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)}querySourceFeatures(i,a){a&&a.filter&&this._validate(ze,"querySourceFeatures.filter",a.filter,null,a);let u=this.getOwnSourceCaches(i),h=[];for(let f of u)h=h.concat($r(f,a));return h}addSourceType(i,a,u){return vr.getSourceType(i)?u(new Error(`A source type called "${i}" already exists.`)):(vr.setSourceType(i,a),a.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:a.workerSourceURL},u):u(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(i,a,u={}){this._checkLoaded();let h=this.light.getLight(),f=!1;for(let w in i)if(!j(i[w],h[w])){f=!0;break}if(!f)return;let y=this._getTransitionParameters();this.light.setLight(i,a,u),this.light.updateTransitions(y)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,a=1){if(this._checkLoaded(),!i)return this.terrainSetForDrapingOnly()&&a!==0||delete this.terrain,i===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let u=i,h=i.source==null;if(a===1){if(typeof u.source=="object"){let w="terrain-dem-src";this.addSource(w,u.source),u=r.c1(u),u=r.e(u,{source:w})}let f=r.e({},u),y={};if(this.terrain&&h){f.source=this.terrain.get().source;let w=this.terrain?this.getFragmentStyle(this.terrain.scope):null;w&&(y.style=w.serialize())}if(this._validate(Q,"terrain",f,y))return}if(!this.terrain||this.terrain.scope!==this.scope&&!h||this.terrain&&a!==this.terrain.drapeRenderMode){if(!u)return;this._createTerrain(u,a),this.fire(new r.b("data",{dataType:"style"}))}else{let f=this.terrain,y=f.get();for(let w of Object.keys(r.D.terrain))!u.hasOwnProperty(w)&&r.D.terrain[w].default&&(u[w]=r.D.terrain[w].default);for(let w in i)if(!j(i[w],y[w])){f.set(i,this.options),this.stylesheet.terrain=i;let A=this._getTransitionParameters({duration:0});f.updateTransitions(A),this.fire(new r.b("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){let a=this.fog=new yo(i,this.map.transform,this.scope,this.options);this.stylesheet.fog=a.get();let u=this._getTransitionParameters({duration:0});a.updateTransitions(u)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(let i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){let a=this.fog;if(!j(a.get(),i)){a.set(i,this.options),this.stylesheet.fog=a.get();let u=this._getTransitionParameters({duration:0});a.updateTransitions(u)}}else this._createFog(i);this._markersNeedUpdate=!0}_getTransitionParameters(i){return{now:r.f.now(),transition:r.e(this.transition,i)}}updateDrapeFirstLayers(){if(!this.terrain)return;let i=[],a=[];for(let u in this._mergedLayers)this.isLayerDraped(this._mergedLayers[u])?i.push(u):a.push(u);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...a)}_createTerrain(i,a){let u=this.terrain=new Un(i,a,this.scope,this.options);a===1&&(this.stylesheet.terrain=i),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();let h=this._getTransitionParameters({duration:0});u.updateTransitions(h)}_force3DLayerUpdate(){for(let i in this._layers){let a=this._layers[i];a.type==="fill-extrusion"&&this._updateLayer(a)}}_forceSymbolLayerUpdate(){for(let i in this._layers){let a=this._layers[i];a.type==="symbol"&&this._updateLayer(a)}}_validate(i,a,u,h,f={}){if(f&&f.validate===!1)return!1;let y=r.e({},this.serialize());return Oa(this,i.call(qo,r.e({key:a,style:y,value:u,styleSpec:r.D},h)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.c8.off("pluginStateChange",this._rtlTextPluginCallback);for(let i in this._mergedLayers)this._mergedLayers[i].setEventedParent(null);for(let i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles(),this._mergedSourceCaches[i].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(i){let a=this.getSourceCaches(i);for(let u of a)u.clearTiles()}clearSources(){for(let i in this._mergedSourceCaches)this._mergedSourceCaches[i].clearTiles()}reloadSource(i){let a=this.getSourceCaches(i);for(let u of a)u.resume(),u.reload()}reloadSources(){for(let i of this.getSources())i.reload&&i.reload()}updateSources(i){let a;this.directionalLight&&(a=qa(this.directionalLight));for(let u in this._mergedSourceCaches)this._mergedSourceCaches[u].update(i,void 0,void 0,a)}_generateCollisionBoxes(){for(let i in this._sourceCaches){let a=this._sourceCaches[i];a.resume(),a.reload()}}_updatePlacement(i,a,u,h,f=!1){let y=!1,w=!1,A={},T={};for(let S of this._mergedOrder){let D=this._mergedLayers[S];if(D.type!=="symbol")continue;let z=r.ag(D.source,D.scope),F=A[z];if(!F){let U=this.getLayerSourceCache(D);if(!U)continue;let $=U.getRenderableIds(!0).map(N=>U.getTileByID(N));T[z]=$.slice(),F=A[z]=$.sort((N,q)=>q.tileID.overscaledZ-N.tileID.overscaledZ||(N.tileID.isLessThan(q.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(D,F,i.center.lng,i.projection);y=y||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),f=f||this._layerOrderChanged||u===0,this._layerOrderChanged&&this.fire(new r.b("neworder")),(f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.f.now(),i.zoom))&&(this.pauseablePlacement=new hl(i,this._mergedOrder,f,a,u,h,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,A,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.f.now()),w=!0),y&&this.pauseablePlacement.placement.setStale()),w||y){this._buildingIndex.onNewFrame(i.zoom);for(let S of this._mergedOrder){let D=this._mergedLayers[S];D.type==="symbol"&&this.placement.updateLayerOpacities(D,A[r.ag(D.source,D.scope)])}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.f.now())}_releaseSymbolFadeTiles(){for(let i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}addImport(i,a){this._checkLoaded();let u=this.stylesheet.imports=this.stylesheet.imports||[];if(u.findIndex(({id:f})=>f===i.id)!==-1)return this.fire(new r.a(new Error(`Import with id '${i.id}' already exists in the map's style.`)));if(!a)return u.push(i),this._loadImports([i],!0),this;let h=u.findIndex(({id:f})=>f===a);return h===-1?this.fire(new r.a(new Error(`Import with id "${a}" does not exist on this map.`))):(this.stylesheet.imports=u.slice(0,h).concat(i).concat(u.slice(h)),this._loadImports([i],!0,a),this)}updateImport(i,a){this._checkLoaded();let u=this.stylesheet.imports||[],h=this.getImportIndex(i);return h===-1?this:typeof a=="string"?(this.setImportUrl(i,a),this):(a.url&&a.url!==u[h].url&&this.setImportUrl(i,a.url),j(a.config,u[h].config)||this.setImportConfig(i,a.config),j(a.data,u[h].data)||this.setImportData(i,a.data),this)}moveImport(i,a){this._checkLoaded();let u=this.stylesheet.imports||[],h=this.getImportIndex(i);if(h===-1)return this;let f=this.getImportIndex(a);if(f===-1)return this;let y=u[h],w=this.fragments[h];return u=u.filter(({id:A})=>A!==i),this.fragments=this.fragments.filter(({id:A})=>A!==i),this.stylesheet.imports=u.slice(0,f).concat(y).concat(u.slice(f)),this.fragments=this.fragments.slice(0,f).concat(w).concat(this.fragments.slice(f)),this.mergeLayers(),this}setImportUrl(i,a){this._checkLoaded();let u=this.stylesheet.imports||[],h=this.getImportIndex(i);if(h===-1)return this;u[h].url=a;let f=this.fragments[h];return f.style=this._createFragmentStyle(u[h]),f.style.on("style.import.load",()=>this.mergeAll()),f.style.loadURL(a),this}setImportData(i,a){this._checkLoaded();let u=this.getImportIndex(i),h=this.stylesheet.imports||[];return u===-1?this:a?(this.fragments[u].style.setState(a),this._reloadImports(),this):(delete h[u].data,this.setImportUrl(i,h[u].url))}setImportConfig(i,a){this._checkLoaded();let u=this.getImportIndex(i),h=this.stylesheet.imports||[];if(u===-1)return this;a?h[u].config=a:delete h[u].config;let f=this.fragments[u],y=f.style.stylesheet&&f.style.stylesheet.schema;return f.config=a,f.style.setConfig(a,y),this.updateConfigDependencies(),this}removeImport(i){this._checkLoaded();let a=this.stylesheet.imports||[],u=this.getImportIndex(i);return u===-1||(a.splice(u,1),this.fragments[u].style._remove(),this.fragments.splice(u,1),this._reloadImports()),this}getImportIndex(i){let a=(this.stylesheet.imports||[]).findIndex(u=>u.id===i);return a===-1&&this.fire(new r.a(new Error(`Import '${i}' does not exist in the map's style and cannot be updated.`))),a}getLayer(i){return this._mergedLayers[i]}getSources(){let i=[];for(let a in this._mergedOtherSourceCaches){let u=this._mergedOtherSourceCaches[a];u&&i.push(u.getSource())}return i}getSource(i,a){let u=this.getSourceCache(i,a);return u&&u.getSource()}getLayerSource(i){let a=this.getLayerSourceCache(i);return a&&a.getSource()}getSourceCache(i,a){let u=r.ag(i,a);return this._mergedOtherSourceCaches[u]}getLayerSourceCache(i){let a=r.ag(i.source,i.scope);return i.type==="symbol"?this._mergedSymbolSourceCaches[a]:this._mergedOtherSourceCaches[a]}getSourceCaches(i){let a=[];return this._mergedOtherSourceCaches[i]&&a.push(this._mergedOtherSourceCaches[i]),this._mergedSymbolSourceCaches[i]&&a.push(this._mergedSymbolSourceCaches[i]),a}updateSourceCaches(){let i=this._changes.getUpdatedSourceCaches();for(let a in i){let u=i[a];u==="reload"?this.reloadSource(a):u==="clear"&&this.clearSource(a)}}updateLayers(i){let a=this._changes.getUpdatedPaintProperties();for(let u of a){let h=this.getLayer(u);h&&h.updateTransitions(i)}}getImages(i,a,u){this.imageManager.getImages(a.icons,a.scope,u),this._updateTilesForChangedImages();let h=f=>{f&&f.setDependencies(a.tileID.key,a.type,a.icons)};h(this._otherSourceCaches[a.source]),h(this._symbolSourceCaches[a.source])}getGlyphs(i,a,u){this.glyphManager.getGlyphs(a.stacks,a.scope,u)}getResource(i,a,u){return r.c9(a,u)}getOwnSourceCache(i){return this._otherSourceCaches[i]}getOwnLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}getOwnSourceCaches(i){let a=[];return this._otherSourceCaches[i]&&a.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&a.push(this._symbolSourceCaches[i]),a}_isSourceCacheLoaded(i){let a=this.getOwnSourceCaches(i);return a.length===0?(this.fire(new r.a(new Error(`There is no source with ID '${i}'`))),!1):a.every(u=>u.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(i=>{i.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}vr.getSourceType=function(c){return Er[c]},vr.setSourceType=function(c,i){Er[c]=i},vr.registerForPluginStateChange=r.bV;var yl=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,xl=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,ac=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,sc="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",su=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,lc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,cc=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Ts=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Ss=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform vec2 u_velocity_res;uniform float u_max_speed;const vec2 INVALID_VELOCITY=vec2(-1);uniform vec2 u_texture_offset;uniform float u_data_offset;uniform vec4 u_data_scale;vec2 lookup_velocity(vec2 uv) {uv=u_texture_offset.x+u_texture_offset.y*uv;vec2 fxy;ivec4 c=_raTexLinearCoord(uv,u_velocity_res,fxy);vec4 tl=texelFetch(u_velocity,c.yz,0);vec4 tr=texelFetch(u_velocity,c.xz,0);vec4 bl=texelFetch(u_velocity,c.yw,0);vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NODATA) {return INVALID_VELOCITY;}if (tr==NODATA) {return INVALID_VELOCITY;}if (bl==NODATA) {return INVALID_VELOCITY;}if (br==NODATA) {return INVALID_VELOCITY;}vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);
#ifdef DATA_FORMAT_UINT32
vec2 velocity=vec2(u_data_offset+dot(t,u_data_scale),0);return velocity;
#else
vec2 velocity=vec2(u_data_offset+dot(t.rg,u_data_scale.yx),-(u_data_offset+dot(t.ba,u_data_scale.yx)));
#endif
return velocity/max(u_max_speed,length(velocity));}
#endif`,lu=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,vl=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;let Xa=[];Ta(yl,Xa),Ta(ac,Xa),Ta(xl,Xa);let Uo={"_prelude_fog.vertex.glsl":lc,"_prelude_terrain.vertex.glsl":su,"_prelude_shadow.vertex.glsl":lu,"_prelude_fog.fragment.glsl":cc,"_prelude_shadow.fragment.glsl":vl,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Ts,"_prelude_raster_particle.glsl":Ss},Es={};Cn("",su),Cn(cc,lc),Cn(vl,lu),Cn(Ts,""),Cn(Ss,"");let cu=Cn(xl,ac),uc=yl;var uu={background:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Cn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Cn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Cn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Cn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Cn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Cn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Cn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Cn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Cn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Cn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;vec2 uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
vec2 uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Cn("precision highp float;uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`precision highp float;
#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {vec2 pos=a_pos.xy+u_tile_offset;vec2 tex_coords=fract(pos);gl_PointSize=1.0;vec2 velocity=lookup_velocity(tex_coords);if (velocity==INVALID_VELOCITY) {v_particle_speed=0.0;gl_Position=vec4(2.0,2.0,2.0,1.0);} else {v_particle_speed=length(velocity);gl_Position=vec4(2.0*pos-vec2(1.0),0.0,1.0);}}`),rasterParticleTexture:Cn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {v_tex_pos=0.5*a_pos+vec2(0.5);gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Cn("void main() {}",`#include "_prelude_raster_array.glsl"
#include "_prelude_raster_particle.glsl"
in vec3 a_pos;uniform float u_speed_factor;uniform float u_lifetime_delta;uniform float u_rand_seed;out vec3 v_new_particle;const vec3 rand_constants=vec3(12.9898,78.233,4375.85453);float rand(const vec2 co) {float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {float lifetime=a_pos.z;vec2 pos=a_pos.xy;vec2 uv=clamp(pos,vec2(0.0),vec2(1.0));vec2 velocity=lookup_velocity(uv);float next_lifetime=lifetime-u_lifetime_delta;float t=step(0.0,next_lifetime);
#ifdef DATA_FORMAT_UINT32
vec2 dp=vec2(0);
#else
vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;
#endif
vec2 seed=pos*u_rand_seed;vec2 next_pos=pos+dp;vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));v_new_particle=vec3(
vec2(mix(random_pos,next_pos,t)),mix(1.0,next_lifetime,t)
);}`),symbolIcon:Cn(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:Cn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Cn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Cn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Cn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,sc),skyboxGradient:Cn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,sc),skyboxCapture:Cn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Cn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Cn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Cn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Cn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Ta(c,i){let a=c.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let u of a)if(u=u.trim(),u[0]==="#"&&u.includes("if")&&!u.includes("endif")){u=u.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();let h=u.split(" ");for(let f of h)i.includes(f)||i.push(f)}}function Cn(c,i){let a=/#include\s+"([^"]+)"/g,u=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g,h=i.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);h&&(h=h.map(T=>{let S=T.split(" ");return S[S.length-1]}),h=[...new Set(h)]);let f={},y=[],w=[];if(c=c.replace(a,(T,S)=>(w.push(S),"")),(i=i.replace(a,(T,S)=>(y.push(S),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let A=[...Xa];Ta(c,A),Ta(i,A);for(let T of[...y,...w])Uo[T]||console.error(`Undefined include: ${T}`),Es[T]||(Es[T]=[],Ta(Uo[T],Es[T])),A=[...A,...Es[T]];return{fragmentSource:c=c.replace(u,(T,S,D,z,F)=>(f[F]=!0,S==="define"?`
#ifndef HAS_UNIFORM_u_${F}
in ${D} ${z} ${F};
#else
uniform ${D} ${z} u_${F};
#endif
`:S==="initialize"?`
#ifdef HAS_UNIFORM_u_${F}
    ${D} ${z} ${F} = u_${F};
#endif
`:S==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${F}
    in ${D} ${z} ${F};
#endif
`:S==="initialize-attribute"?"":void 0)),vertexSource:i=i.replace(u,(T,S,D,z,F)=>{let G=z==="float"?"vec2":z,U=F.match(/color/)?"color":G;return S==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${F}
in ${D} ${z} a_${F};
#endif
`:f[F]?S==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${D} ${G} a_${F};
out ${D} ${z} ${F};
#else
uniform ${D} ${z} u_${F};
#endif
`:S==="initialize"?U==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${D} ${z} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${U}(a_${F}, u_${F}_t);
#else
    ${D} ${z} ${F} = u_${F};
#endif
`:S==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${F}
    in ${D} ${z} a_${F};
    out ${D} ${z} ${F};
#endif
`:S==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${F}
    ${F} = a_${F};
#endif
`:void 0:S==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${D} ${G} a_${F};
#else
uniform ${D} ${z} u_${F};
#endif
`:S==="define-instanced"?U==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${F}0;
in vec4 a_${F}1;
in vec4 a_${F}2;
in vec4 a_${F}3;
#else
uniform ${D} ${z} u_${F};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${D} ${G} a_${F};
#else
uniform ${D} ${z} u_${F};
#endif
`:S==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${F}
    ${D} ${z} ${F} = a_${F};
#endif
`:U==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${D} ${z} ${F} = a_${F};
#else
    ${D} ${z} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${D} ${z} ${F} = unpack_mix_${U}(a_${F}, u_${F}_t);
#else
    ${D} ${z} ${F} = u_${F};
#endif
`}),staticAttributes:h,usedDefines:A,vertexIncludes:y,fragmentIncludes:w}}class du{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,a,u,h,f,y,w,A){this.context=i;let T=this.boundPaintVertexBuffers.length!==h.length;for(let D=0;!T&&D<h.length;D++)this.boundPaintVertexBuffers[D]!==h[D]&&(T=!0);let S=this.boundDynamicVertexBuffers.length!==w.length;for(let D=0;!S&&D<w.length;D++)this.boundDynamicVertexBuffers[D]!==w[D]&&(S=!0);if(!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==u||T||S||this.boundIndexBuffer!==f||this.boundVertexOffset!==y)this.freshBind(a,u,h,f,y,w,A);else{i.bindVertexArrayOES.set(this.vao);for(let D of w)D&&(D.bind(),A&&D.instanceCount&&D.setVertexAttribDivisor(i.gl,a,A));f&&f.dynamicDraw&&f.bind()}}freshBind(i,a,u,h,f,y,w){let A=i.numAttributes,T=this.context,S=T.gl;this.vao&&this.destroy(),this.vao=T.gl.createVertexArray(),T.bindVertexArrayOES.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=h,this.boundVertexOffset=f,this.boundDynamicVertexBuffers=y,a.enableAttributes(S,i),a.bind(),a.setVertexAttribPointers(S,i,f);for(let D of u)D.enableAttributes(S,i),D.bind(),D.setVertexAttribPointers(S,i,f);for(let D of y)D&&(D.enableAttributes(S,i),D.bind(),D.setVertexAttribPointers(S,i,f),w&&D.instanceCount&&D.setVertexAttribDivisor(S,i,w));h&&h.bind(),T.currentNumAttributes=A}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Fh(c,i){let a=Math.pow(2,i.canonical.z),u=i.canonical.y;return[new r.L(0,u/a).toLngLat().lat,new r.L(0,(u+1)/a).toLngLat().lat]}function Ir(c,i,a,u,h,f,y){let w=c.context,A=w.gl,T=a.hillshadeFBO;if(!T)return;c.prepareDrawTile();let S=c.isTileAffectedByFog(i),D=c.getOrCreateProgram("hillshade",{overrideFog:S});w.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,T.colorAttachment.get());let z=(($,N,q,ee)=>{let X=q.paint.get("hillshade-shadow-color"),te=q.paint.get("hillshade-highlight-color"),Z=q.paint.get("hillshade-accent-color"),ne=q.paint.get("hillshade-emissive-strength"),le=r.bj(q.paint.get("hillshade-illumination-direction"));if(q.paint.get("hillshade-illumination-anchor")==="viewport")le-=$.transform.angle;else if($.style&&$.style.enable3dLights()&&$.style.directionalLight){let fe=$.style.directionalLight.properties.get("direction"),Ae=r.bQ(fe.x,fe.y,fe.z);le=r.bj(Ae[1])}let ue=!$.options.moving;return{u_matrix:ee||$.transform.calculateProjMatrix(N.tileID.toUnwrapped(),ue),u_image:0,u_latrange:Fh(0,N.tileID),u_light:[q.paint.get("hillshade-exaggeration"),le],u_shadow:X,u_highlight:te,u_emissive_strength:ne,u_accent:Z}})(c,a,u,c.terrain?i.projMatrix:null);c.uploadCommonUniforms(w,D,i.toUnwrapped());let{tileBoundsBuffer:F,tileBoundsIndexBuffer:G,tileBoundsSegments:U}=c.getTileBoundsBuffers(a);D.draw(c,A.TRIANGLES,h,f,y,Dt.disabled,z,u.id,F,G,U)}function hu(c,i,a){if(!i.needsDEMTextureUpload)return;let u=c.context,h=u.gl;u.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||c.getTileTexture(a.stride);let f=a.getPixels();i.demTexture?i.demTexture.update(f,{premultiply:!1}):i.demTexture=new r.T(u,f,h.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function pu(c,i,a){let u=c.context,h=u.gl;if(!i.dem)return;let f=i.dem;if(u.activeTexture.set(h.TEXTURE1),hu(c,i,f),!i.demTexture)return;i.demTexture.bind(h.NEAREST,h.CLAMP_TO_EDGE);let y=f.dim;u.activeTexture.set(h.TEXTURE0);let w=i.hillshadeFBO;if(!w){let z=new r.T(u,{width:y,height:y,data:null},h.RGBA);z.bind(h.LINEAR,h.CLAMP_TO_EDGE),w=i.hillshadeFBO=u.createFramebuffer(y,y,!0,"renderbuffer"),w.colorAttachment.set(z.texture)}u.bindFramebuffer.set(w.framebuffer),u.viewport.set([0,0,y,y]);let{tileBoundsBuffer:A,tileBoundsIndexBuffer:T,tileBoundsSegments:S}=c.getMercatorTileBoundsBuffers(),D=[];c.linearFloatFilteringSupported()&&D.push("TERRAIN_DEM_FLOAT_FORMAT"),c.getOrCreateProgram("hillshadePrepare",{defines:D}).draw(c,h.TRIANGLES,kt.disabled,Ut.disabled,an.unblended,Dt.disabled,((z,F)=>{let G=F.stride,U=r.a6.create();return r.a6.ortho(U,0,r.V,-r.V,0,0,1),r.a6.translate(U,U,[0,-r.V,0]),{u_matrix:U,u_image:1,u_dimension:[G,G],u_zoom:z.overscaledZ}})(i.tileID,f),a.id,A,T,S),i.needsHillshadePrepare=!1}let Ad=c=>({u_matrix:new r.bK(c),u_image0:new r.bO(c),u_skirt_height:new r.bN(c),u_ground_shadow_factor:new r.bM(c)}),dc=(c,i,a)=>({u_matrix:c,u_image0:0,u_skirt_height:i,u_ground_shadow_factor:a}),Pd=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U)=>({u_proj_matrix:Float32Array.from(c),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(u),u_merc_matrix:a,u_zoom_transition:h,u_merc_center:f,u_image0:0,u_frustum_tl:y,u_frustum_tr:w,u_frustum_br:A,u_frustum_bl:T,u_globe_pos:S,u_globe_radius:D,u_viewport:z,u_grid_matrix:U?Float32Array.from(U):new Float32Array(9),u_skirt_height:F,u_far_z_cutoff:G});function bl(c,i){return c!=null&&i!=null&&!(!c.hasData()||!i.hasData())&&c.demTexture!=null&&i.demTexture!=null&&c.tileID.key!==i.tileID.key}let Qa=new class{constructor(){this.operations={}}newMorphing(c,i,a,u,h){if(c in this.operations){let f=this.operations[c];f.to.tileID.key!==a.tileID.key&&(f.queued=a)}else this.operations[c]={startTime:u,phase:0,duration:h,from:i,to:a,queued:null}}getMorphValuesForProxy(c){if(!(c in this.operations))return null;let i=this.operations[c];return{from:i.from,to:i.to,phase:i.phase}}update(c){for(let i in this.operations){let a=this.operations[i];for(a.phase=(c-a.startTime)/a.duration;a.phase>=1||!this._validOp(a);)if(!this._nextOp(a,c)){delete this.operations[i];break}}}_nextOp(c,i){return!!c.queued&&(c.from=c.to,c.to=c.queued,c.queued=null,c.phase=0,c.startTime=i,!0)}_validOp(c){return c.from.hasData()&&c.to.hasData()}},fu={0:null,1:"TERRAIN_VERTEX_MORPHING"};function gu(c,i,a){if(i===0)return 0;let u=i<1&&a===514?.25/i:1;return 6*Math.pow(1.5,22-c)*Math.max(i,1)*u}function Is(c,i){let a=1<<c.z;return!i&&(c.x===0||c.x===a-1)||c.y===0||c.y===a-1}let tr=c=>({u_matrix:c});function Ds(c,i,a,u,h){if(h>0){let f=r.f.now(),y=(f-c.timeAdded)/h,w=i?(f-i.timeAdded)/h:-1,A=a.getSource(),T=u.coveringZoomLevel({tileSize:A.tileSize,roundZoom:A.roundZoom}),S=!i||Math.abs(i.tileID.overscaledZ-T)>Math.abs(c.tileID.overscaledZ-T),D=S&&c.refreshedUponExpiration?1:r.aa(S?y:1-w,0,1);return c.refreshedUponExpiration&&y>=1&&(c.refreshedUponExpiration=!1),i?{opacity:1,mix:1-D}:{opacity:D,mix:0}}return{opacity:1,mix:0}}class Gi extends yr{constructor(i){let a={type:"raster-dem",maxzoom:i.transform.maxZoom},u=new r.bW(r.bX(),null),h=Vi("mock-dem",a,u,i.style);super("mock-dem",h,!1),h.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,a){i.state="loaded",a(null)}}class Lh extends yr{constructor(i){let a=Vi("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new r.bW(r.bX(),null),i.style);super("proxy",a,!1),a.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,a,u){if(i.freezeTileCoverage)return;this.transform=i;let h=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((f,y)=>{if(f[y.key]="",!this._tiles[y.key]){let w=new Vo(y,this._source.tileSize*y.overscaleFactor(),i.tileZoom);w.state="loaded",this._tiles[y.key]=w}return f},{});for(let f in this._tiles)f in h||(this.freeFBO(f),this._tiles[f].unloadVectorData(),delete this._tiles[f])}freeFBO(i){let a=this.proxyCachedFBO[i];if(a!==void 0){let u=Object.values(a);this.renderCachePool.push(...u),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Od extends r.am{constructor(i,a,u){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=a,this.projMatrix=u}}class Nh extends r.ck{constructor(i,a){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},i.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),i.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};let[u,h,f]=function(A){let T=new r.aN,S=new r.aw,D=131;T.reserve(17161),S.reserve(33800);let z=r.V/128,F=r.V+z/2,G=F+z;for(let $=-z;$<G;$+=z)for(let N=-z;N<G;N+=z){let q=N<0||N>F||$<0||$>F?24575:0,ee=r.aa(Math.round(N),0,r.V),X=r.aa(Math.round($),0,r.V);T.emplaceBack(ee+q,X)}let U=($,N)=>{let q=N*D+$;S.emplaceBack(q+1,q,q+D),S.emplaceBack(q+D,q+D+1,q+1)};for(let $=1;$<129;$++)for(let N=1;N<129;N++)U(N,$);return[0,129].forEach($=>{for(let N=0;N<130;N++)U(N,$),U($,N)}),[T,S,32768]}(),y=i.context;this.gridBuffer=y.createVertexBuffer(u,r.aP.members),this.gridIndexBuffer=y.createIndexBuffer(h),this.gridSegments=r.aB.simpleSegment(0,0,u.length,h.length),this.gridNoSkirtSegments=r.aB.simpleSegment(0,0,u.length,f),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lh(a.map),this.orthoMatrix=r.a6.create(),r.a6.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,r.V,0,r.V,0,1);let w=y.gl;this._overlapStencilMode=new Ut({func:w.GEQUAL,mask:255},0,255,w.KEEP,w.KEEP,w.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=a,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Gi(a.map),this._pendingGroundEffectLayers=[]}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),this._style=i,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,a,u){if(i&&i.terrain){this._style!==i&&(this.style=i,this._evaluationZoom=void 0);let h=i.terrain.properties,f=i.terrain.drapeRenderMode===0,y=i.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=r.f.now();let w=i.terrain&&i.terrain.scope,A=h.get("source"),T=f?this._mockSourceCache:i.getSourceCache(A,w);if(!T)return void r.w(`Couldn't find terrain source "${A}".`);if(this.sourceCache=T,this._exaggeration=y?this.calculateExaggeration(a):h.get("exaggeration"),!a.projection.requiresDraping&&y&&this._exaggeration===0)return void this._disable();this.enabled=!0;let S=()=>{this.sourceCache.used&&r.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);let D=this.getScaledDemTileSize();this.sourceCache.update(a,D,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,S(),this._initializing=!0),S(),a.updateElevation(!0,u),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(a),this._emptyDEMTextureDirty=!0,this._previousZoom=a.zoom}else this._disable()}calculateExaggeration(i){let a=this._previousCameraAltitude,u=i.getFreeCameraOptions().position.z/i.pixelsPerMeter*i.worldSize;this._previousCameraAltitude=u;let h=a!=null?u-a:Number.MAX_VALUE;if(Math.abs(h)<2)return this._exaggeration;let f=i.zoom,y=this._style.terrain;if(!this._previousUpdateTimestamp)return y.getExaggeration(f);let w=f-this._previousZoom,A=this._previousUpdateTimestamp,T=f;this._evaluationZoom!=null&&(T=this._evaluationZoom,Math.abs(f-T)>.5&&(w=.5*(f-T+w)),w*h<0&&(T+=w)),this._evaluationZoom=T;let S=y.getExaggeration(T),D=S===y.getExaggeration(Math.max(0,T-.1));if(D&&Math.abs(S-this._exaggeration)<.01)return S;let z=Math.min(.1,.00375*(this._updateTimestamp-A));return(D||S<.1||Math.abs(w)<1e-4)&&(z=Math.min(.2,4*z)),r.U(this._exaggeration,S,z)}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(let i in this._style._mergedSourceCaches)this._style._mergedSourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){let i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;let a=this.proxySourceCache,u=this.painter.transform;this._initializing&&(this._initializing=u._centerAltitude===0&&this.getAtPointOrZero(r.L.fromLngLat(u.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);let h=this.proxyCoords=a.getIds().map(A=>{let T=a.getTileByID(A).tileID;return T.projMatrix=u.calculateProjMatrix(T.toUnwrapped()),T});(function(A,T){let S=T.transform.pointCoordinate(T.transform.getCameraPoint()),D=new r.P(S.x,S.y);A.sort((z,F)=>{if(F.overscaledZ-z.overscaledZ)return F.overscaledZ-z.overscaledZ;let G=new r.P(z.canonical.x+(1<<z.canonical.z)*z.wrap,z.canonical.y),U=new r.P(F.canonical.x+(1<<F.canonical.z)*F.wrap,F.canonical.y),$=D.mult(1<<z.canonical.z);return $.x-=.5,$.y-=.5,$.distSqr(G)-$.distSqr(U)})})(h,this.painter);let f=this.proxyToSource||{};this.proxyToSource={},h.forEach(A=>{this.proxyToSource[A.key]={}}),this.terrainTileForTile={};let y=this._style._mergedSourceCaches;for(let A in y){let T=y[A];if(!T.used||(T!==this.sourceCache&&this.resetTileLookupCache(T.id),this._setupProxiedCoordsForOrtho(T,i[A],f),T.usedForTerrain))continue;let S=i[A];T.getSource().reparseOverscaled&&this._assignTerrainTiles(S)}this.proxiedCoords[a.id]=h.map(A=>new Od(A,A.key,this.orthoMatrix)),this._assignTerrainTiles(h),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(f),this.renderingToTexture=!1;let w={};this._visibleDemTiles=[];for(let A of this.proxyCoords){let T=this.terrainTileForTile[A.key];if(!T)continue;let S=T.tileID.key;S in w||(this._visibleDemTiles.push(T),w[S]=S)}}_assignTerrainTiles(i){this._initializing||i.forEach(a=>{if(this.terrainTileForTile[a.key])return;let u=this._findTileCoveringTileID(a,this.sourceCache);u&&(this.terrainTileForTile[a.key]=u)})}_prepareDEMTextures(){let i=this.painter.context,a=i.gl;for(let u in this.terrainTileForTile){let h=this.terrainTileForTile[u],f=h.dem;!f||h.demTexture&&!h.needsDEMTextureUpload||(i.activeTexture.set(a.TEXTURE1),hu(this.painter,h,f))}}_prepareDemTileUniforms(i,a,u,h){if(!a||a.demTexture==null)return!1;let f=i.tileID.canonical,y=Math.pow(2,a.tileID.canonical.z-f.z),w=h||"";return u[`u_dem_tl${w}`]=[f.x*y%1,f.y*y%1],u[`u_dem_scale${w}`]=y,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){let i=this.painter.context,a=i.gl;if(!this._emptyDepthBufferTexture){let u=new r.h({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new r.T(i,u,a.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0,a=this._visibleDemTiles.reduce((u,h)=>{if(!h.dem)return u;let f=h.dem.tree.minimums[0];return f>0&&i++,u+f},0);return i?a/i:0}_updateEmptyDEMTexture(){let i=this.painter.context,a=i.gl;i.activeTexture.set(a.TEXTURE2);let u=this._getLoadedAreaMinimum(),[h,f]=(()=>{let w=new r.cm({width:1,height:1},new Float32Array([u]));return[a.R32F,w]})();this._emptyDEMTextureDirty=!1;let y=this._emptyDEMTexture;return y?y.update(f,{premultiply:!1}):y=this._emptyDEMTexture=new r.T(i,f,h,{premultiply:!1}),y}setupElevationDraw(i,a,u){let h=this.painter.context,f=h.gl,y={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};y.u_exaggeration=this.exaggeration();let w=null,A=null,T=1;if(u&&u.morphing&&this._useVertexMorphing){let z=u.morphing.srcDemTile,F=u.morphing.dstDemTile;T=u.morphing.phase,z&&F&&(this._prepareDemTileUniforms(i,z,y,"_prev")&&(A=z),this._prepareDemTileUniforms(i,F,y)&&(w=F))}let S=z=>z&&z.demTexture&&this.painter.linearFloatFilteringSupported()?f.LINEAR:f.NEAREST,D=z=>{y.u_dem_size=z.size[0]===1?1:z.size[0]-2};if(A&&w)h.activeTexture.set(f.TEXTURE2),w.demTexture.bind(S(w),f.CLAMP_TO_EDGE),h.activeTexture.set(f.TEXTURE4),A.demTexture.bind(S(A),f.CLAMP_TO_EDGE),w.demTexture&&D(w.demTexture),y.u_dem_lerp=T;else{w=this.terrainTileForTile[i.tileID.key],h.activeTexture.set(f.TEXTURE2);let z=this._prepareDemTileUniforms(i,w,y)?w.demTexture:this.emptyDEMTexture;z.bind(S(w),f.CLAMP_TO_EDGE),D(z)}if(h.activeTexture.set(f.TEXTURE3),u&&u.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(f.NEAREST,f.CLAMP_TO_EDGE),this._depthFBO&&(y.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(f.NEAREST,f.CLAMP_TO_EDGE),y.u_depth_size_inv=[1,1]),u&&u.useMeterToDem&&w){let z=(1<<w.tileID.canonical.z)*r.bl(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;y.u_meter_to_dem=z}if(u&&u.labelPlaneMatrixInv&&(y.u_label_plane_matrix_inv=u.labelPlaneMatrixInv),a.setTerrainUniformValues(h,y),this.painter.transform.projection.name==="globe"){let z=this.globeUniformValues(this.painter.transform,i.tileID.canonical,u&&u.useDenormalizedUpVectorScale);a.setGlobeUniformValues(h,z)}}globeUniformValues(i,a,u){let h=i.projection;return{u_tile_tl_up:h.upVector(a,0,0),u_tile_tr_up:h.upVector(a,r.V,0),u_tile_br_up:h.upVector(a,r.V,r.V),u_tile_bl_up:h.upVector(a,0,r.V),u_tile_up_scale:u?r.cl(1):h.upVectorScale(a,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){let a=this.painter,u=this.painter.context;i.length!==0&&(u.bindFramebuffer.set(null),u.viewport.set([0,0,a.width,a.height]),a.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(h,f,y,w,A){if(h.transform.projection.name==="globe")(function(T,S,D,z,F){let G=T.context,U=G.gl,$,N,q=T.transform,ee=r.cd(T,G,q),X=(ke,Ee)=>{if(N===Ee)return;let $e=[fu[Ee],"PROJECTION_GLOBE_VIEW"];ee&&$e.push("CUSTOM_ANTIALIASING");let xe=T.isTileAffectedByFog(ke);$=T.getOrCreateProgram("globeRaster",{defines:$e,overrideFog:xe}),N=Ee},te=T.colorModeForRenderPass(),Z=new kt(U.LEQUAL,kt.ReadWrite,T.depthRangeFor3D);Qa.update(F);let ne=r.ce(q),le=[r.a5(q.center.lng),r.ae(q.center.lat)],ue=T.globeSharedBuffers,fe=[q.width*r.f.devicePixelRatio,q.height*r.f.devicePixelRatio],Ae=Float32Array.from(q.globeMatrix),ye={useDenormalizedUpVectorScale:!0};{let ke=T.transform,Ee=gu(ke.zoom,S.exaggeration(),S.sourceCache._source.tileSize);N=-1;let $e=U.TRIANGLES;for(let xe of z){let Te=D.getTile(xe),he=Ut.disabled,Ce=S.prevTerrainTileForTile[xe.key],Ze=S.terrainTileForTile[xe.key];bl(Ce,Ze)&&Qa.newMorphing(xe.key,Ce,Ze,F,250),G.activeTexture.set(U.TEXTURE0),Te.texture&&Te.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);let it=Qa.getMorphValuesForProxy(xe.key),Je=it?1:0;it&&r.j(ye,{morphing:{srcDemTile:it.from,dstDemTile:it.to,phase:r.cc(it.phase)}});let dt=r.cf(xe.canonical),Ct=r.cg(dt.getCenter().lat),It=r.ch(xe.canonical,dt,Ct,ke.worldSize/ke._pixelsPerMercatorPixel),Ot=r.aT(r.ci(xe.canonical)),St=Pd(ke.expandedFarZProjMatrix,Ae,ne,Ot,r.S(ke.zoom),le,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,fe,Ee,ke._farZ,It);if(X(xe,Je),$&&(S.setupElevationDraw(Te,$,ye),T.uploadCommonUniforms(G,$,xe.toUnwrapped()),ue)){let[Qt,Gt,Zt]=ue.getGridBuffers(Ct,Ee!==0);$.draw(T,$e,Z,he,te,Dt.backCCW,St,"globe_raster",Qt,Gt,Zt)}}}if(ue&&(T.renderDefaultNorthPole||T.renderDefaultSouthPole)){let ke=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ee&&ke.push("CUSTOM_ANTIALIASING"),$=T.getOrCreateProgram("globeRaster",{defines:ke});for(let Ee of z){let{x:$e,y:xe,z:Te}=Ee.canonical,he=xe===0,Ce=xe===(1<<Te)-1,[Ze,it,Je,dt]=ue.getPoleBuffers(Te,!1);if(dt&&(he||Ce)){let Ct=D.getTile(Ee);G.activeTexture.set(U.TEXTURE0),Ct.texture&&Ct.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);let It=r.cj(Te,$e,q),Ot=r.aT(r.ci(Ee.canonical)),St=(Qt,Gt)=>Qt.draw(T,U.TRIANGLES,Z,Ut.disabled,te,Dt.disabled,Pd(q.expandedFarZProjMatrix,It,It,Ot,0,le,q.frustumCorners.TL,q.frustumCorners.TR,q.frustumCorners.BR,q.frustumCorners.BL,q.globeCenterInViewSpace,q.globeRadius,fe,0,q._farZ),"globe_pole_raster",Gt,Je,dt);S.setupElevationDraw(Ct,$,ye),T.uploadCommonUniforms(G,$,Ee.toUnwrapped()),he&&T.renderDefaultNorthPole&&St($,Ze),Ce&&T.renderDefaultSouthPole&&(It=r.a6.scale(r.a6.create(),It,[1,-1,1]),St($,it))}}}})(h,f,y,w,A);else{let T=h.context,S=T.gl,D,z,F=h.shadowRenderer,G=qr(h,h.longestCutoffRange),U=te=>{if(z===te)return;let Z=[];Z.push(fu[te]),G.shouldRenderCutoff&&Z.push("RENDER_CUTOFF"),D=h.getOrCreateProgram("terrainRaster",{defines:Z}),z=te},$=h.colorModeForRenderPass(),N=new kt(S.LEQUAL,kt.ReadWrite,h.depthRangeFor3D);Qa.update(A);let q=h.transform,ee=gu(q.zoom,f.exaggeration(),f.sourceCache._source.tileSize),X=[0,0,0];if(F){let te=h.style.directionalLight,Z=h.style.ambientLight;te&&Z&&(X=_l(te,Z))}{z=-1;let te=S.TRIANGLES,[Z,ne]=[f.gridIndexBuffer,f.gridSegments];for(let le of w){let ue=y.getTile(le),fe=Ut.disabled,Ae=f.prevTerrainTileForTile[le.key],ye=f.terrainTileForTile[le.key];bl(Ae,ye)&&Qa.newMorphing(le.key,Ae,ye,A,250),T.activeTexture.set(S.TEXTURE0),ue.texture&&ue.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE);let ke=Qa.getMorphValuesForProxy(le.key),Ee=ke?1:0,$e;ke&&($e={morphing:{srcDemTile:ke.from,dstDemTile:ke.to,phase:r.cc(ke.phase)}});let xe=dc(le.projMatrix,Is(le.canonical,q.renderWorldCopies)?ee/10:ee,X);if(U(Ee),!D)continue;f.setupElevationDraw(ue,D,$e);let Te=le.toUnwrapped();F&&F.setupShadows(Te,D),h.uploadCommonUniforms(T,D,Te,null,G),D.draw(h,te,N,fe,$,Dt.backCCW,xe,"terrain_raster",f.gridBuffer,Z,ne)}}}}(a,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,a.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;let a=this.painter,u=this.painter.context,h=this.proxySourceCache,f=this.proxiedCoords[h.id],y=this._drapedRenderBatches.shift(),w=a.style.order,A=[],T=0;for(let S of f){let D=h.getTileByID(S.proxyTileKey),z=h.proxyCachedFBO[S.key]?h.proxyCachedFBO[S.key][i]:void 0,F=z!==void 0?h.renderCache[z]:this.pool[T++],G=z!==void 0;if(D.texture=F.tex,G&&!F.dirty){A.push(D.tileID);continue}let U;u.bindFramebuffer.set(F.fb.framebuffer),this.renderedToTile=!1,F.dirty&&(u.clear({color:r.ax.transparent,stencil:0}),F.dirty=!1);for(let $=y.start;$<=y.end;++$){let N=a.style._mergedLayers[w[$]];if(N.isHidden(a.transform.zoom))continue;let q=a.style.getLayerSourceCache(N),ee=q?this.proxyToSource[S.key][q.id]:[S];if(!ee)continue;let X=ee;u.viewport.set([0,0,F.fb.width,F.fb.height]),U!==(q?q.id:null)&&(this._setupStencil(F,ee,N,q),U=q?q.id:null),a.renderLayer(a,q,N,X)}if(this._drapedRenderBatches.length===0)for(let $ of this._pendingGroundEffectLayers){let N=a.style._mergedLayers[w[$]];if(N.isHidden(a.transform.zoom))continue;let q=a.style.getLayerSourceCache(N),ee=q?this.proxyToSource[S.key][q.id]:[S];if(!ee)continue;let X=ee;u.viewport.set([0,0,F.fb.width,F.fb.height]),U!==(q?q.id:null)&&(this._setupStencil(F,ee,N,q),U=q?q.id:null),a.renderLayer(a,q,N,X)}this.renderedToTile?(F.dirty=!0,A.push(D.tileID)):G||--T,T===5&&(T=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,u.bindFramebuffer.set(null),u.viewport.set([0,0,a.width,a.height]),y.end+1}postRender(){}isLayerOrderingCorrect(i){let a=i.order.length,u=-1,h=a;for(let f=0;f<a;++f)this._style.isLayerDraped(i._mergedLayers[i.order[f]])?u=Math.max(u,f):h=Math.min(h,f);return h>u}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(a=>a.dem).forEach(a=>{i=Math.min(i,a.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,a,u){if(!this._visibleDemTiles)return null;let h=this._visibleDemTiles.filter(f=>f.dem).map(f=>{let y=f.tileID,w=1<<y.overscaledZ,{x:A,y:T}=y.canonical,S=A/w,D=(A+1)/w,z=T/w,F=(T+1)/w;return{minx:S,miny:z,maxx:D,maxy:F,t:f.dem.tree.raycastRoot(S,z,D,F,i,a,u),tile:f}});h.sort((f,y)=>(f.t!==null?f.t:Number.MAX_VALUE)-(y.t!==null?y.t:Number.MAX_VALUE));for(let f of h){if(f.t==null)return null;let y=f.tile.dem.tree.raycast(f.minx,f.miny,f.maxx,f.maxy,i,a,u);if(y!=null)return y}return null}_createFBO(){let i=this.painter.context,a=i.gl,u=this.drapeBufferSize;i.activeTexture.set(a.TEXTURE0);let h=new r.T(i,{width:u[0],height:u[1],data:null},a.RGBA);h.bind(a.LINEAR,a.CLAMP_TO_EDGE);let f=i.createFramebuffer(u[0],u[1],!0,null);return f.colorAttachment.set(h.texture),f.depthAttachment=new To(i,f.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,u[0],u[1]),this._stencilRef=0,f.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):f.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:f,tex:h,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(let i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{let a=this._style._mergedLayers[i],u=a.isHidden(this.painter.transform.zoom);return a.type==="custom"?!u&&a.shouldRedrape():!u&&a.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(let u of this._style.getSources())if(u instanceof ct){i=!0;break}if(!i)return;let a={};for(let u=0;u<this._style.order.length;++u){let h=this._style._mergedLayers[this._style.order[u]],f=this._style.getLayerSourceCache(h);if(f&&!a[f.id]&&!h.isHidden(this.painter.transform.zoom)&&h.type==="line"&&h.widthExpression()instanceof r.Z){a[f.id]=!0;for(let y of this.proxyCoords){let w=this.proxyToSource[y.key][f.id];if(w)for(let A of w)this._clearRenderCacheForTile(f.id,A)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(let u in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[u]._source instanceof tt){i=!0;break}if(!i)return;let a={};for(let u=0;u<this._style.order.length;++u){let h=this._style._mergedLayers[this._style.order[u]],f=this._style.getLayerSourceCache(h);if(!f||a[f.id]||h.isHidden(this.painter.transform.zoom)||h.type!=="raster")continue;let y=h.paint.get("raster-fade-duration");for(let w of this.proxyCoords){let A=this.proxyToSource[w.key][f.id];if(A)for(let T of A){let S=Ds(f.getTile(T),f.findLoadedParent(T,0),f,this.painter.transform,y);(S.opacity!==1||S.mix!==0)&&this._clearRenderCacheForTile(f.id,T)}}}}_setupDrapedRenderBatches(){let i=this._style.order,a=i.length;if(a===0)return;let u=[];this._pendingGroundEffectLayers=[];let h,f=0,y=this._style._mergedLayers[i[f]];for(;!this._style.isLayerDraped(y)&&y.isHidden(this.painter.transform.zoom)&&++f<a;)y=this._style._mergedLayers[i[f]];for(;f<a;++f){let w=this._style._mergedLayers[i[f]];w.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(w)?h===void 0&&(h=f):(w.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(f),h!==void 0&&(u.push({start:h,end:f-1}),h=void 0)))}if(h!==void 0&&u.push({start:h,end:f-1}),u.length!==0){let w=u[u.length-1];this._pendingGroundEffectLayers.every(A=>A>w.end)||r.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=u}_setupRenderCache(i){let a=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,a.renderCache.length>a.renderCachePool.length){let y=Object.values(a.proxyCachedFBO);a.proxyCachedFBO={};for(let w=0;w<y.length;++w){let A=Object.values(y[w]);a.renderCachePool.push(...A)}}return}this._clearRasterLayersFromRenderCache();let u=this.proxyCoords,h=this._tilesDirty;for(let y=u.length-1;y>=0;y--){let w=u[y];if(a.getTileByID(w.key),a.proxyCachedFBO[w.key]!==void 0){let A=i[w.key],T=this.proxyToSource[w.key],S=0;for(let D in T){let z=T[D],F=A[D];if(!F||F.length!==z.length||z.some((G,U)=>G!==F[U]||h[D]&&h[D].hasOwnProperty(G.key))){S=-1;break}++S}for(let D in a.proxyCachedFBO[w.key])a.renderCache[a.proxyCachedFBO[w.key][D]].dirty=S<0||S!==Object.values(A).length}}let f=[...this._drapedRenderBatches];f.sort((y,w)=>w.end-w.start-(y.end-y.start));for(let y of f)for(let w of u){if(a.proxyCachedFBO[w.key])continue;let A=a.renderCachePool.pop();A===void 0&&a.renderCache.length<50&&(A=a.renderCache.length,a.renderCache.push(this._createFBO())),A!==void 0&&(a.proxyCachedFBO[w.key]={},a.proxyCachedFBO[w.key][y.start]=A,a.renderCache[A].dirty=!0)}this._tilesDirty={}}_setupStencil(i,a,u,h){if(!h||!this._sourceTilesOverlap[h.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));let f=this.painter.context,y=f.gl;if(a.length<=1)return void(this._overlapStencilType=!1);let w;if(u.isTileClipped())w=a.length,this._overlapStencilMode.test={func:y.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(a[0].overscaledZ>a[a.length-1].overscaledZ))return void(this._overlapStencilType=!1);w=1,this._overlapStencilMode.test={func:y.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+w>255&&(f.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=w,this._overlapStencilMode.ref=this._stencilRef,u.isTileClipped()&&this._renderTileClippingMasks(a,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):Ut.disabled}_renderTileClippingMasks(i,a){let u=this.painter,h=this.painter.context,f=h.gl;u._tileClippingMaskIDs={},h.setColorMode(an.disabled),h.setDepthMode(kt.disabled);let y=u.getOrCreateProgram("clippingMask");for(let w of i){let A=u._tileClippingMaskIDs[w.key]=--a;y.draw(u,f.TRIANGLES,kt.disabled,new Ut({func:f.ALWAYS,mask:0},A,255,f.KEEP,f.KEEP,f.REPLACE),an.disabled,Dt.disabled,tr(w.projMatrix),"$clipping",u.tileExtentBuffer,u.quadTriangleIndexBuffer,u.tileExtentSegments)}}pointCoordinate(i){let a=this.painter.transform;if(i.x<0||i.x>a.width||i.y<0||i.y>a.height)return null;let u=[i.x,i.y,1,1];r.a7.transformMat4(u,u,a.pixelMatrixInverse),r.a7.scale(u,u,1/u[3]),u[0]/=a.worldSize,u[1]/=a.worldSize;let h=a._camera.position,f=r.bl(1,a.center.lat),y=[h[0],h[1],h[2]/f,0],w=r.N.subtract([],u.slice(0,3),y);r.N.normalize(w,w);let A=this.raycast(y,w,this._exaggeration);return A!==null&&A?(r.N.scaleAndAdd(y,y,w,A),y[3]=y[2],y[2]*=f,y):null}drawDepth(){let i=this.painter,a=i.context,u=this.proxySourceCache,h=Math.ceil(i.width),f=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===h&&this._depthFBO.height===f||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){let y=a.gl,w=a.createFramebuffer(h,f,!0,"renderbuffer");a.activeTexture.set(y.TEXTURE0);let A=new r.T(a,{width:h,height:f,data:null},y.RGBA);A.bind(y.NEAREST,y.CLAMP_TO_EDGE),w.colorAttachment.set(A.texture);let T=a.createRenderbuffer(a.gl.DEPTH_COMPONENT16,h,f);w.depthAttachment.set(T),this._depthFBO=w,this._depthTexture=A}a.bindFramebuffer.set(this._depthFBO.framebuffer),a.viewport.set([0,0,h,f]),function(y,w,A,T){if(y.transform.projection.name==="globe")return;let S=y.context,D=S.gl;S.clear({depth:1});let z=y.getOrCreateProgram("terrainDepth"),F=new kt(D.LESS,kt.ReadWrite,y.depthRangeFor3D);for(let G of T){let U=A.getTile(G),$=dc(G.projMatrix,0,[0,0,0]);w.setupElevationDraw(U,z),z.draw(y,D.TRIANGLES,F,Ut.disabled,an.unblended,Dt.backCCW,$,"terrain_depth",w.gridBuffer,w.gridIndexBuffer,w.gridNoSkirtSegments)}}(i,this,u,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,a,u){if(i.getSource()instanceof r.ap)return this._setupProxiedCoordsForImageSource(i,a,u);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};let h=this.proxiedCoords[i.id]=[],f=this.proxyCoords;for(let A=0;A<f.length;A++){let T=f[A],S=this._findTileCoveringTileID(T,i);if(S){let D=this._createProxiedId(T,S,u[T.key]&&u[T.key][i.id]);h.push(D),this.proxyToSource[T.key][i.id]=[D]}}let y=!1,w=new Set;for(let A=0;A<a.length;A++){let T=i.getTile(a[A]);if(!T||!T.hasData())continue;let S=this._findTileCoveringTileID(T.tileID,this.proxySourceCache);if(S&&S.tileID.canonical.z!==T.tileID.canonical.z){let D=this.proxyToSource[S.tileID.key][i.id],z=this._createProxiedId(S.tileID,T,u[S.tileID.key]&&u[S.tileID.key][i.id]);D?D.splice(D.length-1,0,z):this.proxyToSource[S.tileID.key][i.id]=[z];let F=this.proxyToSource[S.tileID.key][i.id];w.has(F)||w.add(F),h.push(z),y=!0}}if(this._sourceTilesOverlap[i.id]=y,y&&this._debugParams.sortTilesHiZFirst)for(let A of w)A.sort((T,S)=>S.overscaledZ-T.overscaledZ)}_setupProxiedCoordsForImageSource(i,a,u){if(!i.getSource().loaded())return;let h=this.proxiedCoords[i.id]=[],f=this.proxyCoords,y=i.getSource(),w=y.tileID;if(!w)return;let A=new r.P(w.x,w.y)._div(1<<w.z),T=y.coordinates.map(r.L.fromLngLat).reduce((D,z)=>(D.min.x=Math.min(D.min.x,z.x-A.x),D.min.y=Math.min(D.min.y,z.y-A.y),D.max.x=Math.max(D.max.x,z.x-A.x),D.max.y=Math.max(D.max.y,z.y-A.y),D),{min:new r.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new r.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),S=(D,z)=>{let F=D.wrap+D.canonical.x/(1<<D.canonical.z),G=D.canonical.y/(1<<D.canonical.z),U=r.V/(1<<D.canonical.z),$=z.wrap+z.canonical.x/(1<<z.canonical.z),N=z.canonical.y/(1<<z.canonical.z);return F+U<$+T.min.x||F>$+T.max.x||G+U<N+T.min.y||G>N+T.max.y};for(let D=0;D<f.length;D++){let z=f[D];for(let F=0;F<a.length;F++){let G=i.getTile(a[F]);if(!G||!G.hasData()||S(z,G.tileID))continue;let U=this._createProxiedId(z,G,u[z.key]&&u[z.key][i.id]),$=this.proxyToSource[z.key][i.id];$?$.push(U):this.proxyToSource[z.key][i.id]=[U],h.push(U)}}}_createProxiedId(i,a,u){let h=this.orthoMatrix;if(u){let f=u.find(y=>y.key===a.tileID.key);if(f)return f}if(a.tileID.key!==i.key){let f=i.canonical.z-a.tileID.canonical.z,y,w,A;h=r.a6.create();let T=a.tileID.wrap-i.wrap<<i.overscaledZ;f>0?(y=r.V>>f,w=y*((a.tileID.canonical.x<<f)-i.canonical.x+T),A=y*((a.tileID.canonical.y<<f)-i.canonical.y)):(y=r.V<<-f,w=r.V*(a.tileID.canonical.x-(i.canonical.x+T<<-f)),A=r.V*(a.tileID.canonical.y-(i.canonical.y<<-f))),r.a6.ortho(h,0,y,0,y,0,1),r.a6.translate(h,h,[w,A,0])}return new Od(a.tileID,i.key,h)}_findTileCoveringTileID(i,a){let u=a.getTile(i);if(u&&u.hasData())return u;let h=this._findCoveringTileCache[a.id],f=h[i.key];if(u=f?a.getTileByID(f):null,u&&u.hasData()||f===null)return u;let y=u?u.tileID:i,w=y.overscaledZ,A=a.getSource().minzoom,T=[];if(!f){let D=a.getSource().maxzoom;if(i.canonical.z>=D){let z=i.canonical.z-D;a.getSource().reparseOverscaled?(w=Math.max(i.canonical.z+2,a.transform.tileZoom),y=new r.am(w,i.wrap,D,i.canonical.x>>z,i.canonical.y>>z)):z!==0&&(w=D,y=new r.am(w,i.wrap,D,i.canonical.x>>z,i.canonical.y>>z))}y.key!==i.key&&(T.push(y.key),u=a.getTile(y))}let S=D=>{T.forEach(z=>{h[z]=D}),T.length=0};for(w-=1;w>=A&&(!u||!u.hasData());w--){u&&S(u.tileID.key);let D=y.calculateScaledKey(w);if(u=a.getTileByID(D),u&&u.hasData())break;let z=h[D];if(z===null)break;z===void 0?T.push(D):u=a.getTileByID(z)}return S(u?u.tileID.key:null),u&&u.hasData()?u:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,a){let u=this._tilesDirty[i];u||(u=this._tilesDirty[i]={}),u[a.key]=!0}}function mu(c,i,a){let u=function(w,A,T){let S=r.N.dot(A,w),D=r.N.dot(T,[.2126,.7152,.0722]),z=(G,U,$)=>(1-$)*G+$*U,F=z(1-.3*Math.min(D,1),1,Math.min(S+1,1));return z(.92,1,Math.asin(r.aa(A[2],-1,1))/Math.PI+.5)*F}(c,[0,0,1],i),h=[0,0,0];r.N.scale(h,a.slice(0,3),u);let f=[0,0,0];r.N.scale(f,i.slice(0,3),c[2]);let y=[0,0,0];return r.N.add(y,h,f),r.bU(y)}let _u=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Td=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class yu{static cacheKey(i,a,u,h){let f=`${a}${h?h.cacheKey:""}`;for(let y of u)i.usedDefines.includes(y)&&(f+=`/${y}`);return f}constructor(i,a,u,h,f,y,w){let A=i.gl;this.program=A.createProgram(),this.configuration=h,this.name=a,this.fixedDefines=[...y];let T=h?h.getBinderAttributes():[],S=(u.staticAttributes||[]).concat(T),D=h?h.defines():[];D=D.concat(y.map(N=>`#define ${N}`));let z=`#version 300 es
`,F=z+D.concat("precision mediump float;",uc,cu.fragmentSource).join(`
`);for(let N of u.fragmentIncludes)F+=`
${Uo[N]}`;F+=`
${u.fragmentSource}`;let G=z+D.concat("precision highp float;",uc,cu.vertexSource).join(`
`);for(let N of u.vertexIncludes)G+=`
${Uo[N]}`;G+=`
${u.vertexSource}`;let U=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(U,F),A.compileShader(U),A.attachShader(this.program,U);let $=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource($,G),A.compileShader($),A.attachShader(this.program,$),this.attributes={},this.numAttributes=S.length;for(let N=0;N<this.numAttributes;N++)if(S[N]){let q=S[N].startsWith("a_")?S[N]:`a_${S[N]}`;A.bindAttribLocation(this.program,N,q),this.attributes[q]=N}w&&w.shaderVaryings.length>0&&A.transformFeedbackVaryings(this.program,w.shaderVaryings,w.bufferMode),A.linkProgram(this.program),A.deleteShader($),A.deleteShader(U),this.fixedUniforms=f(i),this.binderUniforms=h?h.getUniforms(i):[],y.includes("TERRAIN")&&(this.terrainUniforms=(N=>({u_dem:new r.bO(N),u_dem_prev:new r.bO(N),u_dem_tl:new r.bL(N),u_dem_scale:new r.bN(N),u_dem_tl_prev:new r.bL(N),u_dem_scale_prev:new r.bN(N),u_dem_size:new r.bN(N),u_dem_lerp:new r.bN(N),u_exaggeration:new r.bN(N),u_depth:new r.bO(N),u_depth_size_inv:new r.bL(N),u_meter_to_dem:new r.bN(N),u_label_plane_matrix_inv:new r.bK(N)}))(i)),y.includes("GLOBE")&&(this.globeUniforms=(N=>({u_tile_tl_up:new r.bM(N),u_tile_tr_up:new r.bM(N),u_tile_br_up:new r.bM(N),u_tile_bl_up:new r.bM(N),u_tile_up_scale:new r.bN(N)}))(i)),y.includes("FOG")&&(this.fogUniforms=(N=>({u_fog_matrix:new r.bK(N),u_fog_range:new r.bL(N),u_fog_color:new r.bP(N),u_fog_horizon_blend:new r.bN(N),u_fog_vertical_limit:new r.bL(N),u_fog_temporal_offset:new r.bN(N),u_frustum_tl:new r.bM(N),u_frustum_tr:new r.bM(N),u_frustum_br:new r.bM(N),u_frustum_bl:new r.bM(N),u_globe_pos:new r.bM(N),u_globe_radius:new r.bN(N),u_globe_transition:new r.bN(N),u_is_globe:new r.bO(N),u_viewport:new r.bL(N)}))(i)),y.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(N=>({u_cutoff_params:new r.bP(N)}))(i)),y.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(N=>({u_lighting_ambient_color:new r.bM(N),u_lighting_directional_dir:new r.bM(N),u_lighting_directional_color:new r.bM(N),u_ground_radiance:new r.bM(N)}))(i)),y.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(N=>({u_light_matrix_0:new r.bK(N),u_light_matrix_1:new r.bK(N),u_fade_range:new r.bL(N),u_shadow_normal_offset:new r.bM(N),u_shadow_intensity:new r.bN(N),u_shadow_texel_size:new r.bN(N),u_shadow_map_resolution:new r.bN(N),u_shadow_direction:new r.bM(N),u_shadow_bias:new r.bM(N),u_shadowmap_0:new r.bO(N),u_shadowmap_1:new r.bO(N)}))(i))}}setTerrainUniformValues(i,a){if(!this.terrainUniforms)return;let u=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(let h in a)u[h]&&u[h].set(this.program,h,a[h])}}setGlobeUniformValues(i,a){if(!this.globeUniforms)return;let u=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(let h in a)u[h]&&u[h].set(this.program,h,a[h])}}setFogUniformValues(i,a){if(!this.fogUniforms)return;let u=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(let h in a)u[h].set(this.program,h,a[h])}}setCutoffUniformValues(i,a){if(!this.cutoffUniforms)return;let u=this.cutoffUniforms;if(!this.failedToCreate){i.program.set(this.program);for(let h in a)u[h].set(this.program,h,a[h])}}setLightsUniformValues(i,a){if(!this.lightsUniforms)return;let u=this.lightsUniforms;if(!this.failedToCreate){i.program.set(this.program);for(let h in a)u[h].set(this.program,h,a[h])}}setShadowUniformValues(i,a){if(this.failedToCreate||!this.shadowUniforms)return;let u=this.shadowUniforms;i.program.set(this.program);for(let h in a)u[h].set(this.program,h,a[h])}_drawDebugWireframe(i,a,u,h,f,y,w,A,T,S){let D=i.options.wireframe;if(D.terrain===!1&&D.layers2D===!1&&D.layers3D===!1)return;let z=i.context;if(!(!(!D.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!D.layers2D||i._terrain&&i._terrain.renderingToTexture||!_u.includes(this.name))||!(!D.layers3D||!Td.includes(this.name))))return;let F=z.gl,G=i.wireframeDebugCache.getLinesFromTrianglesBuffer(i.frameCounter,f,z);if(!G)return;let U=[...this.fixedDefines];U.push("DEBUG_WIREFRAME");let $=i.getOrCreateProgram(this.name,{config:this.configuration,defines:U});z.program.set($.program);let N=(X,te,Z)=>{if(te[X]&&Z[X])for(let ne in te[X])Z[X][ne]&&Z[X][ne].set(Z.program,ne,te[X][ne].current)};T&&T.setUniforms($.program,z,$.binderUniforms,w,{zoom:A}),N("fixedUniforms",this,$),N("terrainUniforms",this,$),N("globeUniforms",this,$),N("fogUniforms",this,$),N("lightsUniforms",this,$),N("shadowUniforms",this,$),G.bind(),z.setColorMode(new an([F.ONE,F.ONE_MINUS_SRC_ALPHA,F.ZERO,F.ONE],r.ax.transparent,[!0,!0,!0,!1])),z.setDepthMode(new kt(a.func===F.LESS?F.LEQUAL:a.func,kt.ReadOnly,a.range)),z.setStencilMode(Ut.disabled);let q=3*y.primitiveLength*2,ee=3*y.primitiveOffset*2*2;S&&S>1?F.drawElementsInstanced(F.LINES,q,F.UNSIGNED_SHORT,ee,S):F.drawElements(F.LINES,q,F.UNSIGNED_SHORT,ee),f.bind(),z.program.set(this.program),z.setDepthMode(a),z.setStencilMode(u),z.setColorMode(h)}draw(i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N){let q=i.context,ee=q.gl;if(this.failedToCreate)return;q.program.set(this.program),q.setDepthMode(u),q.setStencilMode(h),q.setColorMode(f),q.setCullFace(y);for(let ne of Object.keys(this.fixedUniforms))this.fixedUniforms[ne].set(this.program,ne,w[ne]);G&&G.setUniforms(this.program,q,this.binderUniforms,z,{zoom:F});let X={[ee.POINTS]:1,[ee.LINES]:2,[ee.TRIANGLES]:3,[ee.LINE_STRIP]:1}[a],te=N&&N.length>0;if(te){for(let ne of N)ee.bindBufferBase(ee.TRANSFORM_FEEDBACK_BUFFER,ne.targetIndex,ne.buffer.buffer);ee.beginTransformFeedback(a)}let Z=$&&$>0?1:void 0;for(let ne of D.get()){let le=ne.vaos||(ne.vaos={});(le[A]||(le[A]=new du)).bind(q,this,T,G?G.getPaintVertexBuffers():[],S,ne.vertexOffset,U||[],Z),$&&$>1?ee.drawElementsInstanced(a,ne.primitiveLength*X,ee.UNSIGNED_SHORT,ne.primitiveOffset*X*2,$):S?ee.drawElements(a,ne.primitiveLength*X,ee.UNSIGNED_SHORT,ne.primitiveOffset*X*2):ee.drawArrays(a,ne.vertexOffset,ne.vertexLength),a===ee.TRIANGLES&&S&&this._drawDebugWireframe(i,u,h,f,S,ne,z,F,G,$)}te&&ee.endTransformFeedback()}}function hc(c,i){let a=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,c.transform.tileZoom)/a,h=u*(i.tileID.canonical.x+i.tileID.wrap*a),f=u*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/r.a3(i,1,c.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}let xu=r.a6.create(),ks=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U)=>{let $=i.style.light,N=$.properties.get("position"),q=[N.x,N.y,N.z],ee=r.co.create();$.properties.get("anchor")==="viewport"&&(r.co.fromRotation(ee,-i.transform.angle),r.N.transformMat3(q,q,ee));let X=$.properties.get("color"),te=i.transform,Z={u_matrix:c,u_lightpos:q,u_lightintensity:$.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+a,u_opacity:u,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:xu,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:h,u_edge_radius:f,u_flood_light_color:D,u_vertical_scale:z,u_flood_light_intensity:F,u_ground_shadow_factor:G,u_emissive_strength:U};return te.projection.name==="globe"&&(Z.u_tile_id=[y.canonical.x,y.canonical.y,1<<y.canonical.z],Z.u_zoom_transition=A,Z.u_inv_rot_matrix=S,Z.u_merc_center=T,Z.u_up_dir=te.projection.upVector(new r.bs(0,0,0),T[0]*r.V,T[1]*r.V),Z.u_height_lift=w),Z},W=(c,i,a)=>({u_matrix:c,u_edge_radius:i,u_vertical_scale:a}),I=(c,i,a,u,h,f,y,w,A,T,S,D,z,F)=>{let G=ks(c,i,a,u,h,f,y,A,T,S,D,z,F,1,[0,0,0],0),U={u_height_factor:-Math.pow(2,y.overscaledZ)/w.tileSize/8};return r.e(G,hc(i,w),U)},B=(c,i)=>({u_matrix:c,u_emissive_strength:i}),H=(c,i,a,u)=>r.e(B(c,i),hc(a,u)),ge=(c,i,a)=>({u_matrix:c,u_world:a,u_emissive_strength:i}),Xe=(c,i,a,u,h)=>r.e(H(c,i,a,u),{u_world:h}),Ft=(c,i,a,u)=>{let h=r.V/a.tileSize;return{u_matrix:c,u_camera_to_center_distance:i.getCameraToCenterDistance(u),u_extrude_scale:[i.pixelsToGLUnits[0]/h,i.pixelsToGLUnits[1]/h]}},Ln=(c,i,a=1)=>({u_matrix:c,u_color:i,u_overlay:0,u_overlay_scale:a}),Gn=r.a6.create(),Ei=(c,i,a,u,h,f,y)=>{let w=c.transform,A=w.projection.name==="globe",T=A?r.cp(w.zoom,i.canonical)*w._pixelsPerMercatorPixel:r.a3(a,1,f),S={u_matrix:i.projMatrix,u_extrude_scale:T,u_intensity:y,u_inv_rot_matrix:Gn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){S.u_inv_rot_matrix=u,S.u_merc_center=h,S.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],S.u_zoom_transition=r.S(w.zoom);let D=h[0]*r.V,z=h[1]*r.V;S.u_up_dir=w.projection.upVector(new r.bs(0,0,0),D,z)}return S};function Sa(c,[i,a,u,h],[f,y]){if(f===y)return[0,0,0,0];let w=255*(c-1)/(c*(y-f));return[i*w,a*w,u*w,h*w]}function Rf(c,i,[a,u]){return a===u?0:.5/c+(i-a)*(c-1)/(c*(u-a))}let Vh=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N,q,ee,X)=>{return{u_matrix:c,u_normalize_matrix:i,u_globe_matrix:a,u_merc_matrix:u,u_grid_matrix:h,u_tl_parent:f,u_scale_parent:T,u_fade_t:S.mix,u_opacity:S.opacity*D.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:D.paint.get("raster-brightness-min"),u_brightness_high:D.paint.get("raster-brightness-max"),u_saturation_factor:(Z=D.paint.get("raster-saturation"),Z>0?1-1/(1.001-Z):-Z),u_contrast_factor:(te=D.paint.get("raster-contrast"),te>0?1/(1-te):1+te),u_spin_weights:vu(D.paint.get("raster-hue-rotate")),u_perspective_transform:z,u_raster_elevation:F,u_zoom_transition:y,u_merc_center:w,u_cutoff_params:A,u_colorization_mix:Sa(r.cq,U,N),u_colorization_offset:Rf(r.cq,$,N),u_color_ramp:G,u_texture_offset:[ee/(q+2*ee),q/(q+2*ee)],u_texture_res:[q+2*ee,q+2*ee],u_emissive_strength:X};var te,Z};function vu(c){c*=Math.PI/180;let i=Math.sin(c),a=Math.cos(c);return[(2*a+1)/3,(-Math.sqrt(3)*i-a+1)/3,(Math.sqrt(3)*i-a+1)/3]}let r_=(c,i,a,u,h,f,y,w,A,T,S,D)=>({u_matrix:c,u_normalize_matrix:i,u_globe_matrix:a,u_merc_matrix:u,u_grid_matrix:h,u_tl_parent:f,u_scale_parent:T,u_fade_t:S.mix,u_opacity:S.opacity,u_image0:0,u_image1:1,u_raster_elevation:D,u_zoom_transition:y,u_merc_center:w,u_cutoff_params:A}),a_=(c,i,a,u,h,f,y,w)=>({u_tile_offset:c,u_velocity:i,u_color_ramp:u,u_velocity_res:a,u_max_speed:h,u_texture_offset:f,u_data_scale:y,u_data_offset:w}),zf=(c,i,a,u,h,f,y,w)=>({u_velocity:c,u_velocity_res:i,u_max_speed:a,u_speed_factor:u,u_lifetime_delta:h,u_rand_seed:Math.random(),u_texture_offset:f,u_data_scale:y,u_data_offset:w}),Bf=r.a6.create(),Sd=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N)=>{let q=h.transform,ee={u_is_size_zoom_constant:+(c==="constant"||c==="source"),u_is_size_feature_constant:+(c==="constant"||c==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:q.getCameraToCenterDistance(U),u_rotate_symbol:+a,u_aspect_ratio:q.width/q.height,u_fade_change:h.options.fadeDuration?h.symbolFadeChange:1,u_matrix:f,u_label_plane_matrix:y,u_coord_matrix:w,u_is_text:+A,u_pitch_with_map:+u,u_texsize:T,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Bf,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Bf,u_up_vector:[0,-1,0],u_icon_transition:N||0,u_icon_saturation:$};return U.name==="globe"&&(ee.u_tile_id=[S.canonical.x,S.canonical.y,1<<S.canonical.z],ee.u_zoom_transition=D,ee.u_inv_rot_matrix=F,ee.u_merc_center=z,ee.u_camera_forward=q._camera.forward(),ee.u_ecef_origin=r.cr(q.globeMatrix,S.toUnwrapped()),ee.u_tile_matrix=Float32Array.from(q.globeMatrix),ee.u_up_vector=G),ee},bu=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$)=>r.e(Sd(c,i,a,u,h,f,y,w,A,T,D,z,F,G,U,$,1),{u_gamma_scale:u?h.transform.getCameraToCenterDistance($)*Math.cos(h.terrain?0:h.transform._pitch):1,u_device_pixel_ratio:r.f.devicePixelRatio,u_is_halo:+S,undefined:void 0}),Ed=(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U)=>r.e(bu(c,i,a,u,h,f,y,w,!0,A,!0,S,D,z,F,G,U),{u_texsize_icon:T,u_texture_icon:1}),jh=(c,i,a,u)=>({u_matrix:c,u_emissive_strength:i,u_opacity:a,u_color:u}),wu=(c,i,a,u,h,f,y)=>r.e(function(w,A,T,S){let D=T.imageManager.getPattern(w.toString(),A),{width:z,height:F}=T.imageManager.getPixelSize(A),G=Math.pow(2,S.tileID.overscaledZ),U=S.tileSize*Math.pow(2,T.transform.tileZoom)/G,$=U*(S.tileID.canonical.x+S.tileID.wrap*G),N=U*S.tileID.canonical.y;return{u_image:0,u_pattern_tl:D.tl,u_pattern_br:D.br,u_texsize:[z,F],u_pattern_size:D.displaySize,u_tile_units_to_pixels:1/r.a3(S,1,T.transform.tileZoom),u_pixel_coord_upper:[$>>16,N>>16],u_pixel_coord_lower:[65535&$,65535&N]}}(h,f,u,y),{u_matrix:c,u_emissive_strength:i,u_opacity:a}),Id=(c,i,a,u,h,f,y,w,A,T,S,D,z=[0,0,0],F)=>{let G=u.style.light,U=G.properties.get("position"),$=[-U.x,-U.y,U.z],N=r.co.create();G.properties.get("anchor")==="viewport"&&(r.co.fromRotation(N,-u.transform.angle),r.N.transformMat3($,$,N));let q=T.alphaMode==="MASK",ee=G.properties.get("color"),X=D.paint.get("model-ambient-occlusion-intensity"),te=D.paint.get("model-color").constantOr(r.ax.white),Z=D.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:c,u_lighting_matrix:i,u_normal_matrix:a,u_lightpos:$,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[ee.r,ee.g,ee.b],u_camera_pos:z,u_opacity:h,u_baseTextureIsAlpha:0,u_alphaMask:+q,u_alphaCutoff:T.alphaCutoff,u_baseColorFactor:[f.r,f.g,f.b,f.a],u_emissiveFactor:[y[0],y[1],y[2],1],u_metallicFactor:w,u_roughnessFactor:A,u_baseColorTexture:oo.BaseColor,u_metallicRoughnessTexture:oo.MetallicRoughness,u_normalTexture:oo.Normal,u_occlusionTexture:oo.Occlusion,u_emissionTexture:oo.Emission,u_color_mix:[te.r,te.g,te.b,Z],u_aoIntensity:X,u_emissive_strength:S,u_occlusionTextureTransform:F||[0,0,0,0]}},Cu=new Float32Array(16),Mu=(c,i=Cu,a=Cu)=>({u_matrix:c,u_instance:i,u_node_matrix:a}),s_={fillExtrusion:c=>({u_matrix:new r.bK(c),u_lightpos:new r.bM(c),u_lightintensity:new r.bN(c),u_lightcolor:new r.bM(c),u_vertical_gradient:new r.bN(c),u_opacity:new r.bN(c),u_edge_radius:new r.bN(c),u_ao:new r.bL(c),u_tile_id:new r.bM(c),u_zoom_transition:new r.bN(c),u_inv_rot_matrix:new r.bK(c),u_merc_center:new r.bL(c),u_up_dir:new r.bM(c),u_height_lift:new r.bN(c),u_flood_light_color:new r.bM(c),u_vertical_scale:new r.bN(c),u_flood_light_intensity:new r.bN(c),u_ground_shadow_factor:new r.bM(c),u_emissive_strength:new r.bN(c)}),fillExtrusionDepth:c=>({u_matrix:new r.bK(c),u_edge_radius:new r.bN(c),u_vertical_scale:new r.bN(c)}),fillExtrusionPattern:c=>({u_matrix:new r.bK(c),u_lightpos:new r.bM(c),u_lightintensity:new r.bN(c),u_lightcolor:new r.bM(c),u_vertical_gradient:new r.bN(c),u_height_factor:new r.bN(c),u_edge_radius:new r.bN(c),u_ao:new r.bL(c),u_tile_id:new r.bM(c),u_zoom_transition:new r.bN(c),u_inv_rot_matrix:new r.bK(c),u_merc_center:new r.bL(c),u_up_dir:new r.bM(c),u_height_lift:new r.bN(c),u_image:new r.bO(c),u_texsize:new r.bL(c),u_pixel_coord_upper:new r.bL(c),u_pixel_coord_lower:new r.bL(c),u_tile_units_to_pixels:new r.bN(c),u_opacity:new r.bN(c)}),fillExtrusionGroundEffect:c=>({u_matrix:new r.bK(c),u_opacity:new r.bN(c),u_ao_pass:new r.bN(c),u_meter_to_tile:new r.bN(c),u_ao:new r.bL(c),u_flood_light_intensity:new r.bN(c),u_flood_light_color:new r.bM(c),u_attenuation:new r.bN(c),u_edge_radius:new r.bN(c),u_fb:new r.bO(c),u_fb_size:new r.bN(c)}),fill:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c)}),fillPattern:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c),u_image:new r.bO(c),u_texsize:new r.bL(c),u_pixel_coord_upper:new r.bL(c),u_pixel_coord_lower:new r.bL(c),u_tile_units_to_pixels:new r.bN(c)}),fillOutline:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c),u_world:new r.bL(c)}),fillOutlinePattern:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c),u_world:new r.bL(c),u_image:new r.bO(c),u_texsize:new r.bL(c),u_pixel_coord_upper:new r.bL(c),u_pixel_coord_lower:new r.bL(c),u_tile_units_to_pixels:new r.bN(c)}),circle:r.cs,collisionBox:c=>({u_matrix:new r.bK(c),u_camera_to_center_distance:new r.bN(c),u_extrude_scale:new r.bL(c)}),collisionCircle:c=>({u_matrix:new r.bK(c),u_inv_matrix:new r.bK(c),u_camera_to_center_distance:new r.bN(c),u_viewport_size:new r.bL(c)}),debug:c=>({u_color:new r.ca(c),u_matrix:new r.bK(c),u_overlay:new r.bO(c),u_overlay_scale:new r.bN(c)}),clippingMask:c=>({u_matrix:new r.bK(c)}),heatmap:c=>({u_extrude_scale:new r.bN(c),u_intensity:new r.bN(c),u_matrix:new r.bK(c),u_inv_rot_matrix:new r.bK(c),u_merc_center:new r.bL(c),u_tile_id:new r.bM(c),u_zoom_transition:new r.bN(c),u_up_dir:new r.bM(c)}),heatmapTexture:c=>({u_image:new r.bO(c),u_color_ramp:new r.bO(c),u_opacity:new r.bN(c)}),hillshade:c=>({u_matrix:new r.bK(c),u_image:new r.bO(c),u_latrange:new r.bL(c),u_light:new r.bL(c),u_shadow:new r.ca(c),u_highlight:new r.ca(c),u_emissive_strength:new r.bN(c),u_accent:new r.ca(c)}),hillshadePrepare:c=>({u_matrix:new r.bK(c),u_image:new r.bO(c),u_dimension:new r.bL(c),u_zoom:new r.bN(c)}),line:r.ct,linePattern:r.cu,raster:c=>({u_matrix:new r.bK(c),u_normalize_matrix:new r.bK(c),u_globe_matrix:new r.bK(c),u_merc_matrix:new r.bK(c),u_grid_matrix:new r.cb(c),u_tl_parent:new r.bL(c),u_scale_parent:new r.bN(c),u_fade_t:new r.bN(c),u_opacity:new r.bN(c),u_image0:new r.bO(c),u_image1:new r.bO(c),u_brightness_low:new r.bN(c),u_brightness_high:new r.bN(c),u_saturation_factor:new r.bN(c),u_contrast_factor:new r.bN(c),u_spin_weights:new r.bM(c),u_perspective_transform:new r.bL(c),u_raster_elevation:new r.bN(c),u_zoom_transition:new r.bN(c),u_merc_center:new r.bL(c),u_cutoff_params:new r.bP(c),u_colorization_mix:new r.bP(c),u_colorization_offset:new r.bN(c),u_color_ramp:new r.bO(c),u_texture_offset:new r.bL(c),u_texture_res:new r.bL(c),u_emissive_strength:new r.bN(c)}),rasterParticle:c=>({u_matrix:new r.bK(c),u_normalize_matrix:new r.bK(c),u_globe_matrix:new r.bK(c),u_merc_matrix:new r.bK(c),u_grid_matrix:new r.cb(c),u_tl_parent:new r.bL(c),u_scale_parent:new r.bN(c),u_fade_t:new r.bN(c),u_opacity:new r.bN(c),u_image0:new r.bO(c),u_image1:new r.bO(c),u_raster_elevation:new r.bN(c),u_zoom_transition:new r.bN(c),u_merc_center:new r.bL(c),u_cutoff_params:new r.bP(c)}),rasterParticleTexture:c=>({u_texture:new r.bO(c),u_opacity:new r.bN(c)}),rasterParticleDraw:c=>({u_tile_offset:new r.bL(c),u_velocity:new r.bO(c),u_color_ramp:new r.bO(c),u_velocity_res:new r.bL(c),u_max_speed:new r.bN(c),u_texture_offset:new r.bL(c),u_data_scale:new r.bP(c),u_data_offset:new r.bN(c)}),rasterParticleUpdate:c=>({u_velocity:new r.bO(c),u_velocity_res:new r.bL(c),u_max_speed:new r.bN(c),u_speed_factor:new r.bN(c),u_lifetime_delta:new r.bN(c),u_rand_seed:new r.bN(c),u_texture_offset:new r.bL(c),u_data_scale:new r.bP(c),u_data_offset:new r.bN(c)}),symbolIcon:c=>({u_is_size_zoom_constant:new r.bO(c),u_is_size_feature_constant:new r.bO(c),u_size_t:new r.bN(c),u_size:new r.bN(c),u_camera_to_center_distance:new r.bN(c),u_rotate_symbol:new r.bO(c),u_aspect_ratio:new r.bN(c),u_fade_change:new r.bN(c),u_matrix:new r.bK(c),u_label_plane_matrix:new r.bK(c),u_coord_matrix:new r.bK(c),u_is_text:new r.bO(c),u_pitch_with_map:new r.bO(c),u_texsize:new r.bL(c),u_tile_id:new r.bM(c),u_zoom_transition:new r.bN(c),u_inv_rot_matrix:new r.bK(c),u_merc_center:new r.bL(c),u_camera_forward:new r.bM(c),u_tile_matrix:new r.bK(c),u_up_vector:new r.bM(c),u_ecef_origin:new r.bM(c),u_texture:new r.bO(c),u_icon_transition:new r.bN(c),u_icon_saturation:new r.bN(c)}),symbolSDF:c=>({u_is_size_zoom_constant:new r.bO(c),u_is_size_feature_constant:new r.bO(c),u_size_t:new r.bN(c),u_size:new r.bN(c),u_camera_to_center_distance:new r.bN(c),u_rotate_symbol:new r.bO(c),u_aspect_ratio:new r.bN(c),u_fade_change:new r.bN(c),u_matrix:new r.bK(c),u_label_plane_matrix:new r.bK(c),u_coord_matrix:new r.bK(c),u_is_text:new r.bO(c),u_pitch_with_map:new r.bO(c),u_texsize:new r.bL(c),u_texture:new r.bO(c),u_gamma_scale:new r.bN(c),u_device_pixel_ratio:new r.bN(c),u_tile_id:new r.bM(c),u_zoom_transition:new r.bN(c),u_inv_rot_matrix:new r.bK(c),u_merc_center:new r.bL(c),u_camera_forward:new r.bM(c),u_tile_matrix:new r.bK(c),u_up_vector:new r.bM(c),u_ecef_origin:new r.bM(c),u_is_halo:new r.bO(c)}),symbolTextAndIcon:c=>({u_is_size_zoom_constant:new r.bO(c),u_is_size_feature_constant:new r.bO(c),u_size_t:new r.bN(c),u_size:new r.bN(c),u_camera_to_center_distance:new r.bN(c),u_rotate_symbol:new r.bO(c),u_aspect_ratio:new r.bN(c),u_fade_change:new r.bN(c),u_matrix:new r.bK(c),u_label_plane_matrix:new r.bK(c),u_coord_matrix:new r.bK(c),u_is_text:new r.bO(c),u_pitch_with_map:new r.bO(c),u_texsize:new r.bL(c),u_texsize_icon:new r.bL(c),u_texture:new r.bO(c),u_texture_icon:new r.bO(c),u_gamma_scale:new r.bN(c),u_device_pixel_ratio:new r.bN(c),u_is_halo:new r.bO(c)}),background:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c),u_opacity:new r.bN(c),u_color:new r.ca(c)}),backgroundPattern:c=>({u_matrix:new r.bK(c),u_emissive_strength:new r.bN(c),u_opacity:new r.bN(c),u_image:new r.bO(c),u_pattern_tl:new r.bL(c),u_pattern_br:new r.bL(c),u_texsize:new r.bL(c),u_pattern_size:new r.bL(c),u_pixel_coord_upper:new r.bL(c),u_pixel_coord_lower:new r.bL(c),u_tile_units_to_pixels:new r.bN(c)}),terrainRaster:Ad,terrainDepth:Ad,skybox:c=>({u_matrix:new r.bK(c),u_sun_direction:new r.bM(c),u_cubemap:new r.bO(c),u_opacity:new r.bN(c),u_temporal_offset:new r.bN(c)}),skyboxGradient:c=>({u_matrix:new r.bK(c),u_color_ramp:new r.bO(c),u_center_direction:new r.bM(c),u_radius:new r.bN(c),u_opacity:new r.bN(c),u_temporal_offset:new r.bN(c)}),skyboxCapture:c=>({u_matrix_3f:new r.cb(c),u_sun_direction:new r.bM(c),u_sun_intensity:new r.bN(c),u_color_tint_r:new r.bP(c),u_color_tint_m:new r.bP(c),u_luminance:new r.bN(c)}),globeRaster:c=>({u_proj_matrix:new r.bK(c),u_globe_matrix:new r.bK(c),u_normalize_matrix:new r.bK(c),u_merc_matrix:new r.bK(c),u_zoom_transition:new r.bN(c),u_merc_center:new r.bL(c),u_image0:new r.bO(c),u_grid_matrix:new r.cb(c),u_skirt_height:new r.bN(c),u_far_z_cutoff:new r.bN(c),u_frustum_tl:new r.bM(c),u_frustum_tr:new r.bM(c),u_frustum_br:new r.bM(c),u_frustum_bl:new r.bM(c),u_globe_pos:new r.bM(c),u_globe_radius:new r.bN(c),u_viewport:new r.bL(c)}),globeAtmosphere:c=>({u_frustum_tl:new r.bM(c),u_frustum_tr:new r.bM(c),u_frustum_br:new r.bM(c),u_frustum_bl:new r.bM(c),u_horizon:new r.bN(c),u_transition:new r.bN(c),u_fadeout_range:new r.bN(c),u_color:new r.bP(c),u_high_color:new r.bP(c),u_space_color:new r.bP(c),u_temporal_offset:new r.bN(c),u_horizon_angle:new r.bN(c)}),model:c=>({u_matrix:new r.bK(c),u_lighting_matrix:new r.bK(c),u_normal_matrix:new r.bK(c),u_lightpos:new r.bM(c),u_lightintensity:new r.bN(c),u_lightcolor:new r.bM(c),u_camera_pos:new r.bM(c),u_opacity:new r.bN(c),u_baseColorFactor:new r.bP(c),u_emissiveFactor:new r.bP(c),u_metallicFactor:new r.bN(c),u_roughnessFactor:new r.bN(c),u_baseTextureIsAlpha:new r.bO(c),u_alphaMask:new r.bO(c),u_alphaCutoff:new r.bN(c),u_baseColorTexture:new r.bO(c),u_metallicRoughnessTexture:new r.bO(c),u_normalTexture:new r.bO(c),u_occlusionTexture:new r.bO(c),u_emissionTexture:new r.bO(c),u_color_mix:new r.bP(c),u_aoIntensity:new r.bN(c),u_emissive_strength:new r.bN(c),u_occlusionTextureTransform:new r.bP(c)}),modelDepth:c=>({u_matrix:new r.bK(c),u_instance:new r.bK(c),u_node_matrix:new r.bK(c)}),groundShadow:c=>({u_matrix:new r.bK(c),u_ground_shadow_factor:new r.bM(c)}),stars:c=>({u_matrix:new r.bK(c),u_up:new r.bM(c),u_right:new r.bM(c),u_intensity_multiplier:new r.bN(c)})},Yr;function Xr(c,i,a,u,h,f,y){let w=c.context,A=w.gl,T=c.transform,S=c.getOrCreateProgram("collisionBox"),D=[],z=0,F=0;for(let X=0;X<u.length;X++){let te=u[X],Z=i.getTile(te),ne=Z.getBucket(a);if(!ne)continue;let le=Jl(te,ne,T),ue=le;h[0]===0&&h[1]===0||(ue=c.translatePosMatrix(le,Z,h,f));let fe=y?ne.textCollisionBox:ne.iconCollisionBox,Ae=ne.collisionCircleArray;if(Ae.length>0){let ye=r.a6.create(),ke=ue;r.a6.mul(ye,ne.placementInvProjMatrix,T.glCoordMatrix),r.a6.mul(ye,ye,ne.placementViewportMatrix),D.push({circleArray:Ae,circleOffset:F,transform:ke,invTransform:ye,projection:ne.getProjection()}),z+=Ae.length/4,F=z}fe&&(c.terrain&&c.terrain.setupElevationDraw(Z,S),S.draw(c,A.LINES,kt.disabled,Ut.disabled,c.colorModeForRenderPass(),Dt.disabled,Ft(ue,T,Z,ne.getProjection()),a.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,null,T.zoom,null,[fe.collisionVertexBuffer,fe.collisionVertexBufferExt]))}if(!y||!D.length)return;let G=c.getOrCreateProgram("collisionCircle"),U=new r.cv;U.resize(4*z),U._trim();let $=0;for(let X of D)for(let te=0;te<X.circleArray.length/4;te++){let Z=4*te,ne=X.circleArray[Z+0],le=X.circleArray[Z+1],ue=X.circleArray[Z+2],fe=X.circleArray[Z+3];U.emplace($++,ne,le,ue,fe,0),U.emplace($++,ne,le,ue,fe,1),U.emplace($++,ne,le,ue,fe,2),U.emplace($++,ne,le,ue,fe,3)}(!Yr||Yr.length<2*z)&&(Yr=function(X){let te=2*X,Z=new r.aw;Z.resize(te),Z._trim();for(let ne=0;ne<te;ne++){let le=6*ne;Z.uint16[le+0]=4*ne+0,Z.uint16[le+1]=4*ne+1,Z.uint16[le+2]=4*ne+2,Z.uint16[le+3]=4*ne+2,Z.uint16[le+4]=4*ne+3,Z.uint16[le+5]=4*ne+0}return Z}(z));let N=w.createIndexBuffer(Yr,!0),q=w.createVertexBuffer(U,r.cw.members,!0);for(let X of D){let te={u_matrix:X.transform,u_inv_matrix:X.invTransform,u_camera_to_center_distance:(ee=T).getCameraToCenterDistance(X.projection),u_viewport_size:[ee.width,ee.height]};G.draw(c,A.TRIANGLES,kt.disabled,Ut.disabled,c.colorModeForRenderPass(),Dt.disabled,te,a.id,q,N,r.aB.simpleSegment(0,2*X.circleOffset,X.circleArray.length,X.circleArray.length/2),null,T.zoom)}var ee;q.destroy(),N.destroy()}let Ka=r.a6.create();function Au(c){let i=c._camera.getWorldToCamera(c.worldSize,1),a=r.a6.multiply([],i,c.globeMatrix);r.a6.invert(a,a);let u=[0,0,0],h=[0,1,0,0];return r.a7.transformMat4(h,h,a),u[0]=h[0],u[1]=h[1],u[2]=h[2],r.N.normalize(u,u),u}function xt({width:c,height:i,anchor:a,textOffset:u,textScale:h},f){let{horizontalAlign:y,verticalAlign:w}=r.bf(a),A=-(y-.5)*c,T=-(w-.5)*i,S=r.bd(a,u);return new r.P((A/h+S[0])*f,(T/h+S[1])*f)}function Ff(c,i,a,u,h,f,y,w,A,T,S){let D=c.text.placedSymbolArray,z=c.text.dynamicLayoutVertexArray,F=c.icon.dynamicLayoutVertexArray,G={},U=c.getProjection(),$=Cs(w,U,f),N=f.elevation,q=U.upVectorScale(w.canonical,f.center.lat,f.worldSize).metersToTile;z.clear();for(let ee=0;ee<D.length;ee++){let X=D.get(ee),{tileAnchorX:te,tileAnchorY:Z,numGlyphs:ne}=X,le=X.hidden||!X.crossTileID||c.allowVerticalPlacement&&!X.placedOrientation?null:u[X.crossTileID];if(le){let ue=0,fe=0,Ae=0;if(N){let Ze=N?N.getAtTileOffset(w,te,Z):0,[it,Je,dt]=U.upVector(w.canonical,te,Z);ue=Ze*it*q,fe=Ze*Je*q,Ae=Ze*dt*q}let[ye,ke,Ee,$e]=Jo(X.projectedAnchorX+ue,X.projectedAnchorY+fe,X.projectedAnchorZ+Ae,a?$:y),xe=pd(f.getCameraToCenterDistance(U),$e),Te=h.evaluateSizeForFeature(c.textSizeData,T,X)*xe/r.bc;a&&(Te*=c.tilePixelRatio/A);let he=xt(le,Te);a?({x:ye,y:ke,z:Ee}=U.projectTilePoint(te+he.x,Z+he.y,w.canonical),[ye,ke,Ee]=Jo(ye+ue,ke+fe,Ee+Ae,y)):(i&&he._rotate(-f.angle),ye+=he.x,ke+=he.y,Ee=0);let Ce=c.allowVerticalPlacement&&X.placedOrientation===r.b6.vertical?Math.PI/2:0;for(let Ze=0;Ze<ne;Ze++)r.b9(z,ye,ke,Ee,Ce);S&&X.associatedIconIndex>=0&&(G[X.associatedIconIndex]={x:ye,y:ke,z:Ee,angle:Ce})}else ba(ne,z)}if(S){F.clear();let ee=c.icon.placedSymbolArray;for(let X=0;X<ee.length;X++){let te=ee.get(X),{numGlyphs:Z}=te,ne=G[X];if(te.hidden||!ne)ba(Z,F);else{let{x:le,y:ue,z:fe,angle:Ae}=ne;for(let ye=0;ye<Z;ye++)r.b9(F,le,ue,fe,Ae)}}c.icon.dynamicLayoutVertexBuffer.updateData(F)}c.text.dynamicLayoutVertexBuffer.updateData(z)}function Dd(c,i,a,u,h,f,y={}){let w=a.paint.get("icon-translate"),A=a.paint.get("text-translate"),T=a.paint.get("icon-translate-anchor"),S=a.paint.get("text-translate-anchor"),D=a.layout.get("icon-rotation-alignment"),z=a.layout.get("text-rotation-alignment"),F=a.layout.get("icon-pitch-alignment"),G=a.layout.get("text-pitch-alignment"),U=a.layout.get("icon-keep-upright"),$=a.layout.get("text-keep-upright"),N=a.paint.get("icon-color-saturation"),q=c.context,ee=q.gl,X=c.transform,te=D==="map",Z=z==="map",ne=F==="map",le=G==="map",ue=a.layout.get("symbol-sort-key").constantOr(1)!==void 0,fe=!1,Ae=c.depthModeForSublayer(0,kt.ReadOnly),ye=[r.a5(X.center.lng),r.ae(X.center.lat)],ke=a.layout.get("text-variable-anchor"),Ee=X.projection.name==="globe",$e=[],xe=[0,-1,0];for(let Te of u){let he=i.getTile(Te),Ce=he.getBucket(a);if(!Ce||Ce.projection.name==="mercator"&&Ee||Ce.fullyClipped)continue;let Ze=Ce.projection.name==="globe",it=Ze?r.S(X.zoom):0,Je=Cs(Te,Ce.getProjection(),X),dt=X.calculatePixelsToTileUnitsMatrix(he),Ct=ke&&Ce.hasTextData(),It=Ce.hasIconTextFit()&&Ct&&Ce.hasIconData(),Ot=Ce.getProjection().createInversionMatrix(X,Te.canonical),St=()=>{let wi=te&&a.layout.get("symbol-placement")!=="point",dn=[],En=wi||It,hn=a.paint.get("icon-image-cross-fade").constantOr(0);c.terrainRenderModeElevated()&&ne&&dn.push("PITCH_WITH_MAP_TERRAIN"),Ze&&(dn.push("PROJECTION_GLOBE_VIEW"),En&&dn.push("PROJECTED_POS_ON_VIEWPORT")),hn>0&&dn.push("ICON_TRANSITION"),Ce.icon.zOffsetVertexBuffer&&dn.push("Z_OFFSET"),N<1&&dn.push("SATURATION");let Tn=Ce.icon.programConfigurations.get(a.id),si=c.getOrCreateProgram(Ce.sdfIcons?"symbolSDF":"symbolIcon",{config:Tn,defines:dn}),Fn,ao=he.imageAtlasTexture?he.imageAtlasTexture.size:[0,0],xo=Ce.iconSizeData,or=r.b5(xo,X.zoom),Ia=ne||X.pitch!==0,rr=ul(Je,he.tileID.canonical,ne,te,X,Ce.getProjection(),dt),so=$a(Je,he.tileID.canonical,ne,te,X,Ce.getProjection(),dt),qi=c.translatePosMatrix(so,he,w,T,!0),Io=c.translatePosMatrix(Je,he,w,T),Ho=En?Ka:rr,ar=te&&!ne&&!wi,Da=xe;!Ee&&!X.mercatorFromTransition||te||(Da=Au(X));let Us=Ze?Da:xe;Fn=Ce.sdfIcons&&!Ce.iconsInText?bu(xo.kind,or,ar,ne,c,Io,Ho,qi,!1,ao,!0,Te,it,ye,Ot,Us,Ce.getProjection()):Sd(xo.kind,or,ar,ne,c,Io,Ho,qi,!1,ao,Te,it,ye,Ot,Us,Ce.getProjection(),N,hn);let Pl=he.imageAtlasTexture?he.imageAtlasTexture:null,Hu=a.layout.get("icon-size").constantOr(0)!==1||Ce.iconsNeedLinear,$u=Ce.sdfIcons||c.options.rotating||c.options.zooming||Hu||Ia?ee.LINEAR:ee.NEAREST,_p=Ce.sdfIcons&&a.paint.get("icon-halo-width").constantOr(1)!==0,Wu=c.terrain&&ne&&wi?r.a6.invert(r.a6.create(),rr):Ka;if(wi&&Ce.icon){let _c=X.elevation,Ud=_c?_c.getAtTileOffsetFunc(Te,X.center.lat,X.worldSize,Ce.getProjection()):null,ns=Yl(Je,he.tileID.canonical,ne,te,X,Ce.getProjection(),dt);Xl(Ce,Je,c,!1,ns,so,ne,U,Ud,Te)}return{program:si,buffers:Ce.icon,uniformValues:Fn,atlasTexture:Pl,atlasTextureIcon:null,atlasInterpolation:$u,atlasInterpolationIcon:null,isSDF:Ce.sdfIcons,hasHalo:_p,tile:he,labelPlaneMatrixInv:Wu}},Qt=()=>{let wi=Z&&a.layout.get("symbol-placement")!=="point",dn=[],En=wi||ke||It;c.terrainRenderModeElevated()&&le&&dn.push("PITCH_WITH_MAP_TERRAIN"),Ze&&(dn.push("PROJECTION_GLOBE_VIEW"),En&&dn.push("PROJECTED_POS_ON_VIEWPORT")),Ce.text.zOffsetVertexBuffer&&dn.push("Z_OFFSET");let hn=Ce.text.programConfigurations.get(a.id),Tn=c.getOrCreateProgram(Ce.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:hn,defines:dn}),si,Fn=[0,0],ao=null,xo=Ce.textSizeData;Ce.iconsInText&&(Fn=he.imageAtlasTexture?he.imageAtlasTexture.size:[0,0],ao=he.imageAtlasTexture?he.imageAtlasTexture:null,si=le||X.pitch!==0||c.options.rotating||c.options.zooming||xo.kind==="composite"||xo.kind==="camera"?ee.LINEAR:ee.NEAREST);let or=he.glyphAtlasTexture?he.glyphAtlasTexture.size:[0,0],Ia=r.b5(xo,X.zoom),rr=ul(Je,he.tileID.canonical,le,Z,X,Ce.getProjection(),dt),so=$a(Je,he.tileID.canonical,le,Z,X,Ce.getProjection(),dt),qi=c.translatePosMatrix(so,he,A,S,!0),Io=c.translatePosMatrix(Je,he,A,S),Ho=En?Ka:rr,ar=Z&&!le&&!wi,Da=xe;!Ee&&!X.mercatorFromTransition||Z||(Da=Au(X));let Us=Ze?Da:xe,Pl;Pl=Ce.iconsInText?Ed(xo.kind,Ia,ar,le,c,Io,Ho,qi,or,Fn,Te,it,ye,Ot,Us,Ce.getProjection()):bu(xo.kind,Ia,ar,le,c,Io,Ho,qi,!0,or,!0,Te,it,ye,Ot,Us,Ce.getProjection());let Hu=he.glyphAtlasTexture?he.glyphAtlasTexture:null,$u=ee.LINEAR,_p=a.paint.get("text-halo-width").constantOr(1)!==0,Wu=c.terrain&&le&&wi?r.a6.invert(r.a6.create(),rr):Ka;if(wi&&Ce.text){let _c=X.elevation,Ud=_c?_c.getAtTileOffsetFunc(Te,X.center.lat,X.worldSize,Ce.getProjection()):null,ns=Yl(Je,he.tileID.canonical,le,Z,X,Ce.getProjection(),dt);Xl(Ce,Je,c,!0,ns,so,le,$,Ud,Te)}return{program:Tn,buffers:Ce.text,uniformValues:Pl,atlasTexture:Hu,atlasTextureIcon:ao,atlasInterpolation:$u,atlasInterpolationIcon:si,isSDF:!0,hasHalo:_p,tile:he,labelPlaneMatrixInv:Wu}},Gt=Ce.icon.segments.get().length,Zt=Ce.text.segments.get().length,$t=Gt&&!y.onlyText?St():null,Mn=Zt&&!y.onlyIcons?Qt():null,ii=a.paint.get("icon-opacity").constantOr(1),un=a.paint.get("text-opacity").constantOr(1);if(ue&&Ce.canOverlap){fe=!0;let wi=ii&&!y.onlyText?Ce.icon.segments.get():[],dn=un&&!y.onlyIcons?Ce.text.segments.get():[];for(let En of wi)$e.push({segments:new r.aB([En]),sortKey:En.sortKey,state:$t});for(let En of dn)$e.push({segments:new r.aB([En]),sortKey:En.sortKey,state:Mn})}else y.onlyText||$e.push({segments:ii?Ce.icon.segments:new r.aB([]),sortKey:0,state:$t}),y.onlyIcons||$e.push({segments:un?Ce.text.segments:new r.aB([]),sortKey:0,state:Mn})}fe&&$e.sort((Te,he)=>Te.sortKey-he.sortKey);for(let Te of $e){let he=Te.state;if(he)if(c.terrain&&c.terrain.setupElevationDraw(he.tile,he.program,{useDepthForOcclusion:X.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:he.labelPlaneMatrixInv}),q.activeTexture.set(ee.TEXTURE0),he.atlasTexture&&he.atlasTexture.bind(he.atlasInterpolation,ee.CLAMP_TO_EDGE,!0),he.atlasTextureIcon&&(q.activeTexture.set(ee.TEXTURE1),he.atlasTextureIcon&&he.atlasTextureIcon.bind(he.atlasInterpolationIcon,ee.CLAMP_TO_EDGE,!0)),c.uploadCommonLightUniforms(c.context,he.program),he.hasHalo){let Ce=he.uniformValues;Ce.u_is_halo=1,Rs(he.buffers,Te.segments,a,c,he.program,Ae,h,f,Ce,2),Ce.u_is_halo=0}else{if(he.isSDF){let Ce=he.uniformValues;he.hasHalo&&(Ce.u_is_halo=1,Rs(he.buffers,Te.segments,a,c,he.program,Ae,h,f,Ce,1)),Ce.u_is_halo=0}Rs(he.buffers,Te.segments,a,c,he.program,Ae,h,f,he.uniformValues,1)}}}function Rs(c,i,a,u,h,f,y,w,A,T){let S=[c.dynamicLayoutVertexBuffer,c.opacityVertexBuffer,c.iconTransitioningVertexBuffer,c.globeExtVertexBuffer,c.zOffsetVertexBuffer];h.draw(u,u.context.gl.TRIANGLES,f,y,w,Dt.disabled,A,a.id,c.layoutVertexBuffer,c.indexBuffer,i,a.paint,u.transform.zoom,c.programConfigurations.get(a.id),S,T)}function wl(c,i,a,u,h,f,y){let w=c.context.gl,A=a.paint.get("fill-pattern"),T=A&&A.constantOr(1),S,D,z,F,G;y?(D=T&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",S=w.LINES):(D=T?"fillPattern":"fill",S=w.TRIANGLES);for(let U of u){let $=i.getTile(U);if(T&&!$.patternsLoaded())continue;let N=$.getBucket(a);if(!N)continue;c.prepareDrawTile();let q=N.programConfigurations.get(a.id),ee=c.isTileAffectedByFog(U),X=c.getOrCreateProgram(D,{config:q,overrideFog:ee});T&&(c.context.activeTexture.set(w.TEXTURE0),$.imageAtlasTexture&&$.imageAtlasTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),q.updatePaintBuffers());let te=A.constantOr(null);if(te&&$.imageAtlas){let le=$.imageAtlas.patternPositions[te.toString()];le&&q.setConstantPatternPositions(le)}let Z=c.translatePosMatrix(U.projMatrix,$,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor")),ne=a.paint.get("fill-emissive-strength");if(y){F=N.indexBuffer2,G=N.segments2;let le=c.terrain&&c.terrain.renderingToTexture?c.terrain.drapeBufferSize:[w.drawingBufferWidth,w.drawingBufferHeight];z=D==="fillOutlinePattern"&&T?Xe(Z,ne,c,$,le):ge(Z,ne,le)}else F=N.indexBuffer,G=N.segments,z=T?H(Z,ne,c,$):B(Z,ne);c.uploadCommonUniforms(c.context,X,U.toUnwrapped()),X.draw(c,S,h,c.stencilModeForClipping(U),f,Dt.disabled,z,a.id,N.layoutVertexBuffer,F,G,a.paint,c.transform.zoom,q,void 0)}}function Mt(c,i,a,u,h,f,y,w){a.resetLayerRenderingStats(c);let A=c.context,T=A.gl,S=c.transform,D=a.paint.get("fill-extrusion-pattern"),z=D.constantOr(1),F=a.paint.get("fill-extrusion-opacity"),G=c.style.enable3dLights(),U=a.paint.get(G&&!z?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),$=[a.paint.get("fill-extrusion-ambient-occlusion-intensity"),U],N=a.layout.get("fill-extrusion-edge-radius"),q=N>0&&!a.paint.get("fill-extrusion-rounded-roof"),ee=q?0:N,X=S.projection.name==="globe"?r.cF():0,te=S.projection.name==="globe",Z=te?r.S(S.zoom):0,ne=[r.a5(S.center.lng),r.ae(S.center.lat)],le=a.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),ue=a.paint.get("fill-extrusion-flood-light-intensity"),fe=a.paint.get("fill-extrusion-vertical-scale"),Ae=qr(c,a.paint.get("fill-extrusion-cutoff-fade-range")),ye=a.paint.get("fill-extrusion-emissive-strength"),ke=[],Ee;te&&ke.push("PROJECTION_GLOBE_VIEW"),$[0]>0&&ke.push("FAUX_AO"),q&&ke.push("ZERO_ROOF_RADIUS"),w&&ke.push("HAS_CENTROID"),ue>0&&ke.push("FLOOD_LIGHT"),Ae.shouldRenderCutoff&&ke.push("RENDER_CUTOFF");let $e=c.renderPass==="shadow",xe=c.shadowRenderer,Te=$e&&!!xe;c.shadowRenderer&&(c.shadowRenderer.useNormalOffset=!0);let he=[0,0,0];if(xe){let it=c.style.directionalLight,Je=c.style.ambientLight;it&&Je&&(he=_l(it,Je)),Ee=ke.concat(["SHADOWS_SINGLE_CASCADE"])}let Ce=Te?"fillExtrusionDepth":z?"fillExtrusionPattern":"fillExtrusion",Ze=a.getLayerRenderingStats();for(let it of u){let Je=i.getTile(it),dt=Je.getBucket(a);if(!dt||dt.projection.name!==S.projection.name)continue;let Ct=!1;xe&&(Ct=xe.getMaxCascadeForTile(it.toUnwrapped())===0);let It=c.isTileAffectedByFog(it),Ot=dt.programConfigurations.get(a.id),St=c.getOrCreateProgram(Ce,{config:Ot,defines:Ct?Ee:ke,overrideFog:It});if(c.terrain&&c.terrain.setupElevationDraw(Je,St,{useMeterToDem:!0}),!dt.centroidVertexBuffer){let ii=St.attributes.a_centroid_pos;ii!==void 0&&T.vertexAttrib2f(ii,0,0)}!$e&&xe&&xe.setupShadows(Je.tileID.toUnwrapped(),St,"vector-tile",Je.tileID.overscaledZ),z&&(c.context.activeTexture.set(T.TEXTURE0),Je.imageAtlasTexture&&Je.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ot.updatePaintBuffers());let Qt=D.constantOr(null);if(Qt&&Je.imageAtlas){let ii=Je.imageAtlas.patternPositions[Qt.toString()];ii&&Ot.setConstantPatternPositions(ii)}let Gt=a.paint.get("fill-extrusion-vertical-gradient"),Zt;if($e&&xe){if(Nf(Je.tileID,dt,c))continue;let ii=xe.calculateShadowPassMatrixFromTile(Je.tileID.toUnwrapped());Zt=W(ii,ee,fe)}else{let ii=c.translatePosMatrix(it.expandedProjMatrix,Je,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),un=S.projection.createInversionMatrix(S,it.canonical);Zt=z?I(ii,c,Gt,F,$,ee,it,Je,X,Z,ne,un,le,fe):ks(ii,c,Gt,F,$,ee,it,X,Z,ne,un,le,fe,ue,he,ye)}c.uploadCommonUniforms(A,St,it.toUnwrapped(),null,Ae);let $t=dt.segments;if(S.projection.name==="mercator"&&!$e&&($t=dt.getVisibleSegments(Je.tileID,c.terrain,c.transform.getFrustum(0)),!$t.get().length))continue;if(Ze)if($e)for(let ii of $t.get())Ze.numRenderedVerticesInShadowPass+=ii.primitiveLength;else for(let ii of $t.get())Ze.numRenderedVerticesInTransparentPass+=ii.primitiveLength;let Mn=[];(c.terrain||w)&&Mn.push(dt.centroidVertexBuffer),te&&Mn.push(dt.layoutVertexExtBuffer),St.draw(c,A.gl.TRIANGLES,h,f,y,Dt.backCCW,Zt,a.id,dt.layoutVertexBuffer,dt.indexBuffer,$t,a.paint,c.transform.zoom,Ot,Mn)}c.shadowRenderer&&(c.shadowRenderer.useNormalOffset=!1)}function zs(c,i,a,u,h,f,y,w,A,T,S,D,z,F,G,U,$,N,q){let ee=c.context,X=ee.gl,te=c.transform,Z=c.transform.zoom,ne=[],le=qr(c,a.paint.get("fill-extrusion-cutoff-fade-range"));T==="clear"?(ne.push("CLEAR_SUBPASS"),q&&(ne.push("CLEAR_FROM_TEXTURE"),ee.activeTexture.set(X.TEXTURE0),q.bind(X.LINEAR,X.CLAMP_TO_EDGE))):T==="sdf"&&ne.push("SDF_SUBPASS"),$&&ne.push("HAS_CENTROID"),le.shouldRenderCutoff&&ne.push("RENDER_CUTOFF");let ue=a.layout.get("fill-extrusion-edge-radius"),fe=(Ae,ye,ke,Ee,$e)=>{let xe=ye.programConfigurations.get(a.id),Te=c.isTileAffectedByFog(Ae),he=c.getOrCreateProgram("fillExtrusionGroundEffect",{config:xe,defines:ne,overrideFog:Te}),Ce=((it,Je,dt,Ct,It,Ot,St,Qt,Gt,Zt,$t)=>({u_matrix:Je,u_opacity:dt,u_ao_pass:Ct?1:0,u_meter_to_tile:It,u_ao:Ot,u_flood_light_intensity:St,u_flood_light_color:Qt,u_attenuation:Gt,u_edge_radius:Zt,u_fb:0,u_fb_size:$t}))(0,Ee,S,A,$e,[D,z*$e],F,G,U,Z>=17?0:ue*$e,q?q.size[0]:0),Ze=[];$&&Ze.push(ye.hiddenByLandmarkVertexBuffer),c.uploadCommonUniforms(ee,he,Ae.toUnwrapped(),null,le),he.draw(c,ee.gl.TRIANGLES,h,f,y,w,Ce,a.id,ye.vertexBuffer,ye.indexBuffer,ke,a.paint,Z,xe,Ze)};for(let Ae of u){let ye=i.getTile(Ae),ke=ye.getBucket(a);if(!ke||ke.projection.name!==te.projection.name||!ke.groundEffect||ke.groundEffect&&!ke.groundEffect.hasData())continue;let Ee=ke.groundEffect,$e=1/ke.tileToMeter;{let xe=c.translatePosMatrix(Ae.projMatrix,ye,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Te=Ee.getDefaultSegment();fe(Ae,Ee,Te,xe,$e)}if(N)for(let xe=0;xe<4;xe++){let Te=r.cG[xe](Ae),he=i.getTile(Te);if(!he)continue;let Ce=he.getBucket(a);if(!Ce||Ce.projection.name!==te.projection.name||!Ce.groundEffect||Ce.groundEffect&&!Ce.groundEffect.hasData())continue;let Ze=Ce.groundEffect,it,Je;xe===0?(it=[-r.V,0,0],Je=1):xe===1?(it=[r.V,0,0],Je=0):xe===2?(it=[0,-r.V,0],Je=3):(it=[0,r.V,0],Je=2);let dt=Ze.regionSegments[Je];if(!dt)continue;let Ct=new Float32Array(16);r.a6.translate(Ct,Ae.projMatrix,it),fe(Ae,Ze,dt,c.translatePosMatrix(Ct,ye,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),$e)}}}function l_(c,i,a,u,h,f,y){u.centroidVertexArray.length===0&&u.createCentroidsBuffer();let w=f?f.findDEMTileFor(a):null;if(!(w&&w.dem||y))return;let A=N=>new r.P(Math.ceil((N+r.cJ)*r.cK),0),T=N=>{let q=i.getSource().minzoom,ee=te=>{let Z=i.getTileByID(te);if(Z&&Z.hasData())return Z.getBucket(h)},X=[0,-1,1];for(let te of X){if(N.overscaledZ+te<q)continue;let Z=ee(N.calculateScaledKey(N.overscaledZ+te));if(Z)return Z}},S=[0,0,0],D=(N,q)=>(S[0]=Math.min(N.min.y,q.min.y),S[1]=Math.max(N.max.y,q.max.y),S[2]=r.V-q.min.x>N.max.x?q.min.x-r.V:N.max.x,S),z=(N,q)=>(S[0]=Math.min(N.min.x,q.min.x),S[1]=Math.max(N.max.x,q.max.x),S[2]=r.V-q.min.y>N.max.y?q.min.y-r.V:N.max.y,S),F=[(N,q)=>D(N,q),(N,q)=>D(q,N),(N,q)=>z(N,q),(N,q)=>z(q,N)],G=(N,q,ee,X,te,Z,ne)=>{if(!f)return 0;let le=[[Z?ee:N,Z?N:ee,0],[Z?ee:q,Z?q:ee,0]],ue=ne<0?r.V+ne:ne,fe=[Z?ue:(N+q)/2,Z?(N+q)/2:ue,0];return ee===0&&ne<0||ee!==0&&ne>0?f.getForTilePoints(te,[fe],!0,X):le.push(fe),f.getForTilePoints(a,le,!0,w),Math.max(le[0][2],le[1][2],fe[2])/f.exaggeration()};for(let N=0;N<4;N++){let q=u.borderFeatureIndices[N];if(q.length===0)continue;let ee=r.cG[N](a),X=T(ee);if(!(X&&X instanceof r.cH)||u.borderDoneWithNeighborZ[N]===X.canonical.z)continue;X.centroidVertexArray.length===0&&X.createCentroidsBuffer();let te=f?f.findDEMTileFor(ee):null;if(!(te&&te.dem||y))continue;let Z=(N<2?1:5)-N,ne=X.borderDoneWithNeighborZ[Z]!==u.canonical.z,le=X.borderFeatureIndices[Z],ue=0;if(u.canonical.z!==X.canonical.z){for(let fe of q)u.showCentroid(u.featuresOnBorder[fe]);if(ne)for(let fe of le)X.showCentroid(X.featuresOnBorder[fe]);u.borderDoneWithNeighborZ[N]=X.canonical.z,X.borderDoneWithNeighborZ[Z]=u.canonical.z}for(let fe of q){let Ae=u.featuresOnBorder[fe],ye=u.centroidData[Ae.centroidDataIndex],ke=Ae.borders[N],Ee;for(;ue<le.length;){Ee=X.featuresOnBorder[le[ue]];let $e=Ee.borders[Z];if($e[1]>ke[0]+3||$e[0]>ke[0]-3)break;X.showCentroid(Ee),ue++}if(Ee&&ue<le.length){let $e=ue,xe=0;for(;!(Ee.borders[Z][0]>ke[1]-3)&&(xe++,++ue!==le.length);)Ee=X.featuresOnBorder[le[ue]];if(Ee=X.featuresOnBorder[le[$e]],xe>1){let Ce=Ee.borders[Z];Math.abs(ke[0]-Ce[0])<3&&Math.abs(ke[1]-Ce[1])<3&&(xe=1,ue=$e+1)}else if(xe===0){u.showCentroid(Ae);continue}let Te=X.centroidData[Ee.centroidDataIndex];y&&xe===1&&(((U=ye).flags|($=Te).flags)&r.cI?(U.flags|=r.cI,$.flags|=r.cI):(U.flags&=~r.cI,$.flags&=~r.cI));let he=Ae.intersectsCount()>1||Ee.intersectsCount()>1;if(xe>1)ue=$e,ye.centroidXY=Te.centroidXY=new r.P(0,0);else if(te&&te.dem&&!he){let Ce=F[N](ye,Te),Ze=N%2?r.V-1:0,it=G(Ce[0],Math.min(r.V-1,Ce[1]),Ze,te,ee,N<2,Ce[2]);ye.centroidXY=Te.centroidXY=A(it)}else he?ye.centroidXY=Te.centroidXY=new r.P(0,0):(ye.centroidXY=u.encodeBorderCentroid(Ae),Te.centroidXY=X.encodeBorderCentroid(Ee));u.writeCentroidToBuffer(ye),X.writeCentroidToBuffer(Te)}else u.showCentroid(Ae)}u.borderDoneWithNeighborZ[N]=X.canonical.z,X.borderDoneWithNeighborZ[Z]=u.canonical.z}var U,$;(u.needsCentroidUpdate||!u.centroidVertexBuffer&&u.centroidVertexArray.length!==0)&&u.uploadCentroid(c)}let c_=[1,0,0],Uh=[0,1,0],Lf=[0,0,1];function Nf(c,i,a){let u=a.transform,h=a.shadowRenderer;if(!h)return!0;let f=c.toUnwrapped(),y=u.tileSize*h._cascades[a.currentShadowCascade].scale,w=i.maxHeight;if(u.elevation){let U=u.elevation.getMinMaxForTile(c);U&&(w+=U.max)}let A=[...h.shadowDirection];A[2]=-A[2];let T=h.computeSimplifiedTileShadowVolume(f,w,y,A);if(!T)return!1;let S=[c_,Uh,Lf,A,[A[0],0,A[2]],[0,A[1],A[2]]],D=u.projection.name==="globe",z=u.scaleZoom(y),F=r.bq.fromInvProjectionMatrix(u.invProjMatrix,u.worldSize,z,!D),G=h.getCurrentCascadeFrustum();return F.intersectsPrecise(T.vertices,T.planes,S)===0||G.intersectsPrecise(T.vertices,T.planes,S)===0}function Vf(c){return[c[0]*r.cL,c[1]*r.cL,c[2]*r.cL,0]}function Gh(c,i,a,u,h,f,y,w,A){let T=u.getSource(),S=a.globeSharedBuffers;if(!S)return;let D,z,F;if(i&&(D=u.getTile(i)),T instanceof r.ap?(z=T.texture,F=r.cj(0,0,a.transform)):D&&i&&(z=D.texture,F=r.cj(i.canonical.z,i.canonical.x,a.transform)),!z||!F)return;c||(F=r.a6.scale(r.a6.create(),F,[1,-1,1]));let G=a.context,U=G.gl,$=h.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR,N=a.colorModeForDrapableLayerRenderPass(f),q=y.defines;q.push("GLOBE_POLES");let ee=new kt(U.LEQUAL,kt.ReadWrite,a.depthRangeFor3D),X=Float32Array.from(a.transform.expandedFarZProjMatrix),te=Float32Array.from(r.aT(r.ci(new r.bs(0,0,0))));a.terrain&&a.terrain.prepareDrawTile(),G.activeTexture.set(U.TEXTURE0),z.bind($,U.CLAMP_TO_EDGE),G.activeTexture.set(U.TEXTURE1),z.bind($,U.CLAMP_TO_EDGE),z.useMipmap&&G.extTextureFilterAnisotropic&&a.transform.pitch>20&&U.texParameterf(U.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);let[Z,ne,le,ue]=i?S.getPoleBuffers(i.canonical.z,!1):S.getPoleBuffers(0,!0),fe=h.paint.get("raster-elevation"),Ae;c?(Ae=Z,a.renderDefaultNorthPole=fe!==0):(Ae=ne,a.renderDefaultSouthPole=fe!==0);let ye=Vf(y.mix),ke=(($e,xe,Te,he,Ce,Ze,it,Je,dt,Ct,It,Ot,St)=>Vh($e,xe,Te,new Float32Array(16),new Float32Array(9),[0,0],he,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Ze,[0,0],Je,2,Ct,It,Ot,1,0,St))(X,te,F,r.S(a.transform.zoom),0,h,0,fe,0,ye,y.offset,y.range,f),Ee=a.getOrCreateProgram("raster",{defines:q});a.uploadCommonUniforms(G,Ee,null),Ee.draw(a,U.TRIANGLES,ee,A,N,w,ke,h.id,Ae,le,ue)}function Hh(c){let i=c._nearZ,a=c.projection.farthestPixelDistance(c),u=a-i,h=.2*c.height,f=i+h;return[i,a,(f-h-i)/u,(f-i)/u]}function $h(c,i,a,u){if(c)return i instanceof rt&&c instanceof Ha?i.getTextureDescriptor(c,a,!0):{texture:c.texture,mix:Vf(u.mix),offset:u.offset,buffer:0,tileSize:1}}function Wh(c,i,a){if(!c)return null;let u=i.getTextureDescriptor(c,a,!0);if(!u)return null;let{texture:h,mix:f,offset:y,tileSize:w,buffer:A,format:T}=u;if(!h||!T)return null;let S=!1;return T==="uint32"&&(S=!0,f[3]=0,f=Sa(r.cM,f,[0,a.paint.get("raster-particle-max-speed")]),y=Rf(r.cM,y,[0,a.paint.get("raster-particle-max-speed")])),{texture:h,textureOffset:[A/(w+2*A),w/(w+2*A)],tileSize:w,scalarData:S,scale:f,offset:y,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[T]]}}function Zh(c){let i=c._nearZ,a=c.projection.farthestPixelDistance(c),u=a-i,h=.2*c.height,f=i+h;return[i,a,(f-h-i)/u,(f-i)/u]}let nr=new r.ax(1,0,0,1),Bs=new r.ax(0,1,0,1),jf=new r.ax(0,0,1,1),qh=new r.ax(1,0,1,1),Yh=new r.ax(0,1,1,1);function Fs(c,i,a,u,h,f,y){let w=c.context,A=c.transform,T=w.gl,S=A.projection.name==="globe",D=S?["PROJECTION_GLOBE_VIEW"]:[],z=r.a6.clone(a.projMatrix);if(S&&r.S(A.zoom)>0){let ye=r.aS(a.canonical,A),ke=r.cN(ye);z=r.a6.multiply(new Float32Array(16),A.globeMatrix,ke),r.a6.multiply(z,A.projMatrix,z)}let F=r.a6.create();F[12]+=2*h/(r.f.devicePixelRatio*A.width),F[13]+=2*f/(r.f.devicePixelRatio*A.height),r.a6.multiply(z,F,z);let G=c.getOrCreateProgram("debug",{defines:D}),U=i.getTileByID(a.key);c.terrain&&c.terrain.setupElevationDraw(U,G);let $=kt.disabled,N=Ut.disabled,q=c.colorModeForRenderPass(),ee="$debug";w.activeTexture.set(T.TEXTURE0),c.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),S?U._makeGlobeTileDebugBuffers(c.context,A):U._makeDebugTileBoundsBuffers(c.context,A.projection);let X=U._tileDebugBuffer||c.debugBuffer,te=U._tileDebugIndexBuffer||c.debugIndexBuffer,Z=U._tileDebugSegments||c.debugSegments;if(G.draw(c,T.LINE_STRIP,$,N,q,Dt.disabled,Ln(z,u),ee,X,te,Z,null,null,null,[U._globeTileDebugBorderBuffer]),y){let ye=U.latestRawTileData,ke=Math.floor((ye&&ye.byteLength||0)/1024),Ee=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(Ee+=` => ${a.overscaledZ}`),Ee+=` ${U.state}`,Ee+=` ${ke}kb`,function($e,xe){$e.initDebugOverlayCanvas();let Te=$e.debugOverlayCanvas,he=$e.context.gl,Ce=$e.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,Te.width,Te.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(xe,5,5),Ce.strokeText(xe,5,5),$e.debugOverlayTexture.update(Te),$e.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(c,Ee)}let ne=i.getTile(a).tileSize,le=512/Math.min(ne,512)*(a.overscaledZ/A.zoom)*.5,ue=U._tileDebugTextBuffer||c.debugBuffer,fe=U._tileDebugTextIndexBuffer||c.quadTriangleIndexBuffer,Ae=U._tileDebugTextSegments||c.debugSegments;G.draw(c,T.TRIANGLES,$,N,an.alphaBlended,Dt.disabled,Ln(z,r.ax.transparent,le),ee,ue,fe,Ae,null,null,null,[U._globeTileDebugTextBuffer])}function Xh(c,i,a,u){vi(c,0,i+a/2,c.transform.width,a,u)}function br(c,i,a,u){vi(c,i-a/2,0,a,c.transform.height,u)}function vi(c,i,a,u,h,f){let y=c.context,w=y.gl;w.enable(w.SCISSOR_TEST),w.scissor(i*r.f.devicePixelRatio,a*r.f.devicePixelRatio,u*r.f.devicePixelRatio,h*r.f.devicePixelRatio),y.clear({color:f}),w.disable(w.SCISSOR_TEST)}let kd=r.ay([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Qh}=kd;function Ja(c,i,a,u){c.emplaceBack(i,a,u)}class Kh{constructor(i){this.vertexArray=new r.az,this.indices=new r.aw,Ja(this.vertexArray,-1,-1,1),Ja(this.vertexArray,1,-1,1),Ja(this.vertexArray,-1,1,1),Ja(this.vertexArray,1,1,1),Ja(this.vertexArray,-1,-1,-1),Ja(this.vertexArray,1,-1,-1),Ja(this.vertexArray,-1,1,-1),Ja(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,Qh),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=r.aB.simpleSegment(0,0,36,12)}}function Cl(c,i,a,u,h,f){let y=c.context.gl,w=i.paint.get("sky-atmosphere-color"),A=i.paint.get("sky-atmosphere-halo-color"),T=i.paint.get("sky-atmosphere-sun-intensity"),S=((D,z,F,G,U)=>({u_matrix_3f:D,u_sun_direction:z,u_sun_intensity:F,u_color_tint_r:[G.r,G.g,G.b,G.a],u_color_tint_m:[U.r,U.g,U.b,U.a],u_luminance:5e-5}))(r.co.fromMat4(r.co.create(),u),h,T,w,A);y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_CUBE_MAP_POSITIVE_X+f,i.skyboxTexture,0),a.draw(c,y.TRIANGLES,kt.disabled,Ut.disabled,an.unblended,Dt.frontCW,S,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}let u_=r.ay([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class pc{constructor(i){let a=new r.cO;a.emplaceBack(-1,1,1,0,0),a.emplaceBack(1,1,1,1,0),a.emplaceBack(1,-1,1,1,1),a.emplaceBack(-1,-1,1,0,1);let u=new r.aw;u.emplaceBack(0,1,2),u.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(a,u_.members),this.indexBuffer=i.createIndexBuffer(u),this.segments=r.aB.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}let Pu=r.ay([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class at{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Rt{constructor(i){this.colorModeAlphaBlendedWriteRGB=new an([1,ma,1,ma],r.ax.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new an([1,0,1,0],r.ax.transparent,[!1,!1,!1,!0]),this.params=new at,this.updateNeeded=!0,i.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),i.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),i.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(i){let a=i.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new pc(a);let u=this.params.sizeRange,h=this.params.intensityRange,f=function(S){let D=r.aA(30),z=[];for(let F=0;F<S;++F){let G=2*Math.PI*D(),U=Math.acos(1-2*D())-.5*Math.PI;z.push(r.N.fromValues(Math.cos(U)*Math.cos(G),Math.cos(U)*Math.sin(G),Math.sin(U)))}return z}(this.params.starsCount),y=r.aA(300),w=new r.cP,A=new r.aw,T=0;for(let S=0;S<f.length;++S){let D=r.N.scale([],f[S],200),z=Math.max(0,1+.01*u*(1*y()-.5)),F=Math.max(0,1+.01*h*(1*y()-.5));w.emplaceBack(D[0],D[1],D[2],-1,-1,z,F),w.emplaceBack(D[0],D[1],D[2],1,-1,z,F),w.emplaceBack(D[0],D[1],D[2],1,1,z,F),w.emplaceBack(D[0],D[1],D[2],-1,1,z,F),A.emplaceBack(T+0,T+1,T+2),A.emplaceBack(T+0,T+2,T+3),T+=4}this.starsVx=a.createVertexBuffer(w,Pu.members),this.starsIdx=a.createIndexBuffer(A),this.starsSegments=r.aB.simpleSegment(0,0,w.length,A.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(i,a){let u=i.context,h=u.gl,f=i.transform,y=new kt(h.LEQUAL,kt.ReadOnly,[0,1]),w=r.S(f.zoom),A=a.properties.get("color").toArray01(),T=a.properties.get("high-color").toArray01(),S=a.properties.get("space-color").toArray01PremultipliedAlpha(),D=5e-4,z=r.cQ(a.properties.get("horizon-blend"),0,1,D,.25),F=r.cd(i,u,f)&&z===D?f.worldSize/(2*Math.PI*1.025)-1:f.globeRadius,G=i.frameCounter/1e3%1,U=r.N.length(f.globeCenterInViewSpace),$=Math.sqrt(Math.pow(U,2)-Math.pow(F,2)),N=Math.acos($/U),q=ee=>{let X=f.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ee&&X.push("ALPHA_PASS");let te=i.getOrCreateProgram("globeAtmosphere",{defines:X}),Z=((le,ue,fe,Ae,ye,ke,Ee,$e,xe,Te,he,Ce)=>({u_frustum_tl:le,u_frustum_tr:ue,u_frustum_br:fe,u_frustum_bl:Ae,u_horizon:ye,u_transition:ke,u_fadeout_range:Ee,u_color:$e,u_high_color:xe,u_space_color:Te,u_temporal_offset:he,u_horizon_angle:Ce}))(f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.frustumCorners.horizon,w,z,A,T,S,G,N);i.uploadCommonUniforms(u,te);let ne=this.atmosphereBuffer;ne&&te.draw(i,h.TRIANGLES,y,Ut.disabled,ee?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Dt.backCW,Z,ee?"atmosphere_glow_alpha":"atmosphere_glow",ne.vertexBuffer,ne.indexBuffer,ne.segments)};q(!1),q(!0)}drawStars(i,a){let u=r.aa(a.properties.get("star-intensity"),0,1);if(u===0)return;let h=i.context,f=h.gl,y=i.transform,w=i.getOrCreateProgram("stars"),A=r.bi.identity([]);r.bi.rotateX(A,A,-y._pitch),r.bi.rotateZ(A,A,-y.angle),r.bi.rotateX(A,A,r.bj(y._center.lat)),r.bi.rotateY(A,A,-r.bj(y._center.lng));let T=r.a6.fromQuat(new Float32Array(16),A),S=r.a6.multiply([],y.starsProjMatrix,T),D=r.co.fromMat4([],T),z=r.co.invert([],D),F=[0,1,0];r.N.transformMat3(F,F,z),r.N.scale(F,F,this.params.sizeMultiplier);let G=[1,0,0];r.N.transformMat3(G,G,z),r.N.scale(G,G,this.params.sizeMultiplier);let U=($=F,N=G,q=u,{u_matrix:Float32Array.from(S),u_up:$,u_right:N,u_intensity_multiplier:q});var $,N,q;i.uploadCommonUniforms(h,w),this.starsVx&&this.starsIdx&&w.draw(i,f.TRIANGLES,kt.disabled,Ut.disabled,this.colorModeAlphaBlendedWriteRGB,Dt.disabled,U,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Ml(c,i){let a=[...c],u=i.cameraWorldSizeForFog/i.worldSize,h=r.a6.identity([]);return r.a6.scale(h,h,[u,u,1]),r.a6.multiply(a,h,a),r.a6.multiply(a,i.worldToFogMatrix,a),a}function bi(c,i,a,u){let h=a.material,f=u.context,{baseColorTexture:y,metallicRoughnessTexture:w}=h.pbrMetallicRoughness,{normalTexture:A,occlusionTexture:T,emissionTexture:S}=h;function D(z,F,G){if(z&&(c.push(F),f.activeTexture.set(f.gl.TEXTURE0+G),z.gfxTexture)){let{minFilter:U,magFilter:$,wrapS:N,wrapT:q}=z.sampler;z.gfxTexture.bindExtraParam(U,$,N,q)}}D(y,"HAS_TEXTURE_u_baseColorTexture",oo.BaseColor),D(w,"HAS_TEXTURE_u_metallicRoughnessTexture",oo.MetallicRoughness),D(A,"HAS_TEXTURE_u_normalTexture",oo.Normal),D(T,"HAS_TEXTURE_u_occlusionTexture",oo.Occlusion),D(S,"HAS_TEXTURE_u_emissionTexture",oo.Emission),a.texcoordBuffer&&(c.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(a.texcoordBuffer)),a.colorBuffer&&(c.push(a.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(a.colorBuffer)),a.normalBuffer&&(c.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(a.normalBuffer)),a.pbrBuffer&&(c.push("HAS_ATTRIBUTE_a_pbr"),c.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(a.pbrBuffer)),h.alphaMode!=="OPAQUE"&&h.alphaMode!=="MASK"||c.push("UNPREMULT_TEXTURE_IN_SHADER"),h.defined||c.push("DIFFUSE_SHADED"),c.push("USE_STANDARD_DERIVATIVES")}function Ou(c,i,a,u,h,f){let y=a.paint.get("model-opacity"),w=i.context,A=new kt(i.context.gl.LEQUAL,kt.ReadWrite,i.depthRangeFor3D),T=i.transform,S=c.mesh,D=S.material,z=D.pbrMetallicRoughness,F=i.style.fog,G;G=i.transform.projection.zAxisUnit==="pixels"?[...c.nodeModelMatrix]:r.a6.multiply([],u.zScaleMatrix,c.nodeModelMatrix),r.a6.multiply(G,u.negCameraPosMatrix,G);let U=r.a6.invert([],G);r.a6.transpose(U,U);let $=a.paint.get("model-emissive-strength").constantOr(0),N=Id(new Float32Array(c.worldViewProjection),new Float32Array(G),new Float32Array(U),i,y,z.baseColorFactor,D.emissiveFactor,z.metallicFactor,z.roughnessFactor,D,$,a),q={defines:[]},ee=[];bi(q.defines,ee,S,i);let X=i.shadowRenderer;X&&(X.useNormalOffset=!1);let te=null;if(F){let le=Ml(c.nodeModelMatrix,i.transform);if(te=new Float32Array(le),T.projection.name!=="globe"){let ue=S.aabb.min,fe=S.aabb.max,[Ae,ye]=F.getOpacityForBounds(le,ue[0],ue[1],fe[0],fe[1]);q.overrideFog=Ae>=Bn||ye>=Bn}}let Z=qr(i,a.paint.get("model-cutoff-fade-range"));Z.shouldRenderCutoff&&q.defines.push("RENDER_CUTOFF");let ne=i.getOrCreateProgram("model",q);i.uploadCommonUniforms(w,ne,null,te,Z),i.renderPass!=="shadow"&&X&&X.setupShadowsFromMatrix(c.nodeModelMatrix,ne),ne.draw(i,w.gl.TRIANGLES,A,h,f,S.material.doubleSided?Dt.disabled:Dt.backCCW,N,a.id,S.vertexBuffer,S.indexBuffer,S.segments,a.paint,i.transform.zoom,void 0,ee)}function Tu(c,i,a,u,h,f,y){let w;w=c.projection.name==="globe"?r.cS(a,c):[...a],r.a6.multiply(w,w,i.matrix);let A=r.a6.multiply([],u,w);if(i.meshes)for(let T of i.meshes){if(T.material.alphaMode!=="BLEND"){y.push({mesh:T,depth:0,modelIndex:h,worldViewProjection:A,nodeModelMatrix:w});continue}let S=r.N.transformMat4([],T.centroid,A);S[2]>0&&f.push({mesh:T,depth:S[2],modelIndex:h,worldViewProjection:A,nodeModelMatrix:w})}if(i.children)for(let T of i.children)Tu(c,T,a,u,h,f,y)}function Me(c,i,a,u){let h=a.shadowRenderer;if(!h)return;let f=h.getShadowPassDepthMode(),y=h.getShadowPassColorMode(),w=h.calculateShadowPassMatrixFromMatrix(i),A=Mu(w);a.getOrCreateProgram("modelDepth",{defines:a._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(a,a.context.gl.TRIANGLES,f,Ut.disabled,y,Dt.backCCW,A,u.id,c.vertexBuffer,c.indexBuffer,c.segments,u.paint,a.transform.zoom,void 0,void 0)}function Jh(c,i,a){let u=i.updateZoomBasedPaintProperties(),h=function(f,y,w){let A,T,S,D=f.terrain?f.terrain.exaggeration():0;if(f.terrain&&D>0){let z=f.terrain,F=z.findDEMTileFor(w);F&&F.dem?A=r.cU.create(z,w,F):D=0}if(D===0&&(y.terrainElevationMin=0,y.terrainElevationMax=0),D===y.validForExaggeration&&(D===0||A&&A._demTile&&A._demTile.tileID===y.validForDEMTile.id&&A._dem._timestamp===y.validForDEMTile.timestamp))return!1;for(let z in y.instancesPerModel){let F=y.instancesPerModel[z];for(let G=0;G<F.instancedDataArray.length;++G){let U=(A?D*A.getElevationAt(0|F.instancedDataArray.float32[16*G],0|F.instancedDataArray.float32[16*G+1],!0,!0):0)+F.instancesEvaluatedElevation[G];F.instancedDataArray.float32[16*G+6]=U,T=T?Math.min(y.terrainElevationMin,U):U,S=S?Math.max(y.terrainElevationMax,U):U}}return y.terrainElevationMin=T||0,y.terrainElevationMax=S||0,y.validForExaggeration=D,y.validForDEMTile=A&&A._demTile?{id:A._demTile.tileID,timestamp:A._dem._timestamp}:{id:void 0,timestamp:0},!0}(c,i,a);(u||h)&&(i.uploaded=!1,i.upload(c.context))}let wr={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new r.bS([0,0,0],[r.V,r.V,0])};function Uf(c,i){let a=1<<c.canonical.z,u=i.getFreeCameraOptions().position,h=i.elevation,f=c.canonical.x/a,y=(c.canonical.x+1)/a,w=c.canonical.y/a,A=(c.canonical.y+1)/a,T=i._centerAltitude;if(h){let F=h.getMinMaxForTile(c);F&&F.max>T&&(T=F.max)}let S=r.aa(u.x,f,y)-u.x,D=r.aa(u.y,w,A)-u.y,z=r.bl(T,i.center.lat)-u.z;return i._zoomFromMercatorZ(Math.sqrt(S*S+D*D+z*z))}function ep(c,i,a,u,h,f,y){let w=c.context,A=c.renderPass==="shadow",T=c.shadowRenderer,S=A&&T?T.getShadowPassDepthMode():new kt(w.gl.LEQUAL,kt.ReadWrite,c.depthRangeFor3D),D=c.isTileAffectedByFog(f);if(a.meshes)for(let z of a.meshes){let F=["MODEL_POSITION_ON_GPU"],G=[],U,$,N;u.instancedDataArray.length>20&&F.push("INSTANCED_ARRAYS");let q=qr(c,i.paint.get("model-cutoff-fade-range"));if(q.shouldRenderCutoff&&F.push("RENDER_CUTOFF"),A&&T)U=c.getOrCreateProgram("modelDepth",{defines:F}),$=Mu(y.shadowTileMatrix,y.shadowTileMatrix,Float32Array.from(a.matrix)),N=T.getShadowPassColorMode();else{bi(F,G,z,c),U=c.getOrCreateProgram("model",{defines:F,overrideFog:D});let X=z.material,te=X.pbrMetallicRoughness,Z=i.paint.get("model-opacity"),ne=i.paint.get("model-emissive-strength").constantOr(0);$=Id(f.expandedProjMatrix,Float32Array.from(a.matrix),new Float32Array(16),c,Z,te.baseColorFactor,X.emissiveFactor,te.metallicFactor,te.roughnessFactor,X,ne,i,h),T&&(y.shadowUniformsInitialized?U.setShadowUniformValues(w,T.getShadowUniformValues()):(T.setupShadows(f.toUnwrapped(),U,"model-tile",f.overscaledZ),y.shadowUniformsInitialized=!0)),N=q.shouldRenderCutoff||Z<1||X.alphaMode!=="OPAQUE"?an.alphaBlended:an.unblended}c.uploadCommonUniforms(w,U,f.toUnwrapped(),null,q);let ee=z.material.doubleSided?Dt.disabled:Dt.backCCW;if(u.instancedDataArray.length>20)G.push(u.instancedDataBuffer),U.draw(c,w.gl.TRIANGLES,S,Ut.disabled,N,ee,$,i.id,z.vertexBuffer,z.indexBuffer,z.segments,i.paint,c.transform.zoom,void 0,G,u.instancedDataArray.length);else{let X=A?"u_instance":"u_normal_matrix";for(let te=0;te<u.instancedDataArray.length;++te)$[X]=new Float32Array(u.instancedDataArray.arrayBuffer,64*te,16),U.draw(c,w.gl.TRIANGLES,S,Ut.disabled,N,ee,$,i.id,z.vertexBuffer,z.indexBuffer,z.segments,i.paint,c.transform.zoom,void 0,G)}}if(a.children)for(let z of a.children)ep(c,i,z,u,h,f,y)}let fc=[1,-1,1];function d_(c,i,a,u){if(!a.modelManager)return!0;let h=a.modelManager;if(!a.shadowRenderer)return!0;let f=a.shadowRenderer,y=i.aabb,w=!0,A=c.maxHeight;if(A===0){let S=0;for(let D in c.instancesPerModel){let z=h.getModel(D,u);z?S=Math.max(S,Math.max(Math.max(z.aabb.max[0],z.aabb.max[1]),z.aabb.max[2])):w=!1}A=c.maxScale*S*1.41+c.maxVerticalOffset,w&&(c.maxHeight=A)}y.max[2]=A,y.min[2]+=c.terrainElevationMin,y.max[2]+=c.terrainElevationMax,r.N.transformMat4(y.min,y.min,i.tileMatrix),r.N.transformMat4(y.max,y.max,i.tileMatrix);let T=y.intersects(f.getCurrentCascadeFrustum());return a.currentShadowCascade===0&&(c.isInsideFirstShadowMapFrustum=T===2),T===0}class h_{}class Gf{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(i,a,u){{let D=this._storage.get(a.id);if(D)return D.lastUsedFrameIdx=i,D.buf}let h=u.gl,f=h.getBufferParameter(h.ELEMENT_ARRAY_BUFFER,h.BUFFER_SIZE),y=new ArrayBuffer(f),w=new Int16Array(y);h.getBufferSubData(h.ELEMENT_ARRAY_BUFFER,0,new Int16Array(y));let A=new r.cW;for(let D=0;D<f/2;D+=3){let z=w[D],F=w[D+1],G=w[D+2];A.emplaceBack(z,F),A.emplaceBack(F,G),A.emplaceBack(G,z)}let T=u.bindVertexArrayOES.current,S=new h_;return S.buf=new Kn(u,A),S.lastUsedFrameIdx=i,this._storage.set(a.id,S),u.bindVertexArrayOES.set(T),S.buf}update(i){for(let[a,u]of this._storage)i-u.lastUsedFrameIdx>30&&(u.buf.destroy(),this._storage.delete(a))}destroy(){for(let[i,a]of this._storage)a.buf.destroy(),this._storage.delete(i)}}class Su{registerParameter(i,a,u,h,f){}registerButton(i,a,u){}}let Eu={symbol:function(c,i,a,u,h){if(c.renderPass!=="translucent")return;let f=Ut.disabled,y=c.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(T,S,D,z,F,G,U){let $=S.transform,N=F==="map",q=G==="map";for(let ee of T){let X=z.getTile(ee),te=X.getBucket(D);if(!te||!te.text||!te.text.segments.get().length)continue;let Z=r.b5(te.textSizeData,$.zoom),ne=Cs(ee,te.getProjection(),$),le=$.calculatePixelsToTileUnitsMatrix(X),ue=ul(ne,X.tileID.canonical,q,N,$,te.getProjection(),le),fe=te.hasIconTextFit()&&te.hasIconData();if(Z){let Ae=Math.pow(2,$.zoom-X.tileID.overscaledZ);Ff(te,N,q,U,r.cx,$,ue,ee,Ae,Z,fe)}}}(u,c,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),h);let w=a.paint.get("icon-opacity").constantOr(1)!==0,A=a.paint.get("text-opacity").constantOr(1)!==0;a.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(w||A)?Dd(c,i,a,u,f,y):(w&&Dd(c,i,a,u,f,y,{onlyIcons:!0}),A&&Dd(c,i,a,u,f,y,{onlyText:!0})),i.map.showCollisionBoxes&&(Xr(c,i,a,u,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),Xr(c,i,a,u,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))},circle:function(c,i,a,u){if(c.renderPass!=="translucent")return;let h=a.paint.get("circle-opacity"),f=a.paint.get("circle-stroke-width"),y=a.paint.get("circle-stroke-opacity"),w=a.layout.get("circle-sort-key").constantOr(1)!==void 0,A=a.paint.get("circle-emissive-strength");if(h.constantOr(1)===0&&(f.constantOr(1)===0||y.constantOr(1)===0))return;let T=c.context,S=T.gl,D=c.transform,z=c.depthModeForSublayer(0,kt.ReadOnly),F=Ut.disabled,G=c.colorModeForDrapableLayerRenderPass(A),U=D.projection.name==="globe",$=[r.a5(D.center.lng),r.ae(D.center.lat)],N=[];for(let ee=0;ee<u.length;ee++){let X=u[ee],te=i.getTile(X),Z=te.getBucket(a);if(!Z||Z.projection.name!==D.projection.name)continue;let ne=Z.programConfigurations.get(a.id),le=r.cy(a),ue=c.isTileAffectedByFog(X);U&&le.push("PROJECTION_GLOBE_VIEW");let fe=c.getOrCreateProgram("circle",{config:ne,defines:le,overrideFog:ue}),Ae=Z.layoutVertexBuffer,ye=Z.globeExtVertexBuffer,ke=Z.indexBuffer,Ee=D.projection.createInversionMatrix(D,X.canonical),$e={programConfiguration:ne,program:fe,layoutVertexBuffer:Ae,globeExtVertexBuffer:ye,indexBuffer:ke,uniformValues:r.cz(c,X,te,Ee,$,a),tile:te};if(w){let xe=Z.segments.get();for(let Te of xe)N.push({segments:new r.aB([Te]),sortKey:Te.sortKey,state:$e})}else N.push({segments:Z.segments,sortKey:0,state:$e})}w&&N.sort((ee,X)=>ee.sortKey-X.sortKey);let q={useDepthForOcclusion:D.depthOcclusionForSymbolsAndCircles};for(let ee of N){let{programConfiguration:X,program:te,layoutVertexBuffer:Z,globeExtVertexBuffer:ne,indexBuffer:le,uniformValues:ue,tile:fe}=ee.state,Ae=ee.segments;c.terrain&&c.terrain.setupElevationDraw(fe,te,q),c.uploadCommonUniforms(T,te,fe.tileID.toUnwrapped()),te.draw(c,S.TRIANGLES,z,F,G,Dt.disabled,ue,a.id,Z,le,Ae,a.paint,D.zoom,X,[ne])}},heatmap:function(c,i,a,u){if(a.paint.get("heatmap-opacity")!==0)if(c.renderPass==="offscreen"){let h=c.context,f=h.gl,y=Ut.disabled,w=new an([f.ONE,f.ONE,f.ONE,f.ONE],r.ax.transparent,[!0,!0,!0,!0]);(function(F,G,U,$){let N=F.gl,q=G.width*$,ee=G.height*$;F.activeTexture.set(N.TEXTURE1),F.viewport.set([0,0,q,ee]);let X=U.heatmapFbo;if(!X||X&&(X.width!==q||X.height!==ee)){X&&X.destroy();let te=N.createTexture();N.bindTexture(N.TEXTURE_2D,te),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),X=U.heatmapFbo=F.createFramebuffer(q,ee,!0,null),function(Z,ne,le,ue,fe,Ae){let ye=Z.gl;ye.texImage2D(ye.TEXTURE_2D,0,Z.extRenderToTextureHalfFloat?ye.RGBA16F:ye.RGBA,fe,Ae,0,ye.RGBA,Z.extRenderToTextureHalfFloat?ye.HALF_FLOAT:ye.UNSIGNED_BYTE,null),ue.colorAttachment.set(le)}(F,0,te,X,q,ee)}else N.bindTexture(N.TEXTURE_2D,X.colorAttachment.get()),F.bindFramebuffer.set(X.framebuffer)})(h,c,a,c.transform.projection.name==="globe"?.5:.25),h.clear({color:r.ax.transparent});let A=c.transform,T=A.projection.name==="globe",S=T?["PROJECTION_GLOBE_VIEW"]:[],D=T?Dt.frontCCW:Dt.disabled,z=[r.a5(A.center.lng),r.ae(A.center.lat)];for(let F=0;F<u.length;F++){let G=u[F];if(i.hasRenderableParent(G))continue;let U=i.getTile(G),$=U.getBucket(a);if(!$||$.projection.name!==A.projection.name)continue;let N=c.isTileAffectedByFog(G),q=$.programConfigurations.get(a.id),ee=c.getOrCreateProgram("heatmap",{config:q,defines:S,overrideFog:N}),{zoom:X}=c.transform;c.terrain&&c.terrain.setupElevationDraw(U,ee),c.uploadCommonUniforms(h,ee,G.toUnwrapped());let te=A.projection.createInversionMatrix(A,G.canonical);ee.draw(c,f.TRIANGLES,kt.disabled,y,w,D,Ei(c,G,U,te,z,X,a.paint.get("heatmap-intensity")),a.id,$.layoutVertexBuffer,$.indexBuffer,$.segments,a.paint,c.transform.zoom,q,T?[$.globeExtVertexBuffer]:null)}h.viewport.set([0,0,c.width,c.height])}else c.renderPass==="translucent"&&(c.context.setColorMode(c.colorModeForRenderPass()),function(h,f){let y=h.context,w=y.gl,A=f.heatmapFbo;if(!A)return;y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,A.colorAttachment.get()),y.activeTexture.set(w.TEXTURE1);let T=f.colorRampTexture;T||(T=f.colorRampTexture=new r.T(y,f.colorRamp,w.RGBA)),T.bind(w.LINEAR,w.CLAMP_TO_EDGE),h.getOrCreateProgram("heatmapTexture").draw(h,w.TRIANGLES,kt.disabled,Ut.disabled,h.colorModeForRenderPass(),Dt.disabled,((S,D,z,F)=>({u_image:0,u_color_ramp:1,u_opacity:D.paint.get("heatmap-opacity")}))(0,f),f.id,h.viewportBuffer,h.quadTriangleIndexBuffer,h.viewportSegments,f.paint,h.transform.zoom)}(c,a))},line:function(c,i,a,u){if(c.renderPass!=="translucent")return;let h=a.paint.get("line-opacity"),f=a.paint.get("line-width");if(h.constantOr(1)===0||f.constantOr(1)===0)return;let y=a.paint.get("line-emissive-strength"),w=c.depthModeForSublayer(0,kt.ReadOnly),A=c.colorModeForDrapableLayerRenderPass(y),T=c.terrain&&c.terrain.renderingToTexture?1:r.f.devicePixelRatio,S=a.paint.get("line-dasharray"),D=S.constantOr(1),z=a.layout.get("line-cap"),F=a.paint.get("line-pattern"),G=F.constantOr(1),U=a.paint.get("line-pattern").constantOr(1),$=a.paint.get("line-opacity").constantOr(1)!==1,N=!U&&$,q=a.paint.get("line-gradient"),ee=G?"linePattern":"line",X=c.context,te=X.gl,Z=r.cA(a);c.terrain&&c.terrain.clipOrMaskOverlapStencilType()&&(N=!1);for(let ne of u){let le=i.getTile(ne);if(G&&!le.patternsLoaded())continue;let ue=le.getBucket(a);if(!ue)continue;c.prepareDrawTile();let fe=ue.programConfigurations.get(a.id),Ae=c.isTileAffectedByFog(ne),ye=c.getOrCreateProgram(ee,{config:fe,defines:Z,overrideFog:Ae}),ke=F.constantOr(null);if(ke&&le.imageAtlas){let it=le.imageAtlas.patternPositions[ke.toString()];it&&fe.setConstantPatternPositions(it)}let Ee=S.constantOr(null),$e=z.constantOr(null);if(!G&&Ee&&$e&&le.lineAtlas){let it=le.lineAtlas.getDash(Ee,$e);it&&fe.setConstantPatternPositions(it)}let[xe,Te]=a.paint.get("line-trim-offset");($e==="round"||$e==="square")&&xe!==Te&&(xe===0&&(xe-=1),Te===1&&(Te+=1));let he=c.terrain?ne.projMatrix:null,Ce=G?r.cB(c,le,a,he,T,[xe,Te]):r.cC(c,le,a,he,ue.lineClipsArray.length,T,[xe,Te]);if(q){let it=ue.gradients[a.id],Je=it.texture;if(a.gradientVersion!==it.version){let dt=256;if(a.stepInterpolant){let Ct=i.getSource().maxzoom,It=ne.canonical.z===Ct?Math.ceil(1<<c.transform.maxZoom-ne.canonical.z):1;dt=r.aa(r.cD(ue.maxLineLength/r.V*1024*It),256,X.maxTextureSize)}it.gradient=r.cE({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:dt,image:it.gradient||void 0,clips:ue.lineClipsArray}),it.texture?it.texture.update(it.gradient):it.texture=new r.T(X,it.gradient,te.RGBA),it.version=a.gradientVersion,Je=it.texture}X.activeTexture.set(te.TEXTURE1),Je.bind(a.stepInterpolant?te.NEAREST:te.LINEAR,te.CLAMP_TO_EDGE)}D&&(X.activeTexture.set(te.TEXTURE0),le.lineAtlasTexture&&le.lineAtlasTexture.bind(te.LINEAR,te.REPEAT),fe.updatePaintBuffers()),G&&(X.activeTexture.set(te.TEXTURE0),le.imageAtlasTexture&&le.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),fe.updatePaintBuffers()),c.uploadCommonUniforms(X,ye,ne.toUnwrapped());let Ze=it=>{ye.draw(c,te.TRIANGLES,w,it,A,Dt.disabled,Ce,a.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,a.paint,c.transform.zoom,fe,[ue.layoutVertexBuffer2])};if(N){let it=c.stencilModeForClipping(ne).ref;it===0&&c.terrain&&X.clear({stencil:0});let Je={func:te.EQUAL,mask:255};Ce.u_alpha_discard_threshold=.8,Ze(new Ut(Je,it,255,te.KEEP,te.KEEP,te.INVERT)),Ce.u_alpha_discard_threshold=0,Ze(new Ut(Je,it,255,te.KEEP,te.KEEP,te.KEEP))}else Ze(c.stencilModeForClipping(ne))}N&&(c.resetStencilClippingMasks(),c.terrain&&X.clear({stencil:0}))},fill:function(c,i,a,u){let h=a.paint.get("fill-color"),f=a.paint.get("fill-opacity");if(f.constantOr(1)===0)return;let y=a.paint.get("fill-emissive-strength"),w=c.colorModeForDrapableLayerRenderPass(y),A=a.paint.get("fill-pattern"),T=c.opaquePassEnabledForLayer()&&!A.constantOr(1)&&h.constantOr(r.ax.transparent).a===1&&f.constantOr(0)===1?"opaque":"translucent";if(c.renderPass===T){let S=c.depthModeForSublayer(1,c.renderPass==="opaque"?kt.ReadWrite:kt.ReadOnly);wl(c,i,a,u,S,w,!1)}if(c.renderPass==="translucent"&&a.paint.get("fill-antialias")){let S=c.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,kt.ReadOnly);wl(c,i,a,u,S,w,!0)}},"fill-extrusion":function(c,i,a,u){let h=a.paint.get("fill-extrusion-opacity"),f=c.context,y=f.gl,w=c.terrain,A=w&&w.renderingToTexture;if(h===0)return;let T=c.conflationActive&&c.layerUsedInConflation(a,i.getSource());if(T&&function(S,D,z,F){for(let G of F){let U=D.getTile(G).getBucket(z);U&&(U.updateReplacement(G,S.replacementSource),U.uploadCentroid(S.context))}}(c,i,a,u),w||T)for(let S of u){let D=i.getTile(S).getBucket(a);D&&l_(c.context,i,S,D,a,w,T)}if(c.renderPass==="shadow"&&c.shadowRenderer){let S=c.shadowRenderer;if(w&&h<.65&&a._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof r.Z)return;let D=S.getShadowPassDepthMode(),z=S.getShadowPassColorMode();Mt(c,i,a,u,D,Ut.disabled,z,T)}else if(c.renderPass==="translucent"){let S=!a.paint.get("fill-extrusion-pattern").constantOr(1),D=a.paint.get("fill-extrusion-color").constantOr(r.ax.white);if(!A&&D.a!==0){let z=new kt(c.context.gl.LEQUAL,kt.ReadWrite,c.depthRangeFor3D);h===1&&S?Mt(c,i,a,u,z,Ut.disabled,an.unblended,T):(Mt(c,i,a,u,z,Ut.disabled,an.disabled,T),Mt(c,i,a,u,z,c.stencilModeFor3D(),c.colorModeForRenderPass(),T),c.resetStencilClippingMasks())}if(c.style.enable3dLights()&&S&&(!w&&c.transform.projection.name!=="globe"||A)){let z=a.paint.get("fill-extrusion-opacity"),F=a.paint.get("fill-extrusion-ambient-occlusion-intensity"),G=a.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),U=a.paint.get("fill-extrusion-flood-light-intensity"),$=a.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),N=F>0&&G>0,q=U>0,ee=(te,Z,ne)=>(1-ne)*te+ne*Z,X=te=>{let Z=c.depthModeForSublayer(1,kt.ReadOnly,y.LEQUAL,!0),ne=a.paint.get(te?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),le=ee(.1,3,ne),ue=c._showOverdrawInspector;if(!ue){let fe=new Ut({func:y.ALWAYS,mask:255},255,255,y.KEEP,y.KEEP,y.REPLACE),Ae=new an([y.ONE,y.ONE,y.ONE,y.ONE],r.ax.transparent,[!1,!1,!1,!0],y.MIN);zs(c,i,a,u,Z,fe,Ae,Dt.disabled,te,"sdf",z,F,G,U,$,le,T,!1)}{let fe=ue?Ut.disabled:new Ut({func:y.EQUAL,mask:255},255,255,y.KEEP,y.DECR,y.DECR),Ae=ue?c.colorModeForRenderPass():new an([y.ONE_MINUS_DST_ALPHA,y.DST_ALPHA,y.ONE,y.ONE],r.ax.transparent,[!0,!0,!0,!0]);zs(c,i,a,u,Z,fe,Ae,Dt.disabled,te,"color",z,F,G,U,$,le,T,!1)}};if(A){let te=(Z,ne,le)=>{let ue=c.depthModeForSublayer(1,kt.ReadOnly,y.LEQUAL,!1),fe=a.paint.get(Z?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ae=ee(.1,3,fe);{let ye=new an([y.ONE,y.ONE,y.ONE,y.ONE],r.ax.transparent,[!1,!1,!1,!0]);zs(c,i,a,u,ue,Ut.disabled,ye,Dt.disabled,Z,"clear",z,F,G,U,$,Ae,T,ne)}{let ye=new Ut({func:y.ALWAYS,mask:255},255,255,y.KEEP,y.KEEP,y.REPLACE),ke=new an([y.ONE,y.ONE,y.ONE,y.ONE],r.ax.transparent,[!1,!1,!1,!0],y.MIN);zs(c,i,a,u,ue,ye,ke,Dt.disabled,Z,"sdf",z,F,G,U,$,Ae,T,ne)}{let ye=Z?y.ZERO:y.ONE_MINUS_DST_ALPHA,ke=new Ut({func:y.EQUAL,mask:255},255,255,y.KEEP,y.DECR,y.DECR),Ee=new an([ye,y.DST_ALPHA,y.ONE_MINUS_DST_ALPHA,y.ZERO],r.ax.transparent,[!0,!0,!0,!0]);zs(c,i,a,u,ue,ke,Ee,Dt.disabled,Z,"color",z,F,G,U,$,Ae,T,ne)}{let ye=new an([y.ONE,y.ONE,y.ONE,Z?y.ZERO:y.ONE],r.ax.transparent,[!1,!1,!1,!0],Z?y.FUNC_ADD:y.MAX);zs(c,i,a,u,ue,Ut.disabled,ye,Dt.disabled,Z,"clear",z,F,G,U,$,Ae,T,ne,le)}};if(N||q){let Z;if(c.prepareDrawTile(),w){let ne=w.drapeBufferSize[0],le=w.drapeBufferSize[1];Z=w.framebufferCopyTexture,Z&&(!Z||Z.size[0]===ne&&Z.size[1]===le)||(Z&&Z.destroy(),Z=w.framebufferCopyTexture=new r.T(f,new r.h({width:ne,height:le}),y.RGBA)),Z.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.copyTexImage2D(y.TEXTURE_2D,0,y.RGBA,0,0,ne,le,0)}N&&te(!0,!1,Z),q&&te(!1,!0,Z)}}else N&&X(!0),q&&X(!1)}}},hillshade:function(c,i,a,u){if(c.renderPass!=="offscreen"&&c.renderPass!=="translucent"||c.style.disableElevatedTerrain)return;let h=c.context,f=c.terrain&&c.terrain.renderingToTexture,[y,w]=c.renderPass!=="translucent"||f?[{},u]:c.stencilConfigForOverlap(u);for(let A of w){let T=i.getTile(A);if(T.needsHillshadePrepare&&c.renderPass==="offscreen")pu(c,T,a);else if(c.renderPass==="translucent"){let S=c.depthModeForSublayer(0,kt.ReadOnly),D=a.paint.get("hillshade-emissive-strength"),z=c.colorModeForDrapableLayerRenderPass(D),F=f&&c.terrain?c.terrain.stencilModeForRTTOverlap(A):y[A.overscaledZ];Ir(c,A,T,a,S,F,z)}}h.viewport.set([0,0,c.width,c.height]),c.resetStencilClippingMasks()},raster:function(c,i,a,u,h,f){if(c.renderPass!=="translucent"||a.paint.get("raster-opacity")===0)return;let y=c.transform.projection.name==="globe",w=a.paint.get("raster-elevation")!==0,A=w&&y;if(c.renderElevatedRasterBackface&&!A)return;let T=c.context,S=T.gl,D=i.getSource(),z=function(Z,ne,le,ue){let fe=ne.paint.get("raster-color"),Ae=Z.type==="raster-array",ye=[],ke=ne.paint.get("raster-resampling"),Ee=ne.paint.get("raster-color-mix"),$e=ne.paint.get("raster-color-range"),xe=[Ee[0],Ee[1],Ee[2],0],Te=Ee[3],he=ke==="nearest"?ue.NEAREST:ue.LINEAR;if(Ae&&(ye.push("RASTER_ARRAY"),fe||ye.push("RASTER_COLOR"),ke==="linear"&&ye.push("RASTER_ARRAY_LINEAR"),he=ue.NEAREST,!$e&&Z.rasterLayers)){let Ce=Z.rasterLayers.find(({id:Ze})=>Ze===ne.sourceLayer);Ce&&Ce.fields&&Ce.fields.range&&($e=Ce.fields.range)}if($e=$e||[0,1],fe){ye.push("RASTER_COLOR"),le.activeTexture.set(ue.TEXTURE2),ne.updateColorRamp($e);let Ce=ne.colorRampTexture;Ce||(Ce=ne.colorRampTexture=new r.T(le,ne.colorRamp,ue.RGBA)),Ce.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}return{mix:xe,range:$e,offset:Te,defines:ye,resampling:he}}(D,a,T,S);if(D instanceof r.ap&&!u.length&&!y)return;let F=a.paint.get("raster-emissive-strength"),G=c.colorModeForDrapableLayerRenderPass(F),U=c.terrain&&c.terrain.renderingToTexture,$=!c.options.moving,N=a.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;if(D instanceof r.ap&&!u.length&&(D.onNorthPole||D.onSouthPole)){let Z=w?c.stencilModeFor3D():Ut.disabled;return void Gh(!!D.onNorthPole,null,c,i,a,F,z,Dt.disabled,Z)}if(!u.length)return;let[q,ee]=D instanceof r.ap||U?[{},u]:c.stencilConfigForOverlap(u),X=ee[ee.length-1].overscaledZ;A&&z.defines.push("PROJECTION_GLOBE_VIEW"),w&&z.defines.push("RENDER_CUTOFF");let te=(Z,ne,le)=>{for(let ue of Z){let fe=ue.toUnwrapped(),Ae=i.getTile(ue);if(U&&(!Ae||!Ae.hasData()))continue;T.activeTexture.set(S.TEXTURE0);let ye=$h(Ae,D,a,z);if(!ye||!ye.texture)continue;let{texture:ke,mix:Ee,offset:$e,tileSize:xe,buffer:Te}=ye,he,Ce;U?(he=kt.disabled,Ce=ue.projMatrix):w?(he=new kt(S.LEQUAL,kt.ReadWrite,c.depthRangeFor3D),Ce=y?Float32Array.from(c.transform.expandedFarZProjMatrix):c.transform.calculateProjMatrix(fe,$)):(he=c.depthModeForSublayer(ue.overscaledZ-X,a.paint.get("raster-opacity")===1?kt.ReadWrite:kt.ReadOnly,S.LESS),Ce=c.transform.calculateProjMatrix(fe,$));let Ze=c.terrain&&U?c.terrain.stencilModeForRTTOverlap(ue):q[ue.overscaledZ],it=f?0:a.paint.get("raster-fade-duration");Ae.registerFadeDuration(it);let Je=i.findLoadedParent(ue,0),dt=Ds(Ae,Je,i,c.transform,it),Ct,It;c.terrain&&c.terrain.prepareDrawTile(),T.activeTexture.set(S.TEXTURE0),ke.bind(N,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE1),Je?(Je.texture&&Je.texture.bind(N,S.CLAMP_TO_EDGE),Ct=Math.pow(2,Je.tileID.overscaledZ-Ae.tileID.overscaledZ),It=[Ae.tileID.canonical.x*Ct%1,Ae.tileID.canonical.y*Ct%1]):ke.bind(N,S.CLAMP_TO_EDGE),ke.useMipmap&&T.extTextureFilterAnisotropic&&c.transform.pitch>20&&S.texParameterf(S.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);let Ot=c.transform,St,Qt=w?Hh(Ot):[0,0,0,0],Gt,Zt,$t,Mn,ii,un=0;if(A&&D instanceof r.ap&&D.coordinates.length>3)Gt=Float32Array.from(r.aT(r.ci(new r.bs(0,0,0)))),Zt=Float32Array.from(Ot.globeMatrix),$t=Float32Array.from(r.ce(Ot)),Mn=[r.a5(Ot.center.lng),r.ae(Ot.center.lat)],St=D.elevatedGlobePerspectiveTransform,ii=D.elevatedGlobeGridMatrix||new Float32Array(9);else if(A){let hn=r.cf(ue.canonical);un=r.cg(hn.getCenter().lat),Gt=Float32Array.from(r.aT(r.ci(ue.canonical))),Zt=Float32Array.from(Ot.globeMatrix),$t=Float32Array.from(r.ce(Ot)),Mn=[r.a5(Ot.center.lng),r.ae(Ot.center.lat)],St=[0,0],ii=Float32Array.from(r.ch(ue.canonical,hn,un,Ot.worldSize/Ot._pixelsPerMercatorPixel))}else St=D instanceof r.ap?D.perspectiveTransform:[0,0],Gt=new Float32Array(16),Zt=new Float32Array(9),$t=new Float32Array(16),Mn=[0,0],ii=new Float32Array(9);let wi=Vh(Ce,Gt,Zt,$t,ii,It||[0,0],r.S(c.transform.zoom),Mn,Qt,Ct||1,dt,a,St,w?a.paint.get("raster-elevation"):0,2,Ee,$e,z.range,xe,Te,F),dn=c.isTileAffectedByFog(ue),En=c.getOrCreateProgram("raster",{defines:z.defines,overrideFog:dn});if(c.uploadCommonUniforms(T,En,fe),D instanceof r.ap){let hn=D.elevatedGlobeVertexBuffer,Tn=D.elevatedGlobeIndexBuffer;if(U||!y)D.boundsBuffer&&D.boundsSegments&&En.draw(c,S.TRIANGLES,he,Ut.disabled,G,Dt.disabled,wi,a.id,D.boundsBuffer,c.quadTriangleIndexBuffer,D.boundsSegments);else if(hn&&Tn){let si=Ot.zoom<=r.bG?D.elevatedGlobeSegments:D.getSegmentsForLongitude(Ot.center.lng);si&&En.draw(c,S.TRIANGLES,he,Ut.disabled,G,ne,wi,a.id,hn,Tn,si)}}else if(A){he=new kt(S.LEQUAL,kt.ReadOnly,c.depthRangeFor3D);let hn=c.globeSharedBuffers;if(hn){let[Tn,si,Fn]=hn.getGridBuffers(un,!1);En.draw(c,S.TRIANGLES,he,le||Ze,c.colorModeForRenderPass(),ne,wi,a.id,Tn,si,Fn)}}else{let{tileBoundsBuffer:hn,tileBoundsIndexBuffer:Tn,tileBoundsSegments:si}=c.getTileBoundsBuffers(Ae);En.draw(c,S.TRIANGLES,he,Ze,G,Dt.disabled,wi,a.id,hn,Tn,si)}}if(!(D instanceof r.ap)&&A)for(let ue of Z){let fe=ue.canonical.y===(1<<ue.canonical.z)-1;ue.canonical.y===0&&Gh(!0,ue,c,i,a,F,z,ne,le||Ut.disabled),fe&&Gh(!1,ue,c,i,a,F,z,ne===Dt.frontCW?Dt.backCW:Dt.frontCW,le||Ut.disabled)}};A?te(ee,c.renderElevatedRasterBackface?Dt.backCW:Dt.frontCW,c.stencilModeFor3D()):te(ee,Dt.disabled,void 0),c.resetStencilClippingMasks()},"raster-particle":function(c,i,a,u,h,f){c.renderPass==="offscreen"&&function(y,w,A,T){if(!T.length)return;let S=y.context,D=S.gl,z=w.getSource();if(!(z instanceof rt))return;let F=[];for(let $ of T){let N=w.getTile($);if(!(N instanceof Ha))continue;let q=Wh(N,z,A);if(!q)continue;let ee=[q.tileSize,q.tileSize],X=A.tileFramebuffer;X||(X=A.tileFramebuffer=S.createFramebuffer(ee[0],ee[1],!0,null));let te=N.rasterParticleState,Z=A.paint.get("raster-particle-count");te||(te=N.rasterParticleState=new Ni(S,$,ee,Z));let ne=te.update(A.lastInvalidatedAt);te.numParticles!==Z&&te.setNumParticles($,Z);let le=te.targetColorTexture;te.targetColorTexture=te.backgroundColorTexture,te.backgroundColorTexture=le;let ue=te.particleVertices0;te.particleVertices0=te.particleVertices1,te.particleVertices1=ue,F.push([$,q,te,ne])}if(F.length===0)return;let G=r.f.now(),U=A.previousDrawTimestamp?.001*(G-A.previousDrawTimestamp):.0167;if(A.previousDrawTimestamp=G,A.hasColorMap()){S.activeTexture.set(D.TEXTURE0+2);let $=A.colorRampTexture;$||($=A.colorRampTexture=new r.T(S,A.colorRamp,D.RGBA)),$.bind(D.LINEAR,D.CLAMP_TO_EDGE)}S.bindFramebuffer.set(A.tileFramebuffer.framebuffer),S.activeTexture.set(D.TEXTURE0),function($,N,q){let ee=$.context,X=ee.gl,te=N.tileFramebuffer;ee.activeTexture.set(X.TEXTURE0);let Z={u_texture:0,u_opacity:1.05*(le=N.paint.get("raster-particle-fade-opacity-factor"))/(le+.05)},ne=$.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var le;for(let ue of q){let[,,fe,Ae]=ue;te.colorAttachment.set(fe.targetColorTexture.texture),ee.viewport.set([0,0,te.width,te.height]),ee.clear({color:r.ax.transparent}),Ae&&(fe.backgroundColorTexture.bind(X.NEAREST,X.CLAMP_TO_EDGE),ne.draw($,X.TRIANGLES,kt.disabled,Ut.disabled,an.alphaBlended,Dt.disabled,Z,N.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments))}}(y,A,F),function($,N,q,ee){let X=$.context.gl,te=q.tileFramebuffer,Z=$.transform.projection.name==="globe",ne=q.paint.get("raster-particle-max-speed");for(let le of ee){let[ue,fe,Ae]=le;fe.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),te.colorAttachment.set(Ae.targetColorTexture.texture);let ye=$.getOrCreateProgram("rasterParticleDraw",{defines:fe.defines,overrideFog:!1}),ke=fe.scalarData?[]:[0,1,2,3].map(xe=>r.cG[xe](ue));ke.push(ue);let Ee=ue.canonical.x,$e=ue.canonical.y;for(let xe of ke){let Te=N.getTile(Z?xe.wrapped():xe);if(!Te)continue;let he=Te.rasterParticleState;if(!he)continue;let Ce=a_([xe.canonical.x+(1<<xe.canonical.z)*(xe.wrap-ue.wrap)-Ee,xe.canonical.y-$e],0,fe.texture.size,2,ne,fe.textureOffset,fe.scale,fe.offset);ye.draw($,X.POINTS,kt.disabled,Ut.disabled,an.alphaBlended,Dt.disabled,Ce,q.id,he.particleVertices0,void 0,he.particleSegment)}}}(y,w,A,F),function($,N,q,ee){let X=$.context.gl,te=N.transformFeedbackObject;te||(te=N.transformFeedbackObject=X.createTransformFeedback()),X.bindTransformFeedback(X.TRANSFORM_FEEDBACK,N.transformFeedbackObject);let Z=N.paint.get("raster-particle-max-speed"),ne=ee*N.paint.get("raster-particle-speed-factor")*.3,le=(ue=N.paint.get("raster-particle-reset-rate-factor"),Math.pow(ue,6));var ue;for(let fe of q){let[,Ae,ye]=fe;Ae.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE);let ke=zf(0,Ae.texture.size,Z,ne,le,Ae.textureOffset,Ae.scale,Ae.offset);$.getOrCreateProgram("rasterParticleUpdate",{defines:Ae.defines,transformFeedback:{bufferMode:X.SEPARATE_ATTRIBS,shaderVaryings:["v_new_particle"]}}).draw($,X.POINTS,kt.disabled,Ut.disabled,an.disabled,Dt.disabled,ke,N.id,ye.particleVertices0,void 0,ye.particleSegment,{},void 0,void 0,void 0,void 0,[{buffer:ye.particleVertices1,targetIndex:0}])}X.bindTransformFeedback(X.TRANSFORM_FEEDBACK,null)}(y,A,F,U)}(c,i,a,u),c.renderPass==="translucent"&&(function(y,w,A,T,S){let D=y.context,z=D.gl,F=!y.options.moving,G=y.transform.projection.name==="globe";if(!T.length)return;let[U,$]=y.stencilConfigForOverlap(T),N=[];G&&N.push("PROJECTION_GLOBE_VIEW");for(let q of $){let ee=q.toUnwrapped(),X=w.getTile(q);if(!X.rasterParticleState)continue;let te=X.rasterParticleState,Z=100;X.registerFadeDuration(Z);let ne=w.findLoadedParent(q,0),le=Ds(X,ne,w,y.transform,Z),ue,fe;y.terrain&&y.terrain.prepareDrawTile(),D.activeTexture.set(z.TEXTURE0),te.targetColorTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),D.activeTexture.set(z.TEXTURE1),ne&&ne.rasterParticleState?(ne.rasterParticleState.targetColorTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ue=Math.pow(2,ne.tileID.overscaledZ-X.tileID.overscaledZ),fe=[X.tileID.canonical.x*ue%1,X.tileID.canonical.y*ue%1]):te.targetColorTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE);let Ae=G?Float32Array.from(y.transform.expandedFarZProjMatrix):y.transform.calculateProjMatrix(ee,F),ye=y.transform,ke=Zh(ye),Ee=r.cf(q.canonical),$e=r.cg(Ee.getCenter().lat),xe,Te,he,Ce,Ze;G?(xe=Float32Array.from(r.aT(r.ci(q.canonical))),Te=Float32Array.from(ye.globeMatrix),he=Float32Array.from(r.ce(ye)),Ce=[r.a5(ye.center.lng),r.ae(ye.center.lat)],Ze=Float32Array.from(r.ch(q.canonical,Ee,$e,ye.worldSize/ye._pixelsPerMercatorPixel))):(xe=new Float32Array(16),Te=new Float32Array(9),he=new Float32Array(16),Ce=[0,0],Ze=new Float32Array(9));let it=r_(Ae,xe,Te,he,Ze,fe||[0,0],r.S(y.transform.zoom),Ce,ke,ue||1,le,250),Je=y.isTileAffectedByFog(q),dt=y.getOrCreateProgram("rasterParticle",{defines:N,overrideFog:Je});if(y.uploadCommonUniforms(D,dt,ee),G){let Ct=new kt(z.LEQUAL,kt.ReadWrite,y.depthRangeFor3D),It=0,Ot=y.globeSharedBuffers;if(Ot){let[St,Qt,Gt]=Ot.getGridBuffers($e,It!==0);dt.draw(y,z.TRIANGLES,Ct,Ut.disabled,an.alphaBlended,Dt.backCCW,it,A.id,St,Qt,Gt)}}else{let Ct=y.depthModeForSublayer(0,kt.ReadOnly),It=U[q.overscaledZ],{tileBoundsBuffer:Ot,tileBoundsIndexBuffer:St,tileBoundsSegments:Qt}=y.getTileBoundsBuffers(X);dt.draw(y,z.TRIANGLES,Ct,It,an.alphaBlended,Dt.disabled,it,A.id,Ot,St,Qt)}}y.resetStencilClippingMasks()}(c,i,a,u),c.style.map.triggerRepaint())},background:function(c,i,a,u){let h=a.paint.get("background-color"),f=a.paint.get("background-opacity"),y=a.paint.get("background-emissive-strength");if(f===0)return;let w=c.context,A=w.gl,T=c.transform,S=T.tileSize,D=a.paint.get("background-pattern");if(c.isPatternMissing(D,a.scope))return;let z=!D&&h.a===1&&f===1&&c.opaquePassEnabledForLayer()?"opaque":"translucent";if(c.renderPass!==z)return;let F=Ut.disabled,G=c.depthModeForSublayer(0,z==="opaque"?kt.ReadWrite:kt.ReadOnly),U=c.colorModeForDrapableLayerRenderPass(y),$=D?"backgroundPattern":"background",N,q=u;q||(N=c.getBackgroundTiles(),q=Object.values(N).map(ee=>ee.tileID)),D&&(w.activeTexture.set(A.TEXTURE0),c.imageManager.bind(c.context,a.scope));for(let ee of q){let X=c.isTileAffectedByFog(ee),te=c.getOrCreateProgram($,{overrideFog:X}),Z=ee.toUnwrapped(),ne=u?ee.projMatrix:c.transform.calculateProjMatrix(Z);c.prepareDrawTile();let le=i?i.getTile(ee):N?N[ee.key]:new Vo(ee,S,T.zoom,c),ue=D?wu(ne,y,f,c,D,a.scope,{tileID:ee,tileSize:S}):jh(ne,y,f,h);c.uploadCommonUniforms(w,te,Z);let{tileBoundsBuffer:fe,tileBoundsIndexBuffer:Ae,tileBoundsSegments:ye}=c.getTileBoundsBuffers(le);te.draw(c,A.TRIANGLES,G,F,U,Dt.disabled,ue,a.id,fe,Ae,ye)}},sky:function(c,i,a){let u=c._atmosphere?r.S(c.transform.zoom):1,h=a.paint.get("sky-opacity")*u;if(h===0)return;let f=c.context,y=a.paint.get("sky-type"),w=new kt(f.gl.LEQUAL,kt.ReadOnly,[0,1]),A=c.frameCounter/1e3%1;y==="atmosphere"?c.renderPass==="offscreen"?a.needsSkyboxCapture(c)&&(function(T,S,D,z){let F=T.context,G=F.gl,U=S.skyboxFbo;if(!U){U=S.skyboxFbo=F.createFramebuffer(32,32,!0,null),S.skyboxGeometry=new Kh(F),S.skyboxTexture=F.gl.createTexture(),G.bindTexture(G.TEXTURE_CUBE_MAP,S.skyboxTexture),G.texParameteri(G.TEXTURE_CUBE_MAP,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_CUBE_MAP,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_CUBE_MAP,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_CUBE_MAP,G.TEXTURE_MAG_FILTER,G.LINEAR);for(let ee=0;ee<6;++ee)G.texImage2D(G.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,G.RGBA,32,32,0,G.RGBA,G.UNSIGNED_BYTE,null)}F.bindFramebuffer.set(U.framebuffer),F.viewport.set([0,0,32,32]);let $=S.getCenter(T,!0),N=T.getOrCreateProgram("skyboxCapture"),q=new Float64Array(16);r.a6.identity(q),r.a6.rotateY(q,q,.5*-Math.PI),Cl(T,S,N,q,$,0),r.a6.identity(q),r.a6.rotateY(q,q,.5*Math.PI),Cl(T,S,N,q,$,1),r.a6.identity(q),r.a6.rotateX(q,q,.5*-Math.PI),Cl(T,S,N,q,$,2),r.a6.identity(q),r.a6.rotateX(q,q,.5*Math.PI),Cl(T,S,N,q,$,3),r.a6.identity(q),Cl(T,S,N,q,$,4),r.a6.identity(q),r.a6.rotateY(q,q,Math.PI),Cl(T,S,N,q,$,5),F.viewport.set([0,0,T.width,T.height])}(c,a),a.markSkyboxValid(c)):c.renderPass==="sky"&&function(T,S,D,z,F){let G=T.context,U=G.gl,$=T.transform,N=T.getOrCreateProgram("skybox");G.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_CUBE_MAP,S.skyboxTexture);let q=((ee,X,te,Z,ne)=>({u_matrix:ee,u_sun_direction:X,u_cubemap:0,u_opacity:Z,u_temporal_offset:ne}))($.skyboxMatrix,S.getCenter(T,!1),0,z,F);T.uploadCommonUniforms(G,N),N.draw(T,U.TRIANGLES,D,Ut.disabled,T.colorModeForRenderPass(),Dt.backCW,q,"skybox",S.skyboxGeometry.vertexBuffer,S.skyboxGeometry.indexBuffer,S.skyboxGeometry.segment)}(c,a,w,h,A):y==="gradient"&&c.renderPass==="sky"&&function(T,S,D,z,F){let G=T.context,U=G.gl,$=T.transform,N=T.getOrCreateProgram("skyboxGradient");S.skyboxGeometry||(S.skyboxGeometry=new Kh(G)),G.activeTexture.set(U.TEXTURE0);let q=S.colorRampTexture;q||(q=S.colorRampTexture=new r.T(G,S.colorRamp,U.RGBA)),q.bind(U.LINEAR,U.CLAMP_TO_EDGE);let ee=((X,te,Z,ne,le)=>({u_matrix:X,u_color_ramp:0,u_center_direction:te,u_radius:r.bj(Z),u_opacity:ne,u_temporal_offset:le}))($.skyboxMatrix,S.getCenter(T,!1),S.paint.get("sky-gradient-radius"),z,F);T.uploadCommonUniforms(G,N),N.draw(T,U.TRIANGLES,D,Ut.disabled,T.colorModeForRenderPass(),Dt.backCW,ee,"skyboxGradient",S.skyboxGeometry.vertexBuffer,S.skyboxGeometry.indexBuffer,S.skyboxGeometry.segment)}(c,a,w,h,A)},debug:function(c,i,a,u,h,f){for(let y=0;y<a.length;y++)if(h){let T=new r.ax(u.r*.8,u.g*.8,u.b*.8,1);Fs(c,i,a[y],u,-1,-1,f),Fs(c,i,a[y],u,-1,1,f),Fs(c,i,a[y],u,1,1,f),Fs(c,i,a[y],u,1,-1,f),Fs(c,i,a[y],T,0,0,f)}else Fs(c,i,a[y],u,0,0,f)},custom:function(c,i,a,u){let h=c.context,f=a.implementation;if(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes("custom")||c.terrain&&(c.terrain.renderingToTexture||c.renderPass==="offscreen")&&a.isLayerDraped(i)){if(c.renderPass==="offscreen"){let y=f.prerender;if(y){if(c.setCustomLayerDefaults(),h.setColorMode(c.colorModeForRenderPass()),c.transform.projection.name==="globe"){let w=c.transform.pointMerc;y.call(f,h.gl,c.transform.customLayerMatrix(),c.transform.getProjection(),c.transform.globeToMercatorMatrix(),r.S(c.transform.zoom),[w.x,w.y],c.transform.pixelsPerMeterRatio)}else y.call(f,h.gl,c.transform.customLayerMatrix());h.setDirty(),c.setBaseState()}}else if(c.renderPass==="translucent"){if(c.terrain&&c.terrain.renderingToTexture){let w=f.renderToTile;if(w){let A=u[0].canonical,T=new r.L(A.x+u[0].wrap*(1<<A.z),A.y,A.z);h.setDepthMode(kt.disabled),h.setStencilMode(Ut.disabled),h.setColorMode(c.colorModeForRenderPass()),c.setCustomLayerDefaults(),w.call(f,h.gl,T),h.setDirty(),c.setBaseState()}return}c.setCustomLayerDefaults(),h.setColorMode(c.colorModeForRenderPass()),h.setStencilMode(Ut.disabled);let y=f.renderingMode==="3d"?new kt(c.context.gl.LEQUAL,kt.ReadWrite,c.depthRangeFor3D):c.depthModeForSublayer(0,kt.ReadOnly);if(h.setDepthMode(y),c.transform.projection.name==="globe"){let w=c.transform.pointMerc;f.render(h.gl,c.transform.customLayerMatrix(),c.transform.getProjection(),c.transform.globeToMercatorMatrix(),r.S(c.transform.zoom),[w.x,w.y],c.transform.pixelsPerMeterRatio)}else f.render(h.gl,c.transform.customLayerMatrix());h.setDirty(),c.setBaseState(),h.bindFramebuffer.set(null)}}else r.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(c,i,a,u){if(c.renderPass==="opaque")return;let h=a.paint.get("model-opacity");if(h===0)return;let f=a.paint.get("model-cast-shadows");if(c.renderPass==="shadow"&&(!f||c.terrain&&h<.65&&a._transitionablePaint._values["model-opacity"].value.expression instanceof r.Z))return;let y=c.shadowRenderer,w=a.paint.get("model-receive-shadows");y&&(y.useNormalOffset=!0,w||(y.enabled=!1));let A=()=>{y&&(y.useNormalOffset=!0,w||(y.enabled=!0))},T=i.getSource();if(c.renderPass==="light-beam"&&T.type!=="batched-model")return;if(T.type==="vector"||T.type==="geojson")return function(N,q,ee,X){let te=N.transform;if(te.projection.name!=="mercator")return void r.w(`Drawing 3D models for ${te.projection.name} projection is not yet implemented`);let Z=te.getFreeCameraOptions().position;if(!N.modelManager)return;let ne=N.modelManager;ee.modelManager=ne;let le=N.shadowRenderer;if(!ee._unevaluatedLayout._values.hasOwnProperty("model-id"))return;let ue=ee._unevaluatedLayout._values["model-id"],fe=Et({},ee.layout.get("model-id").parameters);for(let Ae of X){let ye=q.getTile(Ae).getBucket(ee);if(!ye||ye.projection.name!==te.projection.name)continue;let ke=Uf(Ae,te);fe.zoom=ke;let Ee=ue.possiblyEvaluate(fe);if(Jh(N,ye,Ae),wr.shadowUniformsInitialized=!1,wr.useSingleShadowCascade=!!le&&le.getMaxCascadeForTile(Ae.toUnwrapped())===0,N.renderPass==="shadow"&&le){if(N.currentShadowCascade===1&&ye.isInsideFirstShadowMapFrustum)continue;let Te=te.calculatePosMatrix(Ae.toUnwrapped(),te.worldSize);if(wr.tileMatrix.set(Te),wr.shadowTileMatrix=Float32Array.from(le.calculateShadowPassMatrixFromMatrix(Te)),wr.aabb.min.fill(0),wr.aabb.max[0]=wr.aabb.max[1]=r.V,wr.aabb.max[2]=0,d_(ye,wr,N,ee.scope))continue}let $e=1<<Ae.canonical.z,xe=[((Z.x-Ae.wrap)*$e-Ae.canonical.x)*r.V,(Z.y*$e-Ae.canonical.y)*r.V,Z.z*$e*r.V];for(let Te in ye.instancesPerModel){let he=ye.instancesPerModel[Te];he.features.length>0&&(Te=Ee.evaluate(he.features[0].feature,{}));let Ce=ne.getModel(Te,ee.scope);if(Ce&&Ce.uploaded)for(let Ze of Ce.nodes)ep(N,ee,Ze,he,xe,Ae,wr)}}}(c,i,a,u),void A();if(!T.loaded())return;if(T.type==="batched-model")return function(N,q,ee,X){ee.resetLayerRenderingStats(N);let te=N.context,Z=N.transform,ne=N.style.fog,le=N.shadowRenderer;if(Z.projection.name!=="mercator")return void r.w(`Drawing 3D landmark models for ${Z.projection.name} projection is not yet implemented`);let ue=N.transform.getFreeCameraOptions().position,fe=r.N.scale([],[ue.x,ue.y,ue.z],N.transform.worldSize);r.N.negate(fe,fe);let Ae=r.a6.identity([]),ye=r.cR(Z.center.lat,Z.zoom),ke=r.a6.fromScaling([],[1,1,1/ye]);r.a6.translate(Ae,Ae,fe);let Ee=ee.paint.get("model-opacity"),$e=new kt(te.gl.LEQUAL,kt.ReadWrite,N.depthRangeFor3D),xe=new kt(te.gl.LEQUAL,kt.ReadOnly,N.depthRangeFor3D),Te=new r.bS([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),he=N.renderPass==="shadow",Ce=he&&le?le.getCurrentCascadeFrustum():Z.getFrustum(Z.scaleZoom(Z.worldSize)),Ze=ee.getLayerRenderingStats(),it=function(Je,dt){for(let Ct of X){let It=q.getTile(Ct).getBucket(ee);if(!It||!It.uploaded)continue;let Ot=!1;le&&(Ot=le.getMaxCascadeForTile(Ct.toUnwrapped())===0);let St=Z.calculatePosMatrix(Ct.toUnwrapped(),Z.worldSize),Qt=It.modelTraits;for(let Gt of It.getNodesInfo()){if(Gt.hiddenByReplacement||!Gt.node.meshes)continue;let Zt=Gt.evaluatedScale,$t=Gt.node,Mn=0;if(N.terrain&&$t.elevation&&(Mn=$t.elevation*N.terrain.exaggeration()),Zt[0]<=1&&Zt[1]<=1&&Zt[2]<=1&&(()=>{let si=Gt.getLocalBounds();return Te.min=[...si.min],Te.max=[...si.max],Te.min[2]+=Mn,Te.max[2]+=Mn,r.N.transformMat4(Te.min,Te.min,St),r.N.transformMat4(Te.max,Te.max,St),Te})().intersects(Ce)===0)continue;let ii=N.renderPass==="light-beam",un=[...St];r.a6.translate(un,un,[($t.anchor?$t.anchor[0]:0)*(Zt[0]-1),($t.anchor?$t.anchor[1]:0)*(Zt[1]-1),Mn]),r.N.exactEquals(Zt,r.cT)||r.a6.scale(un,un,Zt),r.a6.multiply(un,un,$t.matrix);let wi=r.a6.multiply([],ke,un);r.a6.multiply(wi,Ae,wi);let dn=r.a6.invert([],wi);r.a6.transpose(dn,dn),r.a6.scale(dn,dn,fc);let En=r.a6.multiply([],Z.expandedFarZProjMatrix,un),hn=Qt&r.cV.HasMapboxMeshFeatures,Tn=hn?0:Gt.evaluatedRMEA[0][2];for(let si=0;si<$t.meshes.length;++si){let Fn=$t.meshes[si],ao=si===$t.lightMeshIndex;if(ao){if(!ii&&!N.terrain&&N.shadowRenderer){N.currentLayer<N.firstLightBeamLayer&&(N.firstLightBeamLayer=N.currentLayer);continue}}else if(ii)continue;let xo={defines:[]},or=[];if(bi(xo.defines,or,Fn,N),hn||xo.defines.push("DIFFUSE_SHADED"),Ot&&xo.defines.push("SHADOWS_SINGLE_CASCADE"),Ze&&(he?Ze.numRenderedVerticesInShadowPass+=Fn.vertexArray.length:Ze.numRenderedVerticesInTransparentPass+=Fn.vertexArray.length),he){Me(Fn,un,N,ee);continue}let Ia=null;if(ne){let ar=Ml(un,N.transform);if(Ia=new Float32Array(ar),Z.projection.name!=="globe"){let Da=Fn.aabb.min,Us=Fn.aabb.max,[Pl,Hu]=ne.getOpacityForBounds(ar,Da[0],Da[1],Us[0],Us[1]);xo.overrideFog=Pl>=Bn||Hu>=Bn}}let rr=Fn.material,so;rr.occlusionTexture&&rr.occlusionTexture.offsetScale&&(so=rr.occlusionTexture.offsetScale,xo.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!he&&le&&(le.useNormalOffset=!!Fn.normalBuffer);let qi=N.getOrCreateProgram("model",xo);!he&&le&&le.setupShadowsFromMatrix(un,qi,le.useNormalOffset),N.uploadCommonUniforms(te,qi,Ct.toUnwrapped(),Ia);let Io=rr.pbrMetallicRoughness;Io.metallicFactor=.9,Io.roughnessFactor=.5;let Ho=Id(new Float32Array(En),new Float32Array(wi),new Float32Array(dn),N,Ee,Io.baseColorFactor,rr.emissiveFactor,Io.metallicFactor,Io.roughnessFactor,rr,Tn,ee,[0,0,0],so);qi.draw(N,te.gl.TRIANGLES,dt&&!ao?$e:xe,Ut.disabled,Je?ao||Ee<1||Gt.hasTranslucentParts?an.alphaBlended:an.unblended:an.disabled,Dt.backCCW,Ho,ee.id,Fn.vertexBuffer,Fn.indexBuffer,Fn.segments,ee.paint,N.transform.zoom,void 0,or)}}}};(function(Je,dt,Ct,It){let Ot=Je.terrain?Je.terrain.exaggeration():0,St=Je.transform.zoom;for(let Qt of It){let Gt=dt.getTile(Qt).getBucket(Ct);Gt&&(Je.conflationActive&&Gt.updateReplacement(Qt,Je.replacementSource),Gt.evaluateScale(Je,Ct),Je.terrain&&Ot>0&&Gt.elevationUpdate(Je.terrain,Ot,Qt,Ct.source),Gt.needsReEvaluation(Je,St,Ct)&&Gt.evaluate(Ct))}})(N,q,ee,X),Ee===1?it(!0,!0):(it(!1,!0),it(!0,!1))}(c,i,a,u),void A();let S=T.getModels(),D=[],z=c.transform.getFreeCameraOptions().position,F=r.N.scale([],[z.x,z.y,z.z],c.transform.worldSize);r.N.negate(F,F);let G=[],U=[],$=0;for(let N of S){let q=a.paint.get("model-rotation").constantOr(null),ee=a.paint.get("model-scale").constantOr(null),X=a.paint.get("model-translation").constantOr(null);N.computeModelMatrix(c,q,ee,X,!0,!0,!1);let te=r.a6.identity([]),Z=r.cR(N.position.lat,c.transform.zoom),ne=r.a6.fromScaling([],[1,1,1/Z]);r.a6.translate(te,te,F),D.push({zScaleMatrix:ne,negCameraPosMatrix:te});for(let le of N.nodes)Tu(c.transform,le,N.matrix,c.transform.expandedFarZProjMatrix,$,G,U);$++}if(G.sort((N,q)=>q.depth-N.depth),c.renderPass!=="shadow"){if(h===1)for(let N of U)Ou(N,c,a,D[N.modelIndex],Ut.disabled,c.colorModeForRenderPass());else{for(let N of U)Ou(N,c,a,D[N.modelIndex],Ut.disabled,an.disabled);for(let N of U)Ou(N,c,a,D[N.modelIndex],c.stencilModeFor3D(),c.colorModeForRenderPass());c.resetStencilClippingMasks()}for(let N of G)Ou(N,c,a,D[N.modelIndex],Ut.disabled,c.colorModeForRenderPass());A()}else{for(let N of U)Me(N.mesh,N.nodeModelMatrix,c,a);for(let N of G)Me(N.mesh,N.nodeModelMatrix,c,a);A()}}},tp={model:function(c,i,a){let u=c.scope,h=i.getSource();if(!h.loaded())return;if(h.type==="vector"||h.type==="geojson")return void(a.modelManager&&a.modelManager.upload(a,u));if(h.type==="batched-model")return;let f=h.getModels();for(let y of f)y.upload(a.context)},raster:function(c,i,a){let u=i.getSource();if(!(u instanceof rt&&u.loaded()))return;let h=c.sourceLayer||u.rasterLayerIds&&u.rasterLayerIds[0];if(!h)return;let f=c.paint.get("raster-array-band")||u.getInitialBand(h);if(f==null)return;let y=i.getIds().map(w=>i.getTileByID(w));for(let w of y)w.updateNeeded(h,f)&&u.prepareTile(w,h,f)},"raster-particle":function(c,i,a){let u=i.getSource();if(!(u instanceof rt&&u.loaded()))return;let h=c.sourceLayer||u.rasterLayerIds&&u.rasterLayerIds[0];if(!h)return;let f=c.paint.get("raster-particle-array-band")||u.getInitialBand(h);if(f==null)return;let y=i.getIds().map(w=>i.getTileByID(w));for(let w of y)w.updateNeeded(h,f)&&u.prepareTile(w,h,f)}};class Hf{constructor(i,a,u,h){this.context=new dd(i,a),this.transform=u,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=h,this._debugParams={showTerrainProxyTiles:!1},h.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=yr.maxUnderzooming+yr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new r.cX,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new ru(this),this._wireframeDebugCache=new Gf,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(i,a){let u=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(u||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Nh(this,i));let h=this._terrain;this.transform.elevation=u?h:null,h.update(i,this.transform,a),this.transform.elevation&&!h.enabled&&(this.transform.elevation=null)}_updateFog(i){let a=i.fog;if(!a||this.transform.projection.name==="globe"||a.getOpacity(this.transform.pitch)<1||a.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);let[u,h]=a.getFovAdjustedRange(this.transform._fov);if(u>h)return void(this.transform.fogCullDistSq=null);let f=u+.78*(h-u);this.transform.fogCullDistSq=f*f}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(i,a){if(this.width=i*r.f.devicePixelRatio,this.height=a*r.f.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let u of this.style.order)this.style._mergedLayers[u].resize()}setup(){let i=this.context,a=new r.aN;a.emplaceBack(0,0),a.emplaceBack(r.V,0),a.emplaceBack(0,r.V),a.emplaceBack(r.V,r.V),this.tileExtentBuffer=i.createVertexBuffer(a,r.aP.members),this.tileExtentSegments=r.aB.simpleSegment(0,0,4,2);let u=new r.aN;u.emplaceBack(0,0),u.emplaceBack(r.V,0),u.emplaceBack(0,r.V),u.emplaceBack(r.V,r.V),this.debugBuffer=i.createVertexBuffer(u,r.aP.members),this.debugSegments=r.aB.simpleSegment(0,0,4,5);let h=new r.aN;h.emplaceBack(-1,-1),h.emplaceBack(1,-1),h.emplaceBack(-1,1),h.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(h,r.aP.members),this.viewportSegments=r.aB.simpleSegment(0,0,4,2);let f=new r.av;f.emplaceBack(0,0,0,0),f.emplaceBack(r.V,0,r.V,0),f.emplaceBack(0,r.V,0,r.V),f.emplaceBack(r.V,r.V,r.V,r.V),this.mercatorBoundsBuffer=i.createVertexBuffer(f,r.aR.members),this.mercatorBoundsSegments=r.aB.simpleSegment(0,0,4,2);let y=new r.aw;y.emplaceBack(0,1,2),y.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(y);let w=new r.aO;for(let T of[0,1,3,2,0])w.emplaceBack(T);this.debugIndexBuffer=i.createIndexBuffer(w),this.emptyTexture=new r.T(i,new r.h({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=r.a6.create();let A=this.context.gl;this.stencilClearMode=new Ut({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){let i=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,i.TRIANGLES,kt.disabled,this.stencilClearMode,an.disabled,Dt.disabled,tr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,a,u){if(!a||this.currentStencilSource===a.id||!i.isTileClipped()||!u||u.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let w=!1;for(let A of u)if(this._tileClippingMaskIDs[A.key]===void 0){w=!0;break}if(!w)return}this.currentStencilSource=a.id;let h=this.context,f=h.gl;this.nextStencilID+u.length>256&&this.clearStencil(),h.setColorMode(an.disabled),h.setDepthMode(kt.disabled);let y=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(let w of u){let A=a.getTile(w),T=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,{tileBoundsBuffer:S,tileBoundsIndexBuffer:D,tileBoundsSegments:z}=this.getTileBoundsBuffers(A);y.draw(this,f.TRIANGLES,kt.disabled,new Ut({func:f.ALWAYS,mask:0},T,255,f.KEEP,f.KEEP,f.REPLACE),an.disabled,Dt.disabled,tr(w.projMatrix),"$clipping",S,D,z)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,a=this.context.gl;return new Ut({func:a.NOTEQUAL,mask:255},i,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);let a=this.context.gl;return new Ut({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(i){let a=this.context.gl,u=i.sort((y,w)=>w.overscaledZ-y.overscaledZ),h=u[u.length-1].overscaledZ,f=u[0].overscaledZ-h+1;if(f>1){this.currentStencilSource=void 0,this.nextStencilID+f>256&&this.clearStencil();let y={};for(let w=0;w<f;w++)y[w+h]=new Ut({func:a.GEQUAL,mask:255},w+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=f,[y,u]}return[{[h]:Ut.disabled},u]}colorModeForRenderPass(){let i=this.context.gl;return this._showOverdrawInspector?new an([i.CONSTANT_COLOR,i.ONE,i.CONSTANT_COLOR,i.ONE],new r.ax(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?an.unblended:an.alphaBlended}colorModeForDrapableLayerRenderPass(i){let a=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new an([a.ONE,a.ONE_MINUS_SRC_ALPHA,a.CONSTANT_ALPHA,a.ONE_MINUS_SRC_ALPHA],new r.ax(0,0,0,i===void 0?0:i),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(i,a,u,h=!1){if(!this.opaquePassEnabledForLayer()&&!h)return kt.disabled;let f=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kt(u||this.context.gl.LEQUAL,a,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,a){this._wireframeDebugCache.update(this.frameCounter),this.style=i,this.options=a;let u=this.style._mergedLayers,h=this.style.order,f=h.map(Z=>u[Z]),y=this.style._mergedSourceCaches;this.imageManager=i.imageManager,this.modelManager=i.modelManager,this.symbolFadeChange=i.placement.symbolFadeChange(r.f.now()),this.imageManager.beginFrame();let w=0,A=!1;for(let Z in y){let ne=y[Z];ne.used&&(ne.prepare(this.context),ne.getSource().usedInConflation&&++w)}for(let Z of f)Z.isHidden(this.transform.zoom)||this.prepareLayer(Z);let T={},S={},D={},z={},F={};for(let Z in y){let ne=y[Z];T[Z]=ne.getVisibleCoordinates(),S[Z]=T[Z].slice().reverse(),D[Z]=ne.getVisibleCoordinates(!0).reverse(),z[Z]=ne.getShadowCasterCoordinates(),F[Z]=ne.sortCoordinatesByDistance(T[Z])}let G=Z=>{let ne=this.style.getLayerSourceCache(Z);return ne&&ne.used?ne.getSource():null};if(w){let Z=[];for(let ne of f)this.layerUsedInConflation(ne,G(ne))&&Z.push(ne);if(Z&&Z.length>1){let ne=[];for(let le of Z){let ue=this.style.getLayerSourceCache(le);ue&&ue.used&&ue.getSource().usedInConflation&&ne.push({layer:le.fqid,cache:ue})}this.replacementSource.setSources(ne),A=!0}}A||this.replacementSource.clear(),this.conflationActive=A,this.minCutoffZoom=0,this.longestCutoffRange=0;for(let Z of f){let ne=Z.cutoffRange();if(this.longestCutoffRange=Math.max(ne,this.longestCutoffRange),ne>0){let le=G(Z);le&&(this.minCutoffZoom=Math.max(le.minzoom,this.minCutoffZoom)),Z.minzoom&&(this.minCutoffZoom=Math.max(Z.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let Z=0;Z<f.length;Z++)if(f[Z].is3D()){this.opaquePassCutoff=Z;break}let U=this.style&&this.style.fog;U?(this._fogVisible=U.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=U.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(D),this.opaquePassCutoff=0);let $=this._shadowRenderer;if($){$.updateShadowParameters(this.transform,this.style.directionalLight);for(let Z in y)for(let ne of T[Z]){let le={min:0,max:0};this.terrain&&(le=this.terrain.getMinMaxForTile(ne)||le),$.addShadowReceiver(ne.toUnwrapped(),le.min,le.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new r.cY(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Rt(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!r.cZ(this.context.gl))return;this.renderPass="offscreen";for(let Z of f){let ne=i.getLayerSourceCache(Z);if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;let le=ne?S[ne.id]:void 0;(Z.type==="custom"||Z.type==="raster"||Z.type==="raster-particle"||Z.isSky()||le&&le.length)&&this.renderLayer(this,ne,Z,le)}this.depthRangeFor3D=[0,1-(f.length+2)*this.numSublayers*this.depthEpsilon];let N=this.terrain;N&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&N.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,z)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let q=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),ee=(()=>{if(a.showOverdrawInspector)return r.ax.black;if(this.style.fog&&this.transform.projection.supportsFog&&!q){let Z=this.style.fog.properties.get("color").toArray01();return new r.ax(...Z)}if(this.style.fog&&this.transform.projection.supportsFog&&q){let Z=this.style.fog.properties.get("space-color").toArray01();return new r.ax(...Z)}return r.ax.transparent})();if(this.context.clear({color:ee,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&q&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){let Z=f[this.currentLayer],ne=i.getLayerSourceCache(Z);if(Z.isSky())continue;let le=ne?(Z.is3D()?F:S)[ne.id]:void 0;this._renderTileClippingMasks(Z,ne,le),this.renderLayer(this,ne,Z,le)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&q&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||r.S(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){let Z=f[this.currentLayer],ne=i.getLayerSourceCache(Z);Z.isSky()&&this.renderLayer(this,ne,Z,ne?S[ne.id]:void 0)}function X(Z,ne){let le;return ne&&(le=(Z.type==="symbol"?D:Z.is3D()?F:S)[ne.id]),le}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<h.length;){let Z=f[this.currentLayer];if(Z.type==="raster"){let ne=i.getLayerSourceCache(Z);this.renderLayer(this,ne,Z,X(Z,ne))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let te=0;for($&&(te=$.getShadowCastingLayerCount());this.currentLayer<h.length;){let Z=f[this.currentLayer],ne=i.getLayerSourceCache(Z);if(Z.isSky())++this.currentLayer;else if(N&&this.style.isLayerDraped(Z)){if(Z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=N.renderBatch(this.currentLayer)}else{if(this._renderTileClippingMasks(Z,ne,ne?T[ne.id]:void 0),this.renderLayer(this,ne,Z,X(Z,ne)),!N&&$&&te>0&&Z.hasShadowPass()&&--te==0&&($.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){let le=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=le;this.currentLayer++){let ue=f[this.currentLayer];if(!ue.hasLightBeamPass())continue;let fe=i.getLayerSourceCache(ue);this.renderLayer(this,fe,ue,fe?S[fe.id]:void 0)}this.currentLayer=le,this.renderPass="translucent"}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Z=null;f.forEach(ne=>{let le=i.getLayerSourceCache(ne);le&&!ne.isHidden(this.transform.zoom)&&le.getVisibleCoordinates().length&&(!Z||Z.getSource().maxzoom<le.getSource().maxzoom)&&(Z=le)}),Z&&this.options.showTileBoundaries&&Eu.debug(this,Z,Z.getVisibleCoordinates(),r.ax.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Eu.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new r.ax(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Z){let ne=Z.transform.padding;Xh(Z,Z.transform.height-(ne.top||0),3,nr),Xh(Z,ne.bottom||0,3,Bs),br(Z,ne.left||0,3,jf),br(Z,Z.transform.width-(ne.right||0),3,qh);let le=Z.transform.centerPoint;(function(ue,fe,Ae,ye){vi(ue,fe-1,Ae-10,2,20,ye),vi(ue,fe-10,Ae-1,20,2,ye)})(Z,le.x,Z.transform.height-le.y,Yh)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),A||(this.conflationActive=!1)}prepareLayer(i){this.gpuTimingStart(i);let{unsupportedLayers:a}=this.transform.projection,u=!a||!a.includes(i.type);if(tp[i.type]&&(u||this.terrain&&i.type==="custom")){let h=this.style.getLayerSourceCache(i);tp[i.type](i,h,this)}this.gpuTimingEnd()}renderLayer(i,a,u,h){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="sky"||u.type==="custom"||u.type==="model"||u.type==="raster"||u.type==="raster-particle"||h&&h.length)&&(this.id=u.id,this.gpuTimingStart(u),(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes(u.type)||i.terrain&&u.type==="custom")&&Eu[u.type](i,a,u,h,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;let a=this.context.extTimerQuery,u=this.context.gl,h=this.gpuTimers[i.id];h||(h=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQuery()}),h.calls++,u.beginQuery(a.TIME_ELAPSED_EXT,h.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){let i=this.context.extTimerQuery,a=this.context.gl,u=a.createQuery();this.deferredRenderGpuTimeQueries.push(u),a.beginQuery(i.TIME_ELAPSED_EXT,u)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){let i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){let i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){let a={};for(let u in i){let h=i[u],f=this.context.extTimerQuery,y=f.getQueryParameter(h.query,this.context.gl.QUERY_RESULT)/1e6;f.deleteQueryEXT(h.query),a[u]=y}return a}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;let a=this.context.extTimerQuery,u=this.context.gl,h=0;for(let f of i)h+=a.getQueryParameter(f,u.QUERY_RESULT)/1e6,a.deleteQueryEXT(f);return h}translatePosMatrix(i,a,u,h,f){if(!u[0]&&!u[1])return i;let y=f?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(y){let T=Math.sin(y),S=Math.cos(y);u=[u[0]*S-u[1]*T,u[0]*T+u[1]*S]}let w=[f?u[0]:r.a3(a,u[0],this.transform.zoom),f?u[1]:r.a3(a,u[1],this.transform.zoom),0],A=new Float32Array(16);return r.a6.translate(A,i,w),A}saveTileTexture(i){let a=i.size[0],u=this._tileTextures[a];u?u.push(i):this._tileTextures[a]=[i]}getTileTexture(i){let a=this._tileTextures[i];return a&&a.length>0?a.pop():null}isPatternMissing(i,a){return i===null||i!==void 0&&!this.imageManager.getPattern(i.toString(),a)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(i,a,u){let h=u===void 0?this.terrain&&this.terrain.renderingToTexture:u,f=this.terrain&&this.terrain.exaggeration()===0,y=[];return this.style&&this.style.enable3dLights()&&(i==="globeRaster"||i==="terrainRaster"?(y.push("LIGHTING_3D_MODE"),y.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):h||y.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||y.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?y.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):y.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(y.push("TERRAIN"),this.linearFloatFilteringSupported()&&y.push("TERRAIN_DEM_FLOAT_FORMAT"),f&&y.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&y.push("GLOBE"),!this._fogVisible||h||a!==void 0&&!a||y.push("FOG","FOG_DITHERING"),h&&y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&y.push("OVERDRAW_INSPECTOR"),y}getOrCreateProgram(i,a){this.cache=this.cache||{};let u=a&&a.defines||[],h=a&&a.config,f=a&&a.transformFeedback,y=this.currentGlobalDefines(i,a&&a.overrideFog,a&&a.overrideRtt).concat(u),w=yu.cacheKey(uu[i],i,y,h);return this.cache[w]||(this.cache[w]=new yu(this.context,i,uu[i],h,s_[i],y,f)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(i,a){if(this.style.enable3dLights()){let u=this.style.directionalLight,h=this.style.ambientLight;if(u&&h){let f=((y,w)=>{let A=y.properties.get("direction"),T=y.properties.get("color").toArray01(),S=y.properties.get("intensity"),D=w.properties.get("color").toArray01(),z=w.properties.get("intensity"),F=[A.x,A.y,A.z],G=r.cn(D,z),U=r.cn(T,S);return{u_lighting_ambient_color:G,u_lighting_directional_dir:F,u_lighting_directional_color:U,u_ground_radiance:mu(F,U,G)}})(u,h);a.setLightsUniformValues(i,f)}}}uploadCommonUniforms(i,a,u,h,f){if(this.uploadCommonLightUniforms(i,a),this.terrain&&this.terrain.renderingToTexture)return;let y=this.style.fog;if(y){let w=y.getOpacity(this.transform.pitch),A=((T,S,D,z,F,G,U,$,N,q,ee,X)=>{let te=T.transform,Z=S.properties.get("color").toArray01();Z[3]=z;let ne=T.frameCounter/1e3%1,[le,ue]=S.properties.get("vertical-range");return{u_fog_matrix:D?te.calculateFogTileMatrix(D):X||T.identityMat,u_fog_range:S.getFovAdjustedRange(te._fov),u_fog_color:Z,u_fog_horizon_blend:S.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(le,ue),ue],u_fog_temporal_offset:ne,u_frustum_tl:F,u_frustum_tr:G,u_frustum_br:U,u_frustum_bl:$,u_globe_pos:N,u_globe_radius:q,u_viewport:ee,u_globe_transition:r.S(te.zoom),u_is_globe:+(te.projection.name==="globe")}})(this,y,u,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*r.f.devicePixelRatio,this.transform.height*r.f.devicePixelRatio],h);a.setFogUniformValues(i,A)}f&&a.setCutoffUniformValues(i,f.uniformValues)}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){let i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){let i=this.context.gl,a=i.createTexture();return i.bindTexture(i.TEXTURE_2D,a),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),a}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;let i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){let i=this._backgroundTiles,a=this._backgroundTiles={},u=this.transform.coveringTiles({tileSize:512});for(let h of u)a[h.key]=i[h.key]||new Vo(h,512,this.transform.tileZoom,this);return a}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(i,a){return!(!i.is3D()||i.minzoom&&i.minzoom>this.transform.zoom||i.sourceLayer!=="building"&&(!a||a.type!=="batched-model"))}isTileAffectedByFog(i){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let a=this._cachedTileFogOpacities[i.key];return a||(this._cachedTileFogOpacities[i.key]=a=this.style.fog.getOpacityForTile(i)),a[0]>=Bn||a[1]>=Bn}}function Iu(c,i){let a=!1,u=null,h=()=>{u=null,a&&(c(),u=setTimeout(h,i),a=!1)};return()=>(a=!0,u||h(),u)}class Rd{constructor(i){this._hashName=i&&encodeURIComponent(i),r.aY(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Iu(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){let i=this._map;if(!i)return"";let a=np(i);if(this._hashName){let u=this._hashName,h=!1,f=location.hash.slice(1).split("&").map(y=>{let w=y.split("=")[0];return w===u?(h=!0,`${w}=${a}`):y}).filter(y=>y);return h||f.push(`${u}=${a}`),`#${f.join("&")}`}return`#${a}`}_getCurrentHash(){let i=location.hash.replace("#","");if(this._hashName){let a;return i.split("&").map(u=>u.split("=")).forEach(u=>{u[0]===this._hashName&&(a=u)}),(a&&a[1]||"").split("/")}return i.split("/")}_onHashChange(){let i=this._map;if(!i)return!1;let a=this._getCurrentHash();if(a.length>=3&&!a.some(u=>isNaN(u))){let u=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(a[3]||0):i.getBearing();return i.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:u,pitch:+(a[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function np(c,i){let a=c.getCenter(),u=Math.round(100*c.getZoom())/100,h=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),f=Math.pow(10,h),y=Math.round(a.lng*f)/f,w=Math.round(a.lat*f)/f,A=c.getBearing(),T=c.getPitch(),S=i?`/${y}/${w}/${u}`:`${u}/${w}/${y}`;return(A||T)&&(S+="/"+Math.round(10*A)/10),T&&(S+=`/${Math.round(T)}`),S}let Du={linearity:.3,easing:r.c_(0,0,.3,1)},ir=r.e({deceleration:2500,maxSpeed:1400},Du),p_=r.e({deceleration:20,maxSpeed:1400},Du),zd=r.e({deceleration:1e3,maxSpeed:360},Du),di=r.e({deceleration:1e3,maxSpeed:90},Du);class Hn{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.f.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,a=r.f.now();for(;i.length>0&&a-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;let a={zoom:0,bearing:0,pitch:0,pan:new r.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:f}of this._inertiaBuffer)a.zoom+=f.zoomDelta||0,a.bearing+=f.bearingDelta||0,a.pitch+=f.pitchDelta||0,f.panDelta&&a.pan._add(f.panDelta),f.around&&(a.around=f.around),f.pinchAround&&(a.pinchAround=f.pinchAround);let u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(a.pan.mag()){let f=Qr(a.pan.mag(),u,r.e({},ir,i||{}));h.offset=a.pan.mult(f.amount/a.pan.mag()),h.center=this._map.transform.center,ku(h,f)}if(a.zoom){let f=Qr(a.zoom,u,p_);h.zoom=this._map.transform.zoom+f.amount,ku(h,f)}if(a.bearing){let f=Qr(a.bearing,u,zd);h.bearing=this._map.transform.bearing+r.aa(f.amount,-179,179),ku(h,f)}if(a.pitch){let f=Qr(a.pitch,u,di);h.pitch=this._map.transform.pitch+f.amount,ku(h,f)}if(h.zoom||h.bearing){let f=a.pinchAround===void 0?a.around:a.pinchAround;h.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),h.noMoveStart=!0,h}}function ku(c,i){(!c.duration||c.duration<i.duration)&&(c.duration=i.duration,c.easing=i.easing)}function Qr(c,i,a){let{maxSpeed:u,linearity:h,deceleration:f}=a,y=r.aa(c*h/(i/1e3),-u,u),w=Math.abs(y)/(f*h);return{easing:a.easing,duration:1e3*w,amount:y*(w/2)}}class Go extends r.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,u,h={}){let f=dr(a.getCanvasContainer(),u),y=a.unproject(f);super(i,r.e({point:f,lngLat:y,originalEvent:u},h)),this._defaultPrevented=!1,this.target=a}}class es extends r.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,u){let h=i==="touchend"?u.changedTouches:u.touches,f=da(a.getCanvasContainer(),h),y=f.map(A=>a.unproject(A)),w=f.reduce((A,T,S,D)=>A.add(T.div(D.length)),new r.P(0,0));super(i,{points:f,point:w,lngLats:y,lngLat:a.unproject(w),originalEvent:u}),this._defaultPrevented=!1}}class ip extends r.b{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,u){super(i,{originalEvent:u}),this._defaultPrevented=!1}}class op{constructor(i,a){this._map=i,this._clickTolerance=a.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new ip(i.type,this._map,i))}mousedown(i,a){return this._mousedownPos=a,this._firePreventable(new Go(i.type,this._map,i))}mouseup(i){this._map.fire(new Go(i.type,this._map,i))}preclick(i){let a=r.e({},i);a.type="preclick",this._map.fire(new Go(a.type,this._map,a))}click(i,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Go(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Go(i.type,this._map,i))}mouseover(i){this._map.fire(new Go(i.type,this._map,i))}mouseout(i){this._map.fire(new Go(i.type,this._map,i))}touchstart(i){return this._firePreventable(new es(i.type,this._map,i))}touchmove(i){this._map.fire(new es(i.type,this._map,i))}touchend(i){this._map.fire(new es(i.type,this._map,i))}touchcancel(i){this._map.fire(new es(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ls{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Go(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Go("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Go(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ns{constructor(i,a){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,a){this.isEnabled()&&i.shiftKey&&i.button===0&&(Bo(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(i,a){if(!this._active)return;let u=a,h=this._startPos,f=this._lastPos;if(!h||!f||f.equals(u)||!this._box&&u.dist(h)<this._clickTolerance)return;this._lastPos=u,this._box||(this._box=Qe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));let y=Math.min(h.x,u.x),w=Math.max(h.x,u.x),A=Math.min(h.y,u.y),T=Math.max(h.y,u.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${y}px,${A}px)`,this._box.style.width=w-y+"px",this._box.style.height=T-A+"px")})}mouseupWindow(i,a){if(!this._active)return;let u=this._startPos,h=a;if(u&&i.button===0){if(this.reset(),jr(),u.x!==h.x||u.y!==h.y)return this._map.fire(new r.b("boxzoomend",{originalEvent:i})),{cameraAnimation:f=>f.fitScreenCoordinates(u,h,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),lo(),delete this._startPos,delete this._lastPos}_fireEvent(i,a){return this._map.fire(new r.b(i,{originalEvent:a}))}}function gc(c,i){let a={};for(let u=0;u<c.length;u++)a[c[u].identifier]=i[u];return a}class Bd{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,a,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),u.length===this.numTouches&&(this.centroid=function(h){let f=new r.P(0,0);for(let y of h)f._add(y);return f.div(h.length)}(a),this.touches=gc(u,a)))}touchmove(i,a,u){if(this.aborted||!this.centroid)return;let h=gc(u,a);for(let f in this.touches){let y=h[f];(!y||y.dist(this.touches[f])>30)&&(this.aborted=!0)}}touchend(i,a,u){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){let h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class Ru{constructor(i){this.singleTap=new Bd(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,a,u){this.singleTap.touchstart(i,a,u)}touchmove(i,a,u){this.singleTap.touchmove(i,a,u)}touchend(i,a,u){let h=this.singleTap.touchend(i,a,u);if(h){let f=i.timeStamp-this.lastTime<500,y=!this.lastTap||this.lastTap.dist(h)<30;if(f&&y||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class rp{constructor(){this._zoomIn=new Ru({numTouches:1,numTaps:2}),this._zoomOut=new Ru({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,a,u){this._zoomIn.touchstart(i,a,u),this._zoomOut.touchstart(i,a,u)}touchmove(i,a,u){this._zoomIn.touchmove(i,a,u),this._zoomOut.touchmove(i,a,u)}touchend(i,a,u){let h=this._zoomIn.touchend(i,a,u),f=this._zoomOut.touchend(i,a,u);return h?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:y=>y.easeTo({duration:300,zoom:y.getZoom()+1,around:y.unproject(h)},{originalEvent:i})}):f?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:y=>y.easeTo({duration:300,zoom:y.getZoom()-1,around:y.unproject(f)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}let ap={0:1,2:2};class Ea{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,a){return!1}_move(i,a){return{}}mousedown(i,a){if(this._lastPoint)return;let u=Ur(i);this._correctButton(i,u)&&(this._lastPoint=a,this._eventButton=u)}mousemoveWindow(i,a){let u=this._lastPoint;if(u){if(i.preventDefault(),this._eventButton!=null&&function(h,f){let y=ap[f];return h.buttons===void 0||(h.buttons&y)!==y}(i,this._eventButton))this.reset();else if(this._moved||!(a.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(u,a)}}mouseupWindow(i){this._lastPoint&&Ur(i)===this._eventButton&&(this._moved&&jr(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sp extends Ea{mousedown(i,a){super.mousedown(i,a),this._lastPoint&&(this._active=!0)}_correctButton(i,a){return a===0&&!i.ctrlKey}_move(i,a){return{around:a,panDelta:a.sub(i)}}}class zu extends Ea{_correctButton(i,a){return a===0&&i.ctrlKey||a===2}_move(i,a){let u=.8*(a.x-i.x);if(u)return this._active=!0,{bearingDelta:u}}contextmenu(i){i.preventDefault()}}class Fd extends Ea{_correctButton(i,a){return a===0&&i.ctrlKey||a===2}_move(i,a){let u=-.5*(a.y-i.y);if(u)return this._active=!0,{pitchDelta:u}}contextmenu(i){i.preventDefault()}}class lp{constructor(i,a){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=a.clickTolerance||1,this.reset(),r.aY(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new r.P(0,0)}touchstart(i,a,u){return this._calculateTransform(i,a,u)}touchmove(i,a,u){if(this._active&&!(u.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(u.length===1&&!r.c$())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,a,u)}}touchend(i,a,u){this._calculateTransform(i,a,u),this._active&&u.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,a,u){u.length>0&&(this._active=!0);let h=gc(u,a),f=new r.P(0,0),y=new r.P(0,0),w=0;for(let T in h){let S=h[T],D=this._touches[T];D&&(f._add(S),y._add(S.sub(D)),w++,h[T]=S)}if(this._touches=h,w<this._minTouches||!y.mag())return;let A=y.div(w);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:f.div(w),panDelta:A}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Qe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class ro{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,a,u){return{}}touchstart(i,a,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([a[0],a[1]]))}touchmove(i,a,u){let h=this._firstTwoTouches;if(!h)return;i.preventDefault();let[f,y]=h,w=mc(u,a,f),A=mc(u,a,y);if(!w||!A)return;let T=this._aroundCenter?null:w.add(A).div(2);return this._move([w,A],T,i)}touchend(i,a,u){if(!this._firstTwoTouches)return;let[h,f]=this._firstTwoTouches,y=mc(u,a,h),w=mc(u,a,f);y&&w||(this._active&&jr(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function mc(c,i,a){for(let u=0;u<c.length;u++)if(c[u].identifier===a)return i[u]}function Ld(c,i){return Math.log(c/i)/Math.LN2}class Bu extends ro{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,a){let u=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ld(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ld(this._distance,u),pinchAround:a}}}function Vs(c,i){return 180*c.angleWith(i)/Math.PI}class cp extends ro{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,a){let u=this._vector;if(this._vector=i[0].sub(i[1]),u&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Vs(this._vector,u),pinchAround:a}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());let a=25/(Math.PI*this._minDiameter)*360,u=this._startVector;if(!u)return!1;let h=Vs(i,u);return Math.abs(h)<a}}function Fu(c){return Math.abs(c.y)>Math.abs(c.x)}class up extends ro{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,Fu(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,a,u){let h=this._lastPoints;if(!h)return;let f=i[0].sub(h[0]),y=i[1].sub(h[1]);return this._map._cooperativeGestures&&!r.c$()&&u.touches.length<3||(this._valid=this.gestureBeginsVertically(f,y,u.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5})}gestureBeginsVertically(i,a,u){if(this._valid!==void 0)return this._valid;let h=i.mag()>=2,f=a.mag()>=2;if(!h&&!f)return;if(!h||!f)return this._firstMove==null&&(this._firstMove=u),u-this._firstMove<100&&void 0;let y=i.y>0==a.y>0;return Fu(i)&&Fu(a)&&y}}let Al={panStep:100,bearingStep:15,pitchStep:10};class Lu{constructor(){let i=Al;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let a=0,u=0,h=0,f=0,y=0;switch(i.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:i.shiftKey?u=-1:(i.preventDefault(),f=-1);break;case 39:i.shiftKey?u=1:(i.preventDefault(),f=1);break;case 38:i.shiftKey?h=1:(i.preventDefault(),y=-1);break;case 40:i.shiftKey?h=-1:(i.preventDefault(),y=1);break;default:return}return this._rotationDisabled&&(u=0,h=0),{cameraAnimation:w=>{let A=w.getZoom();w.easeTo({duration:300,easeId:"keyboardHandler",easing:dp,zoom:a?Math.round(A)+a*(i.shiftKey?2:1):A,bearing:w.getBearing()+u*this._bearingStep,pitch:w.getPitch()+h*this._pitchStep,offset:[-f*this._panStep,-y*this._panStep],center:w.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function dp(c){return c*(2-c)}let Nu=4.000244140625,hp=1/450;class $f{constructor(i,a){this._map=i,this._el=i.getCanvasContainer(),this._handler=a,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=hp,r.aY(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||r.c$()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let a=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,u=r.f.now(),h=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,a!==0&&a%Nu==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(h*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),i.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=i,this._delta-=a,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let a=dr(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:a,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);let a=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){let T=this._type==="wheel"&&Math.abs(this._delta)>Nu?this._wheelZoomRate:this._defaultZoomRate,S=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&S!==0&&(S=1/S);let D=a(),z=Math.pow(2,D),F=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):z;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(F*S))),this._type==="wheel"&&(this._startZoom=D,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}let u=typeof this._targetZoom=="number"?this._targetZoom:a(),h=this._startZoom,f=this._easing,y,w=!1;if(this._type==="wheel"&&h&&f){let T=Math.min((r.f.now()-this._lastWheelEventTime)/200,1),S=f(T);y=r.U(h,u,S),T<1?this._frameId||(this._frameId=!0):w=!0}else y=u,w=!0;this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let A=y-a();return A*this._lastDelta<0&&(A=0),{noInertia:!0,needsRenderFrame:!w,zoomDelta:A,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let a=r.d0;if(this._prevEase){let u=this._prevEase,h=(r.f.now()-u.start)/u.duration,f=u.easing(h+.01)-u.easing(h),y=.27/Math.sqrt(f*f+1e-4)*.01,w=Math.sqrt(.0729-y*y);a=r.c_(y,w,.25,1)}return this._prevEase={start:r.f.now(),duration:i,easing:a},a}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Qe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Wf{constructor(i,a){this._clickZoom=i,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Zf{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,a){return i.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:u.getZoom()+(i.shiftKey?-1:1),around:u.unproject(a)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qf{constructor(){this._tap=new Ru({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,a,u){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=a[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(i,a,u))}touchmove(i,a,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;let h=a[0],f=h.y-this._swipePoint.y;return this._swipePoint=h,i.preventDefault(),this._active=!0,{zoomDelta:f/128}}}else this._tap.touchmove(i,a,u)}touchend(i,a,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(i,a,u)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yf{constructor(i,a,u){this._el=i,this._mousePan=a,this._touchPan=u}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Xf{constructor(i,a,u){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=a,this._mousePitch=u}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qf{constructor(i,a,u,h){this._el=i,this._touchZoom=a,this._touchRotate=u,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}let Vu=c=>c.zoom||c.drag||c.pitch||c.rotate;class Kf extends r.b{}class Jf{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,a){let u=r.N.sub([],a,i);this.radius=r.N.length(u[2]<0?r.N.div([],u,this.constants):[u[0],u[1],0])}projectRay(i){r.N.div(i,i,this.constants),r.N.normalize(i,i),r.N.mul(i,i,this.constants);let a=r.N.scale([],i,this.radius);if(a[2]>0){let u=r.N.scale([],[0,0,1],r.N.dot(a,[0,0,1])),h=r.N.scale([],r.N.normalize([],[a[0],a[1],0]),this.radius),f=r.N.add([],a,r.N.scale([],r.N.sub([],r.N.add([],h,u),a),2));a[0]=f[0],a[1]=f[1]}return a}}function ju(c){return c.panDelta&&c.panDelta.mag()||c.zoomDelta||c.bearingDelta||c.pitchDelta}class f_{constructor(i,a){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Hn(i),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Jf,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(a),r.aY(["handleEvent","handleWindowEvent"],this);let u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];for(let[h,f,y]of this._listeners){let w=h===document?this.handleWindowEvent:this.handleEvent;h.addEventListener(f,w,y)}}destroy(){for(let[i,a,u]of this._listeners){let h=i===document?this.handleWindowEvent:this.handleEvent;i.removeEventListener(a,h,u)}}_addDefaultHandlers(i){let a=this._map,u=a.getCanvasContainer();this._add("mapEvent",new op(a,i));let h=a.boxZoom=new Ns(a,i);this._add("boxZoom",h);let f=new rp,y=new Zf;a.doubleClickZoom=new Wf(y,f),this._add("tapZoom",f),this._add("clickZoom",y);let w=new qf;this._add("tapDragZoom",w);let A=a.touchPitch=new up(a);this._add("touchPitch",A);let T=new zu(i),S=new Fd(i);a.dragRotate=new Xf(i,T,S),this._add("mouseRotate",T,["mousePitch"]),this._add("mousePitch",S,["mouseRotate"]);let D=new sp(i),z=new lp(a,i);a.dragPan=new Yf(u,D,z),this._add("mousePan",D),this._add("touchPan",z,["touchZoom","touchRotate"]);let F=new cp,G=new Bu;a.touchZoomRotate=new Qf(u,G,F,w),this._add("touchRotate",F,["touchPan","touchZoom"]),this._add("touchZoom",G,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ls(a));let U=a.scrollZoom=new $f(a,this);this._add("scrollZoom",U,["mousePan"]);let $=a.keyboard=new Lu;this._add("keyboard",$);for(let N of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[N]&&a[N].enable(i[N])}_add(i,a,u){this._handlers.push({handlerName:i,handler:a,allowed:u}),this._handlersById[i]=a}stop(i){if(!this._updatingCamera){for(let{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[],this._originalZoom=void 0}}isActive(){for(let{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vu(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,a,u){for(let h in i)if(h!==u&&(!a||a.indexOf(h)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){let a=[];for(let u of i)this._el.contains(u.target)&&a.push(u);return a}handleEvent(i,a){this._updatingCamera=!0;let u=i.type==="renderFrame",h=u?void 0:i,f={needsRenderFrame:!1},y={},w={},A=i.touches?this._getMapTouches(i.touches):void 0,T=A?da(this._el,A):u?void 0:dr(this._el,i);for(let{handlerName:z,handler:F,allowed:G}of this._handlers){if(!F.isEnabled())continue;let U;this._blockedByActive(w,G,z)?F.reset():F[a||i.type]&&(U=F[a||i.type](i,T,A),this.mergeHandlerResult(f,y,U,z,h),U&&U.needsRenderFrame&&this._triggerRenderFrame()),(U||F.isActive())&&(w[z]=F)}let S={};for(let z in this._previousActiveHandlers)w[z]||(S[z]=h);this._previousActiveHandlers=w,(Object.keys(S).length||ju(f))&&(this._changes.push([f,y,S]),this._triggerRenderFrame()),(Object.keys(w).length||ju(f))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:D}=f;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))}mergeHandlerResult(i,a,u,h,f){if(!u)return;r.e(i,u);let y={handlerName:h,originalEvent:u.originalEvent||f};u.zoomDelta!==void 0&&(a.zoom=y),u.panDelta!==void 0&&(a.drag=y),u.pitchDelta!==void 0&&(a.pitch=y),u.bearingDelta!==void 0&&(a.rotate=y)}_applyChanges(){let i={},a={},u={};for(let[h,f,y]of this._changes)h.panDelta&&(i.panDelta=(i.panDelta||new r.P(0,0))._add(h.panDelta)),h.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+h.pitchDelta),h.around!==void 0&&(i.around=h.around),h.aroundCoord!==void 0&&(i.aroundCoord=h.aroundCoord),h.pinchAround!==void 0&&(i.pinchAround=h.pinchAround),h.noInertia&&(i.noInertia=h.noInertia),r.e(a,f),r.e(u,y);this._updateMapTransform(i,a,u),this._changes=[]}_updateMapTransform(i,a,u){let h=this._map,f=h.transform,y=q=>[q.x,q.y,q.z];if((q=>{let ee=this._eventsInProgress.drag;return ee&&!this._handlersById[ee.handlerName].isActive()})()&&!ju(i)){let q=f.zoom;f.cameraElevationReference="sea",this._originalZoom!=null&&f._orthographicProjectionAtLowPitch&&f.projection.name!=="globe"&&f.pitch===0?(f.cameraElevationReference="ground",f.zoom=this._originalZoom):(f.recenterOnTerrain(),f.cameraElevationReference="ground"),q!==f.zoom&&this._map._update(!0)}if(f._isCameraConstrained&&h._stop(!0),!ju(i))return void this._fireEvents(a,u,!0);let{panDelta:w,zoomDelta:A,bearingDelta:T,pitchDelta:S,around:D,aroundCoord:z,pinchAround:F}=i;f._isCameraConstrained&&(A>0&&(A=0),f._isCameraConstrained=!1),F!==void 0&&(D=F),(A||(q=>a[q]&&!this._eventsInProgress[q])("drag"))&&D&&(this._dragOrigin=y(f.pointCoordinate3D(D)),this._originalZoom=f.zoom,this._trackingEllipsoid.setup(f._camera.position,this._dragOrigin)),f.cameraElevationReference="sea",h._stop(!0),D=D||h.transform.centerPoint,T&&(f.bearing+=T),S&&(f.pitch+=S),f._updateCameraState();let G=[0,0,0];if(w)if(f.projection.name==="mercator"){let q=this._trackingEllipsoid.projectRay(f.screenPointToMercatorRay(D).dir),ee=this._trackingEllipsoid.projectRay(f.screenPointToMercatorRay(D.sub(w)).dir);G[0]=ee[0]-q[0],G[1]=ee[1]-q[1]}else{let q=f.pointCoordinate(D);if(f.projection.name==="globe"){w=w.rotate(-f.angle);let ee=f._pixelsPerMercatorPixel/f.worldSize;G[0]=-w.x*r.d1(r.au(q.y))*ee,G[1]=-w.y*r.d1(f.center.lat)*ee}else{let ee=f.pointCoordinate(D.sub(w));q&&ee&&(G[0]=ee.x-q.x,G[1]=ee.y-q.y)}}let U=f.zoom,$=[0,0,0];if(A){let q=y(z||f.pointCoordinate3D(D)),ee={dir:r.N.normalize([],r.N.sub([],q,f._camera.position))};if(ee.dir[2]<0){let X=f.zoomDeltaToMovement(q,A);r.N.scale($,ee.dir,X)}}let N=r.N.add(G,G,$);f._translateCameraConstrained(N),A&&Math.abs(f.zoom-U)>1e-4&&f.recenterOnTerrain(),f.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(a,u,!0)}_fireEvents(i,a,u){let h=Vu(this._eventsInProgress),f=Vu(i),y={};for(let S in i){let{originalEvent:D}=i[S];this._eventsInProgress[S]||(y[`${S}start`]=D),this._eventsInProgress[S]=i[S]}!h&&f&&this._fireEvent("movestart",f.originalEvent);for(let S in y)this._fireEvent(S,y[S]);f&&this._fireEvent("move",f.originalEvent);for(let S in i){let{originalEvent:D}=i[S];this._fireEvent(S,D)}let w={},A;for(let S in this._eventsInProgress){let{handlerName:D,originalEvent:z}=this._eventsInProgress[S];this._handlersById[D].isActive()||(delete this._eventsInProgress[S],A=a[D]||z,w[`${S}end`]=A)}for(let S in w)this._fireEvent(S,w[S]);let T=Vu(this._eventsInProgress);if(u&&(h||f)&&!T){this._updatingCamera=!0;let S=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),D=z=>z!==0&&-this._bearingSnap<z&&z<this._bearingSnap;S?(D(S.bearing||this._map.getBearing())&&(S.bearing=0),this._map.easeTo(S,{originalEvent:A})):(this._map.fire(new r.b("moveend",{originalEvent:A})),D(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,a){this._map.fire(new r.b(i,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new Kf("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}let eg="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ii extends r.E{constructor(i,a){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=a.bearingSnap,this._respectPrefersReducedMotion=a.respectPrefersReducedMotion!==!1,r.aY(["_renderFrameCallback"],this)}getCenter(){return new r.bn(this.transform.center.lng,this.transform.center.lat)}setCenter(i,a){return this.jumpTo({center:i},a)}panBy(i,a,u){return i=r.P.convert(i).mult(-1),this.panTo(this.transform.center,r.e({offset:i},a),u)}panTo(i,a,u){return this.easeTo(r.e({center:i},a),u)}getZoom(){return this.transform.zoom}setZoom(i,a){return this.jumpTo({zoom:i},a),this}zoomTo(i,a,u){return this.easeTo(r.e({zoom:i},a),u)}zoomIn(i,a){return this.zoomTo(this.getZoom()+1,i,a),this}zoomOut(i,a){return this.zoomTo(this.getZoom()-1,i,a),this}getBearing(){return this.transform.bearing}setBearing(i,a){return this.jumpTo({bearing:i},a),this}getPadding(){return this.transform.padding}setPadding(i,a){return this.jumpTo({padding:i},a),this}rotateTo(i,a,u){return this.easeTo(r.e({bearing:i},a),u)}resetNorth(i,a){return this.rotateTo(0,r.e({duration:1e3},i),a),this}resetNorthPitch(i,a){return this.easeTo(r.e({bearing:0,pitch:0,duration:1e3},i),a),this}snapToNorth(i,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,a):this}getPitch(){return this.transform.pitch}setPitch(i,a){return this.jumpTo({pitch:i},a),this}cameraForBounds(i,a){i=r.ad.convert(i);let u=a&&a.bearing||0,h=a&&a.pitch||0,f=i.getNorthWest(),y=i.getSouthEast();return this._cameraForBounds(this.transform,f,y,u,h,a)}_extendCameraOptions(i){let a={top:0,bottom:0,right:0,left:0};if(typeof(i=r.e({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){let u=i.padding;i.padding={top:u,bottom:u,right:u,left:u}}return i.padding=r.e(a,i.padding),i}_minimumAABBFrustumDistance(i,a){let u=a.max[0]-a.min[0],h=a.max[1]-a.min[1];return u/h>i.aspect?u/(2*Math.tan(.5*i.fovX)*i.aspect):h/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,a,u,h,f,y){let w=i.clone(),A=this._extendCameraOptions(y);w.bearing=h,w.pitch=f;let T=r.bn.convert(a),S=r.bn.convert(u),D=.5*(T.lat+S.lat),z=.5*(T.lng+S.lng),F=r.d2(D,z),G=r.N.normalize([],F),U=r.N.normalize([],r.N.cross([],G,[0,1,0])),$=r.N.cross([],U,G),N=[U[0],U[1],U[2],0,$[0],$[1],$[2],0,G[0],G[1],G[2],0,0,0,0,1],q=[F,r.d2(T.lat,T.lng),r.d2(S.lat,T.lng),r.d2(S.lat,S.lng),r.d2(T.lat,S.lng),r.d2(D,T.lng),r.d2(D,S.lng),r.d2(T.lat,z),r.d2(S.lat,z)],ee=r.bS.fromPoints(q.map(Ce=>[r.N.dot(U,Ce),r.N.dot($,Ce),r.N.dot(G,Ce)])),X=r.N.transformMat4([],ee.center,N);r.N.squaredLength(X)===0&&r.N.set(X,0,0,1),r.N.normalize(X,X),r.N.scale(X,X,r.ab),w.center=r.d3(X);let te=w.getWorldToCameraMatrix(),Z=r.a6.invert(new Float64Array(16),te);ee=r.bS.applyTransform(ee,r.a6.multiply([],te,N)),r.N.transformMat4(X,X,te);let ne=.5*(ee.max[2]-ee.min[2]),le=this._minimumAABBFrustumDistance(w,ee),ue=r.N.scale([],[0,0,1],ne),fe=r.N.add(ue,X,ue),Ae=le+(w.pitch===0?0:r.N.distance(X,fe)),ye=w.globeCenterInViewSpace,ke=r.N.sub([],X,[ye[0],ye[1],ye[2]]);r.N.normalize(ke,ke),r.N.scale(ke,ke,Ae);let Ee=r.N.add([],X,ke);r.N.transformMat4(Ee,Ee,Z);let $e=r.d4/r.ab,xe=r.N.length(Ee),Te=r.bl(Math.max(xe*$e-r.d4,Number.EPSILON),0),he=Math.min(w.zoomFromMercatorZAdjusted(Te),A.maxZoom);return he>.5*(r.bG+r.bx)?(w.setProjection({name:"mercator"}),w.zoom=he,this._cameraForBounds(w,a,u,h,f,y)):{center:w.center,zoom:he,bearing:h,pitch:f}}queryTerrainElevation(i,a){let u=this.transform.elevation;return u?(a=r.e({},{exaggerated:!0},a),u.getAtPoint(r.L.fromLngLat(i),null,a.exaggerated)):null}_cameraForBounds(i,a,u,h,f,y){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,a,u,h,f,y);let w=i.clone(),A=this._extendCameraOptions(y),T=w.padding;w.bearing=h,w.pitch=f;let S=r.bn.convert(a),D=r.bn.convert(u),z=new r.bn(S.lng,D.lat),F=new r.bn(D.lng,S.lat),G=w.project(S),U=w.project(D),$=this.queryTerrainElevation(S),N=this.queryTerrainElevation(D),q=this.queryTerrainElevation(z),ee=this.queryTerrainElevation(F),X=[[G.x,G.y,Math.min($||0,N||0,q||0,ee||0)],[U.x,U.y,Math.max($||0,N||0,q||0,ee||0)]],te=r.bS.fromPoints(X),Z=w.getWorldToCameraMatrix(),ne=r.a6.invert(new Float64Array(16),Z);te=r.bS.applyTransform(te,Z);let le=r.N.sub([],te.max,te.min),ue=T.left||0,fe=T.right||0,Ae=T.bottom||0,ye=T.top||0,{left:ke,right:Ee,top:$e,bottom:xe}=A.padding,Te=.5*(ue+fe),he=.5*(ye+Ae),Ce=Math.min(w.scaleZoom(w.scale*Math.min((w.width-(ue+fe+ke+Ee))/le[0],(w.height-(Ae+ye+xe+$e))/le[1])),A.maxZoom),Ze=w.scale/w.zoomScale(Ce);te=new r.bS([te.min[0]-(ke+Te)*Ze,te.min[1]-(xe+he)*Ze,te.min[2]],[te.max[0]+(Ee+Te)*Ze,te.max[1]+($e+he)*Ze,te.max[2]]);let it=.5*le[2],Je=this._minimumAABBFrustumDistance(w,te),dt=[0,0,1,0];r.a7.transformMat4(dt,dt,Z),r.a7.normalize(dt,dt);let Ct=r.N.scale([],dt,Je+it),It=r.N.add([],te.center,Ct),Ot=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new r.P(A.offset.x,A.offset.y):r.P.convert(A.offset)).rotate(-r.bj(h));te.center[0]-=Ot.x*Ze,te.center[1]+=Ot.y*Ze,r.N.transformMat4(te.center,te.center,ne),r.N.transformMat4(It,It,ne);let St=[te.center[0],te.center[1],It[2]*w.pixelsPerMeter];r.N.scale(St,St,1/w.worldSize);let Qt=r.at(St[0]),Gt=r.au(St[1]),Zt=Math.min(w._zoomFromMercatorZ(St[2]),A.maxZoom),$t=new r.bn(Qt,Gt);return w.mercatorFromTransition&&Zt<.5*(r.bG+r.bx)?(w.setProjection({name:"globe"}),w.zoom=Zt,this._cameraForBounds(w,a,u,h,f,y)):{center:$t,zoom:Zt,bearing:h,pitch:f}}fitBounds(i,a,u){let h=this.cameraForBounds(i,a);return this._fitInternal(h,a,u)}fitScreenCoordinates(i,a,u,h,f){let y=r.P.convert(i),w=r.P.convert(a),A=new r.P(Math.min(y.x,w.x),Math.min(y.y,w.y)),T=new r.P(Math.max(y.x,w.x),Math.max(y.y,w.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(y,w))return this;let S=this.transform.pointLocation3D(A),D=this.transform.pointLocation3D(T),z=this.transform.pointLocation3D(new r.P(A.x,T.y)),F=this.transform.pointLocation3D(new r.P(T.x,A.y)),G=[Math.min(S.lng,D.lng,z.lng,F.lng),Math.min(S.lat,D.lat,z.lat,F.lat)],U=[Math.max(S.lng,D.lng,z.lng,F.lng),Math.max(S.lat,D.lat,z.lat,F.lat)],$=h&&h.pitch?h.pitch:this.getPitch(),N=this._cameraForBounds(this.transform,G,U,u,$,h);return this._fitInternal(N,h,f)}_fitInternal(i,a,u){return i?(delete(a=r.e(i,a)).padding,a.linear?this.easeTo(a,u):this.flyTo(a,u)):this}jumpTo(i,a){this.stop();let u=i.preloadOnly?this.transform.clone():this.transform,h=!1,f=!1,y=!1;return"zoom"in i&&u.zoom!==+i.zoom&&(h=!0,u.zoom=+i.zoom),i.center!==void 0&&(u.center=r.bn.convert(i.center)),"bearing"in i&&u.bearing!==+i.bearing&&(f=!0,u.bearing=+i.bearing),"pitch"in i&&u.pitch!==+i.pitch&&(y=!0,u.pitch=+i.pitch),i.padding==null||u.isPaddingEqual(i.padding)||(u.padding=i.padding),i.preloadOnly?(this._preloadTiles(u),this):(this.fire(new r.b("movestart",a)).fire(new r.b("move",a)),h&&this.fire(new r.b("zoomstart",a)).fire(new r.b("zoom",a)).fire(new r.b("zoomend",a)),f&&this.fire(new r.b("rotatestart",a)).fire(new r.b("rotate",a)).fire(new r.b("rotateend",a)),y&&this.fire(new r.b("pitchstart",a)).fire(new r.b("pitch",a)).fire(new r.b("pitchend",a)),this.fire(new r.b("moveend",a)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||r.w(eg),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,a){let u=this.transform;if(!u.projection.supportsFreeCamera)return r.w(eg),this;this.stop();let h=u.zoom,f=u.pitch,y=u.bearing;u.setFreeCameraOptions(i);let w=h!==u.zoom,A=f!==u.pitch,T=y!==u.bearing;return this.fire(new r.b("movestart",a)).fire(new r.b("move",a)),w&&this.fire(new r.b("zoomstart",a)).fire(new r.b("zoom",a)).fire(new r.b("zoomend",a)),T&&this.fire(new r.b("rotatestart",a)).fire(new r.b("rotate",a)).fire(new r.b("rotateend",a)),A&&this.fire(new r.b("pitchstart",a)).fire(new r.b("pitch",a)).fire(new r.b("pitchend",a)),this.fire(new r.b("moveend",a)),this}easeTo(i,a){this._stop(!1,i.easeId),((i=r.e({offset:[0,0],duration:500,easing:r.d0},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);let u=this.transform,h=this.getZoom(),f=this.getBearing(),y=this.getPitch(),w=this.getPadding(),A="zoom"in i?+i.zoom:h,T="bearing"in i?this._normalizeBearing(i.bearing,f):f,S="pitch"in i?+i.pitch:y,D="padding"in i?i.padding:u.padding,z=r.P.convert(i.offset),F,G,U;if(u.projection.name==="globe"){let ue=r.L.fromLngLat(u.center),fe=z.rotate(-u.angle);ue.x+=fe.x/u.worldSize,ue.y+=fe.y/u.worldSize;let Ae=ue.toLngLat(),ye=r.bn.convert(i.center||Ae);this._normalizeCenter(ye),F=u.centerPoint.add(fe),G=new r.P(ue.x,ue.y).mult(u.worldSize),U=new r.P(r.a5(ye.lng),r.ae(ye.lat)).mult(u.worldSize).sub(G)}else{F=u.centerPoint.add(z);let ue=u.pointLocation(F),fe=r.bn.convert(i.center||ue);this._normalizeCenter(fe),G=u.project(ue),U=u.project(fe).sub(G)}let $=u.zoomScale(A-h),N,q;i.around&&(N=r.bn.convert(i.around),q=u.locationPoint(N));let ee=this._zooming||A!==h,X=this._rotating||f!==T,te=this._pitching||S!==y,Z=!u.isPaddingEqual(D),ne=ue=>fe=>{if(ee&&(ue.zoom=r.U(h,A,fe)),X&&(ue.bearing=r.U(f,T,fe)),te&&(ue.pitch=r.U(y,S,fe)),Z&&(ue.interpolatePadding(w,D,fe),F=ue.centerPoint.add(z)),N)ue.setLocationAtPoint(N,q);else{let Ae=ue.zoomScale(ue.zoom-h),ye=A>h?Math.min(2,$):Math.max(.5,$),ke=Math.pow(ye,1-fe),Ee=ue.unproject(G.add(U.mult(fe*ke)).mult(Ae));ue.setLocationAtPoint(ue.renderWorldCopies?Ee.wrap():Ee,F)}return i.preloadOnly||this._fireMoveEvents(a),ue};if(i.preloadOnly){let ue=this._emulate(ne,i.duration,u);return this._preloadTiles(ue),this}let le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ee,this._rotating=X,this._pitching=te,this._easeId=i.easeId,this._prepareEase(a,i.noMoveStart,le),this._ease(ne(u),ue=>{u.cameraElevationReference==="sea"&&u.recenterOnTerrain(),this._afterEase(a,ue)},i),this}_prepareEase(i,a,u={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),a||u.moving||this.fire(new r.b("movestart",i)),this._zooming&&!u.zooming&&this.fire(new r.b("zoomstart",i)),this._rotating&&!u.rotating&&this.fire(new r.b("rotatestart",i)),this._pitching&&!u.pitching&&this.fire(new r.b("pitchstart",i))}_fireMoveEvents(i){this.fire(new r.b("move",i)),this._zooming&&this.fire(new r.b("zoom",i)),this._rotating&&this.fire(new r.b("rotate",i)),this._pitching&&this.fire(new r.b("pitch",i))}_afterEase(i,a){if(this._easeId&&a&&this._easeId===a)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";let u=this._zooming,h=this._rotating,f=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,u&&this.fire(new r.b("zoomend",i)),h&&this.fire(new r.b("rotateend",i)),f&&this.fire(new r.b("pitchend",i)),this.fire(new r.b("moveend",i))}flyTo(i,a){if(this._prefersReducedMotion(i)){let xe=r.ac(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xe,a)}this.stop(),i=r.e({offset:[0,0],speed:1.2,curve:1.42,easing:r.d0},i);let u=this.transform,h=this.getZoom(),f=this.getBearing(),y=this.getPitch(),w="zoom"in i?r.aa(+i.zoom,u.minZoom,u.maxZoom):h,A="bearing"in i?this._normalizeBearing(i.bearing,f):f,T="pitch"in i?+i.pitch:y,S=u.zoomScale(w-h),D=r.P.convert(i.offset),z=u.centerPoint.add(D),F=u.pointLocation(z),G=i.center;if(G&&i.padding){let xe=this._cameraForBounds(this.transform,G,G,A,T,i);xe&&(G=xe.center)}G=r.bn.convert(G||F),this._normalizeCenter(G);let U=u.project(F),$=u.project(G).sub(U),N=i.curve,q=Math.max(u.width,u.height),ee=q/S,X=$.mag();if("minZoom"in i){let xe=r.aa(Math.min(i.minZoom,h,w),u.minZoom,u.maxZoom),Te=q/u.zoomScale(xe-h);N=Math.sqrt(Te/X*2)}let te=N*N;function Z(xe){let Te=(ee*ee-q*q+(xe?-1:1)*te*te*X*X)/(2*(xe?ee:q)*te*X);return Math.log(Math.sqrt(Te*Te+1)-Te)}function ne(xe){return(Math.exp(xe)-Math.exp(-xe))/2}function le(xe){return(Math.exp(xe)+Math.exp(-xe))/2}let ue=Z(0),fe=function(xe){return le(ue)/le(ue+N*xe)},Ae=function(xe){return q*((le(ue)*(ne(Te=ue+N*xe)/le(Te))-ne(ue))/te)/X;var Te},ye=(Z(1)-ue)/N;if(Math.abs(X)<1e-6||!isFinite(ye)){if(Math.abs(q-ee)<1e-6)return this.easeTo(i,a);let xe=ee<q?-1:1;ye=Math.abs(Math.log(ee/q))/N,Ae=function(){return 0},fe=function(Te){return Math.exp(xe*N*Te)}}i.duration="duration"in i?+i.duration:1e3*ye/("screenSpeed"in i?+i.screenSpeed/N:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);let ke=f!==A,Ee=T!==y,$e=xe=>Te=>{let he=Te*ye,Ce=1/fe(he);xe.zoom=Te===1?w:h+xe.scaleZoom(Ce),ke&&(xe.bearing=r.U(f,A,Te)),Ee&&(xe.pitch=r.U(y,T,Te));let Ze=Te===1?G:xe.unproject(U.add($.mult(Ae(he))).mult(Ce));return xe.setLocationAtPoint(xe.renderWorldCopies?Ze.wrap():Ze,z),xe._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(a),xe};if(i.preloadOnly){let xe=this._emulate($e,i.duration,u);return this._preloadTiles(xe),this}return this._zooming=!0,this._rotating=ke,this._pitching=Ee,this._prepareEase(a,!1),this._ease($e(u),()=>this._afterEase(a),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,a){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){let u=this._onEaseEnd;this._onEaseEnd=void 0,u.call(this,a)}if(!i){let u=this.handlers;u&&u.stop(!1)}return this}_ease(i,a,u){u.animate===!1||u.duration===0?(i(1),a()):(this._easeStart=r.f.now(),this._easeOptions=u,this._onEaseFrame=i,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){let i=Math.min((r.f.now()-this._easeStart)/this._easeOptions.duration,1),a=this._onEaseFrame;a&&a(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,a){i=r.bh(i,-180,180);let u=Math.abs(i-a);return Math.abs(i-360-a)<u&&(i-=360),Math.abs(i+360-a)<u&&(i+=360),i}_normalizeCenter(i){let a=this.transform;if(a.maxBounds||a.projection.name!=="globe"&&!a.renderWorldCopies)return;let u=i.lng-a.center.lng;i.lng+=u>180?-360:u<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&r.f.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,a,u){let h=Math.ceil(15*a/1e3),f=[],y=i(u.clone());for(let w=0;w<=h;w++){let A=y(w/h);f.push(A.clone())}return f}}class pp{constructor(i={}){this.options=i,r.aY(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){let a=this.options&&this.options.compact;return this._map=i,this._container=Qe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Qe("button","mapboxgl-ctrl-attrib-button",this._container),Qe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Qe("div","mapboxgl-ctrl-attrib-inner",this._container),a&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),a===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,a){let u=this._map._getUIString(`AttributionControl.${a}`);i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",u)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));let a=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.d5.ACCESS_TOKEN}];if(i){let u=a.reduce((h,f,y)=>(f.value&&(h+=`${f.key}=${f.value}${y<a.length-1?"&":""}`),h),"?");i.href=`${r.d5.FEEDBACK_URL}/${u}#${np(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){let h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}let a=this._map.style._mergedSourceCaches;for(let h in a){let f=a[h];if(f.used){let y=f.getSource();y.attribution&&i.indexOf(y.attribution)<0&&i.push(y.attribution)}}i.sort((h,f)=>h.length-f.length),i=i.filter((h,f)=>{for(let y=f+1;y<i.length;y++)if(i[y].indexOf(h)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));let u=i.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,i.length?(this._innerContainer.innerHTML=u,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class tg{constructor(){r.aY(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=Qe("div","mapboxgl-ctrl");let a=Qe("a","mapboxgl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://www.mapbox.com/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;let i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(let a in i){let u=i[a].getSource();if(u.hasOwnProperty("mapbox_logo")&&!u.mapbox_logo)return!1}return!0}_updateCompact(){let i=this._container.children;if(i.length){let a=i[0];this._map.getCanvasContainer().offsetWidth<250?a.classList.add("mapboxgl-compact"):a.classList.remove("mapboxgl-compact")}}}class ng{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){let a=++this._id;return this._queue.push({callback:i,id:a,cancelled:!1}),a}remove(i){let a=this._currentlyRunning,u=a?this._queue.concat(a):this._queue;for(let h of u)if(h.id===i)return void(h.cancelled=!0)}run(i=0){let a=this._currentlyRunning=this._queue;this._queue=[];for(let u of a)if(!u.cancelled&&(u.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Uu(c,i,a){if(c=new r.bn(c.lng,c.lat),i){let u=new r.bn(c.lng-360,c.lat),h=new r.bn(c.lng+360,c.lat),f=360*Math.ceil(Math.abs(c.lng-a.center.lng)/360),y=a.locationPoint(c).distSqr(i),w=i.x<0||i.y<0||i.x>a.width||i.y>a.height;a.locationPoint(u).distSqr(i)<y&&(w||Math.abs(u.lng-a.center.lng)<f)?c=u:a.locationPoint(h).distSqr(i)<y&&(w||Math.abs(h.lng-a.center.lng)<f)&&(c=h)}for(;Math.abs(c.lng-a.center.lng)>180;){let u=a.locationPoint(c);if(u.x>=0&&u.y>=0&&u.x<=a.width&&u.y<=a.height)break;c.lng>a.center.lng?c.lng-=360:c.lng+=360}return c}let Nd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class fp extends r.E{constructor(i,a){if(super(),(i instanceof HTMLElement||a)&&(i=r.e({element:i},a)),r.aY(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=r.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=Qe("div");let f=41,y=27,w=zt("svg",{display:"block",height:f*this._scale+"px",width:y*this._scale+"px",viewBox:`0 0 ${y} ${f}`},this._element),A=zt("radialGradient",{id:"shadowGradient"},zt("defs",{},w));zt("stop",{offset:"10%","stop-opacity":.4},A),zt("stop",{offset:"100%","stop-opacity":.05},A),zt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},w),zt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},w),zt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},w),zt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},w),this._offset=r.P.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()});let u=this._element.classList;for(let f in Nd)u.remove(`mapboxgl-marker-anchor-${f}`);u.add(`mapboxgl-marker-anchor-${this._anchor}`);let h=i&&i.className?i.className.trim().split(/\s+/):[];u.add(...h),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){let i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=r.bn.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){let h=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){let a=i.code,u=i.charCode||i.keyCode;a!=="Space"&&a!=="Enter"&&u!==32&&u!==13||this.togglePopup()}_onMapClick(i){let a=i.originalEvent.target,u=this._element;this._popup&&(a===u||u.contains(a))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){let i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){let i=this._map,a=this._pos;if(!i||!a)return!1;let u=i.unproject(a),h=i.getFreeCameraOptions();if(!h.position)return!1;let f=h.position.toLngLat();return f.distanceTo(u)<.9*f.distanceTo(this._lngLat)}_evaluateOpacity(){let i=this._map;if(!i)return;let a=this._pos;if(!a||a.x<0||a.x>i.transform.width||a.y<0||a.y>i.transform.height)return void this._clearFadeTimer();let u=i.unproject(a),h;i._showingGlobe()&&r.d6(i.transform,this._lngLat)?h=0:(h=1-i._queryFogOpacity(u),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(h*=this._occludedOpacity)),this._element.style.opacity=`${h}`,this._element.style.pointerEvents=h>0?"auto":"none",this._popup&&this._popup._setOpacity(h),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){let i=this._pos;if(!i||!this._map)return;let a=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${Nd[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${a.x}px,${a.y}px)
        `}_calculateXYTransform(){let i=this._pos,a=this._map,u=this.getPitchAlignment();if(!a||!i||u!=="map")return"";if(!a._showingGlobe()){let A=a.getPitch();return A?`rotateX(${A}deg)`:""}let h=r.bF(r.d7(a.transform,this._lngLat)),f=i.sub(r.d8(a.transform)),y=Math.abs(f.x)+Math.abs(f.y);if(y===0)return"";let w=h/y;return`rotateX(${-f.y*w}deg) rotateY(${f.x*w}deg)`}_calculateZTransform(){let i=this._pos,a=this._map;if(!a||!i)return"";let u=0,h=this.getRotationAlignment();if(h==="map")if(a._showingGlobe()){let f=a.project(new r.bn(this._lngLat.lng,this._lngLat.lat+.001)),y=a.project(new r.bn(this._lngLat.lng,this._lngLat.lat-.001)).sub(f);u=r.bF(Math.atan2(y.y,y.x))-90}else u=-a.getBearing();else if(h==="horizon"){let f=r.O(4,6,a.getZoom()),y=r.d8(a.transform);y.y+=f*a.transform.height;let w=i.sub(y),A=r.bF(Math.atan2(w.y,w.x));u=(A>90?A-270:A+90)*(1-f)}return u+=this._rotation,u?`rotateZ(${u}deg)`:""}_update(i){cancelAnimationFrame(this._updateFrameId);let a=this._map;a&&(a.transform.renderWorldCopies&&(this._lngLat=Uu(this._lngLat,this._pos,a.transform)),this._pos=a.project(this._lngLat),i===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),a._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(a._showingGlobe()||a.getTerrain()||a.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=r.P.convert(i),this._update(),this}addClassName(i){return this._element.classList.add(i),this}removeClassName(i){return this._element.classList.remove(i),this}toggleClassName(i){return this._element.classList.toggle(i)}_onMove(i){let a=this._map;if(!a)return;let u=this._pointerdownPos,h=this._positionDelta;if(u&&h){if(!this._isDragging){let f=this._clickTolerance||a._clickTolerance;if(i.point.dist(u)<f)return;this._isDragging=!0}this._pos=i.point.sub(h),this._lngLat=a.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.b("dragstart"))),this.fire(new r.b("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;let i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new r.b("dragend")),this._state="inactive"}_addDragHandler(i){let a=this._map,u=this._pos;a&&u&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(u),this._pointerdownPos=i.point,this._state="pending",a.on("mousemove",this._onMove),a.on("touchmove",this._onMove),a.once("mouseup",this._onUp),a.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;let a=this._map;return a&&(i?(a.on("mousedown",this._addDragHandler),a.on("touchstart",this._addDragHandler)):(a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}let ig={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},og=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rg(c=new r.P(0,0),i="bottom"){if(typeof c=="number"){let a=Math.round(Math.sqrt(.5*Math.pow(c,2)));switch(i){case"top":return new r.P(0,c);case"top-left":return new r.P(a,a);case"top-right":return new r.P(-a,a);case"bottom":return new r.P(0,-c);case"bottom-left":return new r.P(a,-a);case"bottom-right":return new r.P(-a,-a);case"left":return new r.P(c,0);case"right":return new r.P(-c,0)}return new r.P(0,0)}return c instanceof r.P||Array.isArray(c)?r.P.convert(c):r.P.convert(c[i]||[0,0])}class gp{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;let a=r.cc((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-a)+this._end*a}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,a,u){this._start=this.getValue(a),this._end=i,this._startTime=a,this._endTime=a+u}}let Gu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ag={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class mp{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.showParseStatus=!1,this.continuousRedraw=!1,this.showTileAABBs=!1,this.showPadding=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}let Vd={showCompass:!0,showZoom:!0,visualizePitch:!1};class ts{constructor(i,a,u=!1){this._clickTolerance=10,this.element=a,this.mouseRotate=new zu({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,u&&(this.mousePitch=new Fd({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),r.aY(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener("mousedown",this.mousedown),a.addEventListener("touchstart",this.touchstart,{passive:!1}),a.addEventListener("touchmove",this.touchmove),a.addEventListener("touchend",this.touchend),a.addEventListener("touchcancel",this.reset)}down(i,a){this.mouseRotate.mousedown(i,a),this.mousePitch&&this.mousePitch.mousedown(i,a),Bo()}move(i,a){let u=this.map,h=this.mouseRotate.mousemoveWindow(i,a),f=h&&h.bearingDelta;if(f&&u.setBearing(u.getBearing()+f),this.mousePitch){let y=this.mousePitch.mousemoveWindow(i,a),w=y&&y.pitchDelta;w&&u.setPitch(u.getPitch()+w)}}off(){let i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){lo(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(r.e({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),dr(this.element,i)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,dr(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=da(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=da(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let jd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Eo={maxWidth:100,unit:"metric"},js={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:r.dk,supported:ce,setRTLTextPlugin:r.dm,getRTLTextPluginStatus:r.dn,Map:class extends Ii{constructor(c){let i=c;if((c=r.e({},ag,c)).minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(c.antialias&&r.d9(window)&&(c.antialias=!1,r.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Os(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies),c),this._repaint=!1,this._interactive=c.interactive,this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=c.crossSourceCollisions,this._collectResourceTiming=c.collectResourceTiming,this._language=this._parseLanguage(c.language),this._worldview=c.worldview,this._renderTaskQueue=new ng,this._domRenderTaskQueue=new ng,this._controls=[],this._markers=[],this._popups=[],this._mapId=r.aC(),this._locale=r.e({},Gu,c.locale),this._clickTolerance=c.clickTolerance,this._cooperativeGestures=c.cooperativeGestures,this._performanceMetricsCollection=c.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new gp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new r.da(c.transformRequest,c.accessToken,c.testMode),this._silenceAuthErrors=!!c.testMode,this._contextCreateOptions=c.contextCreateOptions?Et({},c.contextCreateOptions):{},typeof c.container=="string"){let a=document.getElementById(c.container);if(!a)throw new Error(`Container '${c.container.toString()}' not found.`);this._container=a}else{if(!(c.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(this._container.childNodes.length>0&&r.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),c.maxBounds&&this.setMaxBounds(c.maxBounds),r.aY(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new mp,this._tp=c.devtools?new Su(this):new Su,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showParseStatus",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,a=>{this.repaint=a}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileAABBs",void 0,a=>{this.showTileAABBs=a}),this._tp.registerParameter(this._debugParams,["Debug"],"showPadding",void 0,a=>{this.showPadding=a}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new f_(this,c),this._localFontFamily=c.localFontFamily,this._localIdeographFontFamily=c.localIdeographFontFamily,(c.style||!c.testMode)&&this.setStyle(c.style||r.d5.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),c.projection&&this.setProjection(c.projection),c.hash&&(this._hash=new Rd(typeof c.hash=="string"&&c.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){i.center==null&&i.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch});let a=c.bounds;a&&(this.resize(),this.fitBounds(a,r.e({},c.fitBoundsOptions,{duration:0})))}this.resize(),c.attributionControl&&this.addControl(new pp({customAttribution:c.customAttribution})),this._logoControl=new tg,this.addControl(this._logoControl,c.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new r.b(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new r.b(`${a.dataType}dataloading`,a))})}_getMapId(){return this._mapId}addControl(c,i){if(i===void 0&&(i=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new r.a(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let a=c.onAdd(this);this._controls.push(c);let u=this._controlPositions[i];return i.indexOf("bottom")!==-1?u.insertBefore(a,u.firstChild):u.appendChild(a),this}removeControl(c){if(!c||!c.onRemove)return this.fire(new r.a(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(c);return i>-1&&this._controls.splice(i,1),c.onRemove(this),this}hasControl(c){return this._controls.indexOf(c)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(c){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));let i=!this._moving;return i&&this.fire(new r.b("movestart",c)).fire(new r.b("move",c)),this.fire(new r.b("resize",c)),i&&this.fire(new r.b("moveend",c)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(c){return this.transform.setMaxBounds(r.ad.convert(c)),this._update()}setMinZoom(c){if((c=c??-2)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c?this.setZoom(c):this.fire(new r.b("zoomstart")).fire(new r.b("zoom")).fire(new r.b("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(c){if((c=c??22)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c?this.setZoom(c):this.fire(new r.b("zoomstart")).fire(new r.b("zoom")).fire(new r.b("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(c){if((c=c??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c?this.setPitch(c):this.fire(new r.b("pitchstart")).fire(new r.b("pitch")).fire(new r.b("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(c){if((c=c??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c?this.setPitch(c):this.fire(new r.b("pitchstart")).fire(new r.b("pitch")).fire(new r.b("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(c){return this.transform.renderWorldCopies=c,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(c){return c==="auto"?navigator.language:Array.isArray(c)?c.length===0?void 0:c.map(i=>i==="auto"?navigator.language:i):c}setLanguage(c){let i=this._parseLanguage(c);if(!this.style||i===this._language)return this;this._language=i,this.style.reloadSources();for(let a of this._controls)a._setLanguage&&a._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(c){return this.style&&c!==this._worldview?(this._worldview=c,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(c){return this._lazyInitEmptyStyle(),c?typeof c=="string"&&(c={name:c}):c=null,this._useExplicitProjection=!!c,this._prioritizeAndUpdateProjection(c,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;let c=this.transform,i=c.projection.name,a;i==="globe"&&c.zoom>=r.bx?(c.setMercatorFromTransition(),a=!0):i==="mercator"&&c.zoom<r.bx&&(c.setProjection({name:"globe"}),a=!0),a&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(c,i){return this._updateProjection(c||i||{name:"mercator"})}_updateProjection(c){let i;return i=c.name==="globe"&&this.transform.zoom>=r.bx?this.transform.setMercatorFromTransition():this.transform.setProjection(c),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(c){return this.transform.locationPoint3D(r.bn.convert(c))}unproject(c){return this.transform.pointLocation3D(r.P.convert(c))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(c,i,a){if(c==="mouseenter"||c==="mouseover"){let u=!1,h=y=>{let w=i.filter(T=>this.getLayer(T)),A=w.length?this.queryRenderedFeatures(y.point,{layers:w}):[];A.length?u||(u=!0,a.call(this,new Go(c,this,y.originalEvent,{features:A}))):u=!1},f=()=>{u=!1};return{layers:new Set(i),listener:a,delegates:{mousemove:h,mouseout:f}}}if(c==="mouseleave"||c==="mouseout"){let u=!1,h=y=>{let w=i.filter(A=>this.getLayer(A));(w.length?this.queryRenderedFeatures(y.point,{layers:w}):[]).length?u=!0:u&&(u=!1,a.call(this,new Go(c,this,y.originalEvent)))},f=y=>{u&&(u=!1,a.call(this,new Go(c,this,y.originalEvent)))};return{layers:new Set(i),listener:a,delegates:{mousemove:h,mouseout:f}}}{let u=h=>{let f=i.filter(w=>this.getLayer(w)),y=f.length?this.queryRenderedFeatures(h.point,{layers:f}):[];y.length&&(h.features=y,a.call(this,h),delete h.features)};return{layers:new Set(i),listener:a,delegates:{[c]:u}}}}on(c,i,a){if(a===void 0)return super.on(c,i);if(Array.isArray(i)||(i=[i]),i){for(let h of i)if(!this._isValidId(h))return this}let u=this._createDelegatedListener(c,i,a);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(u);for(let h in u.delegates)this.on(h,u.delegates[h]);return this}once(c,i,a){if(a===void 0)return super.once(c,i);if(Array.isArray(i)||(i=[i]),i){for(let h of i)if(!this._isValidId(h))return this}let u=this._createDelegatedListener(c,i,a);for(let h in u.delegates)this.once(h,u.delegates[h]);return this}off(c,i,a){if(a===void 0)return super.off(c,i);i=new Set(Array.isArray(i)?i:[i]);for(let f of i)if(!this._isValidId(f))return this;let u=(f,y)=>{if(f.size!==y.size)return!1;for(let w of f)if(!y.has(w))return!1;return!0},h=this._delegatedListeners?this._delegatedListeners[c]:void 0;return h&&(f=>{for(let y=0;y<f.length;y++){let w=f[y];if(w.listener===a&&u(w.layers,i)){for(let A in w.delegates)this.off(A,w.delegates[A]);return f.splice(y,1),this}}})(h),this}queryRenderedFeatures(c,i){if(!this.style)return[];if(i!==void 0||c===void 0||c instanceof r.P||Array.isArray(c)||(i=c,c=void 0),c=c||[[0,0],[this.transform.width,this.transform.height]],(i=i||{}).layers&&Array.isArray(i.layers)){for(let a of i.layers)if(!this._isValidId(a))return[]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(c,i){return this._isValidId(c)?this.style.querySourceFeatures(c,i):[]}isPointOnSurface(c){let{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&r.w(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(r.P.convert(c))}setStyle(c,i){return(i=r.e({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&c?(this._diffStyle(c,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(c,i))}_getUIString(c){let i=this._locale[c];if(i==null)throw new Error(`Missing UI string '${c}'`);return i}_updateStyle(c,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),c&&(this.style=new vr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof c=="string"?this.style.loadURL(c):this.style.loadJSON(c)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new vr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(c,i){if(typeof c=="string"){let a=this._requestManager.normalizeStyleURL(c),u=this._requestManager.transformRequest(a,r.R.Style);r.g(u,(h,f)=>{h?this.fire(new r.a(h)):f&&this._updateDiff(f,i)})}else typeof c=="object"&&this._updateDiff(c,i)}_updateDiff(c,i){try{this.style.setState(c)&&this._update(!0)}catch(a){r.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(c,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(r.w("There is no style added to the map."),!1)}_isValidId(c){return c==null?(this.fire(new r.a(new Error("IDs can't be empty."))),!1):!r.c4(c)||(this.fire(new r.a(new Error(`IDs can't contain special symbols: "${c}".`))),!1)}addSource(c,i){return this._isValidId(c)?(this._lazyInitEmptyStyle(),this.style.addSource(c,i),this._update(!0)):this}isSourceLoaded(c){return!!this._isValidId(c)&&!!this.style&&this.style._isSourceCacheLoaded(c)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(c,i,a){this._lazyInitEmptyStyle(),this.style.addSourceType(c,i,a)}removeSource(c){return this._isValidId(c)?(this.style.removeSource(c),this._updateTerrain(),this._update(!0)):this}getSource(c){return this._isValidId(c)?this.style.getOwnSource(c):null}addImage(c,i,{pixelRatio:a=1,sdf:u=!1,stretchX:h,stretchY:f,content:y}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){let{width:w,height:A,data:T}=r.f.getImageData(i);this.style.addImage(c,{data:new r.h({width:w,height:A},T),pixelRatio:a,stretchX:h,stretchY:f,content:y,sdf:u,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new r.a(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{let{width:w,height:A}=i,T=i;this.style.addImage(c,{data:new r.h({width:w,height:A},new Uint8Array(T.data)),pixelRatio:a,stretchX:h,stretchY:f,content:y,sdf:u,version:0,userImage:T}),T.onAdd&&T.onAdd(this,c)}}updateImage(c,i){this._lazyInitEmptyStyle();let a=this.style.getImage(c);if(!a)return void this.fire(new r.a(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let u=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?r.f.getImageData(i):i,{width:h,height:f}=u,y=u.data;if(h===void 0||f===void 0)return void this.fire(new r.a(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==a.data.width||f!==a.data.height)return void this.fire(new r.a(new Error(`The width and height of the updated image (${h}, ${f})
                must be that same as the previous version of the image
                (${a.data.width}, ${a.data.height})`)));let w=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);a.data.replace(y,w),this.style.updateImage(c,a)}hasImage(c){return c?!!this.style&&!!this.style.getImage(c):(this.fire(new r.a(new Error("Missing required image id"))),!1)}removeImage(c){this.style.removeImage(c)}loadImage(c,i){r.d(this._requestManager.transformRequest(c,r.R.Image),(a,u)=>{i(a,u instanceof HTMLImageElement?r.f.getImageData(u):u)})}listImages(){return this.style.listImages()}addModel(c,i){this._lazyInitEmptyStyle(),this.style.addModel(c,i)}hasModel(c){return c?this.style.hasModel(c):(this.fire(new r.a(new Error("Missing required model id"))),!1)}removeModel(c){this.style.removeModel(c)}listModels(){return this.style.listModels()}addLayer(c,i){return this._isValidId(c.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(c,i),this._update(!0)):this}getSlot(c){let i=this.getLayer(c);return i&&i.slot||null}setSlot(c,i){return this.style.setSlot(c,i),this.style.mergeLayers(),this._update(!0)}addImport(c,i){return this.style.addImport(c,i),this}updateImport(c,i){return typeof i!="string"&&i.id!==c?(this.removeImport(c),this.addImport(i)):(this.style.updateImport(c,i),this._update(!0))}removeImport(c){return this.style.removeImport(c),this}moveImport(c,i){return this.style.moveImport(c,i),this._update(!0)}moveLayer(c,i){return this._isValidId(c)?(this.style.moveLayer(c,i),this._update(!0)):this}removeLayer(c){return this._isValidId(c)?(this.style.removeLayer(c),this._update(!0)):this}getLayer(c){return this._isValidId(c)?this.style.getOwnLayer(c):null}setLayerZoomRange(c,i,a){return this._isValidId(c)?(this.style.setLayerZoomRange(c,i,a),this._update(!0)):this}setFilter(c,i,a={}){return this._isValidId(c)?(this.style.setFilter(c,i,a),this._update(!0)):this}getFilter(c){return this._isValidId(c)?this.style.getFilter(c):null}setPaintProperty(c,i,a,u={}){return this._isValidId(c)?(this.style.setPaintProperty(c,i,a,u),this._update(!0)):this}getPaintProperty(c,i){return this._isValidId(c)?this.style.getPaintProperty(c,i):null}setLayoutProperty(c,i,a,u={}){return this._isValidId(c)?(this.style.setLayoutProperty(c,i,a,u),this._update(!0)):this}getLayoutProperty(c,i){return this._isValidId(c)?this.style.getLayoutProperty(c,i):null}getConfigProperty(c,i){return this.style.getConfigProperty(c,i)}setConfigProperty(c,i,a){return this.style.setConfigProperty(c,i,a),this._update(!0)}setLights(c){if(this._lazyInitEmptyStyle(),c&&c.length===1&&c[0].type==="flat"){let i=c[0];i.properties?this.style.setFlatLight(i.properties,i.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(c),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){let c=this.style.getLights()||[];return c.length===0&&c.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),c}setLight(c,i={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:c}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(c){return this._lazyInitEmptyStyle(),!c&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(c),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(c){return this._lazyInitEmptyStyle(),this.style.setFog(c),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(c){return this.style.setCamera(c),this._triggerCameraUpdate(c)}_triggerCameraUpdate(c){return this._update(this.transform.setOrthographicProjectionAtLowPitch(c["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(c){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(r.bn.convert(c),this.transform):0}setFeatureState(c,i){return this._isValidId(c.source)?(this.style.setFeatureState(c,i),this._update()):this}removeFeatureState(c,i){return this._isValidId(c.source)?(this.style.removeFeatureState(c,i),this._update()):this}getFeatureState(c){return this._isValidId(c.source)?this.style.getFeatureState(c):null}_updateContainerDimensions(){if(!this._container)return;let c=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300,a,u,h,f=this._container;for(;f&&(!u||!h);){let y=window.getComputedStyle(f).transform;y&&y!=="none"&&(a=y.match(/matrix.*\((.+)\)/)[1].split(", "),a[0]&&a[0]!=="0"&&a[0]!=="1"&&(u=a[0]),a[3]&&a[3]!=="0"&&a[3]!=="1"&&(h=a[3])),f=f.parentElement}this._containerWidth=u?Math.abs(c/u):c,this._containerHeight=h?Math.abs(i/h):i}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){let c=this._container;c.classList.add("mapboxgl-map"),(this._missingCSSCanary=Qe("div","mapboxgl-canary",c)).style.visibility="hidden",this._detectMissingCSS();let i=this._canvasContainer=Qe("div","mapboxgl-canvas-container",c);this._canvas=Qe("canvas","mapboxgl-canvas",i),this._interactive&&(i.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);let a=this._controlContainer=Qe("div","mapboxgl-control-container",c),u=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(h=>{u[h]=Qe("div",`mapboxgl-ctrl-${h}`,a)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(c,i){let a=r.f.devicePixelRatio||1;this._canvas.width=a*Math.ceil(c),this._canvas.height=a*Math.ceil(i),this._canvas.style.width=`${c}px`,this._canvas.style.height=`${i}px`}_addMarker(c){this._markers.push(c)}_removeMarker(c){let i=this._markers.indexOf(c);i!==-1&&this._markers.splice(i,1)}_addPopup(c){this._popups.push(c)}_removePopup(c){let i=this._popups.indexOf(c);i!==-1&&this._popups.splice(i,1)}_setupPainter(){let c=r.e({},ce.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",c);i?(r.db(i,!0),this.painter=new Hf(i,this._contextCreateOptions,this.transform,this._tp),this.on("data",a=>{a.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),r.dc.testSupport(i)):this.fire(new r.a(new Error("Failed to initialize WebGL")))}_contextLost(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.b("webglcontextlost",{originalEvent:c}))}_contextRestored(c){this._setupPainter(),this.resize(),this._update(),this.fire(new r.b("webglcontextrestored",{originalEvent:c}))}_onMapScroll(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(c){return this._update(),this._renderTaskQueue.add(c)}_cancelRenderFrame(c){this._renderTaskQueue.remove(c)}_requestDomTask(c){!this.loaded()||this.loaded()&&!this.isMoving()?c():this._domRenderTaskQueue.add(c)}_render(c){let i;this.fire(new r.b("renderstart"));let a=this.painter.context.extTimerQuery,u=r.f.now(),h=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(i=h.createQuery(),h.beginQuery(a.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(c),this._domRenderTaskQueue.run(c),this._removed)return;this._updateProjectionTransition();let f=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;let A=this.transform.zoom,T=this.transform.pitch,S=r.f.now(),D=new r.K(A,{now:S,fadeDuration:f,pitch:T,transition:this.style.transition});this.style.update(D)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let y=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),y=this._updateAverageElevation(u),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):y=this._updateAverageElevation(u),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,f,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,showParseStatus:this.showParseStatus||this._debugParams.showParseStatus,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs||this._debugParams.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:f,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding||this._debugParams.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new r.b("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.b("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){let A=r.f.now()-u;h.endQuery(a.TIME_ELAPSED_EXT),setTimeout(()=>{let T=h.getQueryParameter(i,h.QUERY_RESULT)/1e6;h.deleteQuery(i),this.fire(new r.b("gpu-timing-frame",{cpuTime:A,gpuTime:T}))},50)}if(this.listens("gpu-timing-layer")){let A=this.painter.collectGpuTimers();setTimeout(()=>{let T=this.painter.queryGpuTimers(A);this.fire(new r.b("gpu-timing-layer",{layerTimes:T}))},50)}if(this.listens("gpu-timing-deferred-render")){let A=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{let T=this.painter.queryGpuTimeDeferredRender(A);this.fire(new r.b("gpu-timing-deferred-render",{gpuTime:T}))},50)}let w=this._sourcesDirty||this._styleDirty||this._placementDirty||y;if(w||this._repaint)this.triggerRepaint();else{let A=!this.isMoving()&&this.loaded();if(A&&(y=this._updateAverageElevation(u,!0)),y)this.triggerRepaint();else if(this._triggerFrame(!1),A&&(this.fire(new r.b("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){let T=this._calculateSpeedIndex();this.fire(new r.b("speedindexcompleted",{speedIndex:T})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,this._performanceMetricsCollection&&r.dd(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(c){for(let i of this._markers)c&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(let i of this._popups)!c||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(c,i=!1){let a=h=>(this.transform.averageElevation=h,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&a(0);let u=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(u||(i||c-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(c)){let h=this.transform.averageElevation,f=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(f)?f=0:this._averageElevationLastSampledAt=c;let y=Math.abs(h-f);if(y>1){if(this._isInitialLoad||u)return this._averageElevation.jumpTo(f),a(f);this._averageElevation.easeTo(f,c,300)}else if(y>1e-4)return this._averageElevation.jumpTo(f),a(f)}return!!this._averageElevation.isEasing(c)&&a(this._averageElevation.getValue(c))}_authenticate(){r.de(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,c=>{if(c&&(c.message===r.df||c.status===401)){let i=this.painter.context.gl;r.db(i,!1),this._logoControl instanceof tg&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new r.a(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),r.dg(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){let c=this._isDragging();this.painter.updateTerrain(this.style,c)}_calculateSpeedIndex(){let c=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());let a=this.painter.context.gl,u=a.createFramebuffer();function h(f){a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,f,0);let y=new Uint8Array(a.drawingBufferWidth*a.drawingBufferHeight*4);return a.readPixels(0,0,a.drawingBufferWidth,a.drawingBufferHeight,a.RGBA,a.UNSIGNED_BYTE,y),y}return a.bindFramebuffer(a.FRAMEBUFFER,u),this._canvasPixelComparison(h(c),i.canvasCopies.map(h),i.timeStamps)}_canvasPixelComparison(c,i,a){let u=a[1]-a[0],h=c.length/4;for(let f=0;f<i.length;f++){let y=i[f],w=0;for(let A=0;A<y.length;A+=4)y[A]===c[A]&&y[A+1]===c[A+1]&&y[A+2]===c[A+2]&&y[A+3]===c[A+3]&&(w+=1);u+=(a[f+2]-a[f+1])*(1-w/h)}return u}remove(){this._hash&&this._hash.remove();for(let i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);let c=this.painter.context.gl.getExtension("WEBGL_lose_context");c&&c.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),r.dh(this.painter.context.gl),r.di.remove(),r.dj.remove(),this._removed=!0,this.fire(new r.b("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(c){this._renderNextFrame=this._renderNextFrame||c,this.style&&!this._frame&&(this._frame=r.f.frame(i=>{let a=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,a&&this._render(i)}))}_preloadTiles(c){let i=this.style?Object.values(this.style._sourceCaches):[];return r.b1(i,(a,u)=>a._preloadTiles(c,u),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(c){this._trackResize&&this.resize({originalEvent:c})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(c){this._showParseStatus!==c&&(this._showParseStatus=c,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(c){this._showTerrainWireframe!==c&&(this._showTerrainWireframe=c,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(c){this._showLayers2DWireframe!==c&&(this._showLayers2DWireframe=c,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(c){this._showLayers3DWireframe!==c&&(this._showLayers3DWireframe=c,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(c){this._speedIndexTiming!==c&&(this._speedIndexTiming=c,this._update())}get showPadding(){return!!this._showPadding}set showPadding(c){this._showPadding!==c&&(this._showPadding=c,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())}get repaint(){return!!this._repaint}set repaint(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(c){this._vertices=c,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(c){this._showTileAABBs!==c&&(this._showTileAABBs=c,c&&this._update())}_setCacheLimits(c,i){r.dl(c,i)}get version(){return r.dk}},NavigationControl:class{constructor(c){this.options=r.e({},Vd,c),this._container=Qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(r.aY(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),Qe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),Qe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.aY(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{let a=this._map;a&&(this.options.visualizePitch?a.resetNorthPitch({},{originalEvent:i}):a.resetNorth({},{originalEvent:i}))}),this._compassIcon=Qe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){let c=this._map;if(!c)return;let i=c.getZoom(),a=i===c.getMaxZoom(),u=i===c.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){let c=this._map;if(!c)return;let i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(c.transform.pitch*(Math.PI/180)),.5)}) rotateX(${c.transform.pitch}deg) rotateZ(${c.transform.angle*(180/Math.PI)}deg)`:`rotate(${c.transform.angle*(180/Math.PI)}deg)`;c._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(c){return this._map=c,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),c.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&c.on("pitch",this._rotateCompassArrow),c.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ts(c,this._compass,this.options.visualizePitch)),this._container}onRemove(){let c=this._map;c&&(this._container.remove(),this.options.showZoom&&c.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&c.off("pitch",this._rotateCompassArrow),c.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(c,i){let a=Qe("button",c,this._container);return a.type="button",a.addEventListener("click",i),a}_setButtonTitle(c,i){if(!this._map)return;let a=this._map._getUIString(`NavigationControl.${i}`);c.setAttribute("aria-label",a),c.firstElementChild&&c.firstElementChild.setAttribute("title",a)}},GeolocateControl:class extends r.E{constructor(c){super();let i=navigator.geolocation;this.options=r.e({geolocation:i},jd,c),r.aY(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Iu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(c){return this._map=c,this._container=Qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(c){let i=(a=!!this.options.geolocation)=>{this._supportsGeolocation=a,c(a)};this._supportsGeolocation!==void 0?c(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(a=>i(a.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(c){let i=this._map.getMaxBounds(),a=c.coords;return!!i&&(a.longitude<i.getWest()||a.longitude>i.getEast()||a.latitude<i.getSouth()||a.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new r.b("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.b("geolocate",c)),this._finish()}}_updateCamera(c){let i=new r.bn(c.coords.longitude,c.coords.latitude),a=c.coords.accuracy,u=this._map.getBearing(),h=r.e({bearing:u},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),h,{geolocateSource:!0})}_updateMarker(c){if(c){let i=new r.bn(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){let c=this._map.transform,i=r.bl(1,c._center.lat)*c.worldSize,a=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${a}px`,this._circleElement.style.height=`${a}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(c){if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new r.b("error",c)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(c){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=Qe("button","mapboxgl-ctrl-geolocate",this._container),Qe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",c===!1){r.w("Geolocation support is not available so the GeolocateControl will be disabled.");let i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{let i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Qe("div","mapboxgl-user-location"),this._dotElement.appendChild(Qe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Qe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fp({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Qe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new r.b("trackuserlocationend")))})}}_onDeviceOrientation(c){this._userLocationDotMarker&&(c.webkitCompassHeading?this._heading=c.webkitCompassHeading:c.absolute===!0&&(this._heading=-1*c.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return r.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.b("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.b("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.b("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(c={maximumAge:6e5,timeout:0},this._noTimeout=!0):(c=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,c),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){let c=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&c()}).catch(console.error):c()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:pp,ScaleControl:class{constructor(c){this.options=r.e({},Eo,c),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),r.aY(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){let c=this.options.maxWidth||100,i=this._map,a=i._containerHeight/2,u=i._containerWidth/2-c/2,h=i.unproject([u,a]),f=i.unproject([u+c,a]),y=h.distanceTo(f);if(this.options.unit==="imperial"){let w=3.2808*y;w>5280?this._setScale(c,w/5280,"mile"):this._setScale(c,w,"foot")}else this.options.unit==="nautical"?this._setScale(c,y/1852,"nautical-mile"):y>=1e3?this._setScale(c,y/1e3,"kilometer"):this._setScale(c,y,"meter")}_setScale(c,i,a){this._map._requestDomTask(()=>{let u=function(f){let y=Math.pow(10,`${Math.floor(f)}`.length-1),w=f/y;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(A){let T=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*T)/T}(w),y*w}(i),h=u/i;this._container.innerHTML=this._isNumberFormatSupported&&a!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:a}).format(u):`${u}&nbsp;${js[a]}`,this._container.style.width=c*h+"px"})}onAdd(c){return this._map=c,this._language=c.getLanguage(),this._container=Qe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",c.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(c){this._language=c,this._update()}setUnit(c){this.options.unit=c,this._update()}},FullscreenControl:class{constructor(c){this._fullscreen=!1,c&&c.container&&(c.container instanceof HTMLElement?this._container=c.container:r.w("Full screen control 'container' must be a DOM element.")),r.aY(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(c){return this._map=c,this._container||(this._container=this._map.getContainer()),this._controlContainer=Qe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){let c=this._fullscreenButton=Qe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Qe("span","mapboxgl-ctrl-icon",c).setAttribute("aria-hidden","true"),c.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){let c=this._getTitle();this._fullscreenButton.setAttribute("aria-label",c),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",c)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends r.E{constructor(c){super(),this.options=r.e(Object.create(ig),c),r.aY(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(c&&c.className?c.className.trim().split(/\s+/):[])}addTo(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&c.on("preclick",this._onClose),this.options.closeOnMove&&c.on("move",this._onClose),c.on("remove",this.remove),this._update(),c._addPopup(this),this._focusFirstElement(),this._trackPointer?(c.on("mousemove",this._onMouseEvent),c.on("mouseup",this._onMouseEvent),c._canvasContainer.classList.add("mapboxgl-track-pointer")):c.on("move",this._update),this.fire(new r.b("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);let c=this._map;return c&&(c.off("move",this._update),c.off("move",this._onClose),c.off("preclick",this._onClose),c.off("click",this._onClose),c.off("remove",this.remove),c.off("mousemove",this._onMouseEvent),c.off("mouseup",this._onMouseEvent),c.off("drag",this._onMouseEvent),c._canvasContainer&&c._canvasContainer.classList.remove("mapboxgl-track-pointer"),c._removePopup(this),this._map=void 0),this.fire(new r.b("close")),this}getLngLat(){return this._lngLat}setLngLat(c){this._lngLat=r.bn.convert(c),this._pos=null,this._trackPointer=!1,this._update();let i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();let c=this._map;return c&&(c.off("move",this._update),c.on("mousemove",this._onMouseEvent),c.on("drag",this._onMouseEvent),c._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(c){return this.setDOMContent(document.createTextNode(c))}setHTML(c){let i=document.createDocumentFragment(),a=document.createElement("body"),u;for(a.innerHTML=c;u=a.firstChild,u;)i.appendChild(u);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(c){return this.options.maxWidth=c,this._update(),this}setDOMContent(c){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=Qe("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(c),this.options.closeButton){let a=this._closeButton=Qe("button","mapboxgl-popup-close-button",i);a.type="button",a.setAttribute("aria-label","Close popup"),a.setAttribute("aria-hidden","true"),a.innerHTML="&#215;",a.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(c){return this._classList.add(c),this._updateClassList(),this}removeClassName(c){return this._classList.delete(c),this._updateClassList(),this}setOffset(c){return this.options.offset=c,this._update(),this}toggleClassName(c){let i;return this._classList.delete(c)?i=!1:(this._classList.add(c),i=!0),this._updateClassList(),i}_onMouseEvent(c){this._update(c.point)}_getAnchor(c){if(this.options.anchor)return this.options.anchor;let i=this._map,a=this._container,u=this._pos;if(!i||!a||!u)return"bottom";let h=a.offsetWidth,f=a.offsetHeight,y=u.x<h/2,w=u.x>i.transform.width-h/2;if(u.y+c<f)return y?"top-left":w?"top-right":"top";if(u.y>i.transform.height-f){if(y)return"bottom-left";if(w)return"bottom-right"}return y?"left":w?"right":"bottom"}_updateClassList(){let c=this._container;if(!c)return;let i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),c.className=i.join(" ")}_update(c){let i=this._map,a=this._content;if(!i||!this._lngLat&&!this._trackPointer||!a)return;let u=this._container;if(u||(u=this._container=Qe("div","mapboxgl-popup",i.getContainer()),this._tip=Qe("div","mapboxgl-popup-tip",u),u.appendChild(a)),this.options.maxWidth&&u.style.maxWidth!==this.options.maxWidth&&(u.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Uu(this._lngLat,this._pos,i.transform)),!this._trackPointer||c){let h=this._pos=this._trackPointer&&c?c:i.project(this._lngLat),f=rg(this.options.offset),y=this._anchor=this._getAnchor(f.y),w=rg(this.options.offset,y),A=h.add(w).round();i._requestDomTask(()=>{this._container&&y&&(this._container.style.transform=`${Nd[y]} translate(${A.x}px,${A.y}px)`)})}if(!this._marker&&i._showingGlobe()){let h=r.d6(i.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let c=this._container.querySelector(og);c&&c.focus()}_onClose(){this.remove()}_setOpacity(c){this._container&&(this._container.style.opacity=`${c}`),this._content&&(this._content.style.pointerEvents=c?"auto":"none")}},Marker:fp,Style:vr,LngLat:r.bn,LngLatBounds:r.ad,Point:r.P,MercatorCoordinate:r.L,FreeCameraOptions:gl,Evented:r.E,config:r.d5,prewarm:r.dp,clearPrewarmedResources:r.dq,get accessToken(){return r.d5.ACCESS_TOKEN},set accessToken(c){r.d5.ACCESS_TOKEN=c},get baseApiUrl(){return r.d5.API_URL},set baseApiUrl(c){r.d5.API_URL=c},get workerCount(){return r.dr.workerCount},set workerCount(c){r.dr.workerCount=c},get maxParallelImageRequests(){return r.d5.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(c){r.d5.MAX_PARALLEL_IMAGE_REQUESTS=c},clearStorage(c){r.ds(c)},get workerUrl(){return r.dt.workerUrl},set workerUrl(c){r.dt.workerUrl=c},get workerClass(){return r.dt.workerClass},set workerClass(c){r.dt.workerClass=c},get workerParams(){return r.dt.workerParams},set workerParams(c){r.dt.workerParams=c},get dracoUrl(){return r.du()},set dracoUrl(c){r.dv(c)},get meshoptUrl(){return r.dw()},set meshoptUrl(c){r.dx(c)},setNow:r.f.setNow,restoreNow:r.f.restoreNow}});var M=P;return M})});var k2=ww((il,fy)=>{"use strict";(function(x,g){typeof il=="object"&&typeof fy<"u"?fy.exports=g():typeof define=="function"&&define.amd?define(g):(x=typeof globalThis<"u"?globalThis:x||self,x.Sweetalert2=g())})(il,function(){"use strict";function x(W,I,B){if(typeof W=="function"?W===I:W.has(I))return arguments.length<3?I:B;throw new TypeError("Private element is not present on this object")}function g(W,I,B){return I=Ui(I),Po(W,r()?Reflect.construct(I,B||[],Ui(W).constructor):I.apply(W,B))}function P(W,I){return W.get(x(W,I))}function v(W,I,B){return W.set(x(W,I),B),B}function M(W,I,B){if(r())return Reflect.construct.apply(null,arguments);var H=[null];H.push.apply(H,I);var ge=new(W.bind.apply(W,H));return B&&Bo(ge,B.prototype),ge}function r(){try{var W=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!W})()}function j(W,I){var B=W==null?null:typeof Symbol<"u"&&W[Symbol.iterator]||W["@@iterator"];if(B!=null){var H,ge,Xe,Ft,Ln=[],Gn=!0,Ei=!1;try{if(Xe=(B=B.call(W)).next,I===0){if(Object(B)!==B)return;Gn=!1}else for(;!(Gn=(H=Xe.call(B)).done)&&(Ln.push(H.value),Ln.length!==I);Gn=!0);}catch(Sa){Ei=!0,ge=Sa}finally{try{if(!Gn&&B.return!=null&&(Ft=B.return(),Object(Ft)!==Ft))return}finally{if(Ei)throw ge}}return Ln}}function ce(W,I){if(typeof W!="object"||!W)return W;var B=W[Symbol.toPrimitive];if(B!==void 0){var H=B.call(W,I||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(W)}function we(W){var I=ce(W,"string");return typeof I=="symbol"?I:I+""}function Oe(W){"@babel/helpers - typeof";return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},Oe(W)}function Qe(W,I){if(!(W instanceof I))throw new TypeError("Cannot call a class as a function")}function zt(W,I){for(var B=0;B<I.length;B++){var H=I[B];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(W,we(H.key),H)}}function jt(W,I,B){return I&&zt(W.prototype,I),B&&zt(W,B),Object.defineProperty(W,"prototype",{writable:!1}),W}function Wn(W,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(I&&I.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),I&&Bo(W,I)}function Ui(W){return Ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},Ui(W)}function Bo(W,I){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,ge){return H.__proto__=ge,H},Bo(W,I)}function lo(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function Po(W,I){if(I&&(typeof I=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lo(W)}function jr(W,I){for(;!Object.prototype.hasOwnProperty.call(W,I)&&(W=Ui(W),W!==null););return W}function dr(){return typeof Reflect<"u"&&Reflect.get?dr=Reflect.get.bind():dr=function(I,B,H){var ge=jr(I,B);if(ge){var Xe=Object.getOwnPropertyDescriptor(ge,B);return Xe.get?Xe.get.call(arguments.length<3?I:H):Xe.value}},dr.apply(this,arguments)}function da(W,I){return La(W)||j(W,I)||mn(W,I)||ft()}function Ur(W){return ut(W)||ol(W)||mn(W)||Nl()}function ut(W){if(Array.isArray(W))return Qi(W)}function La(W){if(Array.isArray(W))return W}function ol(W){if(typeof Symbol<"u"&&W[Symbol.iterator]!=null||W["@@iterator"]!=null)return Array.from(W)}function mn(W,I){if(W){if(typeof W=="string")return Qi(W,I);var B=Object.prototype.toString.call(W).slice(8,-1);if(B==="Object"&&W.constructor&&(B=W.constructor.name),B==="Map"||B==="Set")return Array.from(W);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return Qi(W,I)}}function Qi(W,I){(I==null||I>W.length)&&(I=W.length);for(var B=0,H=new Array(I);B<I;B++)H[B]=W[B];return H}function Nl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hr(W,I){if(I.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Co(W,I,B){hr(W,I),I.set(W,B)}var on=100,On={},ha=function(){On.previousActiveElement instanceof HTMLElement?(On.previousActiveElement.focus(),On.previousActiveElement=null):document.body&&document.body.focus()},pr=function(I){return new Promise(function(B){if(!I)return B();var H=window.scrollX,ge=window.scrollY;On.restoreFocusTimeout=setTimeout(function(){ha(),B()},on),window.scrollTo(H,ge)})},to="swal2-",Na=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],We=Na.reduce(function(W,I){return W[I]=to+I,W},{}),rl=["success","warning","info","question","error"],pa=rl.reduce(function(W,I){return W[I]=to+I,W},{}),gs="SweetAlert2:",Gr=function(I){return I.charAt(0).toUpperCase()+I.slice(1)},Fi=function(I){console.warn("".concat(gs," ").concat(Oe(I)==="object"?I.join(" "):I))},ki=function(I){console.error("".concat(gs," ").concat(I))},Fo=[],Lo=function(I){Fo.includes(I)||(Fo.push(I),Fi(I))},Vl=function(I,B){Lo('"'.concat(I,'" is deprecated and will be removed in the next major release. Please use "').concat(B,'" instead.'))},ci=function(I){return typeof I=="function"?I():I},Oo=function(I){return I&&typeof I.toPromise=="function"},fr=function(I){return Oo(I)?I.toPromise():Promise.resolve(I)},gr=function(I){return I&&Promise.resolve(I)===I},Ri=function(){return document.body.querySelector(".".concat(We.container))},mr=function(I){var B=Ri();return B?B.querySelector(I):null},qn=function(I){return mr(".".concat(I))},Xn=function(){return qn(We.popup)},Or=function(){return qn(We.icon)},qo=function(){return qn(We["icon-content"])},Tr=function(){return qn(We.title)},Sr=function(){return qn(We["html-container"])},Ve=function(){return qn(We.image)},Q=function(){return qn(We["progress-steps"])},oe=function(){return qn(We["validation-message"])},pe=function(){return mr(".".concat(We.actions," .").concat(We.confirm))},ze=function(){return mr(".".concat(We.actions," .").concat(We.cancel))},Le=function(){return mr(".".concat(We.actions," .").concat(We.deny))},Ke=function(){return qn(We["input-label"])},yt=function(){return mr(".".concat(We.loader))},Fe=function(){return qn(We.actions)},wt=function(){return qn(We.footer)},gt=function(){return qn(We["timer-progress-bar"])},At=function(){return qn(We.close)},rn=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Un=function(){var I=Xn();if(!I)return[];var B=I.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),H=Array.from(B).sort(function(Ft,Ln){var Gn=parseInt(Ft.getAttribute("tabindex")||"0"),Ei=parseInt(Ln.getAttribute("tabindex")||"0");return Gn>Ei?1:Gn<Ei?-1:0}),ge=I.querySelectorAll(rn),Xe=Array.from(ge).filter(function(Ft){return Ft.getAttribute("tabindex")!=="-1"});return Ur(new Set(H.concat(Xe))).filter(function(Ft){return tt(Ft)})},ti=function(){return vn(document.body,We.shown)&&!vn(document.body,We["toast-shown"])&&!vn(document.body,We["no-backdrop"])},Vn=function(){var I=Xn();return I?vn(I,We.toast):!1},Bn=function(){var I=Xn();return I?I.hasAttribute("data-loading"):!1},Jt=function(I,B){if(I.textContent="",B){var H=new DOMParser,ge=H.parseFromString(B,"text/html"),Xe=ge.querySelector("head");Xe&&Array.from(Xe.childNodes).forEach(function(Ln){I.appendChild(Ln)});var Ft=ge.querySelector("body");Ft&&Array.from(Ft.childNodes).forEach(function(Ln){Ln instanceof HTMLVideoElement||Ln instanceof HTMLAudioElement?I.appendChild(Ln.cloneNode(!0)):I.appendChild(Ln)})}},vn=function(I,B){if(!B)return!1;for(var H=B.split(/\s+/),ge=0;ge<H.length;ge++)if(!I.classList.contains(H[ge]))return!1;return!0},ni=function(I,B){Array.from(I.classList).forEach(function(H){!Object.values(We).includes(H)&&!Object.values(pa).includes(H)&&!Object.values(B.showClass||{}).includes(H)&&I.classList.remove(H)})},oi=function(I,B,H){if(ni(I,B),B.customClass&&B.customClass[H]){if(typeof B.customClass[H]!="string"&&!B.customClass[H].forEach){Fi("Invalid type of customClass.".concat(H,'! Expected string or iterable object, got "').concat(Oe(B.customClass[H]),'"'));return}bn(I,B.customClass[H])}},Qn=function(I,B){if(!B)return null;switch(B){case"select":case"textarea":case"file":return I.querySelector(".".concat(We.popup," > .").concat(We[B]));case"checkbox":return I.querySelector(".".concat(We.popup," > .").concat(We.checkbox," input"));case"radio":return I.querySelector(".".concat(We.popup," > .").concat(We.radio," input:checked"))||I.querySelector(".".concat(We.popup," > .").concat(We.radio," input:first-child"));case"range":return I.querySelector(".".concat(We.popup," > .").concat(We.range," input"));default:return I.querySelector(".".concat(We.popup," > .").concat(We.input))}},yo=function(I){if(I.focus(),I.type!=="file"){var B=I.value;I.value="",I.value=B}},co=function(I,B,H){!I||!B||(typeof B=="string"&&(B=B.split(/\s+/).filter(Boolean)),B.forEach(function(ge){Array.isArray(I)?I.forEach(function(Xe){H?Xe.classList.add(ge):Xe.classList.remove(ge)}):H?I.classList.add(ge):I.classList.remove(ge)}))},bn=function(I,B){co(I,B,!0)},ri=function(I,B){co(I,B,!1)},ai=function(I,B){for(var H=Array.from(I.children),ge=0;ge<H.length;ge++){var Xe=H[ge];if(Xe instanceof HTMLElement&&vn(Xe,B))return Xe}},Re=function(I,B,H){H==="".concat(parseInt(H))&&(H=parseInt(H)),H||parseInt(H)===0?I.style.setProperty(B,typeof H=="number"?"".concat(H,"px"):H):I.style.removeProperty(B)},De=function(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";I&&(I.style.display=B)},He=function(I){I&&(I.style.display="none")},ot=function(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";I&&new MutationObserver(function(){ct(I,I.innerHTML,B)}).observe(I,{childList:!0,subtree:!0})},et=function(I,B,H,ge){var Xe=I.querySelector(B);Xe&&Xe.style.setProperty(H,ge)},ct=function(I,B){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";B?De(I,H):He(I)},tt=function(I){return!!(I&&(I.offsetWidth||I.offsetHeight||I.getClientRects().length))},rt=function(){return!tt(pe())&&!tt(Le())&&!tt(ze())},pt=function(I){return I.scrollHeight>I.clientHeight},lt=function(I){var B=window.getComputedStyle(I),H=parseFloat(B.getPropertyValue("animation-duration")||"0"),ge=parseFloat(B.getPropertyValue("transition-duration")||"0");return H>0||ge>0},Lt=function(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,H=gt();H&&tt(H)&&(B&&(H.style.transition="none",H.style.width="100%"),setTimeout(function(){H.style.transition="width ".concat(I/1e3,"s linear"),H.style.width="0%"},10))},fn=function(){var I=gt();if(I){var B=parseInt(window.getComputedStyle(I).width);I.style.removeProperty("transition"),I.style.width="100%";var H=parseInt(window.getComputedStyle(I).width),ge=B/H*100;I.style.width="".concat(ge,"%")}},Pt=function(){return typeof window>"u"||typeof document>"u"},Yn=`
 <div aria-labelledby="`.concat(We.title,'" aria-describedby="').concat(We["html-container"],'" class="').concat(We.popup,`" tabindex="-1">
   <button type="button" class="`).concat(We.close,`"></button>
   <ul class="`).concat(We["progress-steps"],`"></ul>
   <div class="`).concat(We.icon,`"></div>
   <img class="`).concat(We.image,`" />
   <h2 class="`).concat(We.title,'" id="').concat(We.title,`"></h2>
   <div class="`).concat(We["html-container"],'" id="').concat(We["html-container"],`"></div>
   <input class="`).concat(We.input,'" id="').concat(We.input,`" />
   <input type="file" class="`).concat(We.file,`" />
   <div class="`).concat(We.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(We.select,'" id="').concat(We.select,`"></select>
   <div class="`).concat(We.radio,`"></div>
   <label class="`).concat(We.checkbox,`">
     <input type="checkbox" id="`).concat(We.checkbox,`" />
     <span class="`).concat(We.label,`"></span>
   </label>
   <textarea class="`).concat(We.textarea,'" id="').concat(We.textarea,`"></textarea>
   <div class="`).concat(We["validation-message"],'" id="').concat(We["validation-message"],`"></div>
   <div class="`).concat(We.actions,`">
     <div class="`).concat(We.loader,`"></div>
     <button type="button" class="`).concat(We.confirm,`"></button>
     <button type="button" class="`).concat(We.deny,`"></button>
     <button type="button" class="`).concat(We.cancel,`"></button>
   </div>
   <div class="`).concat(We.footer,`"></div>
   <div class="`).concat(We["timer-progress-bar-container"],`">
     <div class="`).concat(We["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),ui=function(){var I=Ri();return I?(I.remove(),ri([document.documentElement,document.body],[We["no-backdrop"],We["toast-shown"],We["has-column"]]),!0):!1},Kn=function(){On.currentInstance.resetValidationMessage()},Li=function(){var I=Xn(),B=ai(I,We.input),H=ai(I,We.file),ge=I.querySelector(".".concat(We.range," input")),Xe=I.querySelector(".".concat(We.range," output")),Ft=ai(I,We.select),Ln=I.querySelector(".".concat(We.checkbox," input")),Gn=ai(I,We.textarea);B.oninput=Kn,H.onchange=Kn,Ft.onchange=Kn,Ln.onchange=Kn,Gn.oninput=Kn,ge.oninput=function(){Kn(),Xe.value=ge.value},ge.onchange=function(){Kn(),Xe.value=ge.value}},no=function(I){return typeof I=="string"?document.querySelector(I):I},Sn=function(I){var B=Xn();B.setAttribute("role",I.toast?"alert":"dialog"),B.setAttribute("aria-live",I.toast?"polite":"assertive"),I.toast||B.setAttribute("aria-modal","true")},No=function(I){window.getComputedStyle(I).direction==="rtl"&&bn(Ri(),We.rtl)},_r=function(I){var B=ui();if(Pt()){ki("SweetAlert2 requires document to initialize");return}var H=document.createElement("div");H.className=We.container,B&&bn(H,We["no-transition"]),Jt(H,Yn);var ge=no(I.target);ge.appendChild(H),Sn(I),No(ge),Li()},Zi=function(I,B){I instanceof HTMLElement?B.appendChild(I):Oe(I)==="object"?al(I,B):I&&Jt(B,I)},al=function(I,B){I.jquery?fa(B,I):Jt(B,I.toString())},fa=function(I,B){if(I.textContent="",0 in B)for(var H=0;H in B;H++)I.appendChild(B[H].cloneNode(!0));else I.appendChild(B.cloneNode(!0))},Yo=function(){if(Pt())return!1;var W=document.createElement("div");return typeof W.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof W.style.animation<"u"?"animationend":!1}(),Uc=function(I,B){var H=Fe(),ge=yt();!H||!ge||(!B.showConfirmButton&&!B.showDenyButton&&!B.showCancelButton?He(H):De(H),oi(H,B,"actions"),Va(H,ge,B),Jt(ge,B.loaderHtml||""),oi(ge,B,"loader"))};function Va(W,I,B){var H=pe(),ge=Le(),Xe=ze();!H||!ge||!Xe||(ga(H,"confirm",B),ga(ge,"deny",B),ga(Xe,"cancel",B),Gc(H,ge,Xe,B),B.reverseButtons&&(B.toast?(W.insertBefore(Xe,H),W.insertBefore(ge,H)):(W.insertBefore(Xe,I),W.insertBefore(ge,I),W.insertBefore(H,I))))}function Gc(W,I,B,H){if(!H.buttonsStyling){ri([W,I,B],We.styled);return}bn([W,I,B],We.styled),H.confirmButtonColor&&(W.style.backgroundColor=H.confirmButtonColor,bn(W,We["default-outline"])),H.denyButtonColor&&(I.style.backgroundColor=H.denyButtonColor,bn(I,We["default-outline"])),H.cancelButtonColor&&(B.style.backgroundColor=H.cancelButtonColor,bn(B,We["default-outline"]))}function ga(W,I,B){var H=Gr(I);ct(W,B["show".concat(H,"Button")],"inline-block"),Jt(W,B["".concat(I,"ButtonText")]||""),W.setAttribute("aria-label",B["".concat(I,"ButtonAriaLabel")]||""),W.className=We[I],oi(W,B,"".concat(I,"Button"))}var ld=function(I,B){var H=At();H&&(Jt(H,B.closeButtonHtml||""),oi(H,B,"closeButton"),ct(H,B.showCloseButton),H.setAttribute("aria-label",B.closeButtonAriaLabel||""))},jl=function(I,B){var H=Ri();H&&(Hc(H,B.backdrop),Ul(H,B.position),$c(H,B.grow),oi(H,B,"container"))};function Hc(W,I){typeof I=="string"?W.style.background=I:I||bn([document.documentElement,document.body],We["no-backdrop"])}function Ul(W,I){I&&(I in We?bn(W,We[I]):(Fi('The "position" parameter is not valid, defaulting to "center"'),bn(W,We.center)))}function $c(W,I){I&&bn(W,We["grow-".concat(I)])}var jn={innerParams:new WeakMap,domCache:new WeakMap},zi=["input","file","range","select","radio","checkbox","textarea"],gn=function(I,B){var H=Xn();if(H){var ge=jn.innerParams.get(I),Xe=!ge||B.input!==ge.input;zi.forEach(function(Ft){var Ln=ai(H,We[Ft]);Ln&&(Wc(Ft,B.inputAttributes),Ln.className=We[Ft],Xe&&He(Ln))}),B.input&&(Xe&&cd(B),kh(B))}},cd=function(I){if(I.input){if(!nt[I.input]){ki("Unexpected type of input! Expected ".concat(Object.keys(nt).join(" | "),', got "').concat(I.input,'"'));return}var B=ud(I.input),H=nt[I.input](B,I);De(B),I.inputAutoFocus&&setTimeout(function(){yo(H)})}},Gl=function(I){for(var B=0;B<I.attributes.length;B++){var H=I.attributes[B].name;["id","type","value","style"].includes(H)||I.removeAttribute(H)}},Wc=function(I,B){var H=Qn(Xn(),I);if(H){Gl(H);for(var ge in B)H.setAttribute(ge,B[ge])}},kh=function(I){var B=ud(I.input);Oe(I.customClass)==="object"&&bn(B,I.customClass.input)},Xo=function(I,B){(!I.placeholder||B.inputPlaceholder)&&(I.placeholder=B.inputPlaceholder)},ja=function(I,B,H){if(H.inputLabel){var ge=document.createElement("label"),Xe=We["input-label"];ge.setAttribute("for",I.id),ge.className=Xe,Oe(H.customClass)==="object"&&bn(ge,H.customClass.inputLabel),ge.innerText=H.inputLabel,B.insertAdjacentElement("beforebegin",ge)}},ud=function(I){return ai(Xn(),We[I]||We.input)},Hr=function(I,B){["string","number"].includes(Oe(B))?I.value="".concat(B):gr(B)||Fi('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Oe(B),'"'))},nt={};nt.text=nt.email=nt.password=nt.number=nt.tel=nt.url=nt.search=nt.date=nt["datetime-local"]=nt.time=nt.week=nt.month=function(W,I){return Hr(W,I.inputValue),ja(W,W,I),Xo(W,I),W.type=I.input,W},nt.file=function(W,I){return ja(W,W,I),Xo(W,I),W},nt.range=function(W,I){var B=W.querySelector("input"),H=W.querySelector("output");return Hr(B,I.inputValue),B.type=I.input,Hr(H,I.inputValue),ja(B,W,I),W},nt.select=function(W,I){if(W.textContent="",I.inputPlaceholder){var B=document.createElement("option");Jt(B,I.inputPlaceholder),B.value="",B.disabled=!0,B.selected=!0,W.appendChild(B)}return ja(W,W,I),W},nt.radio=function(W){return W.textContent="",W},nt.checkbox=function(W,I){var B=Qn(Xn(),"checkbox");B.value="1",B.checked=!!I.inputValue;var H=W.querySelector("span");return Jt(H,I.inputPlaceholder),B},nt.textarea=function(W,I){Hr(W,I.inputValue),Xo(W,I),ja(W,W,I);var B=function(ge){return parseInt(window.getComputedStyle(ge).marginLeft)+parseInt(window.getComputedStyle(ge).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var H=parseInt(window.getComputedStyle(Xn()).width),ge=function(){if(document.body.contains(W)){var Ft=W.offsetWidth+B(W);Ft>H?Xn().style.width="".concat(Ft,"px"):Re(Xn(),"width",I.width)}};new MutationObserver(ge).observe(W,{attributes:!0,attributeFilter:["style"]})}}),W};var kn=function(I,B){var H=Sr();H&&(ot(H),oi(H,B,"htmlContainer"),B.html?(Zi(B.html,H),De(H,"block")):B.text?(H.textContent=B.text,De(H,"block")):He(H),gn(I,B))},Rn=function(I,B){var H=wt();H&&(ot(H),ct(H,B.footer,"block"),B.footer&&Zi(B.footer,H),oi(H,B,"footer"))},Qo=function(I,B){var H=jn.innerParams.get(I),ge=Or();if(ge){if(H&&B.icon===H.icon){_s(ge,B),Ua(ge,B);return}if(!B.icon&&!B.iconHtml){He(ge);return}if(B.icon&&Object.keys(pa).indexOf(B.icon)===-1){ki('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(B.icon,'"')),He(ge);return}De(ge),_s(ge,B),Ua(ge,B),bn(ge,B.showClass&&B.showClass.icon)}},Ua=function(I,B){for(var H=0,ge=Object.entries(pa);H<ge.length;H++){var Xe=da(ge[H],2),Ft=Xe[0],Ln=Xe[1];B.icon!==Ft&&ri(I,Ln)}bn(I,B.icon&&pa[B.icon]),To(I,B),wn(),oi(I,B,"icon")},wn=function(){var I=Xn();if(I)for(var B=window.getComputedStyle(I).getPropertyValue("background-color"),H=I.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),ge=0;ge<H.length;ge++)H[ge].style.backgroundColor=B},Hl=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,ms=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,_s=function(I,B){if(!(!B.icon&&!B.iconHtml)){var H=I.innerHTML,ge="";if(B.iconHtml)ge=Oi(B.iconHtml);else if(B.icon==="success")ge=Hl,H=H.replace(/ style=".*?"/g,"");else if(B.icon==="error")ge=ms;else if(B.icon){var Xe={question:"?",warning:"!",info:"i"};ge=Oi(Xe[B.icon])}H.trim()!==ge.trim()&&Jt(I,ge)}},To=function(I,B){if(B.iconColor){I.style.color=B.iconColor,I.style.borderColor=B.iconColor;for(var H=0,ge=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];H<ge.length;H++){var Xe=ge[H];et(I,Xe,"background-color",B.iconColor)}et(I,".swal2-success-ring","border-color",B.iconColor)}},Oi=function(I){return'<div class="'.concat(We["icon-content"],'">').concat(I,"</div>")},kt=function(I,B){var H=Ve();if(H){if(!B.imageUrl){He(H);return}De(H,""),H.setAttribute("src",B.imageUrl),H.setAttribute("alt",B.imageAlt||""),Re(H,"width",B.imageWidth),Re(H,"height",B.imageHeight),H.className=We.image,oi(H,B,"image")}},Ga=function(I,B){var H=Ri(),ge=Xn();if(!(!H||!ge)){if(B.toast){Re(H,"width",B.width),ge.style.width="100%";var Xe=yt();Xe&&ge.insertBefore(Xe,Or())}else Re(ge,"width",B.width);Re(ge,"padding",B.padding),B.color&&(ge.style.color=B.color),B.background&&(ge.style.background=B.background),He(oe()),Ut(ge,B)}},Ut=function(I,B){var H=B.showClass||{};I.className="".concat(We.popup," ").concat(tt(I)?H.popup:""),B.toast?(bn([document.documentElement,document.body],We["toast-shown"]),bn(I,We.toast)):bn(I,We.modal),oi(I,B,"popup"),typeof B.customClass=="string"&&bn(I,B.customClass),B.icon&&bn(I,We["icon-".concat(B.icon)])},ma=function(I,B){var H=Q();if(H){var ge=B.progressSteps,Xe=B.currentProgressStep;if(!ge||ge.length===0||Xe===void 0){He(H);return}De(H),H.textContent="",Xe>=ge.length&&Fi("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),ge.forEach(function(Ft,Ln){var Gn=an(Ft);if(H.appendChild(Gn),Ln===Xe&&bn(Gn,We["active-progress-step"]),Ln!==ge.length-1){var Ei=ys(B);H.appendChild(Ei)}})}},an=function(I){var B=document.createElement("li");return bn(B,We["progress-step"]),Jt(B,I),B},ys=function(I){var B=document.createElement("li");return bn(B,We["progress-step-line"]),I.progressStepsDistance&&Re(B,"width",I.progressStepsDistance),B},io=function(I,B){var H=Tr();H&&(ot(H),ct(H,B.title||B.titleText,"block"),B.title&&Zi(B.title,H),B.titleText&&(H.innerText=B.titleText),oi(H,B,"title"))},Dt=function(I,B){Ga(I,B),jl(I,B),ma(I,B),Qo(I,B),kt(I,B),io(I,B),ld(I,B),kn(I,B),Uc(I,B),Rn(I,B);var H=Xn();typeof B.didRender=="function"&&H&&B.didRender(H)},dd=function(){return tt(Xn())},_a=function(){var I;return(I=pe())===null||I===void 0?void 0:I.click()},Ni=function(){var I;return(I=Le())===null||I===void 0?void 0:I.click()},Ko=function(){var I;return(I=ze())===null||I===void 0?void 0:I.click()},Vo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Er=function(I){I.keydownTarget&&I.keydownHandlerAdded&&(I.keydownTarget.removeEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!1)},Vi=function(I,B,H){Er(I),B.toast||(I.keydownHandler=function(ge){return xs(B,ge,H)},I.keydownTarget=B.keydownListenerCapture?window:Xn(),I.keydownListenerCapture=B.keydownListenerCapture,I.keydownTarget.addEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!0)},sl=function(I,B){var H,ge=Un();if(ge.length){I=I+B,I===ge.length?I=0:I===-1&&(I=ge.length-1),ge[I].focus();return}(H=Xn())===null||H===void 0||H.focus()},$l=["ArrowRight","ArrowDown"],$r=["ArrowLeft","ArrowUp"],xs=function(I,B,H){I&&(B.isComposing||B.keyCode===229||(I.stopKeydownPropagation&&B.stopPropagation(),B.key==="Enter"?Ha(B,I):B.key==="Tab"?vs(B):[].concat($l,$r).includes(B.key)?yr(B.key):B.key==="Escape"&&Wl(B,I,H)))},Ha=function(I,B){if(ci(B.allowEnterKey)){var H=Qn(Xn(),B.input);if(I.target&&H&&I.target instanceof HTMLElement&&I.target.outerHTML===H.outerHTML){if(["textarea","file"].includes(B.input))return;_a(),I.preventDefault()}}},vs=function(I){for(var B=I.target,H=Un(),ge=-1,Xe=0;Xe<H.length;Xe++)if(B===H[Xe]){ge=Xe;break}I.shiftKey?sl(ge,-1):sl(ge,1),I.stopPropagation(),I.preventDefault()},yr=function(I){var B=Fe(),H=pe(),ge=Le(),Xe=ze();if(!(!B||!H||!ge||!Xe)){var Ft=[H,ge,Xe];if(!(document.activeElement instanceof HTMLElement&&!Ft.includes(document.activeElement))){var Ln=$l.includes(I)?"nextElementSibling":"previousElementSibling",Gn=document.activeElement;if(Gn){for(var Ei=0;Ei<B.children.length;Ei++){if(Gn=Gn[Ln],!Gn)return;if(Gn instanceof HTMLButtonElement&&tt(Gn))break}Gn instanceof HTMLButtonElement&&Gn.focus()}}}},Wl=function(I,B,H){ci(B.allowEscapeKey)&&(I.preventDefault(),H(Vo.esc))},So={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},ll=function(){var I=Ri(),B=Array.from(document.body.children);B.forEach(function(H){H.contains(I)||(H.hasAttribute("aria-hidden")&&H.setAttribute("data-previous-aria-hidden",H.getAttribute("aria-hidden")||""),H.setAttribute("aria-hidden","true"))})},Zc=function(){var I=Array.from(document.body.children);I.forEach(function(B){B.hasAttribute("data-previous-aria-hidden")?(B.setAttribute("aria-hidden",B.getAttribute("data-previous-aria-hidden")||""),B.removeAttribute("data-previous-aria-hidden")):B.removeAttribute("aria-hidden")})},ya=typeof window<"u"&&!!window.GestureEvent,hd=function(){if(ya&&!vn(document.body,We.iosfix)){var I=document.body.scrollTop;document.body.style.top="".concat(I*-1,"px"),bn(document.body,We.iosfix),_n()}},_n=function(){var I=Ri();if(I){var B;I.ontouchstart=function(H){B=cl(H)},I.ontouchmove=function(H){B&&(H.preventDefault(),H.stopPropagation())}}},cl=function(I){var B=I.target,H=Ri(),ge=Sr();return!H||!ge||qc(I)||Rh(I)?!1:B===H||!pt(H)&&B instanceof HTMLElement&&B.tagName!=="INPUT"&&B.tagName!=="TEXTAREA"&&!(pt(ge)&&ge.contains(B))},qc=function(I){return I.touches&&I.touches.length&&I.touches[0].touchType==="stylus"},Rh=function(I){return I.touches&&I.touches.length>1},zh=function(){if(vn(document.body,We.iosfix)){var I=parseInt(document.body.style.top,10);ri(document.body,We.iosfix),document.body.style.top="",document.body.scrollTop=I*-1}},xa=function(){var I=document.createElement("div");I.className=We["scrollbar-measure"],document.body.appendChild(I);var B=I.getBoundingClientRect().width-I.clientWidth;return document.body.removeChild(I),B},jo=null,Zl=function(I){jo===null&&(document.body.scrollHeight>window.innerHeight||I==="scroll")&&(jo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(jo+xa(),"px"))},bs=function(){jo!==null&&(document.body.style.paddingRight="".concat(jo,"px"),jo=null)};function ql(W,I,B,H){Vn()?Xl(W,H):(pr(B).then(function(){return Xl(W,H)}),Er(On)),ya?(I.setAttribute("style","display:none !important"),I.removeAttribute("class"),I.innerHTML=""):I.remove(),ti()&&(bs(),zh(),Zc()),Wr()}function Wr(){ri([document.documentElement,document.body],[We.shown,We["height-auto"],We["no-backdrop"],We["toast-shown"]])}function Mo(W){W=Jo(W);var I=So.swalPromiseResolve.get(this),B=ul(this);this.isAwaitingPromise?W.isDismissed||($a(this),I(W)):B&&I(W)}var ul=function(I){var B=Xn();if(!B)return!1;var H=jn.innerParams.get(I);if(!H||vn(B,H.hideClass.popup))return!1;ri(B,H.showClass.popup),bn(B,H.hideClass.popup);var ge=Ri();return ri(ge,H.showClass.backdrop),bn(ge,H.hideClass.backdrop),pd(I,B,H),!0};function Yl(W){var I=So.swalPromiseReject.get(this);$a(this),I&&I(W)}var $a=function(I){I.isAwaitingPromise&&(delete I.isAwaitingPromise,jn.innerParams.get(I)||I._destroy())},Jo=function(I){return typeof I>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},I)},pd=function(I,B,H){var ge=Ri(),Xe=Yo&&lt(B);typeof H.willClose=="function"&&H.willClose(B),Xe?Yc(I,B,ge,H.returnFocus,H.didClose):ql(I,ge,H.returnFocus,H.didClose)},Yc=function(I,B,H,ge,Xe){Yo&&(On.swalCloseEventFinishedCallback=ql.bind(null,I,H,ge,Xe),B.addEventListener(Yo,function(Ft){Ft.target===B&&(On.swalCloseEventFinishedCallback(),delete On.swalCloseEventFinishedCallback)}))},Xl=function(I,B){setTimeout(function(){typeof B=="function"&&B.bind(I.params)(),I._destroy&&I._destroy()})},va=function(I){var B=Xn();if(B||new ks,B=Xn(),!!B){var H=yt();Vn()?He(Or()):Xc(B,I),De(H),B.setAttribute("data-loading","true"),B.setAttribute("aria-busy","true"),B.focus()}},Xc=function(I,B){var H=Fe(),ge=yt();!H||!ge||(!B&&tt(pe())&&(B=pe()),De(H),B&&(He(B),ge.setAttribute("data-button-to-replace",B.className),H.insertBefore(ge,B)),bn([I,H],We.loading))},Qc=function(I,B){B.input==="select"||B.input==="radio"?Kc(I,B):["text","email","number","tel","textarea"].some(function(H){return H===B.input})&&(Oo(B.inputValue)||gr(B.inputValue))&&(va(pe()),er(I,B))},ws=function(I,B){var H=I.getInput();if(!H)return null;switch(B.input){case"checkbox":return Ql(H);case"radio":return dl(H);case"file":return ba(H);default:return B.inputAutoTrim?H.value.trim():H.value}},Ql=function(I){return I.checked?1:0},dl=function(I){return I.checked?I.value:null},ba=function(I){return I.files&&I.files.length?I.getAttribute("multiple")!==null?I.files:I.files[0]:null},Kc=function(I,B){var H=Xn();if(H){var ge=function(Ft){B.input==="select"?ht(H,Jl(Ft),B):B.input==="radio"&&Kl(H,Jl(Ft),B)};Oo(B.inputOptions)||gr(B.inputOptions)?(va(pe()),fr(B.inputOptions).then(function(Xe){I.hideLoading(),ge(Xe)})):Oe(B.inputOptions)==="object"?ge(B.inputOptions):ki("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Oe(B.inputOptions)))}},er=function(I,B){var H=I.getInput();H&&(He(H),fr(B.inputValue).then(function(ge){H.value=B.input==="number"?"".concat(parseFloat(ge)||0):"".concat(ge),De(H),H.focus(),I.hideLoading()}).catch(function(ge){ki("Error in inputValue promise: ".concat(ge)),H.value="",De(H),H.focus(),I.hideLoading()}))};function ht(W,I,B){var H=ai(W,We.select);if(H){var ge=function(Ft,Ln,Gn){var Ei=document.createElement("option");Ei.value=Gn,Jt(Ei,Ln),Ei.selected=Cs(Gn,B.inputValue),Ft.appendChild(Ei)};I.forEach(function(Xe){var Ft=Xe[0],Ln=Xe[1];if(Array.isArray(Ln)){var Gn=document.createElement("optgroup");Gn.label=Ft,Gn.disabled=!1,H.appendChild(Gn),Ln.forEach(function(Ei){return ge(Gn,Ei[1],Ei[0])})}else ge(H,Ln,Ft)}),H.focus()}}function Kl(W,I,B){var H=ai(W,We.radio);if(H){I.forEach(function(Xe){var Ft=Xe[0],Ln=Xe[1],Gn=document.createElement("input"),Ei=document.createElement("label");Gn.type="radio",Gn.name=We.radio,Gn.value=Ft,Cs(Ft,B.inputValue)&&(Gn.checked=!0);var Sa=document.createElement("span");Jt(Sa,Ln),Sa.className=We.label,Ei.appendChild(Gn),Ei.appendChild(Sa),H.appendChild(Ei)});var ge=H.querySelectorAll("input");ge.length&&ge[0].focus()}}var Jl=function W(I){var B=[];return I instanceof Map?I.forEach(function(H,ge){var Xe=H;Oe(Xe)==="object"&&(Xe=W(Xe)),B.push([ge,Xe])}):Object.keys(I).forEach(function(H){var ge=I[H];Oe(ge)==="object"&&(ge=W(ge)),B.push([H,ge])}),B},Cs=function(I,B){return!!B&&B.toString()===I.toString()},Ms=void 0,wa=function(I){var B=jn.innerParams.get(I);I.disableButtons(),B.input?Ca(I,"confirm"):Ma(I,!0)},xr=function(I){var B=jn.innerParams.get(I);I.disableButtons(),B.returnInputValueOnDeny?Ca(I,"deny"):Zr(I,!1)},Jc=function(I,B){I.disableButtons(),B(Vo.cancel)},Ca=function(I,B){var H=jn.innerParams.get(I);if(!H.input){ki('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Gr(B)));return}var ge=I.getInput(),Xe=ws(I,H);H.inputValidator?ec(I,Xe,B):ge&&!ge.checkValidity()?(I.enableButtons(),I.showValidationMessage(H.validationMessage||ge.validationMessage)):B==="deny"?Zr(I,Xe):Ma(I,Xe)},ec=function(I,B,H){var ge=jn.innerParams.get(I);I.disableInput();var Xe=Promise.resolve().then(function(){return fr(ge.inputValidator(B,ge.validationMessage))});Xe.then(function(Ft){I.enableButtons(),I.enableInput(),Ft?I.showValidationMessage(Ft):H==="deny"?Zr(I,B):Ma(I,B)})},Zr=function(I,B){var H=jn.innerParams.get(I||Ms);if(H.showLoaderOnDeny&&va(Le()),H.preDeny){I.isAwaitingPromise=!0;var ge=Promise.resolve().then(function(){return fr(H.preDeny(B,H.validationMessage))});ge.then(function(Xe){Xe===!1?(I.hideLoading(),$a(I)):I.close({isDenied:!0,value:typeof Xe>"u"?B:Xe})}).catch(function(Xe){return fd(I||Ms,Xe)})}else I.close({isDenied:!0,value:B})},tc=function(I,B){I.close({isConfirmed:!0,value:B})},fd=function(I,B){I.rejectPromise(B)},Ma=function(I,B){var H=jn.innerParams.get(I||Ms);if(H.showLoaderOnConfirm&&va(),H.preConfirm){I.resetValidationMessage(),I.isAwaitingPromise=!0;var ge=Promise.resolve().then(function(){return fr(H.preConfirm(B,H.validationMessage))});ge.then(function(Xe){tt(oe())||Xe===!1?(I.hideLoading(),$a(I)):tc(I,typeof Xe>"u"?B:Xe)}).catch(function(Xe){return fd(I||Ms,Xe)})}else tc(I,B)};function nc(){var W=jn.innerParams.get(this);if(W){var I=jn.domCache.get(this);He(I.loader),Vn()?W.icon&&De(Or()):gd(I),ri([I.popup,I.actions],We.loading),I.popup.removeAttribute("aria-busy"),I.popup.removeAttribute("data-loading"),I.confirmButton.disabled=!1,I.denyButton.disabled=!1,I.cancelButton.disabled=!1}}var gd=function(I){var B=I.popup.getElementsByClassName(I.loader.getAttribute("data-button-to-replace"));B.length?De(B[0],"inline-block"):rt()&&He(I.actions)};function eu(){var W=jn.innerParams.get(this),I=jn.domCache.get(this);return I?Qn(I.popup,W.input):null}function ic(W,I,B){var H=jn.domCache.get(W);I.forEach(function(ge){H[ge].disabled=B})}function md(W,I){var B=Xn();if(!(!B||!W))if(W.type==="radio")for(var H=B.querySelectorAll('[name="'.concat(We.radio,'"]')),ge=0;ge<H.length;ge++)H[ge].disabled=I;else W.disabled=I}function _d(){ic(this,["confirmButton","denyButton","cancelButton"],!1)}function yd(){ic(this,["confirmButton","denyButton","cancelButton"],!0)}function tu(){md(this.getInput(),!1)}function As(){md(this.getInput(),!0)}function xd(W){var I=jn.domCache.get(this),B=jn.innerParams.get(this);Jt(I.validationMessage,W),I.validationMessage.className=We["validation-message"],B.customClass&&B.customClass.validationMessage&&bn(I.validationMessage,B.customClass.validationMessage),De(I.validationMessage);var H=this.getInput();H&&(H.setAttribute("aria-invalid","true"),H.setAttribute("aria-describedby",We["validation-message"]),yo(H),bn(H,We.inputerror))}function hl(){var W=jn.domCache.get(this);W.validationMessage&&He(W.validationMessage);var I=this.getInput();I&&(I.removeAttribute("aria-invalid"),I.removeAttribute("aria-describedby"),ri(I,We.inputerror))}var Aa={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},vd=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],nu={},oc=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],rc=function(I){return Object.prototype.hasOwnProperty.call(Aa,I)},Pa=function(I){return vd.indexOf(I)!==-1},pl=function(I){return nu[I]},fl=function(I){rc(I)||Fi('Unknown parameter "'.concat(I,'"'))},iu=function(I){oc.includes(I)&&Fi('The parameter "'.concat(I,'" is incompatible with toasts'))},gl=function(I){var B=pl(I);B&&Vl(I,B)},Ps=function(I){I.backdrop===!1&&I.allowOutsideClick&&Fi('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var B in I)fl(B),I.toast&&iu(B),gl(B)};function Wa(W){var I=Xn(),B=jn.innerParams.get(this);if(!I||vn(I,B.hideClass.popup)){Fi("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var H=ml(W),ge=Object.assign({},B,H);Dt(this,ge),jn.innerParams.set(this,ge),Object.defineProperties(this,{params:{value:Object.assign({},this.params,W),writable:!1,enumerable:!0}})}var ml=function(I){var B={};return Object.keys(I).forEach(function(H){Pa(H)?B[H]=I[H]:Fi("Invalid parameter to update: ".concat(H))}),B};function Os(){var W=jn.domCache.get(this),I=jn.innerParams.get(this);if(!I){qr(this);return}W.popup&&On.swalCloseEventFinishedCallback&&(On.swalCloseEventFinishedCallback(),delete On.swalCloseEventFinishedCallback),typeof I.didDestroy=="function"&&I.didDestroy(),oo(this)}var oo=function(I){qr(I),delete I.params,delete On.keydownHandler,delete On.keydownTarget,delete On.currentInstance},qr=function(I){I.isAwaitingPromise?(uo(jn,I),I.isAwaitingPromise=!0):(uo(So,I),uo(jn,I),delete I.isAwaitingPromise,delete I.disableButtons,delete I.enableButtons,delete I.getInput,delete I.disableInput,delete I.enableInput,delete I.hideLoading,delete I.disableLoading,delete I.showValidationMessage,delete I.resetValidationMessage,delete I.close,delete I.closePopup,delete I.closeModal,delete I.closeToast,delete I.rejectPromise,delete I.update,delete I._destroy)},uo=function(I,B){for(var H in I)I[H].delete(B)},ou=Object.freeze({__proto__:null,_destroy:Os,close:Mo,closeModal:Mo,closePopup:Mo,closeToast:Mo,disableButtons:yd,disableInput:As,disableLoading:nc,enableButtons:_d,enableInput:tu,getInput:eu,handleAwaitingPromise:$a,hideLoading:nc,rejectPromise:Yl,resetValidationMessage:hl,showValidationMessage:xd,update:Wa}),bd=function(I,B,H){I.toast?ru(I,B,H):(_l(B),wd(B),Oa(I,B,H))},ru=function(I,B,H){B.popup.onclick=function(){I&&(Za(I)||I.timer||I.input)||H(Vo.close)}},Za=function(I){return!!(I.showConfirmButton||I.showDenyButton||I.showCancelButton||I.showCloseButton)},qa=!1,_l=function(I){I.popup.onmousedown=function(){I.container.onmouseup=function(B){I.container.onmouseup=function(){},B.target===I.container&&(qa=!0)}}},wd=function(I){I.container.onmousedown=function(B){B.target===I.container&&B.preventDefault(),I.popup.onmouseup=function(H){I.popup.onmouseup=function(){},(H.target===I.popup||H.target instanceof HTMLElement&&I.popup.contains(H.target))&&(qa=!0)}}},Oa=function(I,B,H){B.container.onclick=function(ge){if(qa){qa=!1;return}ge.target===B.container&&ci(I.allowOutsideClick)&&H(Vo.backdrop)}},Cd=function(I){return Oe(I)==="object"&&I.jquery},Ya=function(I){return I instanceof Element||Cd(I)},au=function(I){var B={};return Oe(I[0])==="object"&&!Ya(I[0])?Object.assign(B,I[0]):["title","html","icon"].forEach(function(H,ge){var Xe=I[ge];typeof Xe=="string"||Ya(Xe)?B[H]=Xe:Xe!==void 0&&ki("Unexpected type of ".concat(H,'! Expected "string" or "Element", got ').concat(Oe(Xe)))}),B};function Md(){for(var W=this,I=arguments.length,B=new Array(I),H=0;H<I;H++)B[H]=arguments[H];return M(W,B)}function Bh(W){var I=function(B){function H(){return Qe(this,H),g(this,H,arguments)}return Wn(H,B),jt(H,[{key:"_main",value:function(Xe,Ft){return dr(Ui(H.prototype),"_main",this).call(this,Xe,Object.assign({},W,Ft))}}])}(this);return I}var vr=function(){return On.timeout&&On.timeout.getTimerLeft()},yl=function(){if(On.timeout)return fn(),On.timeout.stop()},xl=function(){if(On.timeout){var I=On.timeout.start();return Lt(I),I}},ac=function(){var I=On.timeout;return I&&(I.running?yl():xl())},sc=function(I){if(On.timeout){var B=On.timeout.increase(I);return Lt(B,!0),B}},su=function(){return!!(On.timeout&&On.timeout.isRunning())},lc=!1,cc={};function Ts(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";cc[W]=this,lc||(document.body.addEventListener("click",Ss),lc=!0)}var Ss=function(I){for(var B=I.target;B&&B!==document;B=B.parentNode)for(var H in cc){var ge=B.getAttribute(H);if(ge){cc[H].fire({template:ge});return}}},lu=Object.freeze({__proto__:null,argsToParams:au,bindClickHandler:Ts,clickCancel:Ko,clickConfirm:_a,clickDeny:Ni,enableLoading:va,fire:Md,getActions:Fe,getCancelButton:ze,getCloseButton:At,getConfirmButton:pe,getContainer:Ri,getDenyButton:Le,getFocusableElements:Un,getFooter:wt,getHtmlContainer:Sr,getIcon:Or,getIconContent:qo,getImage:Ve,getInputLabel:Ke,getLoader:yt,getPopup:Xn,getProgressSteps:Q,getTimerLeft:vr,getTimerProgressBar:gt,getTitle:Tr,getValidationMessage:oe,increaseTimer:sc,isDeprecatedParameter:pl,isLoading:Bn,isTimerRunning:su,isUpdatableParameter:Pa,isValidParameter:rc,isVisible:dd,mixin:Bh,resumeTimer:xl,showLoading:va,stopTimer:yl,toggleTimer:ac}),vl=function(){function W(I,B){Qe(this,W),this.callback=I,this.remaining=B,this.running=!1,this.start()}return jt(W,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(B){var H=this.running;return H&&this.stop(),this.remaining+=B,H&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),Xa=["swal-title","swal-html","swal-footer"],Uo=function(I){var B=typeof I.template=="string"?document.querySelector(I.template):I.template;if(!B)return{};var H=B.content;Fh(H);var ge=Object.assign(Es(H),cu(H),uc(H),uu(H),Ta(H),Cn(H),du(H,Xa));return ge},Es=function(I){var B={},H=Array.from(I.querySelectorAll("swal-param"));return H.forEach(function(ge){Ir(ge,["name","value"]);var Xe=ge.getAttribute("name"),Ft=ge.getAttribute("value");typeof Aa[Xe]=="boolean"?B[Xe]=Ft!=="false":Oe(Aa[Xe])==="object"?B[Xe]=JSON.parse(Ft):B[Xe]=Ft}),B},cu=function(I){var B={},H=Array.from(I.querySelectorAll("swal-function-param"));return H.forEach(function(ge){var Xe=ge.getAttribute("name"),Ft=ge.getAttribute("value");B[Xe]=new Function("return ".concat(Ft))()}),B},uc=function(I){var B={},H=Array.from(I.querySelectorAll("swal-button"));return H.forEach(function(ge){Ir(ge,["type","color","aria-label"]);var Xe=ge.getAttribute("type");B["".concat(Xe,"ButtonText")]=ge.innerHTML,B["show".concat(Gr(Xe),"Button")]=!0,ge.hasAttribute("color")&&(B["".concat(Xe,"ButtonColor")]=ge.getAttribute("color")),ge.hasAttribute("aria-label")&&(B["".concat(Xe,"ButtonAriaLabel")]=ge.getAttribute("aria-label"))}),B},uu=function(I){var B={},H=I.querySelector("swal-image");return H&&(Ir(H,["src","width","height","alt"]),H.hasAttribute("src")&&(B.imageUrl=H.getAttribute("src")),H.hasAttribute("width")&&(B.imageWidth=H.getAttribute("width")),H.hasAttribute("height")&&(B.imageHeight=H.getAttribute("height")),H.hasAttribute("alt")&&(B.imageAlt=H.getAttribute("alt"))),B},Ta=function(I){var B={},H=I.querySelector("swal-icon");return H&&(Ir(H,["type","color"]),H.hasAttribute("type")&&(B.icon=H.getAttribute("type")),H.hasAttribute("color")&&(B.iconColor=H.getAttribute("color")),B.iconHtml=H.innerHTML),B},Cn=function(I){var B={},H=I.querySelector("swal-input");H&&(Ir(H,["type","label","placeholder","value"]),B.input=H.getAttribute("type")||"text",H.hasAttribute("label")&&(B.inputLabel=H.getAttribute("label")),H.hasAttribute("placeholder")&&(B.inputPlaceholder=H.getAttribute("placeholder")),H.hasAttribute("value")&&(B.inputValue=H.getAttribute("value")));var ge=Array.from(I.querySelectorAll("swal-input-option"));return ge.length&&(B.inputOptions={},ge.forEach(function(Xe){Ir(Xe,["value"]);var Ft=Xe.getAttribute("value"),Ln=Xe.innerHTML;B.inputOptions[Ft]=Ln})),B},du=function(I,B){var H={};for(var ge in B){var Xe=B[ge],Ft=I.querySelector(Xe);Ft&&(Ir(Ft,[]),H[Xe.replace(/^swal-/,"")]=Ft.innerHTML.trim())}return H},Fh=function(I){var B=Xa.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(I.children).forEach(function(H){var ge=H.tagName.toLowerCase();B.includes(ge)||Fi("Unrecognized element <".concat(ge,">"))})},Ir=function(I,B){Array.from(I.attributes).forEach(function(H){B.indexOf(H.name)===-1&&Fi(['Unrecognized attribute "'.concat(H.name,'" on <').concat(I.tagName.toLowerCase(),">."),"".concat(B.length?"Allowed attributes are: ".concat(B.join(", ")):"To set the value, use HTML within the element.")])})},hu=10,pu=function(I){var B=Ri(),H=Xn();typeof I.willOpen=="function"&&I.willOpen(H);var ge=window.getComputedStyle(document.body),Xe=ge.overflowY;bl(B,H,I),setTimeout(function(){dc(B,H)},hu),ti()&&(Pd(B,I.scrollbarPadding,Xe),ll()),!Vn()&&!On.previousActiveElement&&(On.previousActiveElement=document.activeElement),typeof I.didOpen=="function"&&setTimeout(function(){return I.didOpen(H)}),ri(B,We["no-transition"])},Ad=function W(I){var B=Xn();if(!(I.target!==B||!Yo)){var H=Ri();B.removeEventListener(Yo,W),H.style.overflowY="auto"}},dc=function(I,B){Yo&&lt(B)?(I.style.overflowY="hidden",B.addEventListener(Yo,Ad)):I.style.overflowY="auto"},Pd=function(I,B,H){hd(),B&&H!=="hidden"&&Zl(H),setTimeout(function(){I.scrollTop=0})},bl=function(I,B,H){bn(I,H.showClass.backdrop),H.animation?(B.style.setProperty("opacity","0","important"),De(B,"grid"),setTimeout(function(){bn(B,H.showClass.popup),B.style.removeProperty("opacity")},hu)):De(B,"grid"),bn([document.documentElement,document.body],We.shown),H.heightAuto&&H.backdrop&&!H.toast&&bn([document.documentElement,document.body],We["height-auto"])},Qa={email:function(I,B){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(I)?Promise.resolve():Promise.resolve(B||"Invalid email address")},url:function(I,B){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(I)?Promise.resolve():Promise.resolve(B||"Invalid URL")}};function fu(W){W.inputValidator||(W.input==="email"&&(W.inputValidator=Qa.email),W.input==="url"&&(W.inputValidator=Qa.url))}function gu(W){(!W.target||typeof W.target=="string"&&!document.querySelector(W.target)||typeof W.target!="string"&&!W.target.appendChild)&&(Fi('Target parameter is not valid, defaulting to "body"'),W.target="body")}function Is(W){fu(W),W.showLoaderOnConfirm&&!W.preConfirm&&Fi(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),gu(W),typeof W.title=="string"&&(W.title=W.title.split(`
`).join("<br />")),_r(W)}var tr,Ds=new WeakMap,Gi=function(){function W(){if(Qe(this,W),Co(this,Ds,void 0),!(typeof window>"u")){tr=this;for(var I=arguments.length,B=new Array(I),H=0;H<I;H++)B[H]=arguments[H];var ge=Object.freeze(this.constructor.argsToParams(B));this.params=ge,this.isAwaitingPromise=!1,v(Ds,this,this._main(tr.params))}}return jt(W,[{key:"_main",value:function(B){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ps(Object.assign({},H,B)),On.currentInstance){var ge=So.swalPromiseResolve.get(On.currentInstance),Xe=On.currentInstance.isAwaitingPromise;On.currentInstance._destroy(),Xe||ge({isDismissed:!0}),ti()&&Zc()}On.currentInstance=tr;var Ft=Od(B,H);Is(Ft),Object.freeze(Ft),On.timeout&&(On.timeout.stop(),delete On.timeout),clearTimeout(On.restoreFocusTimeout);var Ln=Nh(tr);return Dt(tr,Ft),jn.innerParams.set(tr,Ft),Lh(tr,Ln,Ft)}},{key:"then",value:function(B){return P(Ds,this).then(B)}},{key:"finally",value:function(B){return P(Ds,this).finally(B)}}])}(),Lh=function(I,B,H){return new Promise(function(ge,Xe){var Ft=function(Gn){I.close({isDismissed:!0,dismiss:Gn})};So.swalPromiseResolve.set(I,ge),So.swalPromiseReject.set(I,Xe),B.confirmButton.onclick=function(){wa(I)},B.denyButton.onclick=function(){xr(I)},B.cancelButton.onclick=function(){Jc(I,Ft)},B.closeButton.onclick=function(){Ft(Vo.close)},bd(H,B,Ft),Vi(On,H,Ft),Qc(I,H),pu(H),mu(On,H,Ft),_u(B,H),setTimeout(function(){B.container.scrollTop=0})})},Od=function(I,B){var H=Uo(I),ge=Object.assign({},Aa,B,H,I);return ge.showClass=Object.assign({},Aa.showClass,ge.showClass),ge.hideClass=Object.assign({},Aa.hideClass,ge.hideClass),ge.animation===!1&&(ge.showClass={backdrop:"swal2-noanimation"},ge.hideClass={}),ge},Nh=function(I){var B={popup:Xn(),container:Ri(),actions:Fe(),confirmButton:pe(),denyButton:Le(),cancelButton:ze(),loader:yt(),closeButton:At(),validationMessage:oe(),progressSteps:Q()};return jn.domCache.set(I,B),B},mu=function(I,B,H){var ge=gt();He(ge),B.timer&&(I.timeout=new vl(function(){H("timer"),delete I.timeout},B.timer),B.timerProgressBar&&(De(ge),oi(ge,B,"timerProgressBar"),setTimeout(function(){I.timeout&&I.timeout.running&&Lt(B.timer)})))},_u=function(I,B){if(!B.toast){if(!ci(B.allowEnterKey)){yu();return}Td(I,B)||sl(-1,1)}},Td=function(I,B){return B.focusDeny&&tt(I.denyButton)?(I.denyButton.focus(),!0):B.focusCancel&&tt(I.cancelButton)?(I.cancelButton.focus(),!0):B.focusConfirm&&tt(I.confirmButton)?(I.confirmButton.focus(),!0):!1},yu=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var hc=new Date,xu=localStorage.getItem("swal-initiation");xu?(hc.getTime()-Date.parse(xu))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var W=document.createElement("audio");W.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",W.loop=!0,document.body.appendChild(W),setTimeout(function(){W.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(hc))}Gi.prototype.disableButtons=yd,Gi.prototype.enableButtons=_d,Gi.prototype.getInput=eu,Gi.prototype.disableInput=As,Gi.prototype.enableInput=tu,Gi.prototype.hideLoading=nc,Gi.prototype.disableLoading=nc,Gi.prototype.showValidationMessage=xd,Gi.prototype.resetValidationMessage=hl,Gi.prototype.close=Mo,Gi.prototype.closePopup=Mo,Gi.prototype.closeModal=Mo,Gi.prototype.closeToast=Mo,Gi.prototype.rejectPromise=Yl,Gi.prototype.update=Wa,Gi.prototype._destroy=Os,Object.assign(Gi,lu),Object.keys(ou).forEach(function(W){Gi[W]=function(){if(tr&&tr[W]){var I;return(I=tr)[W].apply(I,arguments)}return null}}),Gi.DismissReason=Vo,Gi.version="11.10.8";var ks=Gi;return ks.default=ks,ks});typeof il<"u"&&il.Sweetalert2&&(il.swal=il.sweetAlert=il.Swal=il.SweetAlert=il.Sweetalert2);typeof document<"u"&&function(x,g){var P=x.createElement("style");if(x.getElementsByTagName("head")[0].appendChild(P),P.styleSheet)P.styleSheet.disabled||(P.styleSheet.cssText=g);else try{P.innerHTML=g}catch{P.innerText=g}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var l1=class extends iC{constructor(){super(...arguments),this.supportsDOMEvents=!0}},c1=class x extends l1{static makeCurrent(){nC(new x)}onAndCancel(g,P,v){return g.addEventListener(P,v),()=>{g.removeEventListener(P,v)}}dispatchEvent(g,P){g.dispatchEvent(P)}remove(g){g.parentNode&&g.parentNode.removeChild(g)}createElement(g,P){return P=P||this.getDefaultDocument(),P.createElement(g)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(g){return g.nodeType===Node.ELEMENT_NODE}isShadowRoot(g){return g instanceof DocumentFragment}getGlobalEventTarget(g,P){return P==="window"?window:P==="document"?g:P==="body"?g.body:null}getBaseHref(g){let P=bT();return P==null?null:wT(P)}resetBaseElement(){of=null}getUserAgent(){return window.navigator.userAgent}getCookie(g){return aC(document.cookie,g)}},of=null;function bT(){return of=of||document.querySelector("base"),of?of.getAttribute("href"):null}function wT(x){return new URL(x,document.baseURI).pathname}var CT=(()=>{let g=class g{build(){return new XMLHttpRequest}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})(),u1=new Yi(""),mC=(()=>{let g=class g{constructor(v,M){this._zone=M,this._eventNameToPlugin=new Map,v.forEach(r=>{r.manager=this}),this._plugins=v.slice().reverse()}addEventListener(v,M,r){return this._findPluginFor(M).addEventListener(v,M,r)}getZone(){return this._zone}_findPluginFor(v){let M=this._eventNameToPlugin.get(v);if(M)return M;if(M=this._plugins.find(j=>j.supports(v)),!M)throw new eo(5101,!1);return this._eventNameToPlugin.set(v,M),M}};g.\u0275fac=function(M){return new(M||g)(ji(u1),ji(Fr))},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})(),pm=class{constructor(g){this._doc=g}},a1="ng-app-id",_C=(()=>{let g=class g{constructor(v,M,r,j={}){this.doc=v,this.appId=M,this.nonce=r,this.platformId=j,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=r1(j),this.resetHostNodes()}addStyles(v){for(let M of v)this.changeUsageCount(M,1)===1&&this.onStyleAdded(M)}removeStyles(v){for(let M of v)this.changeUsageCount(M,-1)<=0&&this.onStyleRemoved(M)}ngOnDestroy(){let v=this.styleNodesInDOM;v&&(v.forEach(M=>M.remove()),v.clear());for(let M of this.getAllStyles())this.onStyleRemoved(M);this.resetHostNodes()}addHost(v){this.hostNodes.add(v);for(let M of this.getAllStyles())this.addStyleToHost(v,M)}removeHost(v){this.hostNodes.delete(v)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(v){for(let M of this.hostNodes)this.addStyleToHost(M,v)}onStyleRemoved(v){let M=this.styleRef;M.get(v)?.elements?.forEach(r=>r.remove()),M.delete(v)}collectServerRenderedStyles(){let v=this.doc.head?.querySelectorAll(`style[${a1}="${this.appId}"]`);if(v?.length){let M=new Map;return v.forEach(r=>{r.textContent!=null&&M.set(r.textContent,r)}),M}return null}changeUsageCount(v,M){let r=this.styleRef;if(r.has(v)){let j=r.get(v);return j.usage+=M,j.usage}return r.set(v,{usage:M,elements:[]}),M}getStyleElement(v,M){let r=this.styleNodesInDOM,j=r?.get(M);if(j?.parentNode===v)return r.delete(M),j.removeAttribute(a1),j;{let ce=this.doc.createElement("style");return this.nonce&&ce.setAttribute("nonce",this.nonce),ce.textContent=M,this.platformIsServer&&ce.setAttribute(a1,this.appId),v.appendChild(ce),ce}}addStyleToHost(v,M){let r=this.getStyleElement(v,M),j=this.styleRef,ce=j.get(M)?.elements;ce?ce.push(r):j.set(M,{elements:[r],usage:1})}resetHostNodes(){let v=this.hostNodes;v.clear(),v.add(this.doc.head)}};g.\u0275fac=function(M){return new(M||g)(ji(sa),ji(Y0),ji(X0,8),ji(nd))},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})(),s1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},h1=/%COMP%/g,yC="%COMP%",MT=`_nghost-${yC}`,AT=`_ngcontent-${yC}`,PT=!0,OT=new Yi("",{providedIn:"root",factory:()=>PT});function TT(x){return AT.replace(h1,x)}function ST(x){return MT.replace(h1,x)}function xC(x,g){return g.map(P=>P.replace(h1,x))}var hC=(()=>{let g=class g{constructor(v,M,r,j,ce,we,Oe,Qe=null){this.eventManager=v,this.sharedStylesHost=M,this.appId=r,this.removeStylesOnCompDestroy=j,this.doc=ce,this.platformId=we,this.ngZone=Oe,this.nonce=Qe,this.rendererByCompId=new Map,this.platformIsServer=r1(we),this.defaultRenderer=new rf(v,ce,Oe,this.platformIsServer)}createRenderer(v,M){if(!v||!M)return this.defaultRenderer;this.platformIsServer&&M.encapsulation===Qp.ShadowDom&&(M=$i(Et({},M),{encapsulation:Qp.Emulated}));let r=this.getOrCreateRenderer(v,M);return r instanceof fm?r.applyToHost(v):r instanceof af&&r.applyStyles(),r}getOrCreateRenderer(v,M){let r=this.rendererByCompId,j=r.get(M.id);if(!j){let ce=this.doc,we=this.ngZone,Oe=this.eventManager,Qe=this.sharedStylesHost,zt=this.removeStylesOnCompDestroy,jt=this.platformIsServer;switch(M.encapsulation){case Qp.Emulated:j=new fm(Oe,Qe,M,this.appId,zt,ce,we,jt);break;case Qp.ShadowDom:return new d1(Oe,Qe,v,M,ce,we,this.nonce,jt);default:j=new af(Oe,Qe,M,zt,ce,we,jt);break}r.set(M.id,j)}return j}ngOnDestroy(){this.rendererByCompId.clear()}};g.\u0275fac=function(M){return new(M||g)(ji(mC),ji(_C),ji(Y0),ji(OT),ji(sa),ji(nd),ji(Fr),ji(X0))},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})(),rf=class{constructor(g,P,v,M){this.eventManager=g,this.doc=P,this.ngZone=v,this.platformIsServer=M,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(g,P){return P?this.doc.createElementNS(s1[P]||P,g):this.doc.createElement(g)}createComment(g){return this.doc.createComment(g)}createText(g){return this.doc.createTextNode(g)}appendChild(g,P){(pC(g)?g.content:g).appendChild(P)}insertBefore(g,P,v){g&&(pC(g)?g.content:g).insertBefore(P,v)}removeChild(g,P){g&&g.removeChild(P)}selectRootElement(g,P){let v=typeof g=="string"?this.doc.querySelector(g):g;if(!v)throw new eo(-5104,!1);return P||(v.textContent=""),v}parentNode(g){return g.parentNode}nextSibling(g){return g.nextSibling}setAttribute(g,P,v,M){if(M){P=M+":"+P;let r=s1[M];r?g.setAttributeNS(r,P,v):g.setAttribute(P,v)}else g.setAttribute(P,v)}removeAttribute(g,P,v){if(v){let M=s1[v];M?g.removeAttributeNS(M,P):g.removeAttribute(`${v}:${P}`)}else g.removeAttribute(P)}addClass(g,P){g.classList.add(P)}removeClass(g,P){g.classList.remove(P)}setStyle(g,P,v,M){M&(Kp.DashCase|Kp.Important)?g.style.setProperty(P,v,M&Kp.Important?"important":""):g.style[P]=v}removeStyle(g,P,v){v&Kp.DashCase?g.style.removeProperty(P):g.style[P]=""}setProperty(g,P,v){g!=null&&(g[P]=v)}setValue(g,P){g.nodeValue=P}listen(g,P,v){if(typeof g=="string"&&(g=mh().getGlobalEventTarget(this.doc,g),!g))throw new Error(`Unsupported event target ${g} for event ${P}`);return this.eventManager.addEventListener(g,P,this.decoratePreventDefault(v))}decoratePreventDefault(g){return P=>{if(P==="__ngUnwrap__")return g;(this.platformIsServer?this.ngZone.runGuarded(()=>g(P)):g(P))===!1&&P.preventDefault()}}};function pC(x){return x.tagName==="TEMPLATE"&&x.content!==void 0}var d1=class extends rf{constructor(g,P,v,M,r,j,ce,we){super(g,r,j,we),this.sharedStylesHost=P,this.hostEl=v,this.shadowRoot=v.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let Oe=xC(M.id,M.styles);for(let Qe of Oe){let zt=document.createElement("style");ce&&zt.setAttribute("nonce",ce),zt.textContent=Qe,this.shadowRoot.appendChild(zt)}}nodeOrShadowRoot(g){return g===this.hostEl?this.shadowRoot:g}appendChild(g,P){return super.appendChild(this.nodeOrShadowRoot(g),P)}insertBefore(g,P,v){return super.insertBefore(this.nodeOrShadowRoot(g),P,v)}removeChild(g,P){return super.removeChild(this.nodeOrShadowRoot(g),P)}parentNode(g){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(g)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},af=class extends rf{constructor(g,P,v,M,r,j,ce,we){super(g,r,j,ce),this.sharedStylesHost=P,this.removeStylesOnCompDestroy=M,this.styles=we?xC(we,v.styles):v.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fm=class extends af{constructor(g,P,v,M,r,j,ce,we){let Oe=M+"-"+v.id;super(g,P,v,r,j,ce,we,Oe),this.contentAttr=TT(Oe),this.hostAttr=ST(Oe)}applyToHost(g){this.applyStyles(),this.setAttribute(g,this.hostAttr,"")}createElement(g,P){let v=super.createElement(g,P);return super.setAttribute(v,this.contentAttr,""),v}},ET=(()=>{let g=class g extends pm{constructor(v){super(v)}supports(v){return!0}addEventListener(v,M,r){return v.addEventListener(M,r,!1),()=>this.removeEventListener(v,M,r)}removeEventListener(v,M,r){return v.removeEventListener(M,r)}};g.\u0275fac=function(M){return new(M||g)(ji(sa))},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})(),fC=["alt","control","meta","shift"],IT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DT={alt:x=>x.altKey,control:x=>x.ctrlKey,meta:x=>x.metaKey,shift:x=>x.shiftKey},kT=(()=>{let g=class g extends pm{constructor(v){super(v)}supports(v){return g.parseEventName(v)!=null}addEventListener(v,M,r){let j=g.parseEventName(M),ce=g.eventCallback(j.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mh().onAndCancel(v,j.domEventName,ce))}static parseEventName(v){let M=v.toLowerCase().split("."),r=M.shift();if(M.length===0||!(r==="keydown"||r==="keyup"))return null;let j=g._normalizeKey(M.pop()),ce="",we=M.indexOf("code");if(we>-1&&(M.splice(we,1),ce="code."),fC.forEach(Qe=>{let zt=M.indexOf(Qe);zt>-1&&(M.splice(zt,1),ce+=Qe+".")}),ce+=j,M.length!=0||j.length===0)return null;let Oe={};return Oe.domEventName=r,Oe.fullKey=ce,Oe}static matchEventFullKeyCode(v,M){let r=IT[v.key]||v.key,j="";return M.indexOf("code.")>-1&&(r=v.code,j="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),fC.forEach(ce=>{if(ce!==r){let we=DT[ce];we(v)&&(j+=ce+".")}}),j+=r,j===M)}static eventCallback(v,M,r){return j=>{g.matchEventFullKeyCode(j,v)&&r.runGuarded(()=>M(j))}}static _normalizeKey(v){return v==="esc"?"escape":v}};g.\u0275fac=function(M){return new(M||g)(ji(sa))},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})();function vC(x,g){return eC(Et({rootComponent:x},RT(g)))}function RT(x){return{appProviders:[...NT,...x?.providers??[]],platformProviders:LT}}function zT(){c1.makeCurrent()}function BT(){return new q0}function FT(){return jw(document),document}var LT=[{provide:nd,useValue:lC},{provide:Uw,useValue:zT,multi:!0},{provide:sa,useFactory:FT,deps:[]}];var NT=[{provide:Nw,useValue:"root"},{provide:q0,useFactory:BT,deps:[]},{provide:u1,useClass:ET,multi:!0,deps:[sa,Fr,nd]},{provide:u1,useClass:kT,multi:!0,deps:[sa]},hC,_C,mC,{provide:$w,useExisting:hC},{provide:dC,useClass:CT,deps:[]},[]];var bC=(()=>{let g=class g{constructor(v){this._doc=v}getTitle(){return this._doc.title}setTitle(v){this._doc.title=v||""}};g.\u0275fac=function(M){return new(M||g)(ji(sa))},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();var $n="primary",wf=Symbol("RouteTitle"),_1=class{constructor(g){this.params=g||{}}has(g){return Object.prototype.hasOwnProperty.call(this.params,g)}get(g){if(this.has(g)){let P=this.params[g];return Array.isArray(P)?P[0]:P}return null}getAll(g){if(this.has(g)){let P=this.params[g];return Array.isArray(P)?P:[P]}return[]}get keys(){return Object.keys(this.params)}};function wh(x){return new _1(x)}function jT(x,g,P){let v=P.path.split("/");if(v.length>x.length||P.pathMatch==="full"&&(g.hasChildren()||v.length<x.length))return null;let M={};for(let r=0;r<v.length;r++){let j=v[r],ce=x[r];if(j.startsWith(":"))M[j.substring(1)]=ce;else if(j!==ce.path)return null}return{consumed:x.slice(0,v.length),posParams:M}}function UT(x,g){if(x.length!==g.length)return!1;for(let P=0;P<x.length;++P)if(!Ks(x[P],g[P]))return!1;return!0}function Ks(x,g){let P=x?y1(x):void 0,v=g?y1(g):void 0;if(!P||!v||P.length!=v.length)return!1;let M;for(let r=0;r<P.length;r++)if(M=P[r],!IC(x[M],g[M]))return!1;return!0}function y1(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}function IC(x,g){if(Array.isArray(x)&&Array.isArray(g)){if(x.length!==g.length)return!1;let P=[...x].sort(),v=[...g].sort();return P.every((M,r)=>v[r]===M)}else return x===g}function DC(x){return x.length>0?x[x.length-1]:null}function Nc(x){return Aw(x)?x:cm(x)?lr(Promise.resolve(x)):Pn(x)}var GT={exact:RC,subset:zC},kC={exact:HT,subset:$T,ignored:()=>!0};function wC(x,g,P){return GT[P.paths](x.root,g.root,P.matrixParams)&&kC[P.queryParams](x.queryParams,g.queryParams)&&!(P.fragment==="exact"&&x.fragment!==g.fragment)}function HT(x,g){return Ks(x,g)}function RC(x,g,P){if(!ad(x.segments,g.segments)||!_m(x.segments,g.segments,P)||x.numberOfChildren!==g.numberOfChildren)return!1;for(let v in g.children)if(!x.children[v]||!RC(x.children[v],g.children[v],P))return!1;return!0}function $T(x,g){return Object.keys(g).length<=Object.keys(x).length&&Object.keys(g).every(P=>IC(x[P],g[P]))}function zC(x,g,P){return BC(x,g,g.segments,P)}function BC(x,g,P,v){if(x.segments.length>P.length){let M=x.segments.slice(0,P.length);return!(!ad(M,P)||g.hasChildren()||!_m(M,P,v))}else if(x.segments.length===P.length){if(!ad(x.segments,P)||!_m(x.segments,P,v))return!1;for(let M in g.children)if(!x.children[M]||!zC(x.children[M],g.children[M],v))return!1;return!0}else{let M=P.slice(0,x.segments.length),r=P.slice(x.segments.length);return!ad(x.segments,M)||!_m(x.segments,M,v)||!x.children[$n]?!1:BC(x.children[$n],g,r,v)}}function _m(x,g,P){return g.every((v,M)=>kC[P](x[M].parameters,v.parameters))}var zc=class{constructor(g=new Pi([],{}),P={},v=null){this.root=g,this.queryParams=P,this.fragment=v}get queryParamMap(){return this._queryParamMap??=wh(this.queryParams),this._queryParamMap}toString(){return qT.serialize(this)}},Pi=class{constructor(g,P){this.segments=g,this.children=P,this.parent=null,Object.values(P).forEach(v=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ym(this)}},rd=class{constructor(g,P){this.path=g,this.parameters=P}get parameterMap(){return this._parameterMap??=wh(this.parameters),this._parameterMap}toString(){return LC(this)}};function WT(x,g){return ad(x,g)&&x.every((P,v)=>Ks(P.parameters,g[v].parameters))}function ad(x,g){return x.length!==g.length?!1:x.every((P,v)=>P.path===g[v].path)}function ZT(x,g){let P=[];return Object.entries(x.children).forEach(([v,M])=>{v===$n&&(P=P.concat(g(M,v)))}),Object.entries(x.children).forEach(([v,M])=>{v!==$n&&(P=P.concat(g(M,v)))}),P}var Cf=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:()=>new pf,providedIn:"root"});let x=g;return x})(),pf=class{parse(g){let P=new v1(g);return new zc(P.parseRootSegment(),P.parseQueryParams(),P.parseFragment())}serialize(g){let P=`/${sf(g.root,!0)}`,v=QT(g.queryParams),M=typeof g.fragment=="string"?`#${YT(g.fragment)}`:"";return`${P}${v}${M}`}},qT=new pf;function ym(x){return x.segments.map(g=>LC(g)).join("/")}function sf(x,g){if(!x.hasChildren())return ym(x);if(g){let P=x.children[$n]?sf(x.children[$n],!1):"",v=[];return Object.entries(x.children).forEach(([M,r])=>{M!==$n&&v.push(`${M}:${sf(r,!1)}`)}),v.length>0?`${P}(${v.join("//")})`:P}else{let P=ZT(x,(v,M)=>M===$n?[sf(x.children[$n],!1)]:[`${M}:${sf(v,!1)}`]);return Object.keys(x.children).length===1&&x.children[$n]!=null?`${ym(x)}/${P[0]}`:`${ym(x)}/(${P.join("//")})`}}function FC(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gm(x){return FC(x).replace(/%3B/gi,";")}function YT(x){return encodeURI(x)}function x1(x){return FC(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xm(x){return decodeURIComponent(x)}function CC(x){return xm(x.replace(/\+/g,"%20"))}function LC(x){return`${x1(x.path)}${XT(x.parameters)}`}function XT(x){return Object.entries(x).map(([g,P])=>`;${x1(g)}=${x1(P)}`).join("")}function QT(x){let g=Object.entries(x).map(([P,v])=>Array.isArray(v)?v.map(M=>`${gm(P)}=${gm(M)}`).join("&"):`${gm(P)}=${gm(v)}`).filter(P=>P);return g.length?`?${g.join("&")}`:""}var KT=/^[^\/()?;#]+/;function p1(x){let g=x.match(KT);return g?g[0]:""}var JT=/^[^\/()?;=#]+/;function e3(x){let g=x.match(JT);return g?g[0]:""}var t3=/^[^=?&#]+/;function n3(x){let g=x.match(t3);return g?g[0]:""}var i3=/^[^&#]+/;function o3(x){let g=x.match(i3);return g?g[0]:""}var v1=class{constructor(g){this.url=g,this.remaining=g}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pi([],{}):new Pi([],this.parseChildren())}parseQueryParams(){let g={};if(this.consumeOptional("?"))do this.parseQueryParam(g);while(this.consumeOptional("&"));return g}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let g=[];for(this.peekStartsWith("(")||g.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),g.push(this.parseSegment());let P={};this.peekStartsWith("/(")&&(this.capture("/"),P=this.parseParens(!0));let v={};return this.peekStartsWith("(")&&(v=this.parseParens(!1)),(g.length>0||Object.keys(P).length>0)&&(v[$n]=new Pi(g,P)),v}parseSegment(){let g=p1(this.remaining);if(g===""&&this.peekStartsWith(";"))throw new eo(4009,!1);return this.capture(g),new rd(xm(g),this.parseMatrixParams())}parseMatrixParams(){let g={};for(;this.consumeOptional(";");)this.parseParam(g);return g}parseParam(g){let P=e3(this.remaining);if(!P)return;this.capture(P);let v="";if(this.consumeOptional("=")){let M=p1(this.remaining);M&&(v=M,this.capture(v))}g[xm(P)]=xm(v)}parseQueryParam(g){let P=n3(this.remaining);if(!P)return;this.capture(P);let v="";if(this.consumeOptional("=")){let j=o3(this.remaining);j&&(v=j,this.capture(v))}let M=CC(P),r=CC(v);if(g.hasOwnProperty(M)){let j=g[M];Array.isArray(j)||(j=[j],g[M]=j),j.push(r)}else g[M]=r}parseParens(g){let P={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let v=p1(this.remaining),M=this.remaining[v.length];if(M!=="/"&&M!==")"&&M!==";")throw new eo(4010,!1);let r;v.indexOf(":")>-1?(r=v.slice(0,v.indexOf(":")),this.capture(r),this.capture(":")):g&&(r=$n);let j=this.parseChildren();P[r]=Object.keys(j).length===1?j[$n]:new Pi([],j),this.consumeOptional("//")}return P}peekStartsWith(g){return this.remaining.startsWith(g)}consumeOptional(g){return this.peekStartsWith(g)?(this.remaining=this.remaining.substring(g.length),!0):!1}capture(g){if(!this.consumeOptional(g))throw new eo(4011,!1)}};function NC(x){return x.segments.length>0?new Pi([],{[$n]:x}):x}function VC(x){let g={};for(let[v,M]of Object.entries(x.children)){let r=VC(M);if(v===$n&&r.segments.length===0&&r.hasChildren())for(let[j,ce]of Object.entries(r.children))g[j]=ce;else(r.segments.length>0||r.hasChildren())&&(g[v]=r)}let P=new Pi(x.segments,g);return r3(P)}function r3(x){if(x.numberOfChildren===1&&x.children[$n]){let g=x.children[$n];return new Pi(x.segments.concat(g.segments),g.children)}return x}function Ch(x){return x instanceof zc}function a3(x,g,P=null,v=null){let M=jC(x);return UC(M,g,P,v)}function jC(x){let g;function P(r){let j={};for(let we of r.children){let Oe=P(we);j[we.outlet]=Oe}let ce=new Pi(r.url,j);return r===x&&(g=ce),ce}let v=P(x.root),M=NC(v);return g??M}function UC(x,g,P,v){let M=x;for(;M.parent;)M=M.parent;if(g.length===0)return f1(M,M,M,P,v);let r=s3(g);if(r.toRoot())return f1(M,M,new Pi([],{}),P,v);let j=l3(r,M,x),ce=j.processChildren?uf(j.segmentGroup,j.index,r.commands):HC(j.segmentGroup,j.index,r.commands);return f1(M,j.segmentGroup,ce,P,v)}function vm(x){return typeof x=="object"&&x!=null&&!x.outlets&&!x.segmentPath}function ff(x){return typeof x=="object"&&x!=null&&x.outlets}function f1(x,g,P,v,M){let r={};v&&Object.entries(v).forEach(([we,Oe])=>{r[we]=Array.isArray(Oe)?Oe.map(Qe=>`${Qe}`):`${Oe}`});let j;x===g?j=P:j=GC(x,g,P);let ce=NC(VC(j));return new zc(ce,r,M)}function GC(x,g,P){let v={};return Object.entries(x.children).forEach(([M,r])=>{r===g?v[M]=P:v[M]=GC(r,g,P)}),new Pi(x.segments,v)}var bm=class{constructor(g,P,v){if(this.isAbsolute=g,this.numberOfDoubleDots=P,this.commands=v,g&&v.length>0&&vm(v[0]))throw new eo(4003,!1);let M=v.find(ff);if(M&&M!==DC(v))throw new eo(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function s3(x){if(typeof x[0]=="string"&&x.length===1&&x[0]==="/")return new bm(!0,0,x);let g=0,P=!1,v=x.reduce((M,r,j)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let ce={};return Object.entries(r.outlets).forEach(([we,Oe])=>{ce[we]=typeof Oe=="string"?Oe.split("/"):Oe}),[...M,{outlets:ce}]}if(r.segmentPath)return[...M,r.segmentPath]}return typeof r!="string"?[...M,r]:j===0?(r.split("/").forEach((ce,we)=>{we==0&&ce==="."||(we==0&&ce===""?P=!0:ce===".."?g++:ce!=""&&M.push(ce))}),M):[...M,r]},[]);return new bm(P,g,v)}var vh=class{constructor(g,P,v){this.segmentGroup=g,this.processChildren=P,this.index=v}};function l3(x,g,P){if(x.isAbsolute)return new vh(g,!0,0);if(!P)return new vh(g,!1,NaN);if(P.parent===null)return new vh(P,!0,0);let v=vm(x.commands[0])?0:1,M=P.segments.length-1+v;return c3(P,M,x.numberOfDoubleDots)}function c3(x,g,P){let v=x,M=g,r=P;for(;r>M;){if(r-=M,v=v.parent,!v)throw new eo(4005,!1);M=v.segments.length}return new vh(v,!1,M-r)}function u3(x){return ff(x[0])?x[0].outlets:{[$n]:x}}function HC(x,g,P){if(x??=new Pi([],{}),x.segments.length===0&&x.hasChildren())return uf(x,g,P);let v=d3(x,g,P),M=P.slice(v.commandIndex);if(v.match&&v.pathIndex<x.segments.length){let r=new Pi(x.segments.slice(0,v.pathIndex),{});return r.children[$n]=new Pi(x.segments.slice(v.pathIndex),x.children),uf(r,0,M)}else return v.match&&M.length===0?new Pi(x.segments,{}):v.match&&!x.hasChildren()?b1(x,g,P):v.match?uf(x,0,M):b1(x,g,P)}function uf(x,g,P){if(P.length===0)return new Pi(x.segments,{});{let v=u3(P),M={};if(Object.keys(v).some(r=>r!==$n)&&x.children[$n]&&x.numberOfChildren===1&&x.children[$n].segments.length===0){let r=uf(x.children[$n],g,P);return new Pi(x.segments,r.children)}return Object.entries(v).forEach(([r,j])=>{typeof j=="string"&&(j=[j]),j!==null&&(M[r]=HC(x.children[r],g,j))}),Object.entries(x.children).forEach(([r,j])=>{v[r]===void 0&&(M[r]=j)}),new Pi(x.segments,M)}}function d3(x,g,P){let v=0,M=g,r={match:!1,pathIndex:0,commandIndex:0};for(;M<x.segments.length;){if(v>=P.length)return r;let j=x.segments[M],ce=P[v];if(ff(ce))break;let we=`${ce}`,Oe=v<P.length-1?P[v+1]:null;if(M>0&&we===void 0)break;if(we&&Oe&&typeof Oe=="object"&&Oe.outlets===void 0){if(!AC(we,Oe,j))return r;v+=2}else{if(!AC(we,{},j))return r;v++}M++}return{match:!0,pathIndex:M,commandIndex:v}}function b1(x,g,P){let v=x.segments.slice(0,g),M=0;for(;M<P.length;){let r=P[M];if(ff(r)){let we=h3(r.outlets);return new Pi(v,we)}if(M===0&&vm(P[0])){let we=x.segments[g];v.push(new rd(we.path,MC(P[0]))),M++;continue}let j=ff(r)?r.outlets[$n]:`${r}`,ce=M<P.length-1?P[M+1]:null;j&&ce&&vm(ce)?(v.push(new rd(j,MC(ce))),M+=2):(v.push(new rd(j,{})),M++)}return new Pi(v,{})}function h3(x){let g={};return Object.entries(x).forEach(([P,v])=>{typeof v=="string"&&(v=[v]),v!==null&&(g[P]=b1(new Pi([],{}),0,v))}),g}function MC(x){let g={};return Object.entries(x).forEach(([P,v])=>g[P]=`${v}`),g}function AC(x,g,P){return x==P.path&&Ks(g,P.parameters)}var df="imperative",zo=function(x){return x[x.NavigationStart=0]="NavigationStart",x[x.NavigationEnd=1]="NavigationEnd",x[x.NavigationCancel=2]="NavigationCancel",x[x.NavigationError=3]="NavigationError",x[x.RoutesRecognized=4]="RoutesRecognized",x[x.ResolveStart=5]="ResolveStart",x[x.ResolveEnd=6]="ResolveEnd",x[x.GuardsCheckStart=7]="GuardsCheckStart",x[x.GuardsCheckEnd=8]="GuardsCheckEnd",x[x.RouteConfigLoadStart=9]="RouteConfigLoadStart",x[x.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",x[x.ChildActivationStart=11]="ChildActivationStart",x[x.ChildActivationEnd=12]="ChildActivationEnd",x[x.ActivationStart=13]="ActivationStart",x[x.ActivationEnd=14]="ActivationEnd",x[x.Scroll=15]="Scroll",x[x.NavigationSkipped=16]="NavigationSkipped",x}(zo||{}),za=class{constructor(g,P){this.id=g,this.url=P}},Mh=class extends za{constructor(g,P,v="imperative",M=null){super(g,P),this.type=zo.NavigationStart,this.navigationTrigger=v,this.restoredState=M}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fs=class extends za{constructor(g,P,v){super(g,P),this.urlAfterRedirects=v,this.type=zo.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ca=function(x){return x[x.Redirect=0]="Redirect",x[x.SupersededByNewNavigation=1]="SupersededByNewNavigation",x[x.NoDataFromResolver=2]="NoDataFromResolver",x[x.GuardRejected=3]="GuardRejected",x}(ca||{}),wm=function(x){return x[x.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",x[x.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",x}(wm||{}),Bc=class extends za{constructor(g,P,v,M){super(g,P),this.reason=v,this.code=M,this.type=zo.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fc=class extends za{constructor(g,P,v,M){super(g,P),this.reason=v,this.code=M,this.type=zo.NavigationSkipped}},gf=class extends za{constructor(g,P,v,M){super(g,P),this.error=v,this.target=M,this.type=zo.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cm=class extends za{constructor(g,P,v,M){super(g,P),this.urlAfterRedirects=v,this.state=M,this.type=zo.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w1=class extends za{constructor(g,P,v,M){super(g,P),this.urlAfterRedirects=v,this.state=M,this.type=zo.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C1=class extends za{constructor(g,P,v,M,r){super(g,P),this.urlAfterRedirects=v,this.state=M,this.shouldActivate=r,this.type=zo.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},M1=class extends za{constructor(g,P,v,M){super(g,P),this.urlAfterRedirects=v,this.state=M,this.type=zo.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},A1=class extends za{constructor(g,P,v,M){super(g,P),this.urlAfterRedirects=v,this.state=M,this.type=zo.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P1=class{constructor(g){this.route=g,this.type=zo.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},O1=class{constructor(g){this.route=g,this.type=zo.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},T1=class{constructor(g){this.snapshot=g,this.type=zo.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S1=class{constructor(g){this.snapshot=g,this.type=zo.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E1=class{constructor(g){this.snapshot=g,this.type=zo.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I1=class{constructor(g){this.snapshot=g,this.type=zo.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{constructor(g,P,v){this.routerEvent=g,this.position=P,this.anchor=v,this.type=zo.Scroll}toString(){let g=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${g}')`}},mf=class{},_f=class{constructor(g){this.url=g}};var D1=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Mf,this.attachRef=null}},Mf=(()=>{let g=class g{constructor(){this.contexts=new Map}onChildOutletCreated(v,M){let r=this.getOrCreateContext(v);r.outlet=M,this.contexts.set(v,r)}onChildOutletDestroyed(v){let M=this.getContext(v);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){let v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let M=this.getContext(v);return M||(M=new D1,this.contexts.set(v,M)),M}getContext(v){return this.contexts.get(v)||null}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),Am=class{constructor(g){this._root=g}get root(){return this._root.value}parent(g){let P=this.pathFromRoot(g);return P.length>1?P[P.length-2]:null}children(g){let P=k1(g,this._root);return P?P.children.map(v=>v.value):[]}firstChild(g){let P=k1(g,this._root);return P&&P.children.length>0?P.children[0].value:null}siblings(g){let P=R1(g,this._root);return P.length<2?[]:P[P.length-2].children.map(M=>M.value).filter(M=>M!==g)}pathFromRoot(g){return R1(g,this._root).map(P=>P.value)}};function k1(x,g){if(x===g.value)return g;for(let P of g.children){let v=k1(x,P);if(v)return v}return null}function R1(x,g){if(x===g.value)return[g];for(let P of g.children){let v=R1(x,P);if(v.length)return v.unshift(g),v}return[]}var la=class{constructor(g,P){this.value=g,this.children=P}toString(){return`TreeNode(${this.value})`}};function xh(x){let g={};return x&&x.children.forEach(P=>g[P.value.outlet]=P),g}var Pm=class extends Am{constructor(g,P){super(g),this.snapshot=P,H1(this,g)}toString(){return this.snapshot.toString()}};function $C(x){let g=p3(x),P=new bo([new rd("",{})]),v=new bo({}),M=new bo({}),r=new bo({}),j=new bo(""),ce=new Lc(P,v,r,j,M,$n,x,g.root);return ce.snapshot=g.root,new Pm(new la(ce,[]),g)}function p3(x){let g={},P={},v={},M="",r=new yf([],g,v,M,P,$n,x,null,{});return new Om("",new la(r,[]))}var Lc=class{constructor(g,P,v,M,r,j,ce,we){this.urlSubject=g,this.paramsSubject=P,this.queryParamsSubject=v,this.fragmentSubject=M,this.dataSubject=r,this.outlet=j,this.component=ce,this._futureSnapshot=we,this.title=this.dataSubject?.pipe(mi(Oe=>Oe[wf]))??Pn(void 0),this.url=g,this.params=P,this.queryParams=v,this.fragment=M,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(mi(g=>wh(g))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(mi(g=>wh(g))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function G1(x,g,P="emptyOnly"){let v,{routeConfig:M}=x;return g!==null&&(P==="always"||M?.path===""||!g.component&&!g.routeConfig?.loadComponent)?v={params:Et(Et({},g.params),x.params),data:Et(Et({},g.data),x.data),resolve:Et(Et(Et(Et({},x.data),g.data),M?.data),x._resolvedData)}:v={params:Et({},x.params),data:Et({},x.data),resolve:Et(Et({},x.data),x._resolvedData??{})},M&&ZC(M)&&(v.resolve[wf]=M.title),v}var yf=class{get title(){return this.data?.[wf]}constructor(g,P,v,M,r,j,ce,we,Oe){this.url=g,this.params=P,this.queryParams=v,this.fragment=M,this.data=r,this.outlet=j,this.component=ce,this.routeConfig=we,this._resolve=Oe}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wh(this.queryParams),this._queryParamMap}toString(){let g=this.url.map(v=>v.toString()).join("/"),P=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${g}', path:'${P}')`}},Om=class extends Am{constructor(g,P){super(P),this.url=g,H1(this,P)}toString(){return WC(this._root)}};function H1(x,g){g.value._routerState=x,g.children.forEach(P=>H1(x,P))}function WC(x){let g=x.children.length>0?` { ${x.children.map(WC).join(", ")} } `:"";return`${x.value}${g}`}function g1(x){if(x.snapshot){let g=x.snapshot,P=x._futureSnapshot;x.snapshot=P,Ks(g.queryParams,P.queryParams)||x.queryParamsSubject.next(P.queryParams),g.fragment!==P.fragment&&x.fragmentSubject.next(P.fragment),Ks(g.params,P.params)||x.paramsSubject.next(P.params),UT(g.url,P.url)||x.urlSubject.next(P.url),Ks(g.data,P.data)||x.dataSubject.next(P.data)}else x.snapshot=x._futureSnapshot,x.dataSubject.next(x._futureSnapshot.data)}function z1(x,g){let P=Ks(x.params,g.params)&&WT(x.url,g.url),v=!x.parent!=!g.parent;return P&&!v&&(!x.parent||z1(x.parent,g.parent))}function ZC(x){return typeof x.title=="string"||x.title===null}var $1=(()=>{let g=class g{constructor(){this.activated=null,this._activatedRoute=null,this.name=$n,this.activateEvents=new Ro,this.deactivateEvents=new Ro,this.attachEvents=new Ro,this.detachEvents=new Ro,this.parentContexts=Wt(Mf),this.location=Wt(K0),this.changeDetector=Wt(Ll),this.environmentInjector=Wt(dh),this.inputBinder=Wt(Im,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){let{firstChange:M,previousValue:r}=v.name;if(M)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new eo(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new eo(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new eo(4012,!1);this.location.detach();let v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,M){this.activated=v,this._activatedRoute=M,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){let v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,M){if(this.isActivated)throw new eo(4013,!1);this._activatedRoute=v;let r=this.location,ce=v.snapshot.component,we=this.parentContexts.getOrCreateContext(this.name).children,Oe=new B1(v,we,r.injector);this.activated=r.createComponent(ce,{index:r.length,injector:Oe,environmentInjector:M??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};g.\u0275fac=function(M){return new(M||g)},g.\u0275dir=Do({type:g,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rc]});let x=g;return x})(),B1=class{constructor(g,P,v){this.route=g,this.childContexts=P,this.parent=v,this.__ngOutletInjector=!0}get(g,P){return g===Lc?this.route:g===Mf?this.childContexts:this.parent.get(g,P)}},Im=new Yi(""),PC=(()=>{let g=class g{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){let{activatedRoute:M}=v,r=td([M.queryParams,M.params,M.data]).pipe(oa(([j,ce,we],Oe)=>(we=Et(Et(Et({},j),ce),we),Oe===0?Pn(we):Promise.resolve(we)))).subscribe(j=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==M||M.component===null){this.unsubscribeFromRouteData(v);return}let ce=tC(M.component);if(!ce){this.unsubscribeFromRouteData(v);return}for(let{templateName:we}of ce.inputs)v.activatedComponentRef.setInput(we,j[we])});this.outletDataSubscriptions.set(v,r)}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})();function f3(x,g,P){let v=xf(x,g._root,P?P._root:void 0);return new Pm(v,g)}function xf(x,g,P){if(P&&x.shouldReuseRoute(g.value,P.value.snapshot)){let v=P.value;v._futureSnapshot=g.value;let M=g3(x,g,P);return new la(v,M)}else{if(x.shouldAttach(g.value)){let r=x.retrieve(g.value);if(r!==null){let j=r.route;return j.value._futureSnapshot=g.value,j.children=g.children.map(ce=>xf(x,ce)),j}}let v=m3(g.value),M=g.children.map(r=>xf(x,r));return new la(v,M)}}function g3(x,g,P){return g.children.map(v=>{for(let M of P.children)if(x.shouldReuseRoute(v.value,M.value.snapshot))return xf(x,v,M);return xf(x,v)})}function m3(x){return new Lc(new bo(x.url),new bo(x.params),new bo(x.queryParams),new bo(x.fragment),new bo(x.data),x.outlet,x.component,x)}var qC="ngNavigationCancelingError";function YC(x,g){let{redirectTo:P,navigationBehaviorOptions:v}=Ch(g)?{redirectTo:g,navigationBehaviorOptions:void 0}:g,M=XC(!1,ca.Redirect);return M.url=P,M.navigationBehaviorOptions=v,M}function XC(x,g){let P=new Error(`NavigationCancelingError: ${x||""}`);return P[qC]=!0,P.cancellationCode=g,P}function _3(x){return QC(x)&&Ch(x.url)}function QC(x){return!!x&&x[qC]}var y3=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["ng-component"]],standalone:!0,features:[pn],decls:1,vars:0,template:function(M,r){M&1&&_t(0,"router-outlet")},dependencies:[$1],encapsulation:2});let x=g;return x})();function x3(x,g){return x.providers&&!x._injector&&(x._injector=e1(x.providers,g,`Route: ${x.path}`)),x._injector??g}function W1(x){let g=x.children&&x.children.map(W1),P=g?$i(Et({},x),{children:g}):Et({},x);return!P.component&&!P.loadComponent&&(g||P.loadChildren)&&P.outlet&&P.outlet!==$n&&(P.component=y3),P}function Js(x){return x.outlet||$n}function v3(x,g){let P=x.filter(v=>Js(v)===g);return P.push(...x.filter(v=>Js(v)!==g)),P}function Af(x){if(!x)return null;if(x.routeConfig?._injector)return x.routeConfig._injector;for(let g=x.parent;g;g=g.parent){let P=g.routeConfig;if(P?._loadedInjector)return P._loadedInjector;if(P?._injector)return P._injector}return null}var b3=(x,g,P,v)=>mi(M=>(new F1(g,M.targetRouterState,M.currentRouterState,P,v).activate(x),M)),F1=class{constructor(g,P,v,M,r){this.routeReuseStrategy=g,this.futureState=P,this.currState=v,this.forwardEvent=M,this.inputBindingEnabled=r}activate(g){let P=this.futureState._root,v=this.currState?this.currState._root:null;this.deactivateChildRoutes(P,v,g),g1(this.futureState.root),this.activateChildRoutes(P,v,g)}deactivateChildRoutes(g,P,v){let M=xh(P);g.children.forEach(r=>{let j=r.value.outlet;this.deactivateRoutes(r,M[j],v),delete M[j]}),Object.values(M).forEach(r=>{this.deactivateRouteAndItsChildren(r,v)})}deactivateRoutes(g,P,v){let M=g.value,r=P?P.value:null;if(M===r)if(M.component){let j=v.getContext(M.outlet);j&&this.deactivateChildRoutes(g,P,j.children)}else this.deactivateChildRoutes(g,P,v);else r&&this.deactivateRouteAndItsChildren(P,v)}deactivateRouteAndItsChildren(g,P){g.value.component&&this.routeReuseStrategy.shouldDetach(g.value.snapshot)?this.detachAndStoreRouteSubtree(g,P):this.deactivateRouteAndOutlet(g,P)}detachAndStoreRouteSubtree(g,P){let v=P.getContext(g.value.outlet),M=v&&g.value.component?v.children:P,r=xh(g);for(let j of Object.values(r))this.deactivateRouteAndItsChildren(j,M);if(v&&v.outlet){let j=v.outlet.detach(),ce=v.children.onOutletDeactivated();this.routeReuseStrategy.store(g.value.snapshot,{componentRef:j,route:g,contexts:ce})}}deactivateRouteAndOutlet(g,P){let v=P.getContext(g.value.outlet),M=v&&g.value.component?v.children:P,r=xh(g);for(let j of Object.values(r))this.deactivateRouteAndItsChildren(j,M);v&&(v.outlet&&(v.outlet.deactivate(),v.children.onOutletDeactivated()),v.attachRef=null,v.route=null)}activateChildRoutes(g,P,v){let M=xh(P);g.children.forEach(r=>{this.activateRoutes(r,M[r.value.outlet],v),this.forwardEvent(new I1(r.value.snapshot))}),g.children.length&&this.forwardEvent(new S1(g.value.snapshot))}activateRoutes(g,P,v){let M=g.value,r=P?P.value:null;if(g1(M),M===r)if(M.component){let j=v.getOrCreateContext(M.outlet);this.activateChildRoutes(g,P,j.children)}else this.activateChildRoutes(g,P,v);else if(M.component){let j=v.getOrCreateContext(M.outlet);if(this.routeReuseStrategy.shouldAttach(M.snapshot)){let ce=this.routeReuseStrategy.retrieve(M.snapshot);this.routeReuseStrategy.store(M.snapshot,null),j.children.onOutletReAttached(ce.contexts),j.attachRef=ce.componentRef,j.route=ce.route.value,j.outlet&&j.outlet.attach(ce.componentRef,ce.route.value),g1(ce.route.value),this.activateChildRoutes(g,null,j.children)}else{let ce=Af(M.snapshot);j.attachRef=null,j.route=M,j.injector=ce,j.outlet&&j.outlet.activateWith(M,j.injector),this.activateChildRoutes(g,null,j.children)}}else this.activateChildRoutes(g,null,v)}},Tm=class{constructor(g){this.path=g,this.route=this.path[this.path.length-1]}},bh=class{constructor(g,P){this.component=g,this.route=P}};function w3(x,g,P){let v=x._root,M=g?g._root:null;return lf(v,M,P,[v.value])}function C3(x){let g=x.routeConfig?x.routeConfig.canActivateChild:null;return!g||g.length===0?null:{node:x,guards:g}}function Ph(x,g){let P=Symbol(),v=g.get(x,P);return v===P?typeof x=="function"&&!Fw(x)?x:g.get(x):v}function lf(x,g,P,v,M={canDeactivateChecks:[],canActivateChecks:[]}){let r=xh(g);return x.children.forEach(j=>{M3(j,r[j.value.outlet],P,v.concat([j.value]),M),delete r[j.value.outlet]}),Object.entries(r).forEach(([j,ce])=>hf(ce,P.getContext(j),M)),M}function M3(x,g,P,v,M={canDeactivateChecks:[],canActivateChecks:[]}){let r=x.value,j=g?g.value:null,ce=P?P.getContext(x.value.outlet):null;if(j&&r.routeConfig===j.routeConfig){let we=A3(j,r,r.routeConfig.runGuardsAndResolvers);we?M.canActivateChecks.push(new Tm(v)):(r.data=j.data,r._resolvedData=j._resolvedData),r.component?lf(x,g,ce?ce.children:null,v,M):lf(x,g,P,v,M),we&&ce&&ce.outlet&&ce.outlet.isActivated&&M.canDeactivateChecks.push(new bh(ce.outlet.component,j))}else j&&hf(g,ce,M),M.canActivateChecks.push(new Tm(v)),r.component?lf(x,null,ce?ce.children:null,v,M):lf(x,null,P,v,M);return M}function A3(x,g,P){if(typeof P=="function")return P(x,g);switch(P){case"pathParamsChange":return!ad(x.url,g.url);case"pathParamsOrQueryParamsChange":return!ad(x.url,g.url)||!Ks(x.queryParams,g.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!z1(x,g)||!Ks(x.queryParams,g.queryParams);case"paramsChange":default:return!z1(x,g)}}function hf(x,g,P){let v=xh(x),M=x.value;Object.entries(v).forEach(([r,j])=>{M.component?g?hf(j,g.children.getContext(r),P):hf(j,null,P):hf(j,g,P)}),M.component?g&&g.outlet&&g.outlet.isActivated?P.canDeactivateChecks.push(new bh(g.outlet.component,M)):P.canDeactivateChecks.push(new bh(null,M)):P.canDeactivateChecks.push(new bh(null,M))}function Pf(x){return typeof x=="function"}function P3(x){return typeof x=="boolean"}function O3(x){return x&&Pf(x.canLoad)}function T3(x){return x&&Pf(x.canActivate)}function S3(x){return x&&Pf(x.canActivateChild)}function E3(x){return x&&Pf(x.canDeactivate)}function I3(x){return x&&Pf(x.canMatch)}function KC(x){return x instanceof Pw||x?.name==="EmptyError"}var mm=Symbol("INITIAL_VALUE");function Ah(){return oa(x=>td(x.map(g=>g.pipe(Bl(1),Yp(mm)))).pipe(mi(g=>{for(let P of g)if(P!==!0){if(P===mm)return mm;if(P===!1||P instanceof zc)return P}return!0}),zl(g=>g!==mm),Bl(1)))}function D3(x,g){return Br(P=>{let{targetSnapshot:v,currentSnapshot:M,guards:{canActivateChecks:r,canDeactivateChecks:j}}=P;return j.length===0&&r.length===0?Pn($i(Et({},P),{guardsResult:!0})):k3(j,v,M,x).pipe(Br(ce=>ce&&P3(ce)?R3(v,r,x,g):Pn(ce)),mi(ce=>$i(Et({},P),{guardsResult:ce})))})}function k3(x,g,P,v){return lr(x).pipe(Br(M=>N3(M.component,M.route,P,g,v)),Ic(M=>M!==!0,!0))}function R3(x,g,P,v){return lr(g).pipe(uh(M=>Ow(B3(M.route.parent,v),z3(M.route,v),L3(x,M.path,P),F3(x,M.route,P))),Ic(M=>M!==!0,!0))}function z3(x,g){return x!==null&&g&&g(new E1(x)),Pn(!0)}function B3(x,g){return x!==null&&g&&g(new T1(x)),Pn(!0)}function F3(x,g,P){let v=g.routeConfig?g.routeConfig.canActivate:null;if(!v||v.length===0)return Pn(!0);let M=v.map(r=>N0(()=>{let j=Af(g)??P,ce=Ph(r,j),we=T3(ce)?ce.canActivate(g,x):kc(j,()=>ce(g,x));return Nc(we).pipe(Ic())}));return Pn(M).pipe(Ah())}function L3(x,g,P){let v=g[g.length-1],r=g.slice(0,g.length-1).reverse().map(j=>C3(j)).filter(j=>j!==null).map(j=>N0(()=>{let ce=j.guards.map(we=>{let Oe=Af(j.node)??P,Qe=Ph(we,Oe),zt=S3(Qe)?Qe.canActivateChild(v,x):kc(Oe,()=>Qe(v,x));return Nc(zt).pipe(Ic())});return Pn(ce).pipe(Ah())}));return Pn(r).pipe(Ah())}function N3(x,g,P,v,M){let r=g&&g.routeConfig?g.routeConfig.canDeactivate:null;if(!r||r.length===0)return Pn(!0);let j=r.map(ce=>{let we=Af(g)??M,Oe=Ph(ce,we),Qe=E3(Oe)?Oe.canDeactivate(x,g,P,v):kc(we,()=>Oe(x,g,P,v));return Nc(Qe).pipe(Ic())});return Pn(j).pipe(Ah())}function V3(x,g,P,v){let M=g.canLoad;if(M===void 0||M.length===0)return Pn(!0);let r=M.map(j=>{let ce=Ph(j,x),we=O3(ce)?ce.canLoad(g,P):kc(x,()=>ce(g,P));return Nc(we)});return Pn(r).pipe(Ah(),JC(v))}function JC(x){return Mw(Wo(g=>{if(Ch(g))throw YC(x,g)}),mi(g=>g===!0))}function j3(x,g,P,v){let M=g.canMatch;if(!M||M.length===0)return Pn(!0);let r=M.map(j=>{let ce=Ph(j,x),we=I3(ce)?ce.canMatch(g,P):kc(x,()=>ce(g,P));return Nc(we)});return Pn(r).pipe(Ah(),JC(v))}var vf=class{constructor(g){this.segmentGroup=g||null}},Sm=class extends Error{constructor(g){super(),this.urlTree=g}};function yh(x){return Wp(new vf(x))}function U3(x){return Wp(new eo(4e3,!1))}function G3(x){return Wp(XC(!1,ca.GuardRejected))}var L1=class{constructor(g,P){this.urlSerializer=g,this.urlTree=P}lineralizeSegments(g,P){let v=[],M=P.root;for(;;){if(v=v.concat(M.segments),M.numberOfChildren===0)return Pn(v);if(M.numberOfChildren>1||!M.children[$n])return U3(g.redirectTo);M=M.children[$n]}}applyRedirectCommands(g,P,v){let M=this.applyRedirectCreateUrlTree(P,this.urlSerializer.parse(P),g,v);if(P.startsWith("/"))throw new Sm(M);return M}applyRedirectCreateUrlTree(g,P,v,M){let r=this.createSegmentGroup(g,P.root,v,M);return new zc(r,this.createQueryParams(P.queryParams,this.urlTree.queryParams),P.fragment)}createQueryParams(g,P){let v={};return Object.entries(g).forEach(([M,r])=>{if(typeof r=="string"&&r.startsWith(":")){let ce=r.substring(1);v[M]=P[ce]}else v[M]=r}),v}createSegmentGroup(g,P,v,M){let r=this.createSegments(g,P.segments,v,M),j={};return Object.entries(P.children).forEach(([ce,we])=>{j[ce]=this.createSegmentGroup(g,we,v,M)}),new Pi(r,j)}createSegments(g,P,v,M){return P.map(r=>r.path.startsWith(":")?this.findPosParam(g,r,M):this.findOrReturn(r,v))}findPosParam(g,P,v){let M=v[P.path.substring(1)];if(!M)throw new eo(4001,!1);return M}findOrReturn(g,P){let v=0;for(let M of P){if(M.path===g.path)return P.splice(v),M;v++}return g}},N1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H3(x,g,P,v,M){let r=Z1(x,g,P);return r.matched?(v=x3(g,v),j3(v,g,P,M).pipe(mi(j=>j===!0?r:Et({},N1)))):Pn(r)}function Z1(x,g,P){if(g.path==="**")return $3(P);if(g.path==="")return g.pathMatch==="full"&&(x.hasChildren()||P.length>0)?Et({},N1):{matched:!0,consumedSegments:[],remainingSegments:P,parameters:{},positionalParamSegments:{}};let M=(g.matcher||jT)(P,x,g);if(!M)return Et({},N1);let r={};Object.entries(M.posParams??{}).forEach(([ce,we])=>{r[ce]=we.path});let j=M.consumed.length>0?Et(Et({},r),M.consumed[M.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:M.consumed,remainingSegments:P.slice(M.consumed.length),parameters:j,positionalParamSegments:M.posParams??{}}}function $3(x){return{matched:!0,parameters:x.length>0?DC(x).parameters:{},consumedSegments:x,remainingSegments:[],positionalParamSegments:{}}}function OC(x,g,P,v){return P.length>0&&q3(x,P,v)?{segmentGroup:new Pi(g,Z3(v,new Pi(P,x.children))),slicedSegments:[]}:P.length===0&&Y3(x,P,v)?{segmentGroup:new Pi(x.segments,W3(x,P,v,x.children)),slicedSegments:P}:{segmentGroup:new Pi(x.segments,x.children),slicedSegments:P}}function W3(x,g,P,v){let M={};for(let r of P)if(Dm(x,g,r)&&!v[Js(r)]){let j=new Pi([],{});M[Js(r)]=j}return Et(Et({},v),M)}function Z3(x,g){let P={};P[$n]=g;for(let v of x)if(v.path===""&&Js(v)!==$n){let M=new Pi([],{});P[Js(v)]=M}return P}function q3(x,g,P){return P.some(v=>Dm(x,g,v)&&Js(v)!==$n)}function Y3(x,g,P){return P.some(v=>Dm(x,g,v))}function Dm(x,g,P){return(x.hasChildren()||g.length>0)&&P.pathMatch==="full"?!1:P.path===""}function X3(x,g,P,v){return Js(x)!==v&&(v===$n||!Dm(g,P,x))?!1:Z1(g,x,P).matched}function Q3(x,g,P){return g.length===0&&!x.children[P]}var V1=class{};function K3(x,g,P,v,M,r,j="emptyOnly"){return new j1(x,g,P,v,M,j,r).recognize()}var J3=31,j1=class{constructor(g,P,v,M,r,j,ce){this.injector=g,this.configLoader=P,this.rootComponentType=v,this.config=M,this.urlTree=r,this.paramsInheritanceStrategy=j,this.urlSerializer=ce,this.applyRedirects=new L1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(g){return new eo(4002,`'${g.segmentGroup}'`)}recognize(){let g=OC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(g).pipe(mi(P=>{let v=new yf([],Object.freeze({}),Object.freeze(Et({},this.urlTree.queryParams)),this.urlTree.fragment,{},$n,this.rootComponentType,null,{}),M=new la(v,P),r=new Om("",M),j=a3(v,[],this.urlTree.queryParams,this.urlTree.fragment);return j.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(j),this.inheritParamsAndData(r._root,null),{state:r,tree:j}}))}match(g){return this.processSegmentGroup(this.injector,this.config,g,$n).pipe(ch(v=>{if(v instanceof Sm)return this.urlTree=v.urlTree,this.match(v.urlTree.root);throw v instanceof vf?this.noMatchError(v):v}))}inheritParamsAndData(g,P){let v=g.value,M=G1(v,P,this.paramsInheritanceStrategy);v.params=Object.freeze(M.params),v.data=Object.freeze(M.data),g.children.forEach(r=>this.inheritParamsAndData(r,v))}processSegmentGroup(g,P,v,M){return v.segments.length===0&&v.hasChildren()?this.processChildren(g,P,v):this.processSegment(g,P,v,v.segments,M,!0).pipe(mi(r=>r instanceof la?[r]:[]))}processChildren(g,P,v){let M=[];for(let r of Object.keys(v.children))r==="primary"?M.unshift(r):M.push(r);return lr(M).pipe(uh(r=>{let j=v.children[r],ce=v3(P,r);return this.processSegmentGroup(g,ce,j,r)}),Bw((r,j)=>(r.push(...j),r)),j0(null),zw(),Br(r=>{if(r===null)return yh(v);let j=eM(r);return eS(j),Pn(j)}))}processSegment(g,P,v,M,r,j){return lr(P).pipe(uh(ce=>this.processSegmentAgainstRoute(ce._injector??g,P,ce,v,M,r,j).pipe(ch(we=>{if(we instanceof vf)return Pn(null);throw we}))),Ic(ce=>!!ce),ch(ce=>{if(KC(ce))return Q3(v,M,r)?Pn(new V1):yh(v);throw ce}))}processSegmentAgainstRoute(g,P,v,M,r,j,ce){return X3(v,M,r,j)?v.redirectTo===void 0?this.matchSegmentAgainstRoute(g,M,v,r,j):this.allowRedirects&&ce?this.expandSegmentAgainstRouteUsingRedirect(g,M,P,v,r,j):yh(M):yh(M)}expandSegmentAgainstRouteUsingRedirect(g,P,v,M,r,j){let{matched:ce,consumedSegments:we,positionalParamSegments:Oe,remainingSegments:Qe}=Z1(P,M,r);if(!ce)return yh(P);M.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>J3&&(this.allowRedirects=!1));let zt=this.applyRedirects.applyRedirectCommands(we,M.redirectTo,Oe);return this.applyRedirects.lineralizeSegments(M,zt).pipe(Br(jt=>this.processSegment(g,v,P,jt.concat(Qe),j,!1)))}matchSegmentAgainstRoute(g,P,v,M,r){let j=H3(P,v,M,g,this.urlSerializer);return v.path==="**"&&(P.children={}),j.pipe(oa(ce=>ce.matched?(g=v._injector??g,this.getChildConfig(g,v,M).pipe(oa(({routes:we})=>{let Oe=v._loadedInjector??g,{consumedSegments:Qe,remainingSegments:zt,parameters:jt}=ce,Wn=new yf(Qe,jt,Object.freeze(Et({},this.urlTree.queryParams)),this.urlTree.fragment,nS(v),Js(v),v.component??v._loadedComponent??null,v,iS(v)),{segmentGroup:Ui,slicedSegments:Bo}=OC(P,Qe,zt,we);if(Bo.length===0&&Ui.hasChildren())return this.processChildren(Oe,we,Ui).pipe(mi(Po=>Po===null?null:new la(Wn,Po)));if(we.length===0&&Bo.length===0)return Pn(new la(Wn,[]));let lo=Js(v)===r;return this.processSegment(Oe,we,Ui,Bo,lo?$n:r,!0).pipe(mi(Po=>new la(Wn,Po instanceof la?[Po]:[])))}))):yh(P)))}getChildConfig(g,P,v){return P.children?Pn({routes:P.children,injector:g}):P.loadChildren?P._loadedRoutes!==void 0?Pn({routes:P._loadedRoutes,injector:P._loadedInjector}):V3(g,P,v,this.urlSerializer).pipe(Br(M=>M?this.configLoader.loadChildren(g,P).pipe(Wo(r=>{P._loadedRoutes=r.routes,P._loadedInjector=r.injector})):G3(P))):Pn({routes:[],injector:g})}};function eS(x){x.sort((g,P)=>g.value.outlet===$n?-1:P.value.outlet===$n?1:g.value.outlet.localeCompare(P.value.outlet))}function tS(x){let g=x.value.routeConfig;return g&&g.path===""}function eM(x){let g=[],P=new Set;for(let v of x){if(!tS(v)){g.push(v);continue}let M=g.find(r=>v.value.routeConfig===r.value.routeConfig);M!==void 0?(M.children.push(...v.children),P.add(M)):g.push(v)}for(let v of P){let M=eM(v.children);g.push(new la(v.value,M))}return g.filter(v=>!P.has(v))}function nS(x){return x.data||{}}function iS(x){return x.resolve||{}}function oS(x,g,P,v,M,r){return Br(j=>K3(x,g,P,v,j.extractedUrl,M,r).pipe(mi(({state:ce,tree:we})=>$i(Et({},j),{targetSnapshot:ce,urlAfterRedirects:we}))))}function rS(x,g){return Br(P=>{let{targetSnapshot:v,guards:{canActivateChecks:M}}=P;if(!M.length)return Pn(P);let r=new Set(M.map(we=>we.route)),j=new Set;for(let we of r)if(!j.has(we))for(let Oe of tM(we))j.add(Oe);let ce=0;return lr(j).pipe(uh(we=>r.has(we)?aS(we,v,x,g):(we.data=G1(we,we.parent,x).resolve,Pn(void 0))),Wo(()=>ce++),G0(1),Br(we=>ce===j.size?Pn(P):Zs))})}function tM(x){let g=x.children.map(P=>tM(P)).flat();return[x,...g]}function aS(x,g,P,v){let M=x.routeConfig,r=x._resolve;return M?.title!==void 0&&!ZC(M)&&(r[wf]=M.title),sS(r,x,g,v).pipe(mi(j=>(x._resolvedData=j,x.data=G1(x,x.parent,P).resolve,null)))}function sS(x,g,P,v){let M=y1(x);if(M.length===0)return Pn({});let r={};return lr(M).pipe(Br(j=>lS(x[j],g,P,v).pipe(Ic(),Wo(ce=>{r[j]=ce}))),G0(1),kw(r),ch(j=>KC(j)?Zs:Wp(j)))}function lS(x,g,P,v){let M=Af(g)??v,r=Ph(x,M),j=r.resolve?r.resolve(g,P):kc(M,()=>r(g,P));return Nc(j)}function m1(x){return oa(g=>{let P=x(g);return P?lr(P).pipe(mi(()=>g)):Pn(g)})}var nM=(()=>{let g=class g{buildTitle(v){let M,r=v.root;for(;r!==void 0;)M=this.getResolvedTitleForRoute(r)??M,r=r.children.find(j=>j.outlet===$n);return M}getResolvedTitleForRoute(v){return v.data[wf]}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:()=>Wt(cS),providedIn:"root"});let x=g;return x})(),cS=(()=>{let g=class g extends nM{constructor(v){super(),this.title=v}updateTitle(v){let M=this.buildTitle(v);M!==void 0&&this.title.setTitle(M)}};g.\u0275fac=function(M){return new(M||g)(ji(bC))},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),Of=new Yi("",{providedIn:"root",factory:()=>({})}),bf=new Yi(""),q1=(()=>{let g=class g{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Wt(dm)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return Pn(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);let M=Nc(v.loadComponent()).pipe(mi(iM),Wo(j=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=j}),qp(()=>{this.componentLoaders.delete(v)})),r=new L0(M,()=>new ds).pipe(F0());return this.componentLoaders.set(v,r),r}loadChildren(v,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return Pn({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);let j=uS(M,this.compiler,v,this.onLoadEndListener).pipe(qp(()=>{this.childrenLoaders.delete(M)})),ce=new L0(j,()=>new ds).pipe(F0());return this.childrenLoaders.set(M,ce),ce}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();function uS(x,g,P,v){return Nc(x.loadChildren()).pipe(mi(iM),Br(M=>M instanceof Zw||Array.isArray(M)?Pn(M):lr(g.compileModuleAsync(M))),mi(M=>{v&&v(x);let r,j,ce=!1;return Array.isArray(M)?(j=M,ce=!0):(r=M.create(P).injector,j=r.get(bf,[],{optional:!0,self:!0}).flat()),{routes:j.map(W1),injector:r}}))}function dS(x){return x&&typeof x=="object"&&"default"in x}function iM(x){return dS(x)?x.default:x}var Y1=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:()=>Wt(hS),providedIn:"root"});let x=g;return x})(),hS=(()=>{let g=class g{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,M){return v}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),oM=new Yi(""),rM=new Yi("");function pS(x,g,P){let v=x.get(rM),M=x.get(sa);return x.get(Fr).runOutsideAngular(()=>{if(!M.startViewTransition||v.skipNextTransition)return v.skipNextTransition=!1,Promise.resolve();let r,j=new Promise(Oe=>{r=Oe}),ce=M.startViewTransition(()=>(r(),fS(x))),{onViewTransitionCreated:we}=v;return we&&kc(x,()=>we({transition:ce,from:g,to:P})),j})}function fS(x){return new Promise(g=>{Ww(g,{injector:x})})}var X1=(()=>{let g=class g{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ds,this.transitionAbortSubject=new ds,this.configLoader=Wt(q1),this.environmentInjector=Wt(dh),this.urlSerializer=Wt(Cf),this.rootContexts=Wt(Mf),this.location=Wt(nf),this.inputBindingEnabled=Wt(Im,{optional:!0})!==null,this.titleStrategy=Wt(nM),this.options=Wt(Of,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Wt(Y1),this.createViewTransition=Wt(oM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Pn(void 0),this.rootComponentType=null;let v=r=>this.events.next(new P1(r)),M=r=>this.events.next(new O1(r));this.configLoader.onLoadEndListener=M,this.configLoader.onLoadStartListener=v}complete(){this.transitions?.complete()}handleNavigationRequest(v){let M=++this.navigationId;this.transitions?.next($i(Et(Et({},this.transitions.value),v),{id:M}))}setupNavigations(v,M,r){return this.transitions=new bo({id:0,currentUrlTree:M,currentRawUrl:M,extractedUrl:this.urlHandlingStrategy.extract(M),urlAfterRedirects:this.urlHandlingStrategy.extract(M),rawUrl:M,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:df,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(zl(j=>j.id!==0),mi(j=>$i(Et({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),oa(j=>{let ce=!1,we=!1;return Pn(j).pipe(oa(Oe=>{if(this.navigationId>j.id)return this.cancelNavigationTransition(j,"",ca.SupersededByNewNavigation),Zs;this.currentTransition=j,this.currentNavigation={id:Oe.id,initialUrl:Oe.rawUrl,extractedUrl:Oe.extractedUrl,trigger:Oe.source,extras:Oe.extras,previousNavigation:this.lastSuccessfulNavigation?$i(Et({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let Qe=!v.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),zt=Oe.extras.onSameUrlNavigation??v.onSameUrlNavigation;if(!Qe&&zt!=="reload"){let jt="";return this.events.next(new Fc(Oe.id,this.urlSerializer.serialize(Oe.rawUrl),jt,wm.IgnoredSameUrlNavigation)),Oe.resolve(null),Zs}if(this.urlHandlingStrategy.shouldProcessUrl(Oe.rawUrl))return Pn(Oe).pipe(oa(jt=>{let Wn=this.transitions?.getValue();return this.events.next(new Mh(jt.id,this.urlSerializer.serialize(jt.extractedUrl),jt.source,jt.restoredState)),Wn!==this.transitions?.getValue()?Zs:Promise.resolve(jt)}),oS(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,this.paramsInheritanceStrategy),Wo(jt=>{j.targetSnapshot=jt.targetSnapshot,j.urlAfterRedirects=jt.urlAfterRedirects,this.currentNavigation=$i(Et({},this.currentNavigation),{finalUrl:jt.urlAfterRedirects});let Wn=new Cm(jt.id,this.urlSerializer.serialize(jt.extractedUrl),this.urlSerializer.serialize(jt.urlAfterRedirects),jt.targetSnapshot);this.events.next(Wn)}));if(Qe&&this.urlHandlingStrategy.shouldProcessUrl(Oe.currentRawUrl)){let{id:jt,extractedUrl:Wn,source:Ui,restoredState:Bo,extras:lo}=Oe,Po=new Mh(jt,this.urlSerializer.serialize(Wn),Ui,Bo);this.events.next(Po);let jr=$C(this.rootComponentType).snapshot;return this.currentTransition=j=$i(Et({},Oe),{targetSnapshot:jr,urlAfterRedirects:Wn,extras:$i(Et({},lo),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=Wn,Pn(j)}else{let jt="";return this.events.next(new Fc(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),jt,wm.IgnoredByUrlHandlingStrategy)),Oe.resolve(null),Zs}}),Wo(Oe=>{let Qe=new w1(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects),Oe.targetSnapshot);this.events.next(Qe)}),mi(Oe=>(this.currentTransition=j=$i(Et({},Oe),{guards:w3(Oe.targetSnapshot,Oe.currentSnapshot,this.rootContexts)}),j)),D3(this.environmentInjector,Oe=>this.events.next(Oe)),Wo(Oe=>{if(j.guardsResult=Oe.guardsResult,Ch(Oe.guardsResult))throw YC(this.urlSerializer,Oe.guardsResult);let Qe=new C1(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects),Oe.targetSnapshot,!!Oe.guardsResult);this.events.next(Qe)}),zl(Oe=>Oe.guardsResult?!0:(this.cancelNavigationTransition(Oe,"",ca.GuardRejected),!1)),m1(Oe=>{if(Oe.guards.canActivateChecks.length)return Pn(Oe).pipe(Wo(Qe=>{let zt=new M1(Qe.id,this.urlSerializer.serialize(Qe.extractedUrl),this.urlSerializer.serialize(Qe.urlAfterRedirects),Qe.targetSnapshot);this.events.next(zt)}),oa(Qe=>{let zt=!1;return Pn(Qe).pipe(rS(this.paramsInheritanceStrategy,this.environmentInjector),Wo({next:()=>zt=!0,complete:()=>{zt||this.cancelNavigationTransition(Qe,"",ca.NoDataFromResolver)}}))}),Wo(Qe=>{let zt=new A1(Qe.id,this.urlSerializer.serialize(Qe.extractedUrl),this.urlSerializer.serialize(Qe.urlAfterRedirects),Qe.targetSnapshot);this.events.next(zt)}))}),m1(Oe=>{let Qe=zt=>{let jt=[];zt.routeConfig?.loadComponent&&!zt.routeConfig._loadedComponent&&jt.push(this.configLoader.loadComponent(zt.routeConfig).pipe(Wo(Wn=>{zt.component=Wn}),mi(()=>{})));for(let Wn of zt.children)jt.push(...Qe(Wn));return jt};return td(Qe(Oe.targetSnapshot.root)).pipe(j0(null),Bl(1))}),m1(()=>this.afterPreactivation()),oa(()=>{let{currentSnapshot:Oe,targetSnapshot:Qe}=j,zt=this.createViewTransition?.(this.environmentInjector,Oe.root,Qe.root);return zt?lr(zt).pipe(mi(()=>j)):Pn(j)}),mi(Oe=>{let Qe=f3(v.routeReuseStrategy,Oe.targetSnapshot,Oe.currentRouterState);return this.currentTransition=j=$i(Et({},Oe),{targetRouterState:Qe}),this.currentNavigation.targetRouterState=Qe,j}),Wo(()=>{this.events.next(new mf)}),b3(this.rootContexts,v.routeReuseStrategy,Oe=>this.events.next(Oe),this.inputBindingEnabled),Bl(1),Wo({next:Oe=>{ce=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fs(Oe.id,this.urlSerializer.serialize(Oe.extractedUrl),this.urlSerializer.serialize(Oe.urlAfterRedirects))),this.titleStrategy?.updateTitle(Oe.targetRouterState.snapshot),Oe.resolve(!0)},complete:()=>{ce=!0}}),Dc(this.transitionAbortSubject.pipe(Wo(Oe=>{throw Oe}))),qp(()=>{!ce&&!we&&this.cancelNavigationTransition(j,"",ca.SupersededByNewNavigation),this.currentTransition?.id===j.id&&(this.currentNavigation=null,this.currentTransition=null)}),ch(Oe=>{if(we=!0,QC(Oe))this.events.next(new Bc(j.id,this.urlSerializer.serialize(j.extractedUrl),Oe.message,Oe.cancellationCode)),_3(Oe)?this.events.next(new _f(Oe.url)):j.resolve(!1);else{this.events.next(new gf(j.id,this.urlSerializer.serialize(j.extractedUrl),Oe,j.targetSnapshot??void 0));try{j.resolve(v.errorHandler(Oe))}catch(Qe){this.options.resolveNavigationPromiseOnError?j.resolve(!1):j.reject(Qe)}}return Zs}))}))}cancelNavigationTransition(v,M,r){let j=new Bc(v.id,this.urlSerializer.serialize(v.extractedUrl),M,r);this.events.next(j),v.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();function gS(x){return x!==df}var mS=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:()=>Wt(_S),providedIn:"root"});let x=g;return x})(),U1=class{shouldDetach(g){return!1}store(g,P){}shouldAttach(g){return!1}retrieve(g){return null}shouldReuseRoute(g,P){return g.routeConfig===P.routeConfig}},_S=(()=>{let g=class g extends U1{};g.\u0275fac=(()=>{let v;return function(r){return(v||(v=ko(g)))(r||g)}})(),g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),aM=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:()=>Wt(yS),providedIn:"root"});let x=g;return x})(),yS=(()=>{let g=class g extends aM{constructor(){super(...arguments),this.location=Wt(nf),this.urlSerializer=Wt(Cf),this.options=Wt(Of,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Wt(Y1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$C(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(v){return this.location.subscribe(M=>{M.type==="popstate"&&v(M.url,M.state)})}handleRouterEvent(v,M){if(v instanceof Mh)this.stateMemento=this.createStateMemento();else if(v instanceof Fc)this.rawUrlTree=M.initialUrl;else if(v instanceof Cm){if(this.urlUpdateStrategy==="eager"&&!M.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(M.finalUrl,M.initialUrl);this.setBrowserUrl(r,M)}}else v instanceof mf?(this.currentUrlTree=M.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(M.finalUrl,M.initialUrl),this.routerState=M.targetRouterState,this.urlUpdateStrategy==="deferred"&&(M.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,M))):v instanceof Bc&&(v.code===ca.GuardRejected||v.code===ca.NoDataFromResolver)?this.restoreHistory(M):v instanceof gf?this.restoreHistory(M,!0):v instanceof fs&&(this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId)}setBrowserUrl(v,M){let r=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(r)||M.extras.replaceUrl){let j=this.browserPageId,ce=Et(Et({},M.extras.state),this.generateNgRouterState(M.id,j));this.location.replaceState(r,"",ce)}else{let j=Et(Et({},M.extras.state),this.generateNgRouterState(M.id,this.browserPageId+1));this.location.go(r,"",j)}}restoreHistory(v,M=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,j=this.currentPageId-r;j!==0?this.location.historyGo(j):this.currentUrlTree===v.finalUrl&&j===0&&(this.resetState(v),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(M&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,M){return this.canceledNavigationResolution==="computed"?{navigationId:v,\u0275routerPageId:M}:{navigationId:v}}};g.\u0275fac=(()=>{let v;return function(r){return(v||(v=ko(g)))(r||g)}})(),g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),cf=function(x){return x[x.COMPLETE=0]="COMPLETE",x[x.FAILED=1]="FAILED",x[x.REDIRECTING=2]="REDIRECTING",x}(cf||{});function sM(x,g){x.events.pipe(zl(P=>P instanceof fs||P instanceof Bc||P instanceof gf||P instanceof Fc),mi(P=>P instanceof fs||P instanceof Fc?cf.COMPLETE:(P instanceof Bc?P.code===ca.Redirect||P.code===ca.SupersededByNewNavigation:!1)?cf.REDIRECTING:cf.FAILED),zl(P=>P!==cf.REDIRECTING),Bl(1)).subscribe(()=>{g()})}function xS(x){throw x}var vS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},el=(()=>{let g=class g{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Wt(lm),this.stateManager=Wt(aM),this.options=Wt(Of,{optional:!0})||{},this.pendingTasks=Wt(qw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Wt(X1),this.urlSerializer=Wt(Cf),this.location=Wt(nf),this.urlHandlingStrategy=Wt(Y1),this._events=new ds,this.errorHandler=this.options.errorHandler||xS,this.navigated=!1,this.routeReuseStrategy=Wt(mS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Wt(bf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Wt(Im,{optional:!0}),this.eventsSubscription=new Cw,this.isNgZoneEnabled=Wt(Fr)instanceof Fr&&Fr.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:v=>{this.console.warn(v)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let v=this.navigationTransitions.events.subscribe(M=>{try{let r=this.navigationTransitions.currentTransition,j=this.navigationTransitions.currentNavigation;if(r!==null&&j!==null){if(this.stateManager.handleRouterEvent(M,j),M instanceof Bc&&M.code!==ca.Redirect&&M.code!==ca.SupersededByNewNavigation)this.navigated=!0;else if(M instanceof fs)this.navigated=!0;else if(M instanceof _f){let ce=this.urlHandlingStrategy.merge(M.url,r.currentRawUrl),we={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||gS(r.source)};this.scheduleNavigation(ce,df,null,we,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}CS(M)&&this._events.next(M)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),df,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((v,M)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(v,"popstate",M)},0)})}navigateToSyncWithBrowser(v,M,r){let j={replaceUrl:!0},ce=r?.navigationId?r:null;if(r){let Oe=Et({},r);delete Oe.navigationId,delete Oe.\u0275routerPageId,Object.keys(Oe).length!==0&&(j.state=Oe)}let we=this.parseUrl(v);this.scheduleNavigation(we,M,ce,j)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(W1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,M={}){let{relativeTo:r,queryParams:j,fragment:ce,queryParamsHandling:we,preserveFragment:Oe}=M,Qe=Oe?this.currentUrlTree.fragment:ce,zt=null;switch(we){case"merge":zt=Et(Et({},this.currentUrlTree.queryParams),j);break;case"preserve":zt=this.currentUrlTree.queryParams;break;default:zt=j||null}zt!==null&&(zt=this.removeEmptyProps(zt));let jt;try{let Wn=r?r.snapshot:this.routerState.snapshot.root;jt=jC(Wn)}catch{(typeof v[0]!="string"||!v[0].startsWith("/"))&&(v=[]),jt=this.currentUrlTree.root}return UC(jt,v,zt,Qe??null)}navigateByUrl(v,M={skipLocationChange:!1}){let r=Ch(v)?v:this.parseUrl(v),j=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(j,df,null,M)}navigate(v,M={skipLocationChange:!1}){return wS(v),this.navigateByUrl(this.createUrlTree(v,M),M)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){try{return this.urlSerializer.parse(v)}catch{return this.urlSerializer.parse("/")}}isActive(v,M){let r;if(M===!0?r=Et({},vS):M===!1?r=Et({},bS):r=M,Ch(v))return wC(this.currentUrlTree,v,r);let j=this.parseUrl(v);return wC(this.currentUrlTree,j,r)}removeEmptyProps(v){return Object.entries(v).reduce((M,[r,j])=>(j!=null&&(M[r]=j),M),{})}scheduleNavigation(v,M,r,j,ce){if(this.disposed)return Promise.resolve(!1);let we,Oe,Qe;ce?(we=ce.resolve,Oe=ce.reject,Qe=ce.promise):Qe=new Promise((jt,Wn)=>{we=jt,Oe=Wn});let zt=this.pendingTasks.add();return sM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(zt))}),this.navigationTransitions.handleNavigationRequest({source:M,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:v,extras:j,resolve:we,reject:Oe,promise:Qe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Qe.catch(jt=>Promise.reject(jt))}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();function wS(x){for(let g=0;g<x.length;g++)if(x[g]==null)throw new eo(4008,!1)}function CS(x){return!(x instanceof mf)&&!(x instanceof _f)}var tl=(()=>{let g=class g{constructor(v,M,r,j,ce,we){this.router=v,this.route=M,this.tabIndexAttribute=r,this.renderer=j,this.el=ce,this.locationStrategy=we,this.href=null,this.commands=null,this.onChanges=new ds,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let Oe=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement=Oe==="a"||Oe==="area",this.isAnchorElement?this.subscription=v.events.subscribe(Qe=>{Qe instanceof fs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){v!=null?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,M,r,j,ce){let we=this.urlTree;if(we===null||this.isAnchorElement&&(v!==0||M||r||j||ce||typeof this.target=="string"&&this.target!="_self"))return!0;let Oe={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(we,Oe),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let v=this.urlTree;this.href=v!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(v)):null;let M=this.href===null?null:Gw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",M)}applyAttributeValue(v,M){let r=this.renderer,j=this.el.nativeElement;M!==null?r.setAttribute(j,v,M):r.removeAttribute(j,v)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};g.\u0275fac=function(M){return new(M||g)(Ai(el),Ai(Lc),Z0("tabindex"),Ai(ph),Ai(qs),Ai(_h))},g.\u0275dir=Do({type:g,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(M,r){M&1&&Xi("click",function(ce){return r.onClick(ce.button,ce.ctrlKey,ce.shiftKey,ce.altKey,ce.metaKey)}),M&2&&Wi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[cr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",od],skipLocationChange:[cr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",od],replaceUrl:[cr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",od],routerLink:"routerLink"},standalone:!0,features:[fh,Rc]});let x=g;return x})(),lM=(()=>{let g=class g{get isActive(){return this._isActive}constructor(v,M,r,j,ce){this.router=v,this.element=M,this.renderer=r,this.cdr=j,this.link=ce,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ro,this.routerEventsSubscription=v.events.subscribe(we=>{we instanceof fs&&this.update()})}ngAfterContentInit(){Pn(this.links.changes,Pn(null)).pipe(Zp()).subscribe(v=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let v=[...this.links.toArray(),this.link].filter(M=>!!M).map(M=>M.onChanges);this.linkInputChangesSubscription=lr(v).pipe(Zp()).subscribe(M=>{this._isActive!==this.isLinkActive(this.router)(M)&&this.update()})}set routerLinkActive(v){let M=Array.isArray(v)?v:v.split(" ");this.classes=M.filter(r=>!!r)}ngOnChanges(v){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let v=this.hasActiveLinks();this.classes.forEach(M=>{v?this.renderer.addClass(this.element.nativeElement,M):this.renderer.removeClass(this.element.nativeElement,M)}),v&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==v&&(this._isActive=v,this.cdr.markForCheck(),this.isActiveChange.emit(v))})}isLinkActive(v){let M=MS(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let j=r.urlTree;return j?v.isActive(j,M):!1}}hasActiveLinks(){let v=this.isLinkActive(this.router);return this.link&&v(this.link)||this.links.some(v)}};g.\u0275fac=function(M){return new(M||g)(Ai(el),Ai(qs),Ai(ph),Ai(Ll),Ai(tl,8))},g.\u0275dir=Do({type:g,selectors:[["","routerLinkActive",""]],contentQueries:function(M,r,j){if(M&1&&ef(j,tl,5),M&2){let ce;ra(ce=aa())&&(r.links=ce)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Rc]});let x=g;return x})();function MS(x){return!!x.paths}var Em=class{};var AS=(()=>{let g=class g{constructor(v,M,r,j,ce){this.router=v,this.injector=r,this.preloadingStrategy=j,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe(zl(v=>v instanceof fs),uh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,M){let r=[];for(let j of M){j.providers&&!j._injector&&(j._injector=e1(j.providers,v,`Route: ${j.path}`));let ce=j._injector??v,we=j._loadedInjector??ce;(j.loadChildren&&!j._loadedRoutes&&j.canLoad===void 0||j.loadComponent&&!j._loadedComponent)&&r.push(this.preloadConfig(ce,j)),(j.children||j._loadedRoutes)&&r.push(this.processRoutes(we,j.children??j._loadedRoutes))}return lr(r).pipe(Zp())}preloadConfig(v,M){return this.preloadingStrategy.preload(M,()=>{let r;M.loadChildren&&M.canLoad===void 0?r=this.loader.loadChildren(v,M):r=Pn(null);let j=r.pipe(Br(ce=>ce===null?Pn(void 0):(M._loadedRoutes=ce.routes,M._loadedInjector=ce.injector,this.processRoutes(ce.injector??v,ce.routes))));if(M.loadComponent&&!M._loadedComponent){let ce=this.loader.loadComponent(M);return lr([j,ce]).pipe(Zp())}else return j})}};g.\u0275fac=function(M){return new(M||g)(ji(el),ji(dm),ji(dh),ji(Em),ji(q1))},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),cM=new Yi(""),PS=(()=>{let g=class g{constructor(v,M,r,j,ce={}){this.urlSerializer=v,this.transitions=M,this.viewportScroller=r,this.zone=j,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration||="disabled",ce.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Mh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof fs?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Fc&&v.code===wm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Mm&&(v.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(v.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Mm(v,this.lastSource==="popstate"?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};g.\u0275fac=function(M){Hw()},g.\u0275prov=pi({token:g,factory:g.\u0275fac});let x=g;return x})();function uM(x,...g){return W0([{provide:bf,multi:!0,useValue:x},[],{provide:Lc,useFactory:dM,deps:[el]},{provide:i1,multi:!0,useFactory:hM},g.map(P=>P.\u0275providers)])}function dM(x){return x.routerState.root}function Oh(x,g){return{\u0275kind:x,\u0275providers:g}}function hM(){let x=Wt(hh);return g=>{let P=x.get(um);if(g!==P.components[0])return;let v=x.get(el),M=x.get(pM);x.get(Q1)===1&&v.initialNavigation(),x.get(fM,null,H0.Optional)?.setUpPreloading(),x.get(cM,null,H0.Optional)?.init(),v.resetRootComponentType(P.componentTypes[0]),M.closed||(M.next(),M.complete(),M.unsubscribe())}}var pM=new Yi("",{factory:()=>new ds}),Q1=new Yi("",{providedIn:"root",factory:()=>1});function OS(){return Oh(2,[{provide:Q1,useValue:0},{provide:n1,multi:!0,deps:[hh],useFactory:g=>{let P=g.get(oC,Promise.resolve());return()=>P.then(()=>new Promise(v=>{let M=g.get(el),r=g.get(pM);sM(M,()=>{v(!0)}),g.get(X1).afterPreactivation=()=>(v(!0),r.closed?Pn(void 0):r),M.initialNavigation()}))}}])}function TS(){return Oh(3,[{provide:n1,multi:!0,useFactory:()=>{let g=Wt(el);return()=>{g.setUpLocationChangeListener()}}},{provide:Q1,useValue:2}])}var fM=new Yi("");function SS(x){return Oh(0,[{provide:fM,useExisting:AS},{provide:Em,useExisting:x}])}function gM(){return Oh(6,[{provide:_h,useClass:o1}])}function ES(){return Oh(8,[PC,{provide:Im,useExisting:PC}])}function IS(x){let g=[{provide:oM,useValue:pS},{provide:rM,useValue:Et({skipNextTransition:!!x?.skipInitialTransition},x)}];return Oh(9,g)}var TC=new Yi("ROUTER_FORROOT_GUARD"),DS=[nf,{provide:Cf,useClass:pf},el,Mf,{provide:Lc,useFactory:dM,deps:[el]},q1,[]],nl=(()=>{let g=class g{constructor(v){}static forRoot(v,M){return{ngModule:g,providers:[DS,[],{provide:bf,multi:!0,useValue:v},{provide:TC,useFactory:BS,deps:[[el,new $0,new Lw]]},{provide:Of,useValue:M||{}},M?.useHash?RS():zS(),kS(),M?.preloadingStrategy?SS(M.preloadingStrategy).\u0275providers:[],M?.initialNavigation?FS(M):[],M?.bindToComponentInputs?ES().\u0275providers:[],M?.enableViewTransitions?IS().\u0275providers:[],LS()]}}static forChild(v){return{ngModule:g,providers:[{provide:bf,multi:!0,useValue:v}]}}};g.\u0275fac=function(M){return new(M||g)(ji(TC,8))},g.\u0275mod=Ar({type:g}),g.\u0275inj=Mr({});let x=g;return x})();function kS(){return{provide:cM,useFactory:()=>{let x=Wt(uC),g=Wt(Fr),P=Wt(Of),v=Wt(X1),M=Wt(Cf);return P.scrollOffset&&x.setOffset(P.scrollOffset),new PS(M,v,x,g,P)}}}function RS(){return{provide:_h,useClass:o1}}function zS(){return{provide:_h,useClass:rC}}function BS(x){return"guarded"}function FS(x){return[x.initialNavigation==="disabled"?TS().\u0275providers:[],x.initialNavigation==="enabledBlocking"?OS().\u0275providers:[]]}var SC=new Yi("");function LS(){return[{provide:SC,useFactory:hM},{provide:i1,multi:!0,useExisting:SC}]}function Rm(x){x||(Vw(Rm),x=Wt(om));let g=new im(P=>x.onDestroy(P.next.bind(P)));return P=>P.pipe(Dc(g))}var MM=(()=>{let g=class g{constructor(v,M){this._renderer=v,this._elementRef=M,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(v,M){this._renderer.setProperty(this._elementRef.nativeElement,v,M)}registerOnTouched(v){this.onTouched=v}registerOnChange(v){this.onChange=v}setDisabledState(v){this.setProperty("disabled",v)}};g.\u0275fac=function(M){return new(M||g)(Ai(ph),Ai(qs))},g.\u0275dir=Do({type:g});let x=g;return x})(),NS=(()=>{let g=class g extends MM{};g.\u0275fac=(()=>{let v;return function(r){return(v||(v=ko(g)))(r||g)}})(),g.\u0275dir=Do({type:g,features:[wo]});let x=g;return x})(),AM=new Yi("");var VS={provide:AM,useExisting:Xp(()=>Gm),multi:!0};function jS(){let x=mh()?mh().getUserAgent():"";return/android (\d+)/.test(x.toLowerCase())}var US=new Yi(""),Gm=(()=>{let g=class g extends MM{constructor(v,M,r){super(v,M),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!jS())}writeValue(v){let M=v??"";this.setProperty("value",M)}_handleInput(v){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(v)}_compositionStart(){this._composing=!0}_compositionEnd(v){this._composing=!1,this._compositionMode&&this.onChange(v)}};g.\u0275fac=function(M){return new(M||g)(Ai(ph),Ai(qs),Ai(US,8))},g.\u0275dir=Do({type:g,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,r){M&1&&Xi("input",function(ce){return r._handleInput(ce.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(ce){return r._compositionEnd(ce.target.value)})},features:[tf([VS]),wo]});let x=g;return x})();function Vc(x){return x==null||(typeof x=="string"||Array.isArray(x))&&x.length===0}function PM(x){return x!=null&&typeof x.length=="number"}var OM=new Yi(""),TM=new Yi(""),GS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sd=class{static min(g){return HS(g)}static max(g){return $S(g)}static required(g){return WS(g)}static requiredTrue(g){return ZS(g)}static email(g){return qS(g)}static minLength(g){return YS(g)}static maxLength(g){return XS(g)}static pattern(g){return QS(g)}static nullValidator(g){return SM(g)}static compose(g){return zM(g)}static composeAsync(g){return FM(g)}};function HS(x){return g=>{if(Vc(g.value)||Vc(x))return null;let P=parseFloat(g.value);return!isNaN(P)&&P<x?{min:{min:x,actual:g.value}}:null}}function $S(x){return g=>{if(Vc(g.value)||Vc(x))return null;let P=parseFloat(g.value);return!isNaN(P)&&P>x?{max:{max:x,actual:g.value}}:null}}function WS(x){return Vc(x.value)?{required:!0}:null}function ZS(x){return x.value===!0?null:{required:!0}}function qS(x){return Vc(x.value)||GS.test(x.value)?null:{email:!0}}function YS(x){return g=>Vc(g.value)||!PM(g.value)?null:g.value.length<x?{minlength:{requiredLength:x,actualLength:g.value.length}}:null}function XS(x){return g=>PM(g.value)&&g.value.length>x?{maxlength:{requiredLength:x,actualLength:g.value.length}}:null}function QS(x){if(!x)return SM;let g,P;return typeof x=="string"?(P="",x.charAt(0)!=="^"&&(P+="^"),P+=x,x.charAt(x.length-1)!=="$"&&(P+="$"),g=new RegExp(P)):(P=x.toString(),g=x),v=>{if(Vc(v.value))return null;let M=v.value;return g.test(M)?null:{pattern:{requiredPattern:P,actualValue:M}}}}function SM(x){return null}function EM(x){return x!=null}function IM(x){return cm(x)?lr(x):x}function DM(x){let g={};return x.forEach(P=>{g=P!=null?Et(Et({},g),P):g}),Object.keys(g).length===0?null:g}function kM(x,g){return g.map(P=>P(x))}function KS(x){return!x.validate}function RM(x){return x.map(g=>KS(g)?g:P=>g.validate(P))}function zM(x){if(!x)return null;let g=x.filter(EM);return g.length==0?null:function(P){return DM(kM(P,g))}}function BM(x){return x!=null?zM(RM(x)):null}function FM(x){if(!x)return null;let g=x.filter(EM);return g.length==0?null:function(P){let v=kM(P,g).map(IM);return Tw(v).pipe(mi(DM))}}function LM(x){return x!=null?FM(RM(x)):null}function mM(x,g){return x===null?[g]:Array.isArray(x)?[...x,g]:[x,g]}function NM(x){return x._rawValidators}function VM(x){return x._rawAsyncValidators}function K1(x){return x?Array.isArray(x)?x:[x]:[]}function Fm(x,g){return Array.isArray(x)?x.includes(g):x===g}function _M(x,g){let P=K1(g);return K1(x).forEach(M=>{Fm(P,M)||P.push(M)}),P}function yM(x,g){return K1(g).filter(P=>!Fm(x,P))}var Lm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(g){this._rawValidators=g||[],this._composedValidatorFn=BM(this._rawValidators)}_setAsyncValidators(g){this._rawAsyncValidators=g||[],this._composedAsyncValidatorFn=LM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(g){this._onDestroyCallbacks.push(g)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(g=>g()),this._onDestroyCallbacks=[]}reset(g=void 0){this.control&&this.control.reset(g)}hasError(g,P){return this.control?this.control.hasError(g,P):!1}getError(g,P){return this.control?this.control.getError(g,P):null}},Sh=class extends Lm{get formDirective(){return null}get path(){return null}},Ef=class extends Lm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Nm=class{constructor(g){this._cd=g}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},JS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},BD=$i(Et({},JS),{"[class.ng-submitted]":"isSubmitted"}),jM=(()=>{let g=class g extends Nm{constructor(v){super(v)}};g.\u0275fac=function(M){return new(M||g)(Ai(Ef,2))},g.\u0275dir=Do({type:g,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,r){M&2&&id("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[wo]});let x=g;return x})(),UM=(()=>{let g=class g extends Nm{constructor(v){super(v)}};g.\u0275fac=function(M){return new(M||g)(Ai(Sh,10))},g.\u0275dir=Do({type:g,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,r){M&2&&id("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[wo]});let x=g;return x})();var Tf="VALID",zm="INVALID",Th="PENDING",Sf="DISABLED";function ty(x){return(Hm(x)?x.validators:x)||null}function eE(x){return Array.isArray(x)?BM(x):x||null}function ny(x,g){return(Hm(g)?g.asyncValidators:x)||null}function tE(x){return Array.isArray(x)?LM(x):x||null}function Hm(x){return x!=null&&!Array.isArray(x)&&typeof x=="object"}function GM(x,g,P){let v=x.controls;if(!(g?Object.keys(v):v).length)throw new eo(1e3,"");if(!v[P])throw new eo(1001,"")}function HM(x,g,P){x._forEachChild((v,M)=>{if(P[M]===void 0)throw new eo(1002,"")})}var Eh=class{constructor(g,P){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(g),this._assignAsyncValidators(P)}get validator(){return this._composedValidatorFn}set validator(g){this._rawValidators=this._composedValidatorFn=g}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(g){this._rawAsyncValidators=this._composedAsyncValidatorFn=g}get parent(){return this._parent}get valid(){return this.status===Tf}get invalid(){return this.status===zm}get pending(){return this.status==Th}get disabled(){return this.status===Sf}get enabled(){return this.status!==Sf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(g){this._assignValidators(g)}setAsyncValidators(g){this._assignAsyncValidators(g)}addValidators(g){this.setValidators(_M(g,this._rawValidators))}addAsyncValidators(g){this.setAsyncValidators(_M(g,this._rawAsyncValidators))}removeValidators(g){this.setValidators(yM(g,this._rawValidators))}removeAsyncValidators(g){this.setAsyncValidators(yM(g,this._rawAsyncValidators))}hasValidator(g){return Fm(this._rawValidators,g)}hasAsyncValidator(g){return Fm(this._rawAsyncValidators,g)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(g={}){this.touched=!0,this._parent&&!g.onlySelf&&this._parent.markAsTouched(g)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(g=>g.markAllAsTouched())}markAsUntouched(g={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(P=>{P.markAsUntouched({onlySelf:!0})}),this._parent&&!g.onlySelf&&this._parent._updateTouched(g)}markAsDirty(g={}){this.pristine=!1,this._parent&&!g.onlySelf&&this._parent.markAsDirty(g)}markAsPristine(g={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(P=>{P.markAsPristine({onlySelf:!0})}),this._parent&&!g.onlySelf&&this._parent._updatePristine(g)}markAsPending(g={}){this.status=Th,g.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!g.onlySelf&&this._parent.markAsPending(g)}disable(g={}){let P=this._parentMarkedDirty(g.onlySelf);this.status=Sf,this.errors=null,this._forEachChild(v=>{v.disable($i(Et({},g),{onlySelf:!0}))}),this._updateValue(),g.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($i(Et({},g),{skipPristineCheck:P})),this._onDisabledChange.forEach(v=>v(!0))}enable(g={}){let P=this._parentMarkedDirty(g.onlySelf);this.status=Tf,this._forEachChild(v=>{v.enable($i(Et({},g),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:g.emitEvent}),this._updateAncestors($i(Et({},g),{skipPristineCheck:P})),this._onDisabledChange.forEach(v=>v(!1))}_updateAncestors(g){this._parent&&!g.onlySelf&&(this._parent.updateValueAndValidity(g),g.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(g){this._parent=g}getRawValue(){return this.value}updateValueAndValidity(g={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tf||this.status===Th)&&this._runAsyncValidator(g.emitEvent)),g.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!g.onlySelf&&this._parent.updateValueAndValidity(g)}_updateTreeValidity(g={emitEvent:!0}){this._forEachChild(P=>P._updateTreeValidity(g)),this.updateValueAndValidity({onlySelf:!0,emitEvent:g.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sf:Tf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(g){if(this.asyncValidator){this.status=Th,this._hasOwnPendingAsyncValidator=!0;let P=IM(this.asyncValidator(this));this._asyncValidationSubscription=P.subscribe(v=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(v,{emitEvent:g})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(g,P={}){this.errors=g,this._updateControlsErrors(P.emitEvent!==!1)}get(g){let P=g;return P==null||(Array.isArray(P)||(P=P.split(".")),P.length===0)?null:P.reduce((v,M)=>v&&v._find(M),this)}getError(g,P){let v=P?this.get(P):this;return v&&v.errors?v.errors[g]:null}hasError(g,P){return!!this.getError(g,P)}get root(){let g=this;for(;g._parent;)g=g._parent;return g}_updateControlsErrors(g){this.status=this._calculateStatus(),g&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(g)}_initObservables(){this.valueChanges=new Ro,this.statusChanges=new Ro}_calculateStatus(){return this._allControlsDisabled()?Sf:this.errors?zm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Th)?Th:this._anyControlsHaveStatus(zm)?zm:Tf}_anyControlsHaveStatus(g){return this._anyControls(P=>P.status===g)}_anyControlsDirty(){return this._anyControls(g=>g.dirty)}_anyControlsTouched(){return this._anyControls(g=>g.touched)}_updatePristine(g={}){this.pristine=!this._anyControlsDirty(),this._parent&&!g.onlySelf&&this._parent._updatePristine(g)}_updateTouched(g={}){this.touched=this._anyControlsTouched(),this._parent&&!g.onlySelf&&this._parent._updateTouched(g)}_registerOnCollectionChange(g){this._onCollectionChange=g}_setUpdateStrategy(g){Hm(g)&&g.updateOn!=null&&(this._updateOn=g.updateOn)}_parentMarkedDirty(g){let P=this._parent&&this._parent.dirty;return!g&&!!P&&!this._parent._anyControlsDirty()}_find(g){return null}_assignValidators(g){this._rawValidators=Array.isArray(g)?g.slice():g,this._composedValidatorFn=eE(this._rawValidators)}_assignAsyncValidators(g){this._rawAsyncValidators=Array.isArray(g)?g.slice():g,this._composedAsyncValidatorFn=tE(this._rawAsyncValidators)}},Vm=class extends Eh{constructor(g,P,v){super(ty(P),ny(v,P)),this.controls=g,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(g,P){return this.controls[g]?this.controls[g]:(this.controls[g]=P,P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange),P)}addControl(g,P,v={}){this.registerControl(g,P),this.updateValueAndValidity({emitEvent:v.emitEvent}),this._onCollectionChange()}removeControl(g,P={}){this.controls[g]&&this.controls[g]._registerOnCollectionChange(()=>{}),delete this.controls[g],this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}setControl(g,P,v={}){this.controls[g]&&this.controls[g]._registerOnCollectionChange(()=>{}),delete this.controls[g],P&&this.registerControl(g,P),this.updateValueAndValidity({emitEvent:v.emitEvent}),this._onCollectionChange()}contains(g){return this.controls.hasOwnProperty(g)&&this.controls[g].enabled}setValue(g,P={}){HM(this,!0,g),Object.keys(g).forEach(v=>{GM(this,!0,v),this.controls[v].setValue(g[v],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(g,P={}){g!=null&&(Object.keys(g).forEach(v=>{let M=this.controls[v];M&&M.patchValue(g[v],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(g={},P={}){this._forEachChild((v,M)=>{v.reset(g?g[M]:null,{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this._reduceChildren({},(g,P,v)=>(g[v]=P.getRawValue(),g))}_syncPendingControls(){let g=this._reduceChildren(!1,(P,v)=>v._syncPendingControls()?!0:P);return g&&this.updateValueAndValidity({onlySelf:!0}),g}_forEachChild(g){Object.keys(this.controls).forEach(P=>{let v=this.controls[P];v&&g(v,P)})}_setUpControls(){this._forEachChild(g=>{g.setParent(this),g._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(g){for(let[P,v]of Object.entries(this.controls))if(this.contains(P)&&g(v))return!0;return!1}_reduceValue(){let g={};return this._reduceChildren(g,(P,v,M)=>((v.enabled||this.disabled)&&(P[M]=v.value),P))}_reduceChildren(g,P){let v=g;return this._forEachChild((M,r)=>{v=P(v,M,r)}),v}_allControlsDisabled(){for(let g of Object.keys(this.controls))if(this.controls[g].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(g){return this.controls.hasOwnProperty(g)?this.controls[g]:null}};var J1=class extends Vm{};var $M=new Yi("CallSetDisabledState",{providedIn:"root",factory:()=>iy}),iy="always";function nE(x,g){return[...g.path,x]}function xM(x,g,P=iy){oy(x,g),g.valueAccessor.writeValue(x.value),(x.disabled||P==="always")&&g.valueAccessor.setDisabledState?.(x.disabled),oE(x,g),aE(x,g),rE(x,g),iE(x,g)}function vM(x,g,P=!0){let v=()=>{};g.valueAccessor&&(g.valueAccessor.registerOnChange(v),g.valueAccessor.registerOnTouched(v)),Um(x,g),x&&(g._invokeOnDestroyCallbacks(),x._registerOnCollectionChange(()=>{}))}function jm(x,g){x.forEach(P=>{P.registerOnValidatorChange&&P.registerOnValidatorChange(g)})}function iE(x,g){if(g.valueAccessor.setDisabledState){let P=v=>{g.valueAccessor.setDisabledState(v)};x.registerOnDisabledChange(P),g._registerOnDestroy(()=>{x._unregisterOnDisabledChange(P)})}}function oy(x,g){let P=NM(x);g.validator!==null?x.setValidators(mM(P,g.validator)):typeof P=="function"&&x.setValidators([P]);let v=VM(x);g.asyncValidator!==null?x.setAsyncValidators(mM(v,g.asyncValidator)):typeof v=="function"&&x.setAsyncValidators([v]);let M=()=>x.updateValueAndValidity();jm(g._rawValidators,M),jm(g._rawAsyncValidators,M)}function Um(x,g){let P=!1;if(x!==null){if(g.validator!==null){let M=NM(x);if(Array.isArray(M)&&M.length>0){let r=M.filter(j=>j!==g.validator);r.length!==M.length&&(P=!0,x.setValidators(r))}}if(g.asyncValidator!==null){let M=VM(x);if(Array.isArray(M)&&M.length>0){let r=M.filter(j=>j!==g.asyncValidator);r.length!==M.length&&(P=!0,x.setAsyncValidators(r))}}}let v=()=>{};return jm(g._rawValidators,v),jm(g._rawAsyncValidators,v),P}function oE(x,g){g.valueAccessor.registerOnChange(P=>{x._pendingValue=P,x._pendingChange=!0,x._pendingDirty=!0,x.updateOn==="change"&&WM(x,g)})}function rE(x,g){g.valueAccessor.registerOnTouched(()=>{x._pendingTouched=!0,x.updateOn==="blur"&&x._pendingChange&&WM(x,g),x.updateOn!=="submit"&&x.markAsTouched()})}function WM(x,g){x._pendingDirty&&x.markAsDirty(),x.setValue(x._pendingValue,{emitModelToViewChange:!1}),g.viewToModelUpdate(x._pendingValue),x._pendingChange=!1}function aE(x,g){let P=(v,M)=>{g.valueAccessor.writeValue(v),M&&g.viewToModelUpdate(v)};x.registerOnChange(P),g._registerOnDestroy(()=>{x._unregisterOnChange(P)})}function sE(x,g){x==null,oy(x,g)}function lE(x,g){return Um(x,g)}function cE(x,g){if(!x.hasOwnProperty("model"))return!1;let P=x.model;return P.isFirstChange()?!0:!Object.is(g,P.currentValue)}function uE(x){return Object.getPrototypeOf(x.constructor)===NS}function dE(x,g){x._syncPendingControls(),g.forEach(P=>{let v=P.control;v.updateOn==="submit"&&v._pendingChange&&(P.viewToModelUpdate(v._pendingValue),v._pendingChange=!1)})}function hE(x,g){if(!g)return null;Array.isArray(g);let P,v,M;return g.forEach(r=>{r.constructor===Gm?P=r:uE(r)?v=r:M=r}),M||v||P||null}function pE(x,g){let P=x.indexOf(g);P>-1&&x.splice(P,1)}function bM(x,g){let P=x.indexOf(g);P>-1&&x.splice(P,1)}function wM(x){return typeof x=="object"&&x!==null&&Object.keys(x).length===2&&"value"in x&&"disabled"in x}var Bm=class extends Eh{constructor(g=null,P,v){super(ty(P),ny(v,P)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(g),this._setUpdateStrategy(P),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Hm(P)&&(P.nonNullable||P.initialValueIsDefault)&&(wM(g)?this.defaultValue=g.value:this.defaultValue=g)}setValue(g,P={}){this.value=this._pendingValue=g,this._onChange.length&&P.emitModelToViewChange!==!1&&this._onChange.forEach(v=>v(this.value,P.emitViewToModelChange!==!1)),this.updateValueAndValidity(P)}patchValue(g,P={}){this.setValue(g,P)}reset(g=this.defaultValue,P={}){this._applyFormState(g),this.markAsPristine(P),this.markAsUntouched(P),this.setValue(this.value,P),this._pendingChange=!1}_updateValue(){}_anyControls(g){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(g){this._onChange.push(g)}_unregisterOnChange(g){bM(this._onChange,g)}registerOnDisabledChange(g){this._onDisabledChange.push(g)}_unregisterOnDisabledChange(g){bM(this._onDisabledChange,g)}_forEachChild(g){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(g){wM(g)?(this.value=this._pendingValue=g.value,g.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=g}};var fE=x=>x instanceof Bm;var ZM=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275dir=Do({type:g,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let x=g;return x})();var qM=new Yi("");var gE={provide:Sh,useExisting:Xp(()=>ry)},ry=(()=>{let g=class g extends Sh{constructor(v,M,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ro,this._setValidators(v),this._setAsyncValidators(M)}ngOnChanges(v){this._checkFormPresent(),v.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Um(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(v){let M=this.form.get(v.path);return xM(M,v,this.callSetDisabledState),M.updateValueAndValidity({emitEvent:!1}),this.directives.push(v),M}getControl(v){return this.form.get(v.path)}removeControl(v){vM(v.control||null,v,!1),pE(this.directives,v)}addFormGroup(v){this._setUpFormContainer(v)}removeFormGroup(v){this._cleanUpFormContainer(v)}getFormGroup(v){return this.form.get(v.path)}addFormArray(v){this._setUpFormContainer(v)}removeFormArray(v){this._cleanUpFormContainer(v)}getFormArray(v){return this.form.get(v.path)}updateModel(v,M){this.form.get(v.path).setValue(M)}onSubmit(v){return this.submitted=!0,dE(this.form,this.directives),this.ngSubmit.emit(v),v?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(v=void 0){this.form.reset(v),this.submitted=!1}_updateDomValue(){this.directives.forEach(v=>{let M=v.control,r=this.form.get(v.path);M!==r&&(vM(M||null,v),fE(r)&&(xM(r,v,this.callSetDisabledState),v.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(v){let M=this.form.get(v.path);sE(M,v),M.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(v){if(this.form){let M=this.form.get(v.path);M&&lE(M,v)&&M.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oy(this.form,this),this._oldForm&&Um(this._oldForm,this)}_checkFormPresent(){this.form}};g.\u0275fac=function(M){return new(M||g)(Ai(OM,10),Ai(TM,10),Ai($M,8))},g.\u0275dir=Do({type:g,selectors:[["","formGroup",""]],hostBindings:function(M,r){M&1&&Xi("submit",function(ce){return r.onSubmit(ce)})("reset",function(){return r.onReset()})},inputs:{form:[cr.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[tf([gE]),wo,Rc]});let x=g;return x})();var mE={provide:Ef,useExisting:Xp(()=>ay)},ay=(()=>{let g=class g extends Ef{set isDisabled(v){}constructor(v,M,r,j,ce){super(),this._ngModelWarningConfig=ce,this._added=!1,this.name=null,this.update=new Ro,this._ngModelWarningSent=!1,this._parent=v,this._setValidators(M),this._setAsyncValidators(r),this.valueAccessor=hE(this,j)}ngOnChanges(v){this._added||this._setUpControl(),cE(v,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(v){this.viewModel=v,this.update.emit(v)}get path(){return nE(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};g._ngModelWarningSentOnce=!1,g.\u0275fac=function(M){return new(M||g)(Ai(Sh,13),Ai(OM,10),Ai(TM,10),Ai(AM,10),Ai(qM,8))},g.\u0275dir=Do({type:g,selectors:[["","formControlName",""]],inputs:{name:[cr.None,"formControlName","name"],isDisabled:[cr.None,"disabled","isDisabled"],model:[cr.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[tf([mE]),wo,Rc]});let x=g;return x})();var _E=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275mod=Ar({type:g}),g.\u0275inj=Mr({});let x=g;return x})(),ey=class extends Eh{constructor(g,P,v){super(ty(P),ny(v,P)),this.controls=g,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(g){return this.controls[this._adjustIndex(g)]}push(g,P={}){this.controls.push(g),this._registerControl(g),this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}insert(g,P,v={}){this.controls.splice(g,0,P),this._registerControl(P),this.updateValueAndValidity({emitEvent:v.emitEvent})}removeAt(g,P={}){let v=this._adjustIndex(g);v<0&&(v=0),this.controls[v]&&this.controls[v]._registerOnCollectionChange(()=>{}),this.controls.splice(v,1),this.updateValueAndValidity({emitEvent:P.emitEvent})}setControl(g,P,v={}){let M=this._adjustIndex(g);M<0&&(M=0),this.controls[M]&&this.controls[M]._registerOnCollectionChange(()=>{}),this.controls.splice(M,1),P&&(this.controls.splice(M,0,P),this._registerControl(P)),this.updateValueAndValidity({emitEvent:v.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(g,P={}){HM(this,!1,g),g.forEach((v,M)=>{GM(this,!1,M),this.at(M).setValue(v,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(g,P={}){g!=null&&(g.forEach((v,M)=>{this.at(M)&&this.at(M).patchValue(v,{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(g=[],P={}){this._forEachChild((v,M)=>{v.reset(g[M],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this.controls.map(g=>g.getRawValue())}clear(g={}){this.controls.length<1||(this._forEachChild(P=>P._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:g.emitEvent}))}_adjustIndex(g){return g<0?g+this.length:g}_syncPendingControls(){let g=this.controls.reduce((P,v)=>v._syncPendingControls()?!0:P,!1);return g&&this.updateValueAndValidity({onlySelf:!0}),g}_forEachChild(g){this.controls.forEach((P,v)=>{g(P,v)})}_updateValue(){this.value=this.controls.filter(g=>g.enabled||this.disabled).map(g=>g.value)}_anyControls(g){return this.controls.some(P=>P.enabled&&g(P))}_setUpControls(){this._forEachChild(g=>this._registerControl(g))}_allControlsDisabled(){for(let g of this.controls)if(g.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(g){g.setParent(this),g._registerOnCollectionChange(this._onCollectionChange)}_find(g){return this.at(g)??null}};function CM(x){return!!x&&(x.asyncValidators!==void 0||x.validators!==void 0||x.updateOn!==void 0)}var YM=(()=>{let g=class g{constructor(){this.useNonNullable=!1}get nonNullable(){let v=new g;return v.useNonNullable=!0,v}group(v,M=null){let r=this._reduceControls(v),j={};return CM(M)?j=M:M!==null&&(j.validators=M.validator,j.asyncValidators=M.asyncValidator),new Vm(r,j)}record(v,M=null){let r=this._reduceControls(v);return new J1(r,M)}control(v,M,r){let j={};return this.useNonNullable?(CM(M)?j=M:(j.validators=M,j.asyncValidators=r),new Bm(v,$i(Et({},j),{nonNullable:!0}))):new Bm(v,M,r)}array(v,M,r){let j=v.map(ce=>this._createControl(ce));return new ey(j,M,r)}_reduceControls(v){let M={};return Object.keys(v).forEach(r=>{M[r]=this._createControl(v[r])}),M}_createControl(v){if(v instanceof Bm)return v;if(v instanceof Eh)return v;if(Array.isArray(v)){let M=v[0],r=v.length>1?v[1]:null,j=v.length>2?v[2]:null;return this.control(M,r,j)}else return this.control(v)}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();var XM=(()=>{let g=class g{static withConfig(v){return{ngModule:g,providers:[{provide:qM,useValue:v.warnOnNgModelWithFormControl??"always"},{provide:$M,useValue:v.callSetDisabledState??iy}]}}};g.\u0275fac=function(M){return new(M||g)},g.\u0275mod=Ar({type:g}),g.\u0275inj=Mr({imports:[_E]});let x=g;return x})();function AE(x,g){if(x&1){let P=Xs();re(0,"button",7),Xi("click",function(){let M=hs(P).$implicit,r=ur();return r.focus(),ps(r.select(M.id,r.NgbSlideEventSource.INDICATOR))}),se()}if(x&2){let P=g.$implicit,v=ur();id("active",P.id===v.activeId),Wi("aria-labelledby","slide-"+P.id)("aria-controls","slide-"+P.id)("aria-selected",P.id===v.activeId)}}function PE(x,g){}function OE(x,g){if(x&1&&(re(0,"div",6)(1,"span",8),rm(2,0),se(),Pr(3,PE,0,0,"ng-template",9),se()),x&2){let P=g.$implicit,v=g.$index,M=g.$count;_i("id","slide-"+P.id),ln(2),Kw(v+1)(M),Jw(2),ln(),_i("ngTemplateOutlet",P.templateRef)}}function TE(x,g){if(x&1){let P=Xs();re(0,"button",10),Xi("click",function(){hs(P);let M=ur();return ps(M.arrowLeft())}),_t(1,"span",11),re(2,"span",12),rm(3,1),se()(),re(4,"button",13),Xi("click",function(){hs(P);let M=ur();return ps(M.arrowRight())}),_t(5,"span",14),re(6,"span",12),rm(7,2),se()()}if(x&2){let P=ur();Wi("aria-labelledby",P.id+"-previous"),ln(2),_i("id",P.id+"-previous"),ln(2),Wi("aria-labelledby",P.id+"-next"),ln(2),_i("id",P.id+"-next")}}var QM={animation:!0,transitionTimerDelayMs:5},KM=(()=>{let g=class g{constructor(){this.animation=QM.animation}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})();function SE(x){let{transitionDelay:g,transitionDuration:P}=window.getComputedStyle(x),v=parseFloat(g),M=parseFloat(P);return(v+M)*1e3}function JM(x){return(x||document.body).getBoundingClientRect()}function EE(x){return g=>new im(P=>{let v=j=>x.run(()=>P.next(j)),M=j=>x.run(()=>P.error(j)),r=()=>x.run(()=>P.complete());return g.subscribe({next:v,error:M,complete:r})})}var IE=()=>{},{transitionTimerDelayMs:DE}=QM,If=new Map,sy=(x,g,P,v)=>{let M=v.context||{},r=If.get(g);if(r)switch(v.runningTransition){case"continue":return Zs;case"stop":x.run(()=>r.transition$.complete()),M=Object.assign(r.context,M),If.delete(g)}let j=P(g,v.animation,M)||IE;if(!v.animation||window.getComputedStyle(g).transitionProperty==="none")return x.run(()=>j()),Pn(void 0).pipe(EE(x));let ce=new ds,we=new ds,Oe=ce.pipe(Rw(!0));If.set(g,{transition$:ce,complete:()=>{we.next(),we.complete()},context:M});let Qe=SE(g);return x.runOutsideAngular(()=>{let zt=Sw(g,"transitionend").pipe(Dc(Oe),zl(({target:Wn})=>Wn===g)),jt=V0(Qe+DE).pipe(Dc(Oe));Iw(jt,zt,we).pipe(Dc(Oe)).subscribe(()=>{If.delete(g),x.run(()=>{j(),ce.next(),ce.complete()})})}),ce.asObservable()},kE=x=>{If.get(x)?.complete()};function RE(x,g){if(typeof navigator>"u")return"0px";let{classList:P}=x,v=P.contains("show");v||P.add("show"),x.style[g]="";let M=x.getBoundingClientRect()[g]+"px";return v||P.remove("show"),M}var zE=(x,g,P)=>{let{direction:v,maxSize:M,dimension:r}=P,{classList:j}=x;function ce(){j.add("collapse"),v==="show"?j.add("show"):j.remove("show")}if(!g){ce();return}return M||(M=RE(x,r),P.maxSize=M,x.style[r]=v!=="show"?M:"0px",j.remove("collapse"),j.remove("collapsing"),j.remove("show"),JM(x),j.add("collapsing")),x.style[r]=v==="show"?M:"0px",()=>{ce(),j.remove("collapsing"),x.style[r]=""}},BE=(()=>{let g=class g{constructor(){this._ngbConfig=Wt(KM),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(v){this._animation=v}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),e2=(()=>{let g=class g{constructor(){this._config=Wt(BE),this._element=Wt(qs),this._zone=Wt(Fr),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new Ro,this.horizontal=this._config.horizontal,this.shown=new Ro,this.hidden=new Ro}set collapsed(v){this._isCollapsed!==v&&(this._isCollapsed=v,this._afterInit&&this._runTransitionWithEvents(v,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(v=this._isCollapsed){this.collapsed=!v,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(v,M){return sy(this._zone,this._element.nativeElement,zE,{animation:M,runningTransition:"stop",context:{direction:v?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(v,M){this._runTransition(v,M).subscribe(()=>{v?this.hidden.emit():this.shown.emit()})}};g.\u0275fac=function(M){return new(M||g)},g.\u0275dir=Do({type:g,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(M,r){M&2&&id("collapse-horizontal",r.horizontal)},inputs:{animation:"animation",collapsed:[cr.None,"ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0});let x=g;return x})();var FE=(()=>{let g=class g{constructor(){this._ngbConfig=Wt(KM),this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(v){this._animation=v}};g.\u0275fac=function(M){return new(M||g)},g.\u0275prov=pi({token:g,factory:g.\u0275fac,providedIn:"root"});let x=g;return x})(),Ih=function(x){return x.START="start",x.END="end",x}(Ih||{}),t2=({classList:x})=>x.contains("carousel-item-start")||x.contains("carousel-item-end"),Df=x=>{x.remove("carousel-item-start"),x.remove("carousel-item-end")},$m=x=>{Df(x),x.remove("carousel-item-prev"),x.remove("carousel-item-next")},LE=(x,g,{direction:P})=>{let{classList:v}=x;if(!g){Df(v),$m(v),v.add("active");return}return t2(x)?Df(v):(v.add("carousel-item-"+(P===Ih.START?"next":"prev")),JM(x),v.add("carousel-item-"+P)),()=>{$m(v),v.add("active")}},NE=(x,g,{direction:P})=>{let{classList:v}=x;if(!g){Df(v),$m(v),v.remove("active");return}return t2(x)?Df(v):v.add("carousel-item-"+P),()=>{$m(v),v.remove("active")}},VE=0,jE=0,kf=(()=>{let g=class g{constructor(){this.templateRef=Wt(Q0),this.id=`ngb-slide-${VE++}`,this.slid=new Ro}};g.\u0275fac=function(M){return new(M||g)},g.\u0275dir=Do({type:g,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0});let x=g;return x})(),Wm=(()=>{let g=class g{constructor(){this.NgbSlideEventSource=ua,this._config=Wt(FE),this._platformId=Wt(nd),this._ngZone=Wt(Fr),this._cd=Wt(Ll),this._container=Wt(qs),this._destroyRef=Wt(om),this._interval$=new bo(this._config.interval),this._mouseHover$=new bo(!1),this._focused$=new bo(!1),this._pauseOnHover$=new bo(this._config.pauseOnHover),this._pauseOnFocus$=new bo(this._config.pauseOnFocus),this._pause$=new bo(!1),this._wrap$=new bo(this._config.wrap),this.id=`ngb-carousel-${jE++}`,this.animation=this._config.animation,this.keyboard=this._config.keyboard,this.showNavigationArrows=this._config.showNavigationArrows,this.showNavigationIndicators=this._config.showNavigationIndicators,this.slide=new Ro,this.slid=new Ro,this._transitionIds=null}set interval(v){this._interval$.next(v)}get interval(){return this._interval$.value}set wrap(v){this._wrap$.next(v)}get wrap(){return this._wrap$.value}set pauseOnHover(v){this._pauseOnHover$.next(v)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(v){this._pauseOnFocus$.next(v)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(v){this._mouseHover$.next(v)}get mouseHover(){return this._mouseHover$.value}set focused(v){this._focused$.next(v)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(ua.ARROW_LEFT)}arrowRight(){this.focus(),this.next(ua.ARROW_RIGHT)}ngAfterContentInit(){cC(this._platformId)&&this._ngZone.runOutsideAngular(()=>{let v=td([this.slide.pipe(mi(M=>M.current),Yp(this.activeId)),this._wrap$,this.slides.changes.pipe(Yp(null))]).pipe(mi(([M,r])=>{let j=this.slides.toArray(),ce=this._getSlideIdxById(M);return r?j.length>1:ce<j.length-1}),U0());td([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,v]).pipe(mi(([M,r,j,ce,we,Oe,Qe])=>M||r&&j||ce&&we||!Qe?0:Oe),U0(),oa(M=>M>0?V0(M,M):Ew),Rm(this._destroyRef)).subscribe(()=>this._ngZone.run(()=>this.next(ua.TIMER)))}),this.slides.changes.pipe(Rm(this._destroyRef)).subscribe(()=>{this._transitionIds?.forEach(v=>kE(this._getSlideElement(v))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Bl(1)).subscribe(()=>{for(let{id:v}of this.slides){let M=this._getSlideElement(v);v===this.activeId?M.classList.add("active"):M.classList.remove("active")}})})}ngAfterContentChecked(){let v=this._getSlideById(this.activeId);this.activeId=v?v.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){let v=this._getSlideElement(this.activeId);v&&v.classList.add("active")}}select(v,M){this._cycleToSelected(v,this._getSlideEventDirection(this.activeId,v),M)}prev(v){this._cycleToSelected(this._getPrevSlide(this.activeId),Ih.END,v)}next(v){this._cycleToSelected(this._getNextSlide(this.activeId),Ih.START,v)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(v,M,r){let j=this._transitionIds;if(j&&(j[0]!==v||j[1]!==this.activeId))return;let ce=this._getSlideById(v);if(ce&&ce.id!==this.activeId){this._transitionIds=[this.activeId,v],this.slide.emit({prev:this.activeId,current:ce.id,direction:M,paused:this._pause$.value,source:r});let we={animation:this.animation,runningTransition:"stop",context:{direction:M}},Oe=[],Qe=this._getSlideById(this.activeId);if(Qe){let Ui=sy(this._ngZone,this._getSlideElement(Qe.id),NE,we);Ui.subscribe(()=>{Qe.slid.emit({isShown:!1,direction:M,source:r})}),Oe.push(Ui)}let zt=this.activeId;this.activeId=ce.id;let jt=this._getSlideById(this.activeId),Wn=sy(this._ngZone,this._getSlideElement(ce.id),LE,we);Wn.subscribe(()=>{jt?.slid.emit({isShown:!0,direction:M,source:r})}),Oe.push(Wn),Dw(...Oe).pipe(Bl(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:zt,current:ce.id,direction:M,paused:this._pause$.value,source:r})})}this._cd.markForCheck()}_getSlideEventDirection(v,M){let r=this._getSlideIdxById(v),j=this._getSlideIdxById(M);return r>j?Ih.END:Ih.START}_getSlideById(v){return this.slides.find(M=>M.id===v)||null}_getSlideIdxById(v){let M=this._getSlideById(v);return M!=null?this.slides.toArray().indexOf(M):-1}_getNextSlide(v){let M=this.slides.toArray(),r=this._getSlideIdxById(v);return r===M.length-1?this.wrap?M[0].id:M[M.length-1].id:M[r+1].id}_getPrevSlide(v){let M=this.slides.toArray(),r=this._getSlideIdxById(v);return r===0?this.wrap?M[M.length-1].id:M[0].id:M[r-1].id}_getSlideElement(v){return this._container.nativeElement.querySelector(`#slide-${v}`)}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["ngb-carousel"]],contentQueries:function(M,r,j){if(M&1&&ef(j,kf,4),M&2){let ce;ra(ce=aa())&&(r.slides=ce)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(M,r){M&1&&Xi("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),M&2&&(Wi("aria-activedescendant","slide-"+r.activeId),Qw("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[pn],decls:7,vars:3,consts:()=>{let v;v=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\uFFFD0\uFFFD"}:INTERPOLATION: of ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;let M;M=$localize`:@@ngb.carousel.previous:Previous`;let r;return r=$localize`:@@ngb.carousel.next:Next`,[v,M,r,["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active"],[1,"carousel-inner"],["role","tabpanel",1,"carousel-item",3,"id"],["type","button","data-bs-target","","role","tab",3,"click"],[1,"visually-hidden"],[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden",3,"id"],["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]]},template:function(M,r){M&1&&(re(0,"div",3),Nr(1,AE,1,5,"button",4,Fl),se(),re(3,"div",5),Nr(4,OE,4,4,"div",6,Fl),se(),Pr(6,TE,8,4)),M&2&&(id("visually-hidden",!r.showNavigationIndicators),ln(),Vr(r.slides),ln(3),Vr(r.slides),ln(2),gh(6,r.showNavigationArrows?6:-1))},dependencies:[sC],encapsulation:2,changeDetection:0});let x=g;return x})(),ua=function(x){return x.TIMER="timer",x.ARROW_LEFT="arrowLeft",x.ARROW_RIGHT="arrowRight",x.INDICATOR="indicator",x}(ua||{}),Zm=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275mod=Ar({type:g}),g.\u0275inj=Mr({});let x=g;return x})(),n2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275mod=Ar({type:g}),g.\u0275inj=Mr({});let x=g;return x})();var Mk=(()=>{let x=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,g=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(x()||g()):!1})();var Ak=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var Pk=new Date(1882,10,12),Ok=new Date(2174,10,25);var Tk=1e3*60*60*24;var ly=1080,UE=24*ly,GE=12*ly+793,Sk=29*UE+GE,Ek=11*ly+204;var Ik=new Yi("live announcer delay",{providedIn:"root",factory:()=>100});var qm=class x{static isArray(g,P=!0){return Array.isArray(g)&&(P||g.length!==0)}static isObject(g,P=!0){return typeof g=="object"&&!Array.isArray(g)&&g!=null&&(P||Object.keys(g).length!==0)}static equals(g,P,v){return v?this.resolveFieldData(g,v)===this.resolveFieldData(P,v):this.equalsByValue(g,P)}static equalsByValue(g,P){if(g===P)return!0;if(g&&P&&typeof g=="object"&&typeof P=="object"){var v=Array.isArray(g),M=Array.isArray(P),r,j,ce;if(v&&M){if(j=g.length,j!=P.length)return!1;for(r=j;r--!==0;)if(!this.equalsByValue(g[r],P[r]))return!1;return!0}if(v!=M)return!1;var we=this.isDate(g),Oe=this.isDate(P);if(we!=Oe)return!1;if(we&&Oe)return g.getTime()==P.getTime();var Qe=g instanceof RegExp,zt=P instanceof RegExp;if(Qe!=zt)return!1;if(Qe&&zt)return g.toString()==P.toString();var jt=Object.keys(g);if(j=jt.length,j!==Object.keys(P).length)return!1;for(r=j;r--!==0;)if(!Object.prototype.hasOwnProperty.call(P,jt[r]))return!1;for(r=j;r--!==0;)if(ce=jt[r],!this.equalsByValue(g[ce],P[ce]))return!1;return!0}return g!==g&&P!==P}static resolveFieldData(g,P){if(g&&P){if(this.isFunction(P))return P(g);if(P.indexOf(".")==-1)return g[P];{let v=P.split("."),M=g;for(let r=0,j=v.length;r<j;++r){if(M==null)return null;M=M[v[r]]}return M}}else return null}static isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)}static reorderArray(g,P,v){let M;g&&P!==v&&(v>=g.length&&(v%=g.length,P%=g.length),g.splice(v,0,g.splice(P,1)[0]))}static insertIntoOrderedArray(g,P,v,M){if(v.length>0){let r=!1;for(let j=0;j<v.length;j++)if(this.findIndexInList(v[j],M)>P){v.splice(j,0,g),r=!0;break}r||v.push(g)}else v.push(g)}static findIndexInList(g,P){let v=-1;if(P){for(let M=0;M<P.length;M++)if(P[M]==g){v=M;break}}return v}static contains(g,P){if(g!=null&&P&&P.length){for(let v of P)if(this.equals(g,v))return!0}return!1}static removeAccents(g){return g&&(g=g.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),g}static isDate(g){return Object.prototype.toString.call(g)==="[object Date]"}static isEmpty(g){return g==null||g===""||Array.isArray(g)&&g.length===0||!this.isDate(g)&&typeof g=="object"&&Object.keys(g).length===0}static isNotEmpty(g){return!this.isEmpty(g)}static compare(g,P,v,M=1){let r=-1,j=this.isEmpty(g),ce=this.isEmpty(P);return j&&ce?r=0:j?r=M:ce?r=-M:typeof g=="string"&&typeof P=="string"?r=g.localeCompare(P,v,{numeric:!0}):r=g<P?-1:g>P?1:0,r}static sort(g,P,v=1,M,r=1){let j=x.compare(g,P,M,v),ce=v;return(x.isEmpty(g)||x.isEmpty(P))&&(ce=r===1?v:r),ce*j}static merge(g,P){if(!(g==null&&P==null)){{if((g==null||typeof g=="object")&&(P==null||typeof P=="object"))return Et(Et({},g||{}),P||{});if((g==null||typeof g=="string")&&(P==null||typeof P=="string"))return[g||"",P||""].join(" ")}return P||g}}static isPrintableCharacter(g=""){return this.isNotEmpty(g)&&g.length===1&&g.match(/\S| /)}static getItemValue(g,...P){return this.isFunction(g)?g(...P):g}static findLastIndex(g,P){let v=-1;if(this.isNotEmpty(g))try{v=g.findLastIndex(P)}catch{v=g.lastIndexOf([...g].reverse().find(P))}return v}static findLast(g,P){let v;if(this.isNotEmpty(g))try{v=g.findLast(P)}catch{v=[...g].reverse().find(P)}return v}static deepEquals(g,P){if(g===P)return!0;if(g&&P&&typeof g=="object"&&typeof P=="object"){var v=Array.isArray(g),M=Array.isArray(P),r,j,ce;if(v&&M){if(j=g.length,j!=P.length)return!1;for(r=j;r--!==0;)if(!this.deepEquals(g[r],P[r]))return!1;return!0}if(v!=M)return!1;var we=g instanceof Date,Oe=P instanceof Date;if(we!=Oe)return!1;if(we&&Oe)return g.getTime()==P.getTime();var Qe=g instanceof RegExp,zt=P instanceof RegExp;if(Qe!=zt)return!1;if(Qe&&zt)return g.toString()==P.toString();var jt=Object.keys(g);if(j=jt.length,j!==Object.keys(P).length)return!1;for(r=j;r--!==0;)if(!Object.prototype.hasOwnProperty.call(P,jt[r]))return!1;for(r=j;r--!==0;)if(ce=jt[r],!this.deepEquals(g[ce],P[ce]))return!1;return!0}return g!==g&&P!==P}},i2=0;function jc(x="pn_id_"){return i2++,`${x}${i2}`}function HE(){let x=[],g=(r,j)=>{let ce=x.length>0?x[x.length-1]:{key:r,value:j},we=ce.value+(ce.key===r?0:j)+2;return x.push({key:r,value:we}),we},P=r=>{x=x.filter(j=>j.value!==r)},v=()=>x.length>0?x[x.length-1].value:0,M=r=>r&&parseInt(r.style.zIndex,10)||0;return{get:M,set:(r,j,ce)=>{j&&(j.style.zIndex=String(g(r,ce)))},clear:r=>{r&&(P(M(r)),r.style.zIndex="")},getCurrent:()=>v()}}var kk=HE();var uy=(()=>{class x{static \u0275fac=function(v){return new(v||x)};static \u0275mod=Ar({type:x});static \u0275inj=Mr({imports:[yi]})}return x})();var $E=["*"],Ba=(()=>{class x{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){let P=qm.isEmpty(this.label);this.role=P?void 0:"img",this.ariaLabel=P?void 0:this.label,this.ariaHidden=P}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(v){return new(v||x)};static \u0275cmp=sn({type:x,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:[cr.HasDecoratorInputTransform,"spin","spin",od],styleClass:"styleClass"},standalone:!0,features:[fh,pn],ngContentSelectors:$E,decls:1,vars:0,template:function(v,M){v&1&&(am(),sm(0))},encapsulation:2,changeDetection:0})}return x})();var o2=(()=>{class x extends Ba{static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["EyeIcon"]],standalone:!0,features:[wo,pn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z","fill","currentColor"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0),_t(1,"path",1),se()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role))},encapsulation:2})}return x})();var r2=(()=>{class x extends Ba{pathId;ngOnInit(){this.pathId="url(#"+jc()+")"}static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["RefreshIcon"]],standalone:!0,features:[wo,pn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0)(1,"g"),_t(2,"path",1),se(),re(3,"defs")(4,"clipPath",2),_t(5,"rect",3),se()()()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role),ln(),Wi("clip-path",M.pathId),ln(3),_i("id",M.pathId))},encapsulation:2})}return x})();var a2=(()=>{class x extends Ba{pathId;ngOnInit(){this.pathId="url(#"+jc()+")"}static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["SearchMinusIcon"]],standalone:!0,features:[wo,pn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0)(1,"g"),_t(2,"path",1),se(),re(3,"defs")(4,"clipPath",2),_t(5,"rect",3),se()()()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role),ln(),Wi("clip-path",M.pathId),ln(3),_i("id",M.pathId))},encapsulation:2})}return x})();var s2=(()=>{class x extends Ba{pathId;ngOnInit(){this.pathId="url(#"+jc()+")"}static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["SearchPlusIcon"]],standalone:!0,features:[wo,pn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0)(1,"g"),_t(2,"path",1),se(),re(3,"defs")(4,"clipPath",2),_t(5,"rect",3),se()()()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role),ln(),Wi("clip-path",M.pathId),ln(3),_i("id",M.pathId))},encapsulation:2})}return x})();var l2=(()=>{class x extends Ba{static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["TimesIcon"]],standalone:!0,features:[wo,pn],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0),_t(1,"path",1),se()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role))},encapsulation:2})}return x})();var c2=(()=>{class x extends Ba{pathId;ngOnInit(){this.pathId="url(#"+jc()+")"}static \u0275fac=(()=>{let P;return function(M){return(P||(P=ko(x)))(M||x)}})();static \u0275cmp=sn({type:x,selectors:[["UndoIcon"]],standalone:!0,features:[wo,pn],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(v,M){v&1&&(Ra(),re(0,"svg",0)(1,"g"),_t(2,"path",1),se(),re(3,"defs")(4,"clipPath",2),_t(5,"rect",3),se()()()),v&2&&(Lr(M.getClassNames()),Wi("aria-label",M.ariaLabel)("aria-hidden",M.ariaHidden)("role",M.role),ln(),Wi("clip-path",M.pathId),ln(3),_i("id",M.pathId))},encapsulation:2})}return x})();var u2=(()=>{class x{static \u0275fac=function(v){return new(v||x)};static \u0275mod=Ar({type:x});static \u0275inj=Mr({imports:[yi]})}return x})();var Ym=(()=>{class x{static \u0275fac=function(v){return new(v||x)};static \u0275mod=Ar({type:x});static \u0275inj=Mr({imports:[yi,uy,r2,o2,c2,a2,s2,l2,u2,uy]})}return x})();var WE=["carousel"];function ZE(x,g){if(x&1&&(re(0,"div",3)(1,"h3"),_e(2),se()(),re(3,"a",4)(4,"div",5),_t(5,"img",6),se()()),x&2){let P=ur().$implicit;ln(2),Zo(" ",P.description,""),ln(3),_i("src",P.url,Ys)}}function qE(x,g){x&1&&Pr(0,ZE,6,2,"ng-template",2)}var d2=(()=>{let g=class g{constructor(){this.URL="./assets/tdr",this.images=[{url:`${this.URL}/3b.jpg`,description:"Servicios Profesionales de Decoraci\xF3n y Revestimiento"},{url:`${this.URL}/2b.jpg`,description:"Expertos en Acabados: Estucos, Pintura y Texturizados"},{url:`${this.URL}/1b.jpg`,description:"Calidad en Cada Detalle"},{url:`${this.URL}/4b.jpg`,description:"Garant\xEDa y Seguridad"},{url:`${this.URL}/5b.jpg`,description:"Durabilidad Garantizada"}],this.paused=!1,this.unpauseOnArrow=!1,this.pauseOnIndicator=!1,this.pauseOnHover=!0,this.pauseOnFocus=!0}togglePaused(){this.paused?this.carousel.cycle():this.carousel.pause(),this.paused=!this.paused}onSlide(v){this.unpauseOnArrow&&v.paused&&(v.source===ua.ARROW_LEFT||v.source===ua.ARROW_RIGHT)&&this.togglePaused(),this.pauseOnIndicator&&!v.paused&&v.source===ua.INDICATOR&&this.togglePaused()}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-main-carrusel"]],viewQuery:function(M,r){if(M&1&&Qs(WE,7),M&2){let j;ra(j=aa())&&(r.carousel=j.first)}},standalone:!0,features:[pn],decls:4,vars:4,consts:[["carousel",""],[2,"padding-top","90px",3,"slide","ngClass","interval","pauseOnHover","pauseOnFocus"],["ngbSlide",""],[1,"carousel-caption"],["target","_blank","rel","nofollow noopener noreferrer"],[1,"k"],[1,"carousel-img",3,"src"]],template:function(M,r){if(M&1){let j=Xs();re(0,"ngb-carousel",1,0),Xi("slide",function(we){return hs(j),ps(r.onSlide(we))}),Nr(2,qE,1,0,null,2,Fl),se()}M&2&&(_i("ngClass","carousel-dark")("interval",3e3)("pauseOnHover",r.pauseOnHover)("pauseOnFocus",r.pauseOnFocus),ln(2),Vr(r.images))},dependencies:[yi,hm,Zm,Wm,kf,Ym],styles:[".k[_ngcontent-%COMP%]{display:flex;justify-content:center;background-image:url(/assets/backgrounds/b2.jpg)}.carousel-img[_ngcontent-%COMP%]{width:60%;height:auto;display:block;margin:0 auto}@media screen and (max-width: 767px){.carousel-img[_ngcontent-%COMP%]{width:100%}}.carousel-caption[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;-webkit-text-stroke:1px black;text-align:center}.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:5vw;text-shadow:2px 2px 4px rgba(0,0,0,1);font-family:tdr}@media screen and (max-width: 767px){.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px}}@media screen and (max-width: 479px){.carousel-caption[_ngcontent-%COMP%]{top:45%}.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{-webkit-text-stroke:initial;font-size:29px}}"],changeDetection:0});let x=g;return x})();function YE(x,g){if(x&1&&(re(0,"div",5)(1,"div",6),_t(2,"div",7)(3,"img",11),re(4,"h3",12),_e(5),se(),re(6,"p",13),_e(7),se()()()),x&2){let P=g.$implicit;ln(3),_i("src",P.image,Ys),ln(2),Zo(" ",P.title," "),ln(2),Zo(" ",P.description," ")}}var h2=(()=>{let g=class g{constructor(){this.services=[{title:"ESTUCOS",description:" Tradicional - Pl\xE1sticos - Venecianos",image:"./assets/tdr/icons/1.svg"},{title:"PINTURA",description:" Vinilo - Epoxica - Trafijo - Se\xF1alizaci\xF3n",image:"./assets/tdr/icons/2.svg"},{title:"PAREDES",description:" en Panel de Yeso - Fibrocemento",image:"./assets/tdr/icons/8.svg"},{title:`SISTEMA

      DE REVOQUE`,description:" en Seco o Estampillado",image:"./assets/tdr/icons/5.svg"},{title:"CIELO RASO",description:" en Panel de Yeso - Fibrocemento PVC",image:"./assets/tdr/icons/10.svg"},{title:"MUROS",description:"Panel yeso - Fibrocemento",image:"./assets/tdr/icons/16.svg"},{title:"ENTREPISOS",description:"en       Fibrocemento ",image:"./assets/tdr/icons/12.svg"},{title:"AISLAMIENTO",description:"Ac\xFAstico y T\xE9rmicos",image:"./assets/tdr/icons/13.svg"},{title:"TEXTURAS",description:"Graniplast",image:"./assets/tdr/icons/14.svg"},{title:"TRABAJOS EN ALTURAS",description:"a ciertas alturas o en situaciones elevadas",image:"./assets/tdr/icons/18.svg"}]}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-services"]],standalone:!0,features:[pn],decls:18,vars:0,consts:[[1,"section","is--services"],[1,"container"],[1,"heading-wrap","is--centred"],[1,"w-dyn-list"],[1,"collection-list-2"],[1,"collection-item"],[1,"card-simple"],[1,"black-line"],["routerLink","/contact",1,"button","w-button","card-title",2,"background-color","#00532d"],["routerLink","/services",1,"button","w-button","card-title",2,"background-color","#8d6900"],["routerLink","/portafolio",1,"button","w-button","card-title",2,"background-color","#560101"],[1,"icon",3,"src"],[1,"card-title"],[1,"p-card"]],template:function(M,r){M&1&&(re(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),_e(4,"MIS SERVICIOS"),se()(),re(5,"div",3)(6,"div",4),Nr(7,YE,8,3,"div",5,Jp),re(9,"div",5)(10,"div",6),_t(11,"div",7),re(12,"a",8),_e(13," Cotizar "),se(),re(14,"a",9),_e(15," Ir a servicios"),se(),re(16,"a",10),_e(17," Portafolio"),se()()()()()()()),M&2&&(ln(7),Vr(r.services))},dependencies:[yi,nl,tl],styles:[".section[_ngcontent-%COMP%]{z-index:5;padding-left:30px;padding-right:30px;position:relative;overflow:hidden;background-color:#000}.section.is--services[_ngcontent-%COMP%]{background-image:url(/assets/backgrounds/b2.jpg);margin-top:-30px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-position:0 0;background-repeat:no-repeat;background-size:cover;font-family:tdr}@media screen and (max-width: 479px){.section[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 767px){.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}}@media screen and (max-width: 479px){.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}@media screen and (max-width: 991px){.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 479px){.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:20px;grid-row-gap:20px}}.collection-item[_ngcontent-%COMP%]{display:flex;align-items:stretch}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:46px 40px 40px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021;width:75%}@media screen and (max-width: 991px){.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}}@media screen and (max-width: 767px){.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){.card-simple[_ngcontent-%COMP%]{padding:38px 20px 40px}}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;width:100%}@media screen and (max-width: 767px){.button[_ngcontent-%COMP%]{justify-content:center;display:flex}}@media screen and (max-width: 479px){.button[_ngcontent-%COMP%]{text-align:center}}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}@media screen and (max-width: 479px){.card-title[_ngcontent-%COMP%]{font-size:1.7em}}p[_ngcontent-%COMP%]{color:#000;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}@media screen and (max-width: 767px){p[_ngcontent-%COMP%]{font-size:1.2em}}.p-card[_ngcontent-%COMP%]{font-size:1.2em}@media screen and (max-width: 991px){.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center;color:#fff}h2[_ngcontent-%COMP%]{font-size:2.6em;color:#000;letter-spacing:2px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}.icon[_ngcontent-%COMP%]{width:96px}"],changeDetection:0});let x=g;return x})();var XE=()=>[import("./chunk-CNNX4ARC.js").then(x=>x.BeutifulCountersComponent)];function QE(x,g){x&1&&_t(0,"app-beutiful-counters")}function KE(x,g){x&1&&(Pr(0,QE,1,0),t1(1,0,XE),Yw(100))}function JE(x,g){x&1&&_t(0,"h1")}var p2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-home-page"]],standalone:!0,features:[pn],decls:7,vars:0,consts:[[1,"section",2,"padding-top","30px"]],template:function(M,r){M&1&&(_t(0,"app-main-carrusel"),re(1,"section",0),Pr(2,KE,3,0)(3,JE,1,0),t1(4,2,null,null,3),Xw(0,-1),se(),_t(6,"app-services"))},dependencies:[yi,d2,h2],styles:[".section[_ngcontent-%COMP%]{z-index:1;background-color:#eee;background:linear-gradient(#000000b3,#000000b3),url(/assets/backgrounds/b1.jpg);background-repeat:no-repeat;background-size:cover;font-family:tdr;text-align:center;position:relative;overflow:hidden}"],changeDetection:0});let x=g;return x})();var f2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-portafolio"]],standalone:!0,features:[pn],decls:74,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"text-container"],[1,"content"],["routerLink","/portafolio01",1,"card","nav-link"],[1,"card"],[1,"topCard"],[1,"title"],[1,"mediaCard"],["src","../../../assets/img/iglesias.jpg",1,"mediaCard"],[1,"bottonCard"],[1,"bottonText"],[1,"actionCard"],[1,"actions"],["routerLink","/portafolio02",1,"card","nav-link"],["src","../../../assets/img/edificios.jpg",1,"mediaCard"],["routerLink","/portafolio03",1,"card","nav-link"],["src","../../../assets/img/casas.jpg",1,"mediaCard"],["routerLink","/portafolio04",1,"card","nav-link"],["src","../../../assets/img/interiores.jpeg",1,"mediaCard"]],template:function(M,r){M&1&&(re(0,"html",0)(1,"head"),_t(2,"meta",1)(3,"meta",2),re(4,"title"),_e(5,"Triangle"),se()(),re(6,"body")(7,"header")(8,"div",3)(9,"h1"),_e(10,"Conoce Nuestros Proyectos"),se(),re(11,"span"),_e(12,"Tecno Dry Wall - Carlos Roby"),se()()(),re(13,"div",4)(14,"a",5)(15,"div",6)(16,"div",7)(17,"h2",8),_e(18,"Iglesias"),se()(),re(19,"div",9),_t(20,"img",10),se(),re(21,"div",11)(22,"p",12),_e(23,"Texto de resumen para la tarjeta 1."),se(),re(24,"div",13)(25,"button",14),_e(26,"Curtir"),se(),re(27,"button",14),_e(28,"Compartir"),se()()()()(),re(29,"a",15)(30,"div",6)(31,"div",7)(32,"h2",8),_e(33,"Edificios"),se()(),re(34,"div",9),_t(35,"img",16),se(),re(36,"div",11)(37,"p",12),_e(38,"Texto de resumen para la tarjeta 2."),se(),re(39,"div",13)(40,"button",14),_e(41,"Curtir"),se(),re(42,"button",14),_e(43,"Compartir"),se()()()()(),re(44,"a",17)(45,"div",6)(46,"div",7)(47,"h2",8),_e(48,"Casas"),se()(),re(49,"div",9),_t(50,"img",18),se(),re(51,"div",11)(52,"p",12),_e(53,"Texto de resumen para la tarjeta 1."),se(),re(54,"div",13)(55,"button",14),_e(56,"Curtir"),se(),re(57,"button",14),_e(58,"Compartir"),se()()()()(),re(59,"a",19)(60,"div",6)(61,"div",7)(62,"h2",8),_e(63,"Interiores"),se()(),re(64,"div",9),_t(65,"img",20),se(),re(66,"div",11)(67,"p",12),_e(68,"Texto de resumen para la tarjeta 1."),se(),re(69,"div",13)(70,"button",14),_e(71,"Curtir"),se(),re(72,"button",14),_e(73,"Compartir"),se()()()()()()()())},dependencies:[nl,tl],styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#fff}header[_ngcontent-%COMP%]{width:100vw;height:55vh;background:linear-gradient(to right,#240909cc,#110606cc),url("./media/portada3-IZJHBW2N.webp");background-size:cover;background-position:center center;background-attachment:fixed;clip-path:polygon(0 0,100% 0,100% 80%,60% 100%,0 80%);position:relative}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:block;width:100%;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;text-align:center;color:#fff;text-shadow:0 0 10px rgba(0,0,0,5)}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,Helvetica,Arial,Lucida,sans-serif;font-weight:800;font-size:40px}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff4500;font-family:tdr;font-size:23px}@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@300;400[_ngcontent-%COMP%];700&display=swap)[_ngcontent-%COMP%];.content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:70px;padding:20px;margin-top:60px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 2px 50px #000000ad;width:100%}.mediaCard[_ngcontent-%COMP%]{height:250px;width:100%}.topCard[_ngcontent-%COMP%]{padding:0 20px 20px}.bottonCard[_ngcontent-%COMP%]{padding:20px}.actions[_ngcontent-%COMP%]{background:none;border:none;color:purple}h2.title[_ngcontent-%COMP%]{color:#2b3d59}span.secondText[_ngcontent-%COMP%]{color:#828fa1}p.bottonText[_ngcontent-%COMP%]{color:#445b73}@media (min-width: 500px){.card[_ngcontent-%COMP%]{width:500px}}.topCard[_ngcontent-%COMP%]{font-family:tdr;padding:0 20px 20px;text-align:center}.topCard[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:tdr;font-size:40px;text-align:center}.card[_ngcontent-%COMP%]{text-decoration:none;color:inherit;pointer-events:all;background:#fff;border-radius:20px;box-shadow:0 2px 50px #000000ad;transition:transform .3s,box-shadow .3s}.card[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{pointer-events:all}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 70px #000000ad}']});let x=g;return x})();var g2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-portafolio01"]],standalone:!0,features:[pn],decls:150,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"text-container"],[1,"section","is--featured-projects"],[1,"container","w-container"],[1,"w-embed"],[1,"w-dyn-list"],["role","list",1,"w-dyn-items"],["role","listitem",1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"card","is--double"],[1,"column","is--image"],["src","../../../../assets/img/iglesia03.JPG","loading","lazy","alt","\u03A0\u03BF\u03BB\u03C5\u03C4\u03B5\u03BB\u03AE\u03C2 \u03C0\u03B1\u03C1\u03B1\u03B8\u03B1\u03BB\u03AC\u03C3\u03C3\u03B9\u03B1 \u03C0\u03BF\u03BB\u03C5\u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03C3\u03C4\u03B7\u03BD \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1 \u0395\u03BB\u03BB\u03AC\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"column","is--padding"],[1,"card-text","is--featured"],[1,"black-label"],[1,"label-text"],[1,"details-wrap"],[1,"label","is--dark"],[1,"details-wrap","is--no-padding"],["src","../../../../assets/img/iglesia02.JPG","loading","lazy","alt","Bioclimatic house","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia05.jpg","loading","lazy","alt","\u0394\u03B9\u03B1\u03BC\u03B5\u03C1\u03AF\u03C3\u03BC\u03B1\u03C4\u03B1 \u03BC\u03B5 \u03B8\u03AD\u03B1 \u0391\u03BA\u03C1\u03CC\u03C0\u03BF\u03BB\u03B7 \u03C3\u03C4\u03BF\u03BD \u039A\u03B5\u03C1\u03B1\u03BC\u03B5\u03B9\u03BA\u03CC.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia04.jpg","loading","lazy","alt","K\u03B5\u03BD\u03C4\u03C1\u03B9\u03BA\u03AE \u03A0\u03CD\u03BB\u03B7 401 \u0393\u03A3\u039D\u0391","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia01.jpg","loading","lazy","alt","\u039C\u03BF\u03BD\u03C4\u03AD\u03C1\u03BD\u03B1 \u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03BC\u03AD\u03C3\u03B1 \u03C3\u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC \u03C4\u03B7\u03C2 \u03C0\u03CC\u03BB\u03B7\u03C2, \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"see-more-wrap"],[1,"p-light-big"],["href","/portfolio",1,"button","w-button"]],template:function(M,r){M&1&&(re(0,"html",0)(1,"head"),_t(2,"meta",1)(3,"meta",2),re(4,"title"),_e(5,"Triangle"),se(),re(6,"title"),_e(7,"Blackbox Architectonics | A Collaborative Studio"),se()(),re(8,"body")(9,"header")(10,"div",3)(11,"h1"),_e(12,"Iglesias"),se(),re(13,"span"),_e(14,"Tecno Dry Wall - Carlos Roby"),se()()(),re(15,"section",4)(16,"div",5),_t(17,"div",6),re(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10)(22,"div",11)(23,"div",12),_t(24,"img",13),se(),re(25,"div",14)(26,"div",15)(27,"div",16)(28,"h3",17),_e(29,"Sea-View Apartments"),se()(),re(30,"div",18)(31,"div",19),_e(32,"Location"),se(),re(33,"p"),_e(34,"Chalkida, Greece"),se()(),re(35,"div",18)(36,"div",19),_e(37,"Status"),se(),re(38,"p"),_e(39,"Completed in 2008"),se()(),re(40,"div",20)(41,"div",19),_e(42,"Description"),se(),re(43,"p"),_e(44,"This apartment building is situated in a very privileged sea-view plot in the center of Chalkida. Being both next to the sea and to a neo-classical house has to adopt a double character. The combination of luxury and simplicity connects to the sea and the surroundings."),se()()()()()()(),re(45,"div",9)(46,"div",10)(47,"div",11)(48,"div",12),_t(49,"img",21),se(),re(50,"div",14)(51,"div",15)(52,"div",16)(53,"h3",17),_e(54,"bioclimatic-building"),se()(),re(55,"div",18)(56,"div",19),_e(57,"Location"),se(),re(58,"p"),_e(59,"Drafi, Greece"),se()(),re(60,"div",18)(61,"div",19),_e(62,"Status"),se(),re(63,"p"),_e(64,"Under construction"),se()(),re(65,"div",20)(66,"div",19),_e(67,"Description"),se(),re(68,"p"),_e(69,"This house is located in a rocky ridge with abrupt slopes.The need to create the minimum imprint in the surroundings along with creating a green ,energy-efficient building, led to the decision to drill the slope, instead of arranging a set of spaces at different levels."),se()()()()()()(),re(70,"div",9)(71,"div",10)(72,"div",11)(73,"div",12),_t(74,"img",22),se(),re(75,"div",14)(76,"div",15)(77,"div",16)(78,"h3",17),_e(79,"Acropolis-View Flats"),se()(),re(80,"div",18)(81,"div",19),_e(82,"Location"),se(),re(83,"p"),_e(84,"Athens, Greece"),se()(),re(85,"div",18)(86,"div",19),_e(87,"Status"),se(),re(88,"p"),_e(89,"Under Construction"),se()(),re(90,"div",20)(91,"div",19),_e(92,"Description"),se(),re(93,"p"),_e(94,"This contemporary building is located in Kerameikos, Athens near Acropolis. Apartments are designed primarily as functional. This functionalism though, has its own aesthetic quality leading to innovate, smart flats."),se()()()()()()(),re(95,"div",9)(96,"div",10)(97,"div",11)(98,"div",12),_t(99,"img",23),se(),re(100,"div",14)(101,"div",15)(102,"div",16)(103,"h3",17),_e(104,"401 Hospital Gate"),se()(),re(105,"div",18)(106,"div",19),_e(107,"Location"),se(),re(108,"p"),_e(109,"Athens, Greece"),se()(),re(110,"div",18)(111,"div",19),_e(112,"Status"),se(),re(113,"p"),_e(114,"Completed in 2021"),se()(),re(115,"div",20)(116,"div",19),_e(117,"Description"),se(),re(118,"p"),_e(119,"Iakovos Tsounis\u2019 endowment allowed to the famous military hospital to renovate its entrance gate. A key consideration is the adaptation of parts \u2013existing and new- to the whole, an appearance in unison with the rest of the hospital units and an appropriate use of ornament. All the above along with the practical needs such as the protection of the sun lead to a plain rigid form aligned to the military character of the hospital."),se()()()()()()(),re(120,"div",9)(121,"div",10)(122,"div",11)(123,"div",12),_t(124,"img",24),se(),re(125,"div",14)(126,"div",15)(127,"div",16)(128,"h3",17),_e(129,"Private Residence"),se()(),re(130,"div",18)(131,"div",19),_e(132,"Location"),se(),re(133,"p"),_e(134,"Chalkida, Greece"),se()(),re(135,"div",18)(136,"div",19),_e(137,"Status"),se(),re(138,"p"),_e(139,"Completed in 2007"),se()(),re(140,"div",20)(141,"div",19),_e(142,"Description"),se(),re(143,"p"),_e(144,"This residential project is for an urban double family house located in the city of Chalkida. The main idea is to unite the two residences into one discriminated whole so that they are both parts of one concrete volume. Selected parts of the volume are partitioned to establish an indoor-outdoor connection. The different parts of the synthesis are cladded with different materials. "),se()()()()()()()()(),re(145,"div",25)(146,"p",26),_e(147,"Like to see more projects?"),se(),re(148,"a",27),_e(149,"View our Portfolio"),se()()()()()())},dependencies:[nl],styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{color:#000;font-family:Montserrat,sans-serif;font-size:12px;font-weight:400;line-height:1}body[_ngcontent-%COMP%]{min-height:100%;color:#333;background-color:#fff;margin:0;font-family:Arial,sans-serif;font-size:14px;line-height:20px}html[_ngcontent-%COMP%]{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}header[_ngcontent-%COMP%]{width:100vw;height:55vh;background:linear-gradient(to right,#240909cc,#110606cc),url("./media/portafolio01-JFCWLM4I.jpg");background-size:cover;background-position:center center;background-attachment:fixed;clip-path:polygon(0 0,100% 0,100% 80%,60% 100%,0 80%);position:relative}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:block;width:100%;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;text-align:center;color:#fff;text-shadow:0 0 10px rgba(0,0,0,5)}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,Helvetica,Arial,Lucida,sans-serif;font-weight:800;font-size:40px}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff4500;font-family:tdr;font-size:23px}','element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.12993,1.12993,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}div[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 767px){.label[_ngcontent-%COMP%]{font-size:1.2em}}p[_ngcontent-%COMP%]{font-size:1.2em}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}@media screen and (max-width: 991px){.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (min-width: 992px){.card-item[_ngcontent-%COMP%]:nth-child(2n)   .black-label[_ngcontent-%COMP%]{margin-right:-134px;margin-left:-14px;padding-right:0;padding-left:14px}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card.is--double[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card-text[_ngcontent-%COMP%]{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}}element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.10065,1.10065,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:block;font-size:1.17em;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;font-weight:700}div[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%], *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:before, *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.card[_ngcontent-%COMP%]{flex-direction:row}.card[_ngcontent-%COMP%]   .column.is--image[_ngcontent-%COMP%]{flex:2}.card[_ngcontent-%COMP%]   .column.is--padding[_ngcontent-%COMP%]{flex:1}}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block}html[_ngcontent-%COMP%]{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}body[_ngcontent-%COMP%]{margin:0}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], main[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%]{display:block}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline;display:inline-block}audio[_ngcontent-%COMP%]:not([controls]){height:0;display:none}[hidden][_ngcontent-%COMP%], template[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{background-color:#0000}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}abbr[title][_ngcontent-%COMP%]{border-bottom:1px dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700}dfn[_ngcontent-%COMP%]{font-style:italic}h1[_ngcontent-%COMP%]{margin:.67em 0;font-size:2em}mark[_ngcontent-%COMP%]{color:#000;background:#ff0}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sup[_ngcontent-%COMP%]{top:-.5em}sub[_ngcontent-%COMP%]{bottom:-.25em}img[_ngcontent-%COMP%]{border:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}figure[_ngcontent-%COMP%]{margin:1em 40px}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0}pre[_ngcontent-%COMP%]{overflow:auto}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace;font-size:1em}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:inherit;font:inherit;margin:0}button[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{-webkit-appearance:button;cursor:pointer}button[disabled][_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default}button[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}input[_ngcontent-%COMP%]{line-height:normal}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}input[type=search][_ngcontent-%COMP%]{-webkit-appearance:none}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}fieldset[_ngcontent-%COMP%]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[_ngcontent-%COMP%]{border:0;padding:0}textarea[_ngcontent-%COMP%]{overflow:auto}optgroup[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0}@font-face{font-family:webflow-icons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBiUAAAC8AAAAYGNtYXDpP+a4AAABHAAAAFxnYXNwAAAAEAAAAXgAAAAIZ2x5ZmhS2XEAAAGAAAADHGhlYWQTFw3HAAAEnAAAADZoaGVhCXYFgQAABNQAAAAkaG10eCe4A1oAAAT4AAAAMGxvY2EDtALGAAAFKAAAABptYXhwABAAPgAABUQAAAAgbmFtZSoCsMsAAAVkAAABznBvc3QAAwAAAAAHNAAAACAAAwP4AZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAQAAAAAwACAACAAQAAQAg5gPpA//9//8AAAAAACDmAOkA//3//wAB/+MaBBcIAAMAAQAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEBIAAAAyADgAAFAAAJAQcJARcDIP5AQAGA/oBAAcABwED+gP6AQAABAOAAAALgA4AABQAAEwEXCQEH4AHAQP6AAYBAAcABwED+gP6AQAAAAwDAAOADQALAAA8AHwAvAAABISIGHQEUFjMhMjY9ATQmByEiBh0BFBYzITI2PQE0JgchIgYdARQWMyEyNj0BNCYDIP3ADRMTDQJADRMTDf3ADRMTDQJADRMTDf3ADRMTDQJADRMTAsATDSANExMNIA0TwBMNIA0TEw0gDRPAEw0gDRMTDSANEwAAAAABAJ0AtAOBApUABQAACQIHCQEDJP7r/upcAXEBcgKU/usBFVz+fAGEAAAAAAL//f+9BAMDwwAEAAkAABcBJwEXAwE3AQdpA5ps/GZsbAOabPxmbEMDmmz8ZmwDmvxmbAOabAAAAgAA/8AEAAPAAB0AOwAABSInLgEnJjU0Nz4BNzYzMTIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjMSIHDgEHBhUUFx4BFxYzAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpVSktvICEhIG9LSlVVSktvICEhIG9LSlVAKCiLXl1qal1eiygoKCiLXl1qal1eiygoZiEgb0tKVVVKS28gISEgb0tKVVVKS28gIQABAAABwAIAA8AAEgAAEzQ3PgE3NjMxFSIHDgEHBhUxIwAoKIteXWpVSktvICFmAcBqXV6LKChmISBvS0pVAAAAAgAA/8AFtgPAADIAOgAAARYXHgEXFhUUBw4BBwYHIxUhIicuAScmNTQ3PgE3NjMxOAExNDc+ATc2MzIXHgEXFhcVATMJATMVMzUEjD83NlAXFxYXTjU1PQL8kz01Nk8XFxcXTzY1PSIjd1BQWlJJSXInJw3+mdv+2/7c25MCUQYcHFg5OUA/ODlXHBwIAhcXTzY1PTw1Nk8XF1tQUHcjIhwcYUNDTgL+3QFt/pOTkwABAAAAAQAAmM7nP18PPPUACwQAAAAAANciZKUAAAAA1yJkpf/9/70FtgPDAAAACAACAAAAAAAAAAEAAAPA/8AAAAW3//3//QW2AAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAgAAAAQAASAEAADgBAAAwAQAAJ0EAP/9BAAAAAQAAAAFtwAAAAAAAAAKABQAHgAyAEYAjACiAL4BFgE2AY4AAAABAAAADAA8AAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADQAAAAEAAAAAAAIABwCWAAEAAAAAAAMADQBIAAEAAAAAAAQADQCrAAEAAAAAAAUACwAnAAEAAAAAAAYADQBvAAEAAAAAAAoAGgDSAAMAAQQJAAEAGgANAAMAAQQJAAIADgCdAAMAAQQJAAMAGgBVAAMAAQQJAAQAGgC4AAMAAQQJAAUAFgAyAAMAAQQJAAYAGgB8AAMAAQQJAAoANADsd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype");font-weight:400;font-style:normal}[class^=w-icon-][_ngcontent-%COMP%], [class*=" w-icon-"][_ngcontent-%COMP%]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:webflow-icons!important}.w-icon-slider-right[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\20ac"}.w-icon-slider-left[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\81"}.w-icon-nav-menu[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\201a"}.w-icon-arrow-down[_ngcontent-%COMP%]:before, .w-icon-dropdown-toggle[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\192"}.w-icon-file-upload-remove[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\20ac"}.w-icon-file-upload-icon[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\192"}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{min-height:100%;color:#333;background-color:#fff;margin:0;font-family:Arial,sans-serif;font-size:14px;line-height:20px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}html.w-mod-touch[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-attachment:scroll!important}.w-block[_ngcontent-%COMP%]{display:block}.w-inline-block[_ngcontent-%COMP%]{max-width:100%;display:inline-block}.w-clearfix[_ngcontent-%COMP%]:before, .w-clearfix[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-clearfix[_ngcontent-%COMP%]:after{clear:both}.w-hidden[_ngcontent-%COMP%]{display:none}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}input.w-button[_ngcontent-%COMP%]{-webkit-appearance:button}html[data-w-dynpage][_ngcontent-%COMP%]   [data-w-cloak][_ngcontent-%COMP%]{color:#0000!important}.w-webflow-badge[_ngcontent-%COMP%], .w-webflow-badge[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{z-index:auto;visibility:visible;box-sizing:border-box;width:auto;height:auto;max-height:none;max-width:none;min-height:0;min-width:0;float:none;clear:none;box-shadow:none;opacity:1;direction:ltr;font-family:inherit;font-weight:inherit;color:inherit;font-size:inherit;line-height:inherit;font-style:inherit;font-variant:inherit;text-align:inherit;letter-spacing:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;text-indent:0;text-transform:inherit;text-shadow:none;font-smoothing:auto;vertical-align:baseline;cursor:inherit;white-space:inherit;word-break:normal;word-spacing:normal;word-wrap:normal;background:none;border:0 rgba(0,0,0,0);border-radius:0;margin:0;padding:0;list-style-type:disc;transition:none;display:block;position:static;inset:auto;overflow:visible;transform:none}.w-webflow-badge[_ngcontent-%COMP%]{white-space:nowrap;cursor:pointer;box-shadow:0 0 0 1px #0000001a,0 1px 3px #0000001a;visibility:visible!important;z-index:2147483647!important;color:#aaadb0!important;opacity:1!important;width:auto!important;height:auto!important;background-color:#fff!important;border-radius:3px!important;margin:0!important;padding:6px 8px 6px 6px!important;font-size:12px!important;line-height:14px!important;text-decoration:none!important;display:inline-block!important;position:fixed!important;inset:auto 12px 12px auto!important;overflow:visible!important;transform:none!important}.w-webflow-badge[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;vertical-align:middle!important;display:inline-block!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:38px;line-height:44px}h2[_ngcontent-%COMP%]{margin-top:20px;font-size:32px;line-height:36px}h3[_ngcontent-%COMP%]{margin-top:20px;font-size:24px;line-height:30px}h4[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:24px}h5[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;line-height:20px}h6[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;line-height:18px}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}blockquote[_ngcontent-%COMP%]{border-left:5px solid #e2e2e2;margin:0 0 10px;padding:10px 20px;font-size:18px;line-height:22px}figure[_ngcontent-%COMP%]{margin:0 0 10px}figcaption[_ngcontent-%COMP%]{text-align:center;margin-top:5px}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.w-list-unstyled[_ngcontent-%COMP%]{padding-left:0;list-style:none}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:after{clear:both}.w-video[_ngcontent-%COMP%]{width:100%;padding:0;position:relative}.w-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   object[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{width:100%;height:100%;border:none;position:absolute;top:0;left:0}fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:button;border:0}.w-form[_ngcontent-%COMP%]{margin:0 0 15px}.w-form-done[_ngcontent-%COMP%]{text-align:center;background-color:#ddd;padding:20px;display:none}.w-form-fail[_ngcontent-%COMP%]{background-color:#ffdede;margin-top:10px;padding:10px;display:none}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}.w-input[_ngcontent-%COMP%], .w-select[_ngcontent-%COMP%]{width:100%;height:38px;color:#333;vertical-align:middle;background-color:#fff;border:1px solid #ccc;margin-bottom:10px;padding:8px 12px;font-size:14px;line-height:1.42857;display:block}.w-input[_ngcontent-%COMP%]:-moz-placeholder, .w-select[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-moz-placeholder, .w-select[_ngcontent-%COMP%]::-moz-placeholder{color:#999;opacity:1}.w-input[_ngcontent-%COMP%]:-ms-input-placeholder, .w-select[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-webkit-input-placeholder, .w-select[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]:focus, .w-select[_ngcontent-%COMP%]:focus{border-color:#3898ec;outline:0}.w-input[disabled][_ngcontent-%COMP%], .w-select[disabled][_ngcontent-%COMP%], .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-select[_ngcontent-%COMP%]{cursor:not-allowed}.w-input[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-select[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-select[_ngcontent-%COMP%]{background-color:#eee}textarea.w-input[_ngcontent-%COMP%], textarea.w-select[_ngcontent-%COMP%]{height:auto}.w-select[_ngcontent-%COMP%]{background-color:#f3f3f3}.w-select[multiple][_ngcontent-%COMP%]{height:auto}.w-form-label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:0;font-weight:400;display:inline-block}.w-radio[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-radio[_ngcontent-%COMP%]:before, .w-radio[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-radio[_ngcontent-%COMP%]:after{clear:both}.w-radio-input[_ngcontent-%COMP%]{margin:4px 0 0;margin-top:1px \\	;float:left;margin-top:3px;margin-left:-20px;line-height:normal}.w-file-upload[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.w-file-upload-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;z-index:-100;position:absolute;overflow:hidden}.w-file-upload-default[_ngcontent-%COMP%], .w-file-upload-uploading[_ngcontent-%COMP%], .w-file-upload-success[_ngcontent-%COMP%]{color:#333;display:inline-block}.w-file-upload-error[_ngcontent-%COMP%]{margin-top:10px;display:block}.w-file-upload-default.w-hidden[_ngcontent-%COMP%], .w-file-upload-uploading.w-hidden[_ngcontent-%COMP%], .w-file-upload-error.w-hidden[_ngcontent-%COMP%], .w-file-upload-success.w-hidden[_ngcontent-%COMP%]{display:none}.w-file-upload-uploading-btn[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:flex}.w-file-upload-file[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #ccc;flex-grow:1;justify-content:space-between;margin:0;padding:8px 9px 8px 11px;display:flex}.w-file-upload-file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:block}.w-file-remove-link[_ngcontent-%COMP%]{width:auto;height:auto;cursor:pointer;margin-top:3px;margin-left:10px;padding:3px;display:block}.w-icon-file-upload-remove[_ngcontent-%COMP%]{margin:auto;font-size:10px}.w-file-upload-error-msg[_ngcontent-%COMP%]{color:#ea384c;padding:2px 0;display:inline-block}.w-file-upload-info[_ngcontent-%COMP%]{padding:0 12px;line-height:38px;display:inline-block}.w-file-upload-label[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:inline-block}.w-icon-file-upload-icon[_ngcontent-%COMP%], .w-icon-file-upload-uploading[_ngcontent-%COMP%]{width:20px;margin-right:8px;display:inline-block}.w-icon-file-upload-uploading[_ngcontent-%COMP%]{height:20px}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.w-row[_ngcontent-%COMP%]:before, .w-row[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-row[_ngcontent-%COMP%]:after{clear:both}.w-row[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{float:left;width:100%;min-height:1px;padding-left:10px;padding-right:10px;position:relative}.w-col[_ngcontent-%COMP%]   .w-col[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.w-col-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-3[_ngcontent-%COMP%]{width:25%}.w-col-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-6[_ngcontent-%COMP%]{width:50%}.w-col-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-9[_ngcontent-%COMP%]{width:75%}.w-col-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-12[_ngcontent-%COMP%]{width:100%}.w-hidden-main[_ngcontent-%COMP%]{display:none!important}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}.w-hidden-main[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-medium[_ngcontent-%COMP%]{display:none!important}.w-col-medium-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-medium-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-medium-3[_ngcontent-%COMP%]{width:25%}.w-col-medium-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-medium-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-medium-6[_ngcontent-%COMP%]{width:50%}.w-col-medium-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-medium-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-medium-9[_ngcontent-%COMP%]{width:75%}.w-col-medium-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-medium-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-medium-12[_ngcontent-%COMP%]{width:100%}.w-col-stack[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}}@media screen and (max-width: 767px){.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-small[_ngcontent-%COMP%]{display:none!important}.w-row[_ngcontent-%COMP%], .w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}.w-col-small-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-small-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-small-3[_ngcontent-%COMP%]{width:25%}.w-col-small-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-small-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-small-6[_ngcontent-%COMP%]{width:50%}.w-col-small-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-small-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-small-9[_ngcontent-%COMP%]{width:75%}.w-col-small-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-small-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-small-12[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 479px){.w-container[_ngcontent-%COMP%]{max-width:none}.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%], .w-hidden-small[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-tiny[_ngcontent-%COMP%]{display:none!important}.w-col[_ngcontent-%COMP%]{width:100%}.w-col-tiny-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-tiny-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-tiny-3[_ngcontent-%COMP%]{width:25%}.w-col-tiny-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-tiny-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-tiny-6[_ngcontent-%COMP%]{width:50%}.w-col-tiny-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-tiny-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-tiny-9[_ngcontent-%COMP%]{width:75%}.w-col-tiny-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-tiny-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-tiny-12[_ngcontent-%COMP%]{width:100%}}.w-widget[_ngcontent-%COMP%]{position:relative}.w-widget-map[_ngcontent-%COMP%]{width:100%;height:400px}.w-widget-map[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto;display:inline}.w-widget-map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:inherit}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%]{text-align:center}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:none!important}.w-widget-twitter[_ngcontent-%COMP%]{overflow:hidden}.w-widget-twitter-count-shim[_ngcontent-%COMP%]{vertical-align:top;width:28px;height:20px;text-align:center;background:#fff;border:1px solid #758696;border-radius:3px;display:inline-block;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{text-align:center;color:#999;font-family:serif;font-size:15px;line-height:12px;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-clear[_ngcontent-%COMP%]{display:block;position:relative}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]{width:36px;height:28px}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical){margin-left:5px;margin-right:8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large{margin-left:6px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before, .w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:50%;left:0}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before{border-width:4px;border-color:rgba(117,134,150,0) #5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-top:-4px;margin-left:-9px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:before{border-width:5px;margin-top:-5px;margin-left:-10px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{border-width:4px;border-color:rgba(255,255,255,0) #fff rgba(255,255,255,0) rgba(255,255,255,0);margin-top:-4px;margin-left:-8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:after{border-width:5px;margin-top:-5px;margin-left:-9px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]{width:61px;height:33px;margin-bottom:8px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before, .w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:100%;left:50%}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before{border-width:5px;border-color:#5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-left:-5px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{border-width:4px;border-color:#fff rgba(255,255,255,0) rgba(255,255,255,0);margin-left:-4px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:22px}.w-widget-twitter-count-shim.w--vertical.w--large[_ngcontent-%COMP%]{width:76px}.w-background-video[_ngcontent-%COMP%]{height:500px;color:#fff;position:relative;overflow:hidden}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;z-index:-100;background-position:50%;background-size:cover;margin:auto;position:absolute;inset:-100%}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button{-webkit-appearance:none;display:none!important}.w-background-video--control[_ngcontent-%COMP%]{background-color:#0000;padding:0;position:absolute;bottom:1em;right:1em}.w-background-video--control[_ngcontent-%COMP%] > [hidden][_ngcontent-%COMP%]{display:none!important}.w-slider[_ngcontent-%COMP%]{height:300px;text-align:center;clear:both;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);background:#ddd;position:relative}.w-slider-mask[_ngcontent-%COMP%]{z-index:1;height:100%;white-space:nowrap;display:block;position:relative;left:0;right:0;overflow:hidden}.w-slide[_ngcontent-%COMP%]{vertical-align:top;width:100%;height:100%;white-space:normal;text-align:left;display:inline-block;position:relative}.w-slider-nav[_ngcontent-%COMP%]{z-index:2;height:40px;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);margin:auto;padding-top:10px;position:absolute;inset:auto 0 0}.w-slider-nav.w-round[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%}.w-slider-nav.w-num[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:auto;height:auto;font-size:inherit;line-height:inherit;padding:.2em .5em}.w-slider-nav.w-shadow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-shadow:0 0 3px #3336}.w-slider-nav-invert[_ngcontent-%COMP%]{color:#fff}.w-slider-nav-invert[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#2226}.w-slider-nav-invert[_ngcontent-%COMP%] > div.w-active[_ngcontent-%COMP%]{background-color:#222}.w-slider-dot[_ngcontent-%COMP%]{width:1em;height:1em;cursor:pointer;background-color:#fff6;margin:0 3px .5em;transition:background-color .1s,color .1s;display:inline-block;position:relative}.w-slider-dot.w-active[_ngcontent-%COMP%]{background-color:#fff}.w-slider-dot[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff}.w-slider-dot[_ngcontent-%COMP%]:focus.w-active{box-shadow:none}.w-slider-arrow-left[_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]{width:80px;cursor:pointer;color:#fff;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:auto;font-size:40px;position:absolute;inset:0;overflow:hidden}.w-slider-arrow-left[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-left[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%]{position:absolute}.w-slider-arrow-left[_ngcontent-%COMP%]:focus, .w-slider-arrow-right[_ngcontent-%COMP%]:focus{outline:0}.w-slider-arrow-left[_ngcontent-%COMP%]{z-index:3;right:auto}.w-slider-arrow-right[_ngcontent-%COMP%]{z-index:4;left:auto}.w-icon-slider-left[_ngcontent-%COMP%], .w-icon-slider-right[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto;inset:0}.w-slider-aria-label[_ngcontent-%COMP%]{clip:rect(0 0 0 0);height:1px;width:1px;border:0;margin:-1px;padding:0;position:absolute;overflow:hidden}.w-slider-force-show[_ngcontent-%COMP%]{display:block!important}.w-dropdown[_ngcontent-%COMP%]{text-align:left;z-index:900;margin-left:auto;margin-right:auto;display:inline-block;position:relative}.w-dropdown-btn[_ngcontent-%COMP%], .w-dropdown-toggle[_ngcontent-%COMP%], .w-dropdown-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;white-space:nowrap;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;position:relative}.w-dropdown-toggle[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;padding-right:40px;display:inline-block}.w-dropdown-toggle[_ngcontent-%COMP%]:focus{outline:0}.w-icon-dropdown-toggle[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto 20px auto auto;position:absolute;top:0;bottom:0;right:0}.w-dropdown-list[_ngcontent-%COMP%]{min-width:100%;background:#ddd;display:none;position:absolute}.w-dropdown-list.w--open[_ngcontent-%COMP%]{display:block}.w-dropdown-link[_ngcontent-%COMP%]{color:#222;padding:10px 20px;display:block}.w-dropdown-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-dropdown-link[_ngcontent-%COMP%]:focus{outline:0}@media screen and (max-width: 767px){.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}.w-lightbox-backdrop[_ngcontent-%COMP%]{cursor:auto;letter-spacing:normal;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;color:#fff;text-align:center;z-index:2000;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:transparent;background:#000000e6;outline:0;font-family:Helvetica Neue,Helvetica,Ubuntu,Segoe UI,Verdana,sans-serif;font-size:17px;font-style:normal;font-weight:300;line-height:1.2;list-style:disc;position:fixed;inset:0;-webkit-transform:translate(0)}.w-lightbox-backdrop[_ngcontent-%COMP%], .w-lightbox-container[_ngcontent-%COMP%]{height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.w-lightbox-content[_ngcontent-%COMP%]{height:100vh;position:relative;overflow:hidden}.w-lightbox-view[_ngcontent-%COMP%]{width:100vw;height:100vh;opacity:0;position:absolute}.w-lightbox-view[_ngcontent-%COMP%]:before{content:"";height:100vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:86vh}.w-lightbox-frame[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{vertical-align:middle;display:inline-block}.w-lightbox-figure[_ngcontent-%COMP%]{margin:0;position:relative}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-figure[_ngcontent-%COMP%]{cursor:pointer}.w-lightbox-img[_ngcontent-%COMP%]{width:auto;height:auto;max-width:none}.w-lightbox-image[_ngcontent-%COMP%]{float:none;max-width:100vw;max-height:100vh;display:block}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-height:86vh}.w-lightbox-caption[_ngcontent-%COMP%]{text-align:left;text-overflow:ellipsis;white-space:nowrap;background:#0006;padding:.5em 1em;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.w-lightbox-embed[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;inset:0}.w-lightbox-control[_ngcontent-%COMP%]{width:4em;cursor:pointer;background-position:center;background-repeat:no-repeat;background-size:24px;transition:all .3s;position:absolute;top:0}.w-lightbox-left[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAwIDI0IDQwIiB3aWR0aD0iMjQiIGhlaWdodD0iNDAiPjxnIHRyYW5zZm9ybT0icm90YXRlKDQ1KSI+PHBhdGggZD0ibTAgMGg1djIzaDIzdjVoLTI4eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDN2MjNoMjN2M2gtMjZ6IiBmaWxsPSIjZmZmIi8+PC9nPjwvc3ZnPg==);display:none;bottom:0;left:0}.w-lightbox-right[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMjQgNDAiIHdpZHRoPSIyNCIgaGVpZ2h0PSI0MCI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMC0waDI4djI4aC01di0yM2gtMjN6IiBvcGFjaXR5PSIuNCIvPjxwYXRoIGQ9Im0xIDFoMjZ2MjZoLTN2LTIzaC0yM3oiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+);display:none;bottom:0;right:0}.w-lightbox-close[_ngcontent-%COMP%]{height:2.6em;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMTggMTciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxNyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMCAwaDd2LTdoNXY3aDd2NWgtN3Y3aC01di03aC03eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDd2LTdoM3Y3aDd2M2gtN3Y3aC0zdi03aC03eiIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4=);background-size:18px;right:0}.w-lightbox-strip[_ngcontent-%COMP%]{white-space:nowrap;padding:0 1vh;line-height:0;position:absolute;bottom:0;left:0;right:0;overflow-x:auto;overflow-y:hidden}.w-lightbox-item[_ngcontent-%COMP%]{width:10vh;box-sizing:content-box;cursor:pointer;padding:2vh 1vh;display:inline-block;-webkit-transform:translate3d(0,0,0)}.w-lightbox-active[_ngcontent-%COMP%]{opacity:.3}.w-lightbox-thumbnail[_ngcontent-%COMP%]{height:10vh;background:#222;position:relative;overflow:hidden}.w-lightbox-thumbnail-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-tall[_ngcontent-%COMP%]{width:100%;top:50%;transform:translateY(-50%)}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-wide[_ngcontent-%COMP%]{height:100%;left:50%;transform:translate(-50%)}.w-lightbox-spinner[_ngcontent-%COMP%]{box-sizing:border-box;width:40px;height:40px;border:5px solid rgba(0,0,0,.4);border-radius:50%;margin-top:-20px;margin-left:-20px;animation:.8s linear infinite _ngcontent-%COMP%_spin;position:absolute;top:50%;left:50%}.w-lightbox-spinner[_ngcontent-%COMP%]:after{content:"";border:3px solid rgba(0,0,0,0);border-bottom-color:#fff;border-radius:50%;position:absolute;inset:-4px}.w-lightbox-hide[_ngcontent-%COMP%]{display:none}.w-lightbox-noscroll[_ngcontent-%COMP%]{overflow:hidden}@media (min-width: 768px){.w-lightbox-content[_ngcontent-%COMP%]{height:96vh;margin-top:2vh}.w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{height:96vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:84vh}.w-lightbox-image[_ngcontent-%COMP%]{max-width:96vw;max-height:96vh}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-width:82.3vw;max-height:84vh}.w-lightbox-left[_ngcontent-%COMP%], .w-lightbox-right[_ngcontent-%COMP%]{opacity:.5;display:block}.w-lightbox-close[_ngcontent-%COMP%]{opacity:.8}.w-lightbox-control[_ngcontent-%COMP%]:hover{opacity:1}}.w-lightbox-inactive[_ngcontent-%COMP%], .w-lightbox-inactive[_ngcontent-%COMP%]:hover{opacity:0}.w-richtext[_ngcontent-%COMP%]:before, .w-richtext[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-richtext[_ngcontent-%COMP%]:after{clear:both}.w-richtext[contenteditable=true][_ngcontent-%COMP%]:before, .w-richtext[contenteditable=true][_ngcontent-%COMP%]:after{white-space:initial}.w-richtext[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{overflow:hidden}.w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-video[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=video][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=image][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{outline:2px solid #2895f7}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;inset:0}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{max-width:60%;position:relative}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{cursor:default!important}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption.w-richtext-figcaption-placeholder[_ngcontent-%COMP%]{opacity:.6}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#0000;font-size:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%]{display:table}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{caption-side:bottom;display:table-caption}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]{width:60%;height:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[_ngcontent-%COMP%]{clear:both;margin-left:auto;margin-right:auto}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-normal[_ngcontent-%COMP%]{clear:both}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%]{width:100%;max-width:100%;text-align:center;clear:both;margin-left:auto;margin-right:auto;display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:inherit;display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatleft[_ngcontent-%COMP%]{float:left;clear:none;margin-right:15px}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatright[_ngcontent-%COMP%]{float:right;clear:none;margin-left:15px}.w-nav[_ngcontent-%COMP%]{z-index:1000;background:#ddd;position:relative}.w-nav[_ngcontent-%COMP%]:before, .w-nav[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-nav[_ngcontent-%COMP%]:after{clear:both}.w-nav-brand[_ngcontent-%COMP%]{float:left;color:#333;text-decoration:none;position:relative}.w-nav-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;display:inline-block;position:relative}.w-nav-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-nav-menu[_ngcontent-%COMP%]{float:right;position:relative}[data-nav-menu-open][_ngcontent-%COMP%]{text-align:center;min-width:200px;background:#c8c8c8;position:absolute;top:100%;left:0;right:0;overflow:visible;display:block!important}.w--nav-link-open[_ngcontent-%COMP%]{display:block;position:relative}.w-nav-overlay[_ngcontent-%COMP%]{width:100%;display:none;position:absolute;top:100%;left:0;right:0;overflow:hidden}.w-nav-overlay[_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{top:0}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-left][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;right:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-right][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;left:auto}.w-nav-button[_ngcontent-%COMP%]{float:right;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;padding:18px;font-size:24px;display:none;position:relative}.w-nav-button[_ngcontent-%COMP%]:focus{outline:0}.w-nav-button.w--open[_ngcontent-%COMP%]{color:#fff;background-color:#c8c8c8}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%], .w--nav-dropdown-open[_ngcontent-%COMP%], .w--nav-dropdown-toggle-open[_ngcontent-%COMP%]{display:block}.w--nav-dropdown-list-open[_ngcontent-%COMP%]{position:static}@media screen and (max-width: 991px){.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}@media screen and (max-width: 767px){.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}@media screen and (max-width: 479px){.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}.w-tabs[_ngcontent-%COMP%]{position:relative}.w-tabs[_ngcontent-%COMP%]:before, .w-tabs[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-tabs[_ngcontent-%COMP%]:after{clear:both}.w-tab-menu[_ngcontent-%COMP%]{position:relative}.w-tab-link[_ngcontent-%COMP%]{vertical-align:top;text-align:left;cursor:pointer;color:#222;background-color:#ddd;padding:9px 30px;text-decoration:none;display:inline-block;position:relative}.w-tab-link.w--current[_ngcontent-%COMP%]{background-color:#c8c8c8}.w-tab-link[_ngcontent-%COMP%]:focus{outline:0}.w-tab-content[_ngcontent-%COMP%]{display:block;position:relative;overflow:hidden}.w-tab-pane[_ngcontent-%COMP%]{display:none;position:relative}.w--tab-active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 479px){.w-tab-link[_ngcontent-%COMP%]{display:block}}.w-ix-emptyfix[_ngcontent-%COMP%]:after{content:""}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.w-dyn-empty[_ngcontent-%COMP%]{background-color:#ddd;padding:10px}.w-dyn-hide[_ngcontent-%COMP%], .w-dyn-bind-empty[_ngcontent-%COMP%], .w-condition-invisible[_ngcontent-%COMP%]{display:none!important}.wf-layout-layout[_ngcontent-%COMP%]{display:grid}.w-layout-grid[_ngcontent-%COMP%]{grid-row-gap:16px;grid-column-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.w-pagination-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;display:flex}.w-pagination-previous[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-previous-icon[_ngcontent-%COMP%]{margin-right:4px}.w-pagination-next[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-next-icon[_ngcontent-%COMP%]{margin-left:4px}.w-checkbox[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-checkbox[_ngcontent-%COMP%]:before{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox[_ngcontent-%COMP%]:after{content:" ";clear:both;grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox-input[_ngcontent-%COMP%]{float:left;margin:4px 0 0 -20px;line-height:normal}.w-checkbox-input--inputType-custom[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid #ccc;border-radius:2px}.w-checkbox-input--inputType-custom.w--redirected-checked[_ngcontent-%COMP%]{background-color:#3898ec;background-image:url(https://d3e54v103j8qbb.cloudfront.net/static/custom-checkbox-checkmark.589d534424.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;border-color:#3898ec}.w-checkbox-input--inputType-custom.w--redirected-focus[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px #3898ec}body[_ngcontent-%COMP%]{color:#000;font-family:Montserrat,sans-serif;font-size:12px;font-weight:400;line-height:1}h1[_ngcontent-%COMP%]{letter-spacing:7px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:9.58333em;font-weight:700;line-height:1}h2[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.91667em;font-weight:700;line-height:1}h3[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.25em;font-weight:700;line-height:1}h4[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;font-size:18px;font-weight:600;line-height:24px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.nav-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:relative}.navbar[_ngcontent-%COMP%]{z-index:999;height:72px;color:#fff;background-color:#000000f2;position:fixed;inset:0% 0% auto}.logo-link[_ngcontent-%COMP%]{height:100%;align-items:center;margin-left:30px;padding-left:0;transition:opacity .2s;display:flex;position:absolute;inset:0% auto auto 0%}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.nav-menu[_ngcontent-%COMP%]{width:100%;height:100%;max-width:690px;justify-content:space-between;align-items:center;margin-left:206px;margin-right:206px;display:flex}.nav-link[_ngcontent-%COMP%]{height:100%;opacity:.4;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding-left:0;padding-right:0;font-size:1em;font-weight:600;transition:opacity .2s;display:flex}.nav-link[_ngcontent-%COMP%]:hover{opacity:1}.nav-link[_ngcontent-%COMP%]:active{opacity:.75}.nav-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.nav-link.w--current[_ngcontent-%COMP%]:active{opacity:.75}.logotype[_ngcontent-%COMP%]{width:169px}.nav-social[_ngcontent-%COMP%]{height:100%;align-items:center;margin-right:30px;display:flex;position:absolute;inset:0% 0% auto auto}.nav-social.is-mobile[_ngcontent-%COMP%]{display:none}.collection-list[_ngcontent-%COMP%]{display:flex}.social-link[_ngcontent-%COMP%]{transition:opacity .2s}.social-link[_ngcontent-%COMP%]:hover{opacity:.7}.social-link[_ngcontent-%COMP%]:active{opacity:.5}.empty-tap-area[_ngcontent-%COMP%]{display:none}.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.section.is-hero-home[_ngcontent-%COMP%]{z-index:0;height:100vh;background-color:#000;padding-left:0;padding-right:0}.section.is-dark[_ngcontent-%COMP%]{color:#fff;background-color:#000}.section.is--welcome[_ngcontent-%COMP%]{z-index:1;background-color:#eee;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-repeat:no-repeat;background-size:cover}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df84c6fccb1bdc2d62_tile-texture.jpg);background-size:auto}.section.is--pre-footer[_ngcontent-%COMP%]{color:#fff;background-color:#333;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b288771c7edd54b4f2ae35_dark-geometric-pattern.jpg);background-position:50% 100%;background-repeat:no-repeat;background-size:cover}.section.is-hero[_ngcontent-%COMP%]{height:560px;background-image:linear-gradient(to right,#000,#7c7c7c);padding-left:0;padding-right:0}.section.is--services[_ngcontent-%COMP%]{background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df0e0fd836392a0c89_light-geometric-pattern.jpg);background-position:0 0;background-repeat:no-repeat;background-size:cover}.image-cover[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-cover.is--associates[_ngcontent-%COMP%]{object-position:50% 35%}.image-cover.is--home[_ngcontent-%COMP%]{object-position:50% 0%}.hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative}.black-overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0%}.home-hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.h1-home-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:25px;margin-top:10px;font-size:32px;font-weight:600}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;display:flex}.container.is--footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:70px;padding-bottom:35px;display:flex}.container.is--pre-footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.container.is--hero[_ngcontent-%COMP%]{height:100%;flex-direction:column;justify-content:center;align-items:flex-start;margin-top:40px;padding-top:0;padding-bottom:0;display:flex}.container.is--associates[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.label[_ngcontent-%COMP%]{color:#646464;margin-bottom:10px;font-size:1.33333em;line-height:1.5}.label.is--dark[_ngcontent-%COMP%]{color:#000;letter-spacing:1px;text-transform:uppercase;margin-bottom:14px;font-size:1em;font-weight:700}.text-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.text-wrap.is--no-margin[_ngcontent-%COMP%]{margin-bottom:0}.title[_ngcontent-%COMP%]{margin-bottom:35px;font-size:1.83333em;font-weight:600;line-height:1.4}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:15px}.p-bigger[_ngcontent-%COMP%]{font-size:1.5em}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}.button[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button[_ngcontent-%COMP%]:active{background-color:#0009}.card-grid[_ngcontent-%COMP%]{grid-column-gap:29px;grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr;margin-bottom:-52px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021}.card.is--double[_ngcontent-%COMP%]{width:100%;display:flex}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-details[_ngcontent-%COMP%]{z-index:2;width:100%;flex-direction:column;align-items:center;padding-bottom:50px;padding-left:50px;padding-right:50px;display:flex;position:relative}.number-icon[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#f0f0f0;border:7px solid #fff;border-radius:50%;justify-content:center;align-items:center;margin-top:-33px;margin-bottom:20px;display:flex}.number[_ngcontent-%COMP%]{font-size:33px;font-weight:600}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center}.p-light-big[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:35px;font-size:2.5em;font-weight:300}.slogan-wrapper[_ngcontent-%COMP%]{max-width:768px;margin-top:-10px;margin-left:auto;margin-right:auto}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.column.is--padding[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:75px}.column.is--image[_ngcontent-%COMP%]{background-color:#2c2c2c;overflow:hidden}.column.is--image.rounded[_ngcontent-%COMP%]{min-height:auto;border-radius:8px}.column.is--associates[_ngcontent-%COMP%]{min-height:auto;flex-direction:column;align-items:flex-start;padding-left:75px;padding-right:75px}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:75px;display:flex}.black-label[_ngcontent-%COMP%]{color:#fff;background-color:#000;margin-bottom:40px;margin-left:-134px;margin-right:-75px;padding:9px 14px 9px 134px}.label-text[_ngcontent-%COMP%]{font-size:2.08333em}.details-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.details-wrap.is--no-padding[_ngcontent-%COMP%]{margin-bottom:0}.card-image-wrap[_ngcontent-%COMP%]{width:100%;height:230px;object-fit:cover;background-color:#afafaf;overflow:hidden}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}.card-text.is--centred[_ngcontent-%COMP%]{height:100%;justify-content:center}.see-more-wrap[_ngcontent-%COMP%]{max-width:768px;flex-direction:column;align-items:center;margin-left:auto;margin-right:auto;display:flex}.card-text-wrap[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:190px;font-size:1.16667em}.footer[_ngcontent-%COMP%]{z-index:1;color:#fff;background-color:#141414;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.p-pre-footer[_ngcontent-%COMP%]{color:#d3d3d3;margin-top:10px;margin-bottom:35px;font-size:1.5em;font-weight:300}.p-pre-footer.is--associates[_ngcontent-%COMP%]{margin-bottom:0}.footer-link[_ngcontent-%COMP%]{height:100%;opacity:1;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding:19px;font-size:1em;font-weight:500;text-decoration:none;transition:opacity .2s;display:flex}.footer-link[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link[_ngcontent-%COMP%]:active{opacity:.5}.footer-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.footer-link.w--current[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link.w--current[_ngcontent-%COMP%]:active{opacity:.5}.footer-links[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:30px;margin-bottom:30px;display:flex}.logo-link-footer[_ngcontent-%COMP%]{height:100%;align-items:center;padding:10px;transition:opacity .2s;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.footer-social[_ngcontent-%COMP%]{height:100%;align-items:center;display:flex;position:static;inset:0% 0% auto auto}.copyright-wrap[_ngcontent-%COMP%]{color:#818181;letter-spacing:2px;text-transform:uppercase;align-items:center;margin-top:60px;font-size:.833333em;display:flex}.separator[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.link[_ngcontent-%COMP%]{color:#fff;border-bottom:1.5px solid rgba(255,255,255,0);padding-top:3px;padding-bottom:3px;font-weight:600;text-decoration:none;transition:border-color .2s;display:inline-block}.link[_ngcontent-%COMP%]:hover{border-bottom-color:#fff}.discover-div[_ngcontent-%COMP%]{z-index:3;color:#fff;justify-content:center;align-items:flex-end;display:flex;position:absolute;inset:auto 0% 0%}.discover-rotate[_ngcontent-%COMP%]{align-items:center;margin-bottom:65px;display:flex;transform:rotate(90deg)}.discover-line[_ngcontent-%COMP%]{width:60px;height:1px;background-color:#fff;margin-left:15px}.discover-text[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;font-size:1.08333em;font-weight:500}.black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#000000e6 20%,#0000004d);position:absolute;inset:0%}.hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:absolute;inset:0%}.h1-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:10px;font-size:115px}.p-hero[_ngcontent-%COMP%]{max-width:510px;color:#fff;margin-top:20px;font-size:22px;font-weight:300}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}.subtitile[_ngcontent-%COMP%]{color:#505050;margin-top:5px;font-size:1.5em}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:46px 40px 40px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.icon[_ngcontent-%COMP%]{width:96px}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}.p-card[_ngcontent-%COMP%]{font-size:1.2em}.collection-item[_ngcontent-%COMP%]{display:flex}.collection-list-3[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.lightbox-link[_ngcontent-%COMP%]{width:100%;height:30vw;max-height:368.094px;background-color:#eee;position:relative;overflow:hidden}.thumb-overlay[_ngcontent-%COMP%]{opacity:0;background-color:#00000080;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.logomark-white[_ngcontent-%COMP%]{width:40px}.p-bold[_ngcontent-%COMP%]{max-width:780px;color:#000;letter-spacing:0;text-transform:none;font-size:1.83333em;font-weight:600;line-height:1.5}.form-apply-grid[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.field-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:5px;display:flex}.field-label[_ngcontent-%COMP%]{margin-bottom:10px}.field-box[_ngcontent-%COMP%]{width:100%;color:#505050}.text-area[_ngcontent-%COMP%]{width:100%;min-height:140px}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:72px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.form-apply[_ngcontent-%COMP%]{margin-bottom:0}.success-text[_ngcontent-%COMP%]{padding:10px 33px 23px;font-size:14px;font-weight:600}.success-message[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:90px 0}.form-heading[_ngcontent-%COMP%]{letter-spacing:2px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]{color:#a12e30;background-color:#0000;margin-top:20px;padding:0;font-weight:500}.checkbox-field[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px;display:flex}.checkbox-text[_ngcontent-%COMP%]{color:#505050;margin-bottom:0;margin-left:15px;line-height:1.5}.consent-checkbox[_ngcontent-%COMP%]{flex:none;margin-top:0}.button-off[_ngcontent-%COMP%]{color:#fff;letter-spacing:2px;text-transform:uppercase;cursor:not-allowed;background-color:#e6e6e6;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;display:none}.button-on[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button-on[_ngcontent-%COMP%]:active{background-color:#0009}.field-para[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.1em}.grey-link[_ngcontent-%COMP%]{color:#505050}.button-off-text[_ngcontent-%COMP%]{cursor:not-allowed}.grey-line[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin-top:60px;margin-bottom:60px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.associates-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4;list-style-type:decimal}.text-left[_ngcontent-%COMP%]{max-width:440px}.associates-list[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-weight:600;line-height:1.4}.dont-see-profession[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:20px;font-weight:600}.job-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;font-size:1.7em;font-weight:600}.job-title-wrap[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;display:flex}.full-part-time[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:4px;margin-left:15px;padding:9px 10px;font-size:11px;font-weight:600}.lottie-animation[_ngcontent-%COMP%]{width:190px;margin-top:-10px;margin-left:auto;margin-right:auto}.open-role-list[_ngcontent-%COMP%]{grid-column-gap:0px;grid-row-gap:50px;grid-template-rows:auto auto;grid-template-columns:1fr;grid-auto-columns:1fr;display:grid}.grid-2[_ngcontent-%COMP%]{grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr}.card-contact[_ngcontent-%COMP%]{min-height:290px;color:#000;text-align:center;background-color:#fff;border-radius:8px;flex-direction:column;align-items:center;padding-top:42px;padding-bottom:42px;text-decoration:none;display:flex;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.contact-label[_ngcontent-%COMP%]{color:#969696;letter-spacing:2px;text-transform:uppercase;margin-top:30px;margin-bottom:20px;font-weight:600}.contact-link[_ngcontent-%COMP%]{color:#000;margin-bottom:10px;font-size:20px;font-weight:600;text-decoration:none;display:block}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:20px}.contact-card-wrap[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;display:flex}.p-address[_ngcontent-%COMP%]{max-width:240px;margin-bottom:20px}.link-wrap[_ngcontent-%COMP%]{margin-bottom:-10px}.documentation-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{letter-spacing:3px;text-transform:uppercase;margin-top:70px;margin-bottom:40px;font-size:50px}.documentation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:30px;font-size:16px}.documentation-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:50px;margin-bottom:30px;font-size:30px}.documentation-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#505050;margin-bottom:30px;font-size:16px;line-height:2}.documentation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:40px;margin-bottom:30px;font-size:23px}.documentation-list[_ngcontent-%COMP%]{display:flex}.open-graph-hide[_ngcontent-%COMP%]{display:none}.open-graph-image[_ngcontent-%COMP%]{width:1200px;height:630px;margin-bottom:20px}.wg-element-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;position:relative}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{margin-left:auto;position:absolute;inset:17px 30px auto auto}.wg-dropdown-1[_ngcontent-%COMP%]{width:auto;text-transform:uppercase;flex-direction:column;align-items:stretch;font-weight:700}.wg-dd-1-togle[_ngcontent-%COMP%]{z-index:1;width:100%;background-color:#272727;flex-direction:column;padding:10px 15px}.wg-dd-1-togle[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.wg-selector-text-wrapper[_ngcontent-%COMP%]{width:100%;align-items:center;display:flex}.wg-flag-ico[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;object-fit:cover}.wg-dd-1-list[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;box-shadow:0 -13px 50px 3px #11179c12}.wg-flag[_ngcontent-%COMP%]{width:20px;height:16px;justify-content:center;align-items:center;display:flex}.wg-dropdown-1-link[_ngcontent-%COMP%]{color:#000;background-color:#262626;padding:10px 15px;text-decoration:none;transition:background-color .1s}.wg-dropdown-1-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.div-block[_ngcontent-%COMP%]{width:1px;height:25px;opacity:.3;background-color:#fff;margin-left:10px;margin-right:72px}.pagination[_ngcontent-%COMP%]{margin-top:30px}@media screen and (max-width: 991px){.nav-container[_ngcontent-%COMP%]{justify-content:flex-start}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.logo-link.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.nav-menu[_ngcontent-%COMP%]{height:auto;max-width:none;background-color:#000000f2;justify-content:center;margin-left:0;margin-right:0;padding-top:30px;display:flex}.nav-link[_ngcontent-%COMP%]{z-index:1;padding-top:30px;padding-bottom:30px;font-size:1.4em;display:flex}.nav-social[_ngcontent-%COMP%]{display:none}.nav-social.is-mobile[_ngcontent-%COMP%]{z-index:1;justify-content:center;margin-right:0;padding-top:60px;padding-bottom:60px;display:flex;position:relative}.mobile-link[_ngcontent-%COMP%]{margin-left:auto;padding:9px 0}.mobile-link[_ngcontent-%COMP%]:hover{opacity:.75}.mobile-link[_ngcontent-%COMP%]:active{opacity:.5}.mobile-link.w--open[_ngcontent-%COMP%]{background-color:#0000}.burger-icon[_ngcontent-%COMP%]{width:80px}.empty-tap-area[_ngcontent-%COMP%]{height:100vh;display:block;position:absolute;inset:0%}.section.is--welcome[_ngcontent-%COMP%]{background-image:linear-gradient(#f3f3f3b0,#f3f3f3b0),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b3c56515595b50015a3c80_white-pattern.png),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-position:0 0,0 0,0 0;background-repeat:repeat,repeat,repeat;background-size:auto,auto,auto}.section.is-hero[_ngcontent-%COMP%]{height:410px}.h1-home-hero-small[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:75px}.container.is--gallery[_ngcontent-%COMP%]{max-width:none}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:5px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;margin-bottom:-23px}.card.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}.number-icon[_ngcontent-%COMP%]{margin-bottom:15px}.p-light-big[_ngcontent-%COMP%]{font-size:2.2em}.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}.column.is--associates[_ngcontent-%COMP%]{width:100%;margin-top:35px;padding-left:0;padding-right:0}.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}.card-image-wrap[_ngcontent-%COMP%]{height:400px}.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:none}.footer-link[_ngcontent-%COMP%]{z-index:1;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.logo-link-footer.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.h1-hero.outline-text[_ngcontent-%COMP%]{font-size:75px}.p-hero[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{text-align:left}.card-apply[_ngcontent-%COMP%]{width:100%;padding-top:50px;padding-bottom:75px}.form-heading[_ngcontent-%COMP%]{font-size:2.25em}.checkbox-text[_ngcontent-%COMP%]{text-align:left}.button-off[_ngcontent-%COMP%], .button-on[_ngcontent-%COMP%]{text-align:center;align-self:stretch}.grey-line[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:50px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:0px}.associates-title[_ngcontent-%COMP%]{font-size:1.7em}.text-left[_ngcontent-%COMP%]{padding-right:86px}.job-title[_ngcontent-%COMP%]{line-height:1.3}.job-title-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.full-part-time[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:8px;margin-left:0}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-contact[_ngcontent-%COMP%]{width:100%;min-height:auto;text-align:center;padding-top:56px;padding-bottom:56px}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:0}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{position:absolute;inset:16px 130px auto auto}}@media screen and (max-width: 767px){h2[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2.5em}h3[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2em}p[_ngcontent-%COMP%]{font-size:1.2em}.logo-link.w--current[_ngcontent-%COMP%]{padding-left:0}.nav-menu[_ngcontent-%COMP%]{min-height:100vh}.section.is-hero[_ngcontent-%COMP%]{height:340px}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:15px;font-size:16px}.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}.container.is--pre-footer[_ngcontent-%COMP%]{padding-top:96px;padding-bottom:96px}.container.is--hero[_ngcontent-%COMP%]{margin-top:53px}.label[_ngcontent-%COMP%]{font-size:1.2em}.button[_ngcontent-%COMP%]{justify-content:center;display:flex}.card-details[_ngcontent-%COMP%]{padding-bottom:40px;padding-left:40px;padding-right:40px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.label-text[_ngcontent-%COMP%]{font-size:1.7em}.card-image-wrap[_ngcontent-%COMP%]{height:55vw}.card-text[_ngcontent-%COMP%]{align-items:stretch}.card-text.is--centred[_ngcontent-%COMP%]{align-items:flex-start}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:6px;font-size:55px}.p-hero[_ngcontent-%COMP%]{max-width:380px;font-size:16px}.subtitile[_ngcontent-%COMP%]{font-size:1.4em}.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.lightbox-link[_ngcontent-%COMP%]{height:42vw}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.form-heading[_ngcontent-%COMP%]{font-size:1.9em}.button-on[_ngcontent-%COMP%]{justify-content:center}.text-left[_ngcontent-%COMP%]{padding-right:40px}.open-role-list[_ngcontent-%COMP%]{grid-row-gap:30px}.card-contact[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){h2[_ngcontent-%COMP%]{letter-spacing:2px;font-size:2em;line-height:1.1}.nav-container[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.logo-link[_ngcontent-%COMP%]{margin-left:20px}.logotype[_ngcontent-%COMP%]{width:140px}.burger-icon[_ngcontent-%COMP%]{width:60px;margin-left:20px}.section[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.section.is-hero-home[_ngcontent-%COMP%]{height:87vh}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:2vw;font-size:5vw}.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:56px}.label[_ngcontent-%COMP%]{font-size:1.2em}.title[_ngcontent-%COMP%]{font-size:1.7em}.button[_ngcontent-%COMP%]{text-align:center}.card-grid[_ngcontent-%COMP%]{margin-bottom:0}.card-details[_ngcontent-%COMP%]{padding-bottom:30px;padding-left:25px;padding-right:25px}.number-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:-31px;margin-bottom:12px}.number[_ngcontent-%COMP%]{font-size:25px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.p-light-big[_ngcontent-%COMP%]{font-size:1.7em;font-weight:400}.column.is--padding[_ngcontent-%COMP%]{padding:25px}.column.is--image[_ngcontent-%COMP%]{height:300px}.column.is--about[_ngcontent-%COMP%]{padding:25px}.black-label[_ngcontent-%COMP%]{margin-left:-25px;margin-right:-25px;padding:15px 25px}.label-text[_ngcontent-%COMP%]{letter-spacing:3px;font-size:1.4em;line-height:1.3}.card-image-wrap[_ngcontent-%COMP%]{height:62vw}.card-shadow[_ngcontent-%COMP%]{margin-bottom:20px}.p-pre-footer[_ngcontent-%COMP%]{font-size:1.2em}.footer-links[_ngcontent-%COMP%], .copyright-wrap[_ngcontent-%COMP%]{flex-direction:column}.separator[_ngcontent-%COMP%]{display:none}.discover-rotate[_ngcontent-%COMP%]{margin-bottom:49px}.discover-text[_ngcontent-%COMP%]{font-size:.8em}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:11vw}.p-hero[_ngcontent-%COMP%]{font-size:14px}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:20px;grid-row-gap:20px}.card-simple[_ngcontent-%COMP%]{padding:38px 20px 40px}.card-title[_ngcontent-%COMP%]{font-size:1.7em}.heading[_ngcontent-%COMP%]{letter-spacing:2px;font-size:1.8em}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.lightbox-link[_ngcontent-%COMP%]{height:80vw}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.card-apply[_ngcontent-%COMP%]{padding:38px 20px 40px}.form-heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:1.7em}.checkbox-text[_ngcontent-%COMP%]{margin-left:20px}.button-on[_ngcontent-%COMP%]{text-align:center}}#w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-375681b7[_ngcontent-%COMP%], #w-node-_4dbb65f5-dbff-7360-6381-24730cf4d5e5-375681b7[_ngcontent-%COMP%], #w-node-_49f4a6c9-ea6b-6d9e-523c-9fcfe16a6b0c-375681b7[_ngcontent-%COMP%], #w-node-d157a120-74ba-936e-35b8-7f77ccc5ada3-375681b7[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-375681b7[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-375681b7[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-375681b7[_ngcontent-%COMP%], #w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-70b41220[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-70b41220[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-70b41220[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}@media screen and (max-width: 991px){#w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-375681b7[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-375681b7[_ngcontent-%COMP%], #w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-70b41220[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}}',`@media screen and (min-width: 992px) {
                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .black-label[_ngcontent-%COMP%] {
                        margin-right: -134px;
                        margin-left: -14px;
                        padding-right: 0px;
                        padding-left: 14px;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card.is--double[_ngcontent-%COMP%] {
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: reverse;
                        -webkit-flex-direction: row-reverse;
                        -ms-flex-direction: row-reverse;
                        flex-direction: row-reverse;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card-text[_ngcontent-%COMP%] {
                        -webkit-box-align: stretch;
                        -webkit-align-items: stretch;
                        -ms-flex-align: stretch;
                        align-items: stretch;
                    }
                }`]});let x=g;return x})();var m2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-portafolio02"]],standalone:!0,features:[pn],decls:150,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"text-container"],[1,"section","is--featured-projects"],[1,"container","w-container"],[1,"w-embed"],[1,"w-dyn-list"],["role","list",1,"w-dyn-items"],["role","listitem",1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"card","is--double"],[1,"column","is--image"],["src","../../../../assets/img/iglesia03.JPG","loading","lazy","alt","\u03A0\u03BF\u03BB\u03C5\u03C4\u03B5\u03BB\u03AE\u03C2 \u03C0\u03B1\u03C1\u03B1\u03B8\u03B1\u03BB\u03AC\u03C3\u03C3\u03B9\u03B1 \u03C0\u03BF\u03BB\u03C5\u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03C3\u03C4\u03B7\u03BD \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1 \u0395\u03BB\u03BB\u03AC\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"column","is--padding"],[1,"card-text","is--featured"],[1,"black-label"],[1,"label-text"],[1,"details-wrap"],[1,"label","is--dark"],[1,"details-wrap","is--no-padding"],["src","../../../../assets/img/iglesia02.JPG","loading","lazy","alt","Bioclimatic house","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia05.jpg","loading","lazy","alt","\u0394\u03B9\u03B1\u03BC\u03B5\u03C1\u03AF\u03C3\u03BC\u03B1\u03C4\u03B1 \u03BC\u03B5 \u03B8\u03AD\u03B1 \u0391\u03BA\u03C1\u03CC\u03C0\u03BF\u03BB\u03B7 \u03C3\u03C4\u03BF\u03BD \u039A\u03B5\u03C1\u03B1\u03BC\u03B5\u03B9\u03BA\u03CC.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia04.jpg","loading","lazy","alt","K\u03B5\u03BD\u03C4\u03C1\u03B9\u03BA\u03AE \u03A0\u03CD\u03BB\u03B7 401 \u0393\u03A3\u039D\u0391","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia01.jpg","loading","lazy","alt","\u039C\u03BF\u03BD\u03C4\u03AD\u03C1\u03BD\u03B1 \u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03BC\u03AD\u03C3\u03B1 \u03C3\u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC \u03C4\u03B7\u03C2 \u03C0\u03CC\u03BB\u03B7\u03C2, \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"see-more-wrap"],[1,"p-light-big"],["href","/portfolio",1,"button","w-button"]],template:function(M,r){M&1&&(re(0,"html",0)(1,"head"),_t(2,"meta",1)(3,"meta",2),re(4,"title"),_e(5,"Triangle"),se(),re(6,"title"),_e(7,"Blackbox Architectonics | A Collaborative Studio"),se()(),re(8,"body")(9,"header")(10,"div",3)(11,"h1"),_e(12,"Edificios"),se(),re(13,"span"),_e(14,"Tecno Dry Wall - Carlos Roby"),se()()(),re(15,"section",4)(16,"div",5),_t(17,"div",6),re(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10)(22,"div",11)(23,"div",12),_t(24,"img",13),se(),re(25,"div",14)(26,"div",15)(27,"div",16)(28,"h3",17),_e(29,"Sea-View Apartments"),se()(),re(30,"div",18)(31,"div",19),_e(32,"Location"),se(),re(33,"p"),_e(34,"Chalkida, Greece"),se()(),re(35,"div",18)(36,"div",19),_e(37,"Status"),se(),re(38,"p"),_e(39,"Completed in 2008"),se()(),re(40,"div",20)(41,"div",19),_e(42,"Description"),se(),re(43,"p"),_e(44,"This apartment building is situated in a very privileged sea-view plot in the center of Chalkida. Being both next to the sea and to a neo-classical house has to adopt a double character. The combination of luxury and simplicity connects to the sea and the surroundings."),se()()()()()()(),re(45,"div",9)(46,"div",10)(47,"div",11)(48,"div",12),_t(49,"img",21),se(),re(50,"div",14)(51,"div",15)(52,"div",16)(53,"h3",17),_e(54,"bioclimatic-building"),se()(),re(55,"div",18)(56,"div",19),_e(57,"Location"),se(),re(58,"p"),_e(59,"Drafi, Greece"),se()(),re(60,"div",18)(61,"div",19),_e(62,"Status"),se(),re(63,"p"),_e(64,"Under construction"),se()(),re(65,"div",20)(66,"div",19),_e(67,"Description"),se(),re(68,"p"),_e(69,"This house is located in a rocky ridge with abrupt slopes.The need to create the minimum imprint in the surroundings along with creating a green ,energy-efficient building, led to the decision to drill the slope, instead of arranging a set of spaces at different levels."),se()()()()()()(),re(70,"div",9)(71,"div",10)(72,"div",11)(73,"div",12),_t(74,"img",22),se(),re(75,"div",14)(76,"div",15)(77,"div",16)(78,"h3",17),_e(79,"Acropolis-View Flats"),se()(),re(80,"div",18)(81,"div",19),_e(82,"Location"),se(),re(83,"p"),_e(84,"Athens, Greece"),se()(),re(85,"div",18)(86,"div",19),_e(87,"Status"),se(),re(88,"p"),_e(89,"Under Construction"),se()(),re(90,"div",20)(91,"div",19),_e(92,"Description"),se(),re(93,"p"),_e(94,"This contemporary building is located in Kerameikos, Athens near Acropolis. Apartments are designed primarily as functional. This functionalism though, has its own aesthetic quality leading to innovate, smart flats."),se()()()()()()(),re(95,"div",9)(96,"div",10)(97,"div",11)(98,"div",12),_t(99,"img",23),se(),re(100,"div",14)(101,"div",15)(102,"div",16)(103,"h3",17),_e(104,"401 Hospital Gate"),se()(),re(105,"div",18)(106,"div",19),_e(107,"Location"),se(),re(108,"p"),_e(109,"Athens, Greece"),se()(),re(110,"div",18)(111,"div",19),_e(112,"Status"),se(),re(113,"p"),_e(114,"Completed in 2021"),se()(),re(115,"div",20)(116,"div",19),_e(117,"Description"),se(),re(118,"p"),_e(119,"Iakovos Tsounis\u2019 endowment allowed to the famous military hospital to renovate its entrance gate. A key consideration is the adaptation of parts \u2013existing and new- to the whole, an appearance in unison with the rest of the hospital units and an appropriate use of ornament. All the above along with the practical needs such as the protection of the sun lead to a plain rigid form aligned to the military character of the hospital."),se()()()()()()(),re(120,"div",9)(121,"div",10)(122,"div",11)(123,"div",12),_t(124,"img",24),se(),re(125,"div",14)(126,"div",15)(127,"div",16)(128,"h3",17),_e(129,"Private Residence"),se()(),re(130,"div",18)(131,"div",19),_e(132,"Location"),se(),re(133,"p"),_e(134,"Chalkida, Greece"),se()(),re(135,"div",18)(136,"div",19),_e(137,"Status"),se(),re(138,"p"),_e(139,"Completed in 2007"),se()(),re(140,"div",20)(141,"div",19),_e(142,"Description"),se(),re(143,"p"),_e(144,"This residential project is for an urban double family house located in the city of Chalkida. The main idea is to unite the two residences into one discriminated whole so that they are both parts of one concrete volume. Selected parts of the volume are partitioned to establish an indoor-outdoor connection. The different parts of the synthesis are cladded with different materials. "),se()()()()()()()()(),re(145,"div",25)(146,"p",26),_e(147,"Like to see more projects?"),se(),re(148,"a",27),_e(149,"View our Portfolio"),se()()()()()())},styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#fff}header[_ngcontent-%COMP%]{width:100vw;height:55vh;background:linear-gradient(to right,#240909cc,#110606cc),url("./media/portada3-IZJHBW2N.webp");background-size:cover;background-position:center center;background-attachment:fixed;clip-path:polygon(0 0,100% 0,100% 80%,60% 100%,0 80%);position:relative}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:block;width:100%;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;text-align:center;color:#fff;text-shadow:0 0 10px rgba(0,0,0,5)}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,Helvetica,Arial,Lucida,sans-serif;font-weight:800;font-size:40px}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff4500;font-family:tdr;font-size:23px}','element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.12993,1.12993,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}div[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 767px){.label[_ngcontent-%COMP%]{font-size:1.2em}}p[_ngcontent-%COMP%]{font-size:1.2em}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}@media screen and (max-width: 991px){.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (min-width: 992px){.card-item[_ngcontent-%COMP%]:nth-child(2n)   .black-label[_ngcontent-%COMP%]{margin-right:-134px;margin-left:-14px;padding-right:0;padding-left:14px}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card.is--double[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card-text[_ngcontent-%COMP%]{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}}element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.10065,1.10065,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:block;font-size:1.17em;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;font-weight:700}div[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%], *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:before, *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.card[_ngcontent-%COMP%]{flex-direction:row}.card[_ngcontent-%COMP%]   .column.is--image[_ngcontent-%COMP%]{flex:2}.card[_ngcontent-%COMP%]   .column.is--padding[_ngcontent-%COMP%]{flex:1}}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block}html[_ngcontent-%COMP%]{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}body[_ngcontent-%COMP%]{margin:0}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], main[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%]{display:block}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline;display:inline-block}audio[_ngcontent-%COMP%]:not([controls]){height:0;display:none}[hidden][_ngcontent-%COMP%], template[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{background-color:#0000}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}abbr[title][_ngcontent-%COMP%]{border-bottom:1px dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700}dfn[_ngcontent-%COMP%]{font-style:italic}h1[_ngcontent-%COMP%]{margin:.67em 0;font-size:2em}mark[_ngcontent-%COMP%]{color:#000;background:#ff0}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sup[_ngcontent-%COMP%]{top:-.5em}sub[_ngcontent-%COMP%]{bottom:-.25em}img[_ngcontent-%COMP%]{border:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}figure[_ngcontent-%COMP%]{margin:1em 40px}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0}pre[_ngcontent-%COMP%]{overflow:auto}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace;font-size:1em}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:inherit;font:inherit;margin:0}button[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{-webkit-appearance:button;cursor:pointer}button[disabled][_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default}button[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}input[_ngcontent-%COMP%]{line-height:normal}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}input[type=search][_ngcontent-%COMP%]{-webkit-appearance:none}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}fieldset[_ngcontent-%COMP%]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[_ngcontent-%COMP%]{border:0;padding:0}textarea[_ngcontent-%COMP%]{overflow:auto}optgroup[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0}@font-face{font-family:webflow-icons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBiUAAAC8AAAAYGNtYXDpP+a4AAABHAAAAFxnYXNwAAAAEAAAAXgAAAAIZ2x5ZmhS2XEAAAGAAAADHGhlYWQTFw3HAAAEnAAAADZoaGVhCXYFgQAABNQAAAAkaG10eCe4A1oAAAT4AAAAMGxvY2EDtALGAAAFKAAAABptYXhwABAAPgAABUQAAAAgbmFtZSoCsMsAAAVkAAABznBvc3QAAwAAAAAHNAAAACAAAwP4AZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAQAAAAAwACAACAAQAAQAg5gPpA//9//8AAAAAACDmAOkA//3//wAB/+MaBBcIAAMAAQAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEBIAAAAyADgAAFAAAJAQcJARcDIP5AQAGA/oBAAcABwED+gP6AQAABAOAAAALgA4AABQAAEwEXCQEH4AHAQP6AAYBAAcABwED+gP6AQAAAAwDAAOADQALAAA8AHwAvAAABISIGHQEUFjMhMjY9ATQmByEiBh0BFBYzITI2PQE0JgchIgYdARQWMyEyNj0BNCYDIP3ADRMTDQJADRMTDf3ADRMTDQJADRMTDf3ADRMTDQJADRMTAsATDSANExMNIA0TwBMNIA0TEw0gDRPAEw0gDRMTDSANEwAAAAABAJ0AtAOBApUABQAACQIHCQEDJP7r/upcAXEBcgKU/usBFVz+fAGEAAAAAAL//f+9BAMDwwAEAAkAABcBJwEXAwE3AQdpA5ps/GZsbAOabPxmbEMDmmz8ZmwDmvxmbAOabAAAAgAA/8AEAAPAAB0AOwAABSInLgEnJjU0Nz4BNzYzMTIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjMSIHDgEHBhUUFx4BFxYzAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpVSktvICEhIG9LSlVVSktvICEhIG9LSlVAKCiLXl1qal1eiygoKCiLXl1qal1eiygoZiEgb0tKVVVKS28gISEgb0tKVVVKS28gIQABAAABwAIAA8AAEgAAEzQ3PgE3NjMxFSIHDgEHBhUxIwAoKIteXWpVSktvICFmAcBqXV6LKChmISBvS0pVAAAAAgAA/8AFtgPAADIAOgAAARYXHgEXFhUUBw4BBwYHIxUhIicuAScmNTQ3PgE3NjMxOAExNDc+ATc2MzIXHgEXFhcVATMJATMVMzUEjD83NlAXFxYXTjU1PQL8kz01Nk8XFxcXTzY1PSIjd1BQWlJJSXInJw3+mdv+2/7c25MCUQYcHFg5OUA/ODlXHBwIAhcXTzY1PTw1Nk8XF1tQUHcjIhwcYUNDTgL+3QFt/pOTkwABAAAAAQAAmM7nP18PPPUACwQAAAAAANciZKUAAAAA1yJkpf/9/70FtgPDAAAACAACAAAAAAAAAAEAAAPA/8AAAAW3//3//QW2AAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAgAAAAQAASAEAADgBAAAwAQAAJ0EAP/9BAAAAAQAAAAFtwAAAAAAAAAKABQAHgAyAEYAjACiAL4BFgE2AY4AAAABAAAADAA8AAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADQAAAAEAAAAAAAIABwCWAAEAAAAAAAMADQBIAAEAAAAAAAQADQCrAAEAAAAAAAUACwAnAAEAAAAAAAYADQBvAAEAAAAAAAoAGgDSAAMAAQQJAAEAGgANAAMAAQQJAAIADgCdAAMAAQQJAAMAGgBVAAMAAQQJAAQAGgC4AAMAAQQJAAUAFgAyAAMAAQQJAAYAGgB8AAMAAQQJAAoANADsd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype");font-weight:400;font-style:normal}[class^=w-icon-][_ngcontent-%COMP%], [class*=" w-icon-"][_ngcontent-%COMP%]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:webflow-icons!important}.w-icon-slider-right[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\20ac"}.w-icon-slider-left[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\81"}.w-icon-nav-menu[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\201a"}.w-icon-arrow-down[_ngcontent-%COMP%]:before, .w-icon-dropdown-toggle[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\192"}.w-icon-file-upload-remove[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\20ac"}.w-icon-file-upload-icon[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\192"}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{min-height:100%;color:#333;background-color:#fff;margin:0;font-family:Arial,sans-serif;font-size:14px;line-height:20px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}html.w-mod-touch[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-attachment:scroll!important}.w-block[_ngcontent-%COMP%]{display:block}.w-inline-block[_ngcontent-%COMP%]{max-width:100%;display:inline-block}.w-clearfix[_ngcontent-%COMP%]:before, .w-clearfix[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-clearfix[_ngcontent-%COMP%]:after{clear:both}.w-hidden[_ngcontent-%COMP%]{display:none}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}input.w-button[_ngcontent-%COMP%]{-webkit-appearance:button}html[data-w-dynpage][_ngcontent-%COMP%]   [data-w-cloak][_ngcontent-%COMP%]{color:#0000!important}.w-webflow-badge[_ngcontent-%COMP%], .w-webflow-badge[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{z-index:auto;visibility:visible;box-sizing:border-box;width:auto;height:auto;max-height:none;max-width:none;min-height:0;min-width:0;float:none;clear:none;box-shadow:none;opacity:1;direction:ltr;font-family:inherit;font-weight:inherit;color:inherit;font-size:inherit;line-height:inherit;font-style:inherit;font-variant:inherit;text-align:inherit;letter-spacing:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;text-indent:0;text-transform:inherit;text-shadow:none;font-smoothing:auto;vertical-align:baseline;cursor:inherit;white-space:inherit;word-break:normal;word-spacing:normal;word-wrap:normal;background:none;border:0 rgba(0,0,0,0);border-radius:0;margin:0;padding:0;list-style-type:disc;transition:none;display:block;position:static;inset:auto;overflow:visible;transform:none}.w-webflow-badge[_ngcontent-%COMP%]{white-space:nowrap;cursor:pointer;box-shadow:0 0 0 1px #0000001a,0 1px 3px #0000001a;visibility:visible!important;z-index:2147483647!important;color:#aaadb0!important;opacity:1!important;width:auto!important;height:auto!important;background-color:#fff!important;border-radius:3px!important;margin:0!important;padding:6px 8px 6px 6px!important;font-size:12px!important;line-height:14px!important;text-decoration:none!important;display:inline-block!important;position:fixed!important;inset:auto 12px 12px auto!important;overflow:visible!important;transform:none!important}.w-webflow-badge[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;vertical-align:middle!important;display:inline-block!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:38px;line-height:44px}h2[_ngcontent-%COMP%]{margin-top:20px;font-size:32px;line-height:36px}h3[_ngcontent-%COMP%]{margin-top:20px;font-size:24px;line-height:30px}h4[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:24px}h5[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;line-height:20px}h6[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;line-height:18px}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}blockquote[_ngcontent-%COMP%]{border-left:5px solid #e2e2e2;margin:0 0 10px;padding:10px 20px;font-size:18px;line-height:22px}figure[_ngcontent-%COMP%]{margin:0 0 10px}figcaption[_ngcontent-%COMP%]{text-align:center;margin-top:5px}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.w-list-unstyled[_ngcontent-%COMP%]{padding-left:0;list-style:none}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:after{clear:both}.w-video[_ngcontent-%COMP%]{width:100%;padding:0;position:relative}.w-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   object[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{width:100%;height:100%;border:none;position:absolute;top:0;left:0}fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:button;border:0}.w-form[_ngcontent-%COMP%]{margin:0 0 15px}.w-form-done[_ngcontent-%COMP%]{text-align:center;background-color:#ddd;padding:20px;display:none}.w-form-fail[_ngcontent-%COMP%]{background-color:#ffdede;margin-top:10px;padding:10px;display:none}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}.w-input[_ngcontent-%COMP%], .w-select[_ngcontent-%COMP%]{width:100%;height:38px;color:#333;vertical-align:middle;background-color:#fff;border:1px solid #ccc;margin-bottom:10px;padding:8px 12px;font-size:14px;line-height:1.42857;display:block}.w-input[_ngcontent-%COMP%]:-moz-placeholder, .w-select[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-moz-placeholder, .w-select[_ngcontent-%COMP%]::-moz-placeholder{color:#999;opacity:1}.w-input[_ngcontent-%COMP%]:-ms-input-placeholder, .w-select[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-webkit-input-placeholder, .w-select[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]:focus, .w-select[_ngcontent-%COMP%]:focus{border-color:#3898ec;outline:0}.w-input[disabled][_ngcontent-%COMP%], .w-select[disabled][_ngcontent-%COMP%], .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-select[_ngcontent-%COMP%]{cursor:not-allowed}.w-input[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-select[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-select[_ngcontent-%COMP%]{background-color:#eee}textarea.w-input[_ngcontent-%COMP%], textarea.w-select[_ngcontent-%COMP%]{height:auto}.w-select[_ngcontent-%COMP%]{background-color:#f3f3f3}.w-select[multiple][_ngcontent-%COMP%]{height:auto}.w-form-label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:0;font-weight:400;display:inline-block}.w-radio[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-radio[_ngcontent-%COMP%]:before, .w-radio[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-radio[_ngcontent-%COMP%]:after{clear:both}.w-radio-input[_ngcontent-%COMP%]{margin:4px 0 0;margin-top:1px \\	;float:left;margin-top:3px;margin-left:-20px;line-height:normal}.w-file-upload[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.w-file-upload-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;z-index:-100;position:absolute;overflow:hidden}.w-file-upload-default[_ngcontent-%COMP%], .w-file-upload-uploading[_ngcontent-%COMP%], .w-file-upload-success[_ngcontent-%COMP%]{color:#333;display:inline-block}.w-file-upload-error[_ngcontent-%COMP%]{margin-top:10px;display:block}.w-file-upload-default.w-hidden[_ngcontent-%COMP%], .w-file-upload-uploading.w-hidden[_ngcontent-%COMP%], .w-file-upload-error.w-hidden[_ngcontent-%COMP%], .w-file-upload-success.w-hidden[_ngcontent-%COMP%]{display:none}.w-file-upload-uploading-btn[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:flex}.w-file-upload-file[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #ccc;flex-grow:1;justify-content:space-between;margin:0;padding:8px 9px 8px 11px;display:flex}.w-file-upload-file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:block}.w-file-remove-link[_ngcontent-%COMP%]{width:auto;height:auto;cursor:pointer;margin-top:3px;margin-left:10px;padding:3px;display:block}.w-icon-file-upload-remove[_ngcontent-%COMP%]{margin:auto;font-size:10px}.w-file-upload-error-msg[_ngcontent-%COMP%]{color:#ea384c;padding:2px 0;display:inline-block}.w-file-upload-info[_ngcontent-%COMP%]{padding:0 12px;line-height:38px;display:inline-block}.w-file-upload-label[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:inline-block}.w-icon-file-upload-icon[_ngcontent-%COMP%], .w-icon-file-upload-uploading[_ngcontent-%COMP%]{width:20px;margin-right:8px;display:inline-block}.w-icon-file-upload-uploading[_ngcontent-%COMP%]{height:20px}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.w-row[_ngcontent-%COMP%]:before, .w-row[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-row[_ngcontent-%COMP%]:after{clear:both}.w-row[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{float:left;width:100%;min-height:1px;padding-left:10px;padding-right:10px;position:relative}.w-col[_ngcontent-%COMP%]   .w-col[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.w-col-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-3[_ngcontent-%COMP%]{width:25%}.w-col-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-6[_ngcontent-%COMP%]{width:50%}.w-col-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-9[_ngcontent-%COMP%]{width:75%}.w-col-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-12[_ngcontent-%COMP%]{width:100%}.w-hidden-main[_ngcontent-%COMP%]{display:none!important}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}.w-hidden-main[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-medium[_ngcontent-%COMP%]{display:none!important}.w-col-medium-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-medium-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-medium-3[_ngcontent-%COMP%]{width:25%}.w-col-medium-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-medium-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-medium-6[_ngcontent-%COMP%]{width:50%}.w-col-medium-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-medium-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-medium-9[_ngcontent-%COMP%]{width:75%}.w-col-medium-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-medium-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-medium-12[_ngcontent-%COMP%]{width:100%}.w-col-stack[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}}@media screen and (max-width: 767px){.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-small[_ngcontent-%COMP%]{display:none!important}.w-row[_ngcontent-%COMP%], .w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}.w-col-small-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-small-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-small-3[_ngcontent-%COMP%]{width:25%}.w-col-small-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-small-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-small-6[_ngcontent-%COMP%]{width:50%}.w-col-small-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-small-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-small-9[_ngcontent-%COMP%]{width:75%}.w-col-small-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-small-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-small-12[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 479px){.w-container[_ngcontent-%COMP%]{max-width:none}.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%], .w-hidden-small[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-tiny[_ngcontent-%COMP%]{display:none!important}.w-col[_ngcontent-%COMP%]{width:100%}.w-col-tiny-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-tiny-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-tiny-3[_ngcontent-%COMP%]{width:25%}.w-col-tiny-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-tiny-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-tiny-6[_ngcontent-%COMP%]{width:50%}.w-col-tiny-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-tiny-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-tiny-9[_ngcontent-%COMP%]{width:75%}.w-col-tiny-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-tiny-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-tiny-12[_ngcontent-%COMP%]{width:100%}}.w-widget[_ngcontent-%COMP%]{position:relative}.w-widget-map[_ngcontent-%COMP%]{width:100%;height:400px}.w-widget-map[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto;display:inline}.w-widget-map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:inherit}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%]{text-align:center}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:none!important}.w-widget-twitter[_ngcontent-%COMP%]{overflow:hidden}.w-widget-twitter-count-shim[_ngcontent-%COMP%]{vertical-align:top;width:28px;height:20px;text-align:center;background:#fff;border:1px solid #758696;border-radius:3px;display:inline-block;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{text-align:center;color:#999;font-family:serif;font-size:15px;line-height:12px;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-clear[_ngcontent-%COMP%]{display:block;position:relative}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]{width:36px;height:28px}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical){margin-left:5px;margin-right:8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large{margin-left:6px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before, .w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:50%;left:0}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before{border-width:4px;border-color:rgba(117,134,150,0) #5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-top:-4px;margin-left:-9px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:before{border-width:5px;margin-top:-5px;margin-left:-10px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{border-width:4px;border-color:rgba(255,255,255,0) #fff rgba(255,255,255,0) rgba(255,255,255,0);margin-top:-4px;margin-left:-8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:after{border-width:5px;margin-top:-5px;margin-left:-9px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]{width:61px;height:33px;margin-bottom:8px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before, .w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:100%;left:50%}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before{border-width:5px;border-color:#5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-left:-5px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{border-width:4px;border-color:#fff rgba(255,255,255,0) rgba(255,255,255,0);margin-left:-4px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:22px}.w-widget-twitter-count-shim.w--vertical.w--large[_ngcontent-%COMP%]{width:76px}.w-background-video[_ngcontent-%COMP%]{height:500px;color:#fff;position:relative;overflow:hidden}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;z-index:-100;background-position:50%;background-size:cover;margin:auto;position:absolute;inset:-100%}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button{-webkit-appearance:none;display:none!important}.w-background-video--control[_ngcontent-%COMP%]{background-color:#0000;padding:0;position:absolute;bottom:1em;right:1em}.w-background-video--control[_ngcontent-%COMP%] > [hidden][_ngcontent-%COMP%]{display:none!important}.w-slider[_ngcontent-%COMP%]{height:300px;text-align:center;clear:both;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);background:#ddd;position:relative}.w-slider-mask[_ngcontent-%COMP%]{z-index:1;height:100%;white-space:nowrap;display:block;position:relative;left:0;right:0;overflow:hidden}.w-slide[_ngcontent-%COMP%]{vertical-align:top;width:100%;height:100%;white-space:normal;text-align:left;display:inline-block;position:relative}.w-slider-nav[_ngcontent-%COMP%]{z-index:2;height:40px;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);margin:auto;padding-top:10px;position:absolute;inset:auto 0 0}.w-slider-nav.w-round[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%}.w-slider-nav.w-num[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:auto;height:auto;font-size:inherit;line-height:inherit;padding:.2em .5em}.w-slider-nav.w-shadow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-shadow:0 0 3px #3336}.w-slider-nav-invert[_ngcontent-%COMP%]{color:#fff}.w-slider-nav-invert[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#2226}.w-slider-nav-invert[_ngcontent-%COMP%] > div.w-active[_ngcontent-%COMP%]{background-color:#222}.w-slider-dot[_ngcontent-%COMP%]{width:1em;height:1em;cursor:pointer;background-color:#fff6;margin:0 3px .5em;transition:background-color .1s,color .1s;display:inline-block;position:relative}.w-slider-dot.w-active[_ngcontent-%COMP%]{background-color:#fff}.w-slider-dot[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff}.w-slider-dot[_ngcontent-%COMP%]:focus.w-active{box-shadow:none}.w-slider-arrow-left[_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]{width:80px;cursor:pointer;color:#fff;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:auto;font-size:40px;position:absolute;inset:0;overflow:hidden}.w-slider-arrow-left[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-left[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%]{position:absolute}.w-slider-arrow-left[_ngcontent-%COMP%]:focus, .w-slider-arrow-right[_ngcontent-%COMP%]:focus{outline:0}.w-slider-arrow-left[_ngcontent-%COMP%]{z-index:3;right:auto}.w-slider-arrow-right[_ngcontent-%COMP%]{z-index:4;left:auto}.w-icon-slider-left[_ngcontent-%COMP%], .w-icon-slider-right[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto;inset:0}.w-slider-aria-label[_ngcontent-%COMP%]{clip:rect(0 0 0 0);height:1px;width:1px;border:0;margin:-1px;padding:0;position:absolute;overflow:hidden}.w-slider-force-show[_ngcontent-%COMP%]{display:block!important}.w-dropdown[_ngcontent-%COMP%]{text-align:left;z-index:900;margin-left:auto;margin-right:auto;display:inline-block;position:relative}.w-dropdown-btn[_ngcontent-%COMP%], .w-dropdown-toggle[_ngcontent-%COMP%], .w-dropdown-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;white-space:nowrap;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;position:relative}.w-dropdown-toggle[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;padding-right:40px;display:inline-block}.w-dropdown-toggle[_ngcontent-%COMP%]:focus{outline:0}.w-icon-dropdown-toggle[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto 20px auto auto;position:absolute;top:0;bottom:0;right:0}.w-dropdown-list[_ngcontent-%COMP%]{min-width:100%;background:#ddd;display:none;position:absolute}.w-dropdown-list.w--open[_ngcontent-%COMP%]{display:block}.w-dropdown-link[_ngcontent-%COMP%]{color:#222;padding:10px 20px;display:block}.w-dropdown-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-dropdown-link[_ngcontent-%COMP%]:focus{outline:0}@media screen and (max-width: 767px){.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}.w-lightbox-backdrop[_ngcontent-%COMP%]{cursor:auto;letter-spacing:normal;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;color:#fff;text-align:center;z-index:2000;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:transparent;background:#000000e6;outline:0;font-family:Helvetica Neue,Helvetica,Ubuntu,Segoe UI,Verdana,sans-serif;font-size:17px;font-style:normal;font-weight:300;line-height:1.2;list-style:disc;position:fixed;inset:0;-webkit-transform:translate(0)}.w-lightbox-backdrop[_ngcontent-%COMP%], .w-lightbox-container[_ngcontent-%COMP%]{height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.w-lightbox-content[_ngcontent-%COMP%]{height:100vh;position:relative;overflow:hidden}.w-lightbox-view[_ngcontent-%COMP%]{width:100vw;height:100vh;opacity:0;position:absolute}.w-lightbox-view[_ngcontent-%COMP%]:before{content:"";height:100vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:86vh}.w-lightbox-frame[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{vertical-align:middle;display:inline-block}.w-lightbox-figure[_ngcontent-%COMP%]{margin:0;position:relative}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-figure[_ngcontent-%COMP%]{cursor:pointer}.w-lightbox-img[_ngcontent-%COMP%]{width:auto;height:auto;max-width:none}.w-lightbox-image[_ngcontent-%COMP%]{float:none;max-width:100vw;max-height:100vh;display:block}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-height:86vh}.w-lightbox-caption[_ngcontent-%COMP%]{text-align:left;text-overflow:ellipsis;white-space:nowrap;background:#0006;padding:.5em 1em;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.w-lightbox-embed[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;inset:0}.w-lightbox-control[_ngcontent-%COMP%]{width:4em;cursor:pointer;background-position:center;background-repeat:no-repeat;background-size:24px;transition:all .3s;position:absolute;top:0}.w-lightbox-left[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAwIDI0IDQwIiB3aWR0aD0iMjQiIGhlaWdodD0iNDAiPjxnIHRyYW5zZm9ybT0icm90YXRlKDQ1KSI+PHBhdGggZD0ibTAgMGg1djIzaDIzdjVoLTI4eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDN2MjNoMjN2M2gtMjZ6IiBmaWxsPSIjZmZmIi8+PC9nPjwvc3ZnPg==);display:none;bottom:0;left:0}.w-lightbox-right[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMjQgNDAiIHdpZHRoPSIyNCIgaGVpZ2h0PSI0MCI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMC0waDI4djI4aC01di0yM2gtMjN6IiBvcGFjaXR5PSIuNCIvPjxwYXRoIGQ9Im0xIDFoMjZ2MjZoLTN2LTIzaC0yM3oiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+);display:none;bottom:0;right:0}.w-lightbox-close[_ngcontent-%COMP%]{height:2.6em;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMTggMTciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxNyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMCAwaDd2LTdoNXY3aDd2NWgtN3Y3aC01di03aC03eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDd2LTdoM3Y3aDd2M2gtN3Y3aC0zdi03aC03eiIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4=);background-size:18px;right:0}.w-lightbox-strip[_ngcontent-%COMP%]{white-space:nowrap;padding:0 1vh;line-height:0;position:absolute;bottom:0;left:0;right:0;overflow-x:auto;overflow-y:hidden}.w-lightbox-item[_ngcontent-%COMP%]{width:10vh;box-sizing:content-box;cursor:pointer;padding:2vh 1vh;display:inline-block;-webkit-transform:translate3d(0,0,0)}.w-lightbox-active[_ngcontent-%COMP%]{opacity:.3}.w-lightbox-thumbnail[_ngcontent-%COMP%]{height:10vh;background:#222;position:relative;overflow:hidden}.w-lightbox-thumbnail-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-tall[_ngcontent-%COMP%]{width:100%;top:50%;transform:translateY(-50%)}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-wide[_ngcontent-%COMP%]{height:100%;left:50%;transform:translate(-50%)}.w-lightbox-spinner[_ngcontent-%COMP%]{box-sizing:border-box;width:40px;height:40px;border:5px solid rgba(0,0,0,.4);border-radius:50%;margin-top:-20px;margin-left:-20px;animation:.8s linear infinite _ngcontent-%COMP%_spin;position:absolute;top:50%;left:50%}.w-lightbox-spinner[_ngcontent-%COMP%]:after{content:"";border:3px solid rgba(0,0,0,0);border-bottom-color:#fff;border-radius:50%;position:absolute;inset:-4px}.w-lightbox-hide[_ngcontent-%COMP%]{display:none}.w-lightbox-noscroll[_ngcontent-%COMP%]{overflow:hidden}@media (min-width: 768px){.w-lightbox-content[_ngcontent-%COMP%]{height:96vh;margin-top:2vh}.w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{height:96vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:84vh}.w-lightbox-image[_ngcontent-%COMP%]{max-width:96vw;max-height:96vh}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-width:82.3vw;max-height:84vh}.w-lightbox-left[_ngcontent-%COMP%], .w-lightbox-right[_ngcontent-%COMP%]{opacity:.5;display:block}.w-lightbox-close[_ngcontent-%COMP%]{opacity:.8}.w-lightbox-control[_ngcontent-%COMP%]:hover{opacity:1}}.w-lightbox-inactive[_ngcontent-%COMP%], .w-lightbox-inactive[_ngcontent-%COMP%]:hover{opacity:0}.w-richtext[_ngcontent-%COMP%]:before, .w-richtext[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-richtext[_ngcontent-%COMP%]:after{clear:both}.w-richtext[contenteditable=true][_ngcontent-%COMP%]:before, .w-richtext[contenteditable=true][_ngcontent-%COMP%]:after{white-space:initial}.w-richtext[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{overflow:hidden}.w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-video[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=video][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=image][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{outline:2px solid #2895f7}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;inset:0}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{max-width:60%;position:relative}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{cursor:default!important}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption.w-richtext-figcaption-placeholder[_ngcontent-%COMP%]{opacity:.6}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#0000;font-size:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%]{display:table}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{caption-side:bottom;display:table-caption}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]{width:60%;height:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[_ngcontent-%COMP%]{clear:both;margin-left:auto;margin-right:auto}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-normal[_ngcontent-%COMP%]{clear:both}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%]{width:100%;max-width:100%;text-align:center;clear:both;margin-left:auto;margin-right:auto;display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:inherit;display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatleft[_ngcontent-%COMP%]{float:left;clear:none;margin-right:15px}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatright[_ngcontent-%COMP%]{float:right;clear:none;margin-left:15px}.w-nav[_ngcontent-%COMP%]{z-index:1000;background:#ddd;position:relative}.w-nav[_ngcontent-%COMP%]:before, .w-nav[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-nav[_ngcontent-%COMP%]:after{clear:both}.w-nav-brand[_ngcontent-%COMP%]{float:left;color:#333;text-decoration:none;position:relative}.w-nav-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;display:inline-block;position:relative}.w-nav-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-nav-menu[_ngcontent-%COMP%]{float:right;position:relative}[data-nav-menu-open][_ngcontent-%COMP%]{text-align:center;min-width:200px;background:#c8c8c8;position:absolute;top:100%;left:0;right:0;overflow:visible;display:block!important}.w--nav-link-open[_ngcontent-%COMP%]{display:block;position:relative}.w-nav-overlay[_ngcontent-%COMP%]{width:100%;display:none;position:absolute;top:100%;left:0;right:0;overflow:hidden}.w-nav-overlay[_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{top:0}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-left][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;right:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-right][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;left:auto}.w-nav-button[_ngcontent-%COMP%]{float:right;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;padding:18px;font-size:24px;display:none;position:relative}.w-nav-button[_ngcontent-%COMP%]:focus{outline:0}.w-nav-button.w--open[_ngcontent-%COMP%]{color:#fff;background-color:#c8c8c8}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%], .w--nav-dropdown-open[_ngcontent-%COMP%], .w--nav-dropdown-toggle-open[_ngcontent-%COMP%]{display:block}.w--nav-dropdown-list-open[_ngcontent-%COMP%]{position:static}@media screen and (max-width: 991px){.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}@media screen and (max-width: 767px){.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}@media screen and (max-width: 479px){.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}.w-tabs[_ngcontent-%COMP%]{position:relative}.w-tabs[_ngcontent-%COMP%]:before, .w-tabs[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-tabs[_ngcontent-%COMP%]:after{clear:both}.w-tab-menu[_ngcontent-%COMP%]{position:relative}.w-tab-link[_ngcontent-%COMP%]{vertical-align:top;text-align:left;cursor:pointer;color:#222;background-color:#ddd;padding:9px 30px;text-decoration:none;display:inline-block;position:relative}.w-tab-link.w--current[_ngcontent-%COMP%]{background-color:#c8c8c8}.w-tab-link[_ngcontent-%COMP%]:focus{outline:0}.w-tab-content[_ngcontent-%COMP%]{display:block;position:relative;overflow:hidden}.w-tab-pane[_ngcontent-%COMP%]{display:none;position:relative}.w--tab-active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 479px){.w-tab-link[_ngcontent-%COMP%]{display:block}}.w-ix-emptyfix[_ngcontent-%COMP%]:after{content:""}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.w-dyn-empty[_ngcontent-%COMP%]{background-color:#ddd;padding:10px}.w-dyn-hide[_ngcontent-%COMP%], .w-dyn-bind-empty[_ngcontent-%COMP%], .w-condition-invisible[_ngcontent-%COMP%]{display:none!important}.wf-layout-layout[_ngcontent-%COMP%]{display:grid}.w-layout-grid[_ngcontent-%COMP%]{grid-row-gap:16px;grid-column-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.w-pagination-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;display:flex}.w-pagination-previous[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-previous-icon[_ngcontent-%COMP%]{margin-right:4px}.w-pagination-next[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-next-icon[_ngcontent-%COMP%]{margin-left:4px}.w-checkbox[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-checkbox[_ngcontent-%COMP%]:before{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox[_ngcontent-%COMP%]:after{content:" ";clear:both;grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox-input[_ngcontent-%COMP%]{float:left;margin:4px 0 0 -20px;line-height:normal}.w-checkbox-input--inputType-custom[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid #ccc;border-radius:2px}.w-checkbox-input--inputType-custom.w--redirected-checked[_ngcontent-%COMP%]{background-color:#3898ec;background-image:url(https://d3e54v103j8qbb.cloudfront.net/static/custom-checkbox-checkmark.589d534424.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;border-color:#3898ec}.w-checkbox-input--inputType-custom.w--redirected-focus[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px #3898ec}body[_ngcontent-%COMP%]{color:#000;font-family:Montserrat,sans-serif;font-size:12px;font-weight:400;line-height:1}h1[_ngcontent-%COMP%]{letter-spacing:7px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:9.58333em;font-weight:700;line-height:1}h2[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.91667em;font-weight:700;line-height:1}h3[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.25em;font-weight:700;line-height:1}h4[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;font-size:18px;font-weight:600;line-height:24px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.nav-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:relative}.navbar[_ngcontent-%COMP%]{z-index:999;height:72px;color:#fff;background-color:#000000f2;position:fixed;inset:0% 0% auto}.logo-link[_ngcontent-%COMP%]{height:100%;align-items:center;margin-left:30px;padding-left:0;transition:opacity .2s;display:flex;position:absolute;inset:0% auto auto 0%}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.nav-menu[_ngcontent-%COMP%]{width:100%;height:100%;max-width:690px;justify-content:space-between;align-items:center;margin-left:206px;margin-right:206px;display:flex}.nav-link[_ngcontent-%COMP%]{height:100%;opacity:.4;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding-left:0;padding-right:0;font-size:1em;font-weight:600;transition:opacity .2s;display:flex}.nav-link[_ngcontent-%COMP%]:hover{opacity:1}.nav-link[_ngcontent-%COMP%]:active{opacity:.75}.nav-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.nav-link.w--current[_ngcontent-%COMP%]:active{opacity:.75}.logotype[_ngcontent-%COMP%]{width:169px}.nav-social[_ngcontent-%COMP%]{height:100%;align-items:center;margin-right:30px;display:flex;position:absolute;inset:0% 0% auto auto}.nav-social.is-mobile[_ngcontent-%COMP%]{display:none}.collection-list[_ngcontent-%COMP%]{display:flex}.social-link[_ngcontent-%COMP%]{transition:opacity .2s}.social-link[_ngcontent-%COMP%]:hover{opacity:.7}.social-link[_ngcontent-%COMP%]:active{opacity:.5}.empty-tap-area[_ngcontent-%COMP%]{display:none}.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.section.is-hero-home[_ngcontent-%COMP%]{z-index:0;height:100vh;background-color:#000;padding-left:0;padding-right:0}.section.is-dark[_ngcontent-%COMP%]{color:#fff;background-color:#000}.section.is--welcome[_ngcontent-%COMP%]{z-index:1;background-color:#eee;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-repeat:no-repeat;background-size:cover}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df84c6fccb1bdc2d62_tile-texture.jpg);background-size:auto}.section.is--pre-footer[_ngcontent-%COMP%]{color:#fff;background-color:#333;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b288771c7edd54b4f2ae35_dark-geometric-pattern.jpg);background-position:50% 100%;background-repeat:no-repeat;background-size:cover}.section.is-hero[_ngcontent-%COMP%]{height:560px;background-image:linear-gradient(to right,#000,#7c7c7c);padding-left:0;padding-right:0}.section.is--services[_ngcontent-%COMP%]{background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df0e0fd836392a0c89_light-geometric-pattern.jpg);background-position:0 0;background-repeat:no-repeat;background-size:cover}.image-cover[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-cover.is--associates[_ngcontent-%COMP%]{object-position:50% 35%}.image-cover.is--home[_ngcontent-%COMP%]{object-position:50% 0%}.hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative}.black-overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0%}.home-hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.h1-home-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:25px;margin-top:10px;font-size:32px;font-weight:600}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;display:flex}.container.is--footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:70px;padding-bottom:35px;display:flex}.container.is--pre-footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.container.is--hero[_ngcontent-%COMP%]{height:100%;flex-direction:column;justify-content:center;align-items:flex-start;margin-top:40px;padding-top:0;padding-bottom:0;display:flex}.container.is--associates[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.label[_ngcontent-%COMP%]{color:#646464;margin-bottom:10px;font-size:1.33333em;line-height:1.5}.label.is--dark[_ngcontent-%COMP%]{color:#000;letter-spacing:1px;text-transform:uppercase;margin-bottom:14px;font-size:1em;font-weight:700}.text-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.text-wrap.is--no-margin[_ngcontent-%COMP%]{margin-bottom:0}.title[_ngcontent-%COMP%]{margin-bottom:35px;font-size:1.83333em;font-weight:600;line-height:1.4}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:15px}.p-bigger[_ngcontent-%COMP%]{font-size:1.5em}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}.button[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button[_ngcontent-%COMP%]:active{background-color:#0009}.card-grid[_ngcontent-%COMP%]{grid-column-gap:29px;grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr;margin-bottom:-52px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021}.card.is--double[_ngcontent-%COMP%]{width:100%;display:flex}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-details[_ngcontent-%COMP%]{z-index:2;width:100%;flex-direction:column;align-items:center;padding-bottom:50px;padding-left:50px;padding-right:50px;display:flex;position:relative}.number-icon[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#f0f0f0;border:7px solid #fff;border-radius:50%;justify-content:center;align-items:center;margin-top:-33px;margin-bottom:20px;display:flex}.number[_ngcontent-%COMP%]{font-size:33px;font-weight:600}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center}.p-light-big[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:35px;font-size:2.5em;font-weight:300}.slogan-wrapper[_ngcontent-%COMP%]{max-width:768px;margin-top:-10px;margin-left:auto;margin-right:auto}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.column.is--padding[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:75px}.column.is--image[_ngcontent-%COMP%]{background-color:#2c2c2c;overflow:hidden}.column.is--image.rounded[_ngcontent-%COMP%]{min-height:auto;border-radius:8px}.column.is--associates[_ngcontent-%COMP%]{min-height:auto;flex-direction:column;align-items:flex-start;padding-left:75px;padding-right:75px}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:75px;display:flex}.black-label[_ngcontent-%COMP%]{color:#fff;background-color:#000;margin-bottom:40px;margin-left:-134px;margin-right:-75px;padding:9px 14px 9px 134px}.label-text[_ngcontent-%COMP%]{font-size:2.08333em}.details-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.details-wrap.is--no-padding[_ngcontent-%COMP%]{margin-bottom:0}.card-image-wrap[_ngcontent-%COMP%]{width:100%;height:230px;object-fit:cover;background-color:#afafaf;overflow:hidden}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}.card-text.is--centred[_ngcontent-%COMP%]{height:100%;justify-content:center}.see-more-wrap[_ngcontent-%COMP%]{max-width:768px;flex-direction:column;align-items:center;margin-left:auto;margin-right:auto;display:flex}.card-text-wrap[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:190px;font-size:1.16667em}.footer[_ngcontent-%COMP%]{z-index:1;color:#fff;background-color:#141414;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.p-pre-footer[_ngcontent-%COMP%]{color:#d3d3d3;margin-top:10px;margin-bottom:35px;font-size:1.5em;font-weight:300}.p-pre-footer.is--associates[_ngcontent-%COMP%]{margin-bottom:0}.footer-link[_ngcontent-%COMP%]{height:100%;opacity:1;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding:19px;font-size:1em;font-weight:500;text-decoration:none;transition:opacity .2s;display:flex}.footer-link[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link[_ngcontent-%COMP%]:active{opacity:.5}.footer-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.footer-link.w--current[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link.w--current[_ngcontent-%COMP%]:active{opacity:.5}.footer-links[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:30px;margin-bottom:30px;display:flex}.logo-link-footer[_ngcontent-%COMP%]{height:100%;align-items:center;padding:10px;transition:opacity .2s;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.footer-social[_ngcontent-%COMP%]{height:100%;align-items:center;display:flex;position:static;inset:0% 0% auto auto}.copyright-wrap[_ngcontent-%COMP%]{color:#818181;letter-spacing:2px;text-transform:uppercase;align-items:center;margin-top:60px;font-size:.833333em;display:flex}.separator[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.link[_ngcontent-%COMP%]{color:#fff;border-bottom:1.5px solid rgba(255,255,255,0);padding-top:3px;padding-bottom:3px;font-weight:600;text-decoration:none;transition:border-color .2s;display:inline-block}.link[_ngcontent-%COMP%]:hover{border-bottom-color:#fff}.discover-div[_ngcontent-%COMP%]{z-index:3;color:#fff;justify-content:center;align-items:flex-end;display:flex;position:absolute;inset:auto 0% 0%}.discover-rotate[_ngcontent-%COMP%]{align-items:center;margin-bottom:65px;display:flex;transform:rotate(90deg)}.discover-line[_ngcontent-%COMP%]{width:60px;height:1px;background-color:#fff;margin-left:15px}.discover-text[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;font-size:1.08333em;font-weight:500}.black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#000000e6 20%,#0000004d);position:absolute;inset:0%}.hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:absolute;inset:0%}.h1-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:10px;font-size:115px}.p-hero[_ngcontent-%COMP%]{max-width:510px;color:#fff;margin-top:20px;font-size:22px;font-weight:300}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}.subtitile[_ngcontent-%COMP%]{color:#505050;margin-top:5px;font-size:1.5em}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:46px 40px 40px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.icon[_ngcontent-%COMP%]{width:96px}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}.p-card[_ngcontent-%COMP%]{font-size:1.2em}.collection-item[_ngcontent-%COMP%]{display:flex}.collection-list-3[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.lightbox-link[_ngcontent-%COMP%]{width:100%;height:30vw;max-height:368.094px;background-color:#eee;position:relative;overflow:hidden}.thumb-overlay[_ngcontent-%COMP%]{opacity:0;background-color:#00000080;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.logomark-white[_ngcontent-%COMP%]{width:40px}.p-bold[_ngcontent-%COMP%]{max-width:780px;color:#000;letter-spacing:0;text-transform:none;font-size:1.83333em;font-weight:600;line-height:1.5}.form-apply-grid[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.field-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:5px;display:flex}.field-label[_ngcontent-%COMP%]{margin-bottom:10px}.field-box[_ngcontent-%COMP%]{width:100%;color:#505050}.text-area[_ngcontent-%COMP%]{width:100%;min-height:140px}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:72px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.form-apply[_ngcontent-%COMP%]{margin-bottom:0}.success-text[_ngcontent-%COMP%]{padding:10px 33px 23px;font-size:14px;font-weight:600}.success-message[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:90px 0}.form-heading[_ngcontent-%COMP%]{letter-spacing:2px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]{color:#a12e30;background-color:#0000;margin-top:20px;padding:0;font-weight:500}.checkbox-field[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px;display:flex}.checkbox-text[_ngcontent-%COMP%]{color:#505050;margin-bottom:0;margin-left:15px;line-height:1.5}.consent-checkbox[_ngcontent-%COMP%]{flex:none;margin-top:0}.button-off[_ngcontent-%COMP%]{color:#fff;letter-spacing:2px;text-transform:uppercase;cursor:not-allowed;background-color:#e6e6e6;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;display:none}.button-on[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button-on[_ngcontent-%COMP%]:active{background-color:#0009}.field-para[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.1em}.grey-link[_ngcontent-%COMP%]{color:#505050}.button-off-text[_ngcontent-%COMP%]{cursor:not-allowed}.grey-line[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin-top:60px;margin-bottom:60px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.associates-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4;list-style-type:decimal}.text-left[_ngcontent-%COMP%]{max-width:440px}.associates-list[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-weight:600;line-height:1.4}.dont-see-profession[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:20px;font-weight:600}.job-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;font-size:1.7em;font-weight:600}.job-title-wrap[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;display:flex}.full-part-time[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:4px;margin-left:15px;padding:9px 10px;font-size:11px;font-weight:600}.lottie-animation[_ngcontent-%COMP%]{width:190px;margin-top:-10px;margin-left:auto;margin-right:auto}.open-role-list[_ngcontent-%COMP%]{grid-column-gap:0px;grid-row-gap:50px;grid-template-rows:auto auto;grid-template-columns:1fr;grid-auto-columns:1fr;display:grid}.grid-2[_ngcontent-%COMP%]{grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr}.card-contact[_ngcontent-%COMP%]{min-height:290px;color:#000;text-align:center;background-color:#fff;border-radius:8px;flex-direction:column;align-items:center;padding-top:42px;padding-bottom:42px;text-decoration:none;display:flex;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.contact-label[_ngcontent-%COMP%]{color:#969696;letter-spacing:2px;text-transform:uppercase;margin-top:30px;margin-bottom:20px;font-weight:600}.contact-link[_ngcontent-%COMP%]{color:#000;margin-bottom:10px;font-size:20px;font-weight:600;text-decoration:none;display:block}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:20px}.contact-card-wrap[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;display:flex}.p-address[_ngcontent-%COMP%]{max-width:240px;margin-bottom:20px}.link-wrap[_ngcontent-%COMP%]{margin-bottom:-10px}.documentation-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{letter-spacing:3px;text-transform:uppercase;margin-top:70px;margin-bottom:40px;font-size:50px}.documentation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:30px;font-size:16px}.documentation-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:50px;margin-bottom:30px;font-size:30px}.documentation-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#505050;margin-bottom:30px;font-size:16px;line-height:2}.documentation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:40px;margin-bottom:30px;font-size:23px}.documentation-list[_ngcontent-%COMP%]{display:flex}.open-graph-hide[_ngcontent-%COMP%]{display:none}.open-graph-image[_ngcontent-%COMP%]{width:1200px;height:630px;margin-bottom:20px}.wg-element-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;position:relative}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{margin-left:auto;position:absolute;inset:17px 30px auto auto}.wg-dropdown-1[_ngcontent-%COMP%]{width:auto;text-transform:uppercase;flex-direction:column;align-items:stretch;font-weight:700}.wg-dd-1-togle[_ngcontent-%COMP%]{z-index:1;width:100%;background-color:#272727;flex-direction:column;padding:10px 15px}.wg-dd-1-togle[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.wg-selector-text-wrapper[_ngcontent-%COMP%]{width:100%;align-items:center;display:flex}.wg-flag-ico[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;object-fit:cover}.wg-dd-1-list[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;box-shadow:0 -13px 50px 3px #11179c12}.wg-flag[_ngcontent-%COMP%]{width:20px;height:16px;justify-content:center;align-items:center;display:flex}.wg-dropdown-1-link[_ngcontent-%COMP%]{color:#000;background-color:#262626;padding:10px 15px;text-decoration:none;transition:background-color .1s}.wg-dropdown-1-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.div-block[_ngcontent-%COMP%]{width:1px;height:25px;opacity:.3;background-color:#fff;margin-left:10px;margin-right:72px}.pagination[_ngcontent-%COMP%]{margin-top:30px}@media screen and (max-width: 991px){.nav-container[_ngcontent-%COMP%]{justify-content:flex-start}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.logo-link.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.nav-menu[_ngcontent-%COMP%]{height:auto;max-width:none;background-color:#000000f2;justify-content:center;margin-left:0;margin-right:0;padding-top:30px;display:flex}.nav-link[_ngcontent-%COMP%]{z-index:1;padding-top:30px;padding-bottom:30px;font-size:1.4em;display:flex}.nav-social[_ngcontent-%COMP%]{display:none}.nav-social.is-mobile[_ngcontent-%COMP%]{z-index:1;justify-content:center;margin-right:0;padding-top:60px;padding-bottom:60px;display:flex;position:relative}.mobile-link[_ngcontent-%COMP%]{margin-left:auto;padding:9px 0}.mobile-link[_ngcontent-%COMP%]:hover{opacity:.75}.mobile-link[_ngcontent-%COMP%]:active{opacity:.5}.mobile-link.w--open[_ngcontent-%COMP%]{background-color:#0000}.burger-icon[_ngcontent-%COMP%]{width:80px}.empty-tap-area[_ngcontent-%COMP%]{height:100vh;display:block;position:absolute;inset:0%}.section.is--welcome[_ngcontent-%COMP%]{background-image:linear-gradient(#f3f3f3b0,#f3f3f3b0),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b3c56515595b50015a3c80_white-pattern.png),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-position:0 0,0 0,0 0;background-repeat:repeat,repeat,repeat;background-size:auto,auto,auto}.section.is-hero[_ngcontent-%COMP%]{height:410px}.h1-home-hero-small[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:75px}.container.is--gallery[_ngcontent-%COMP%]{max-width:none}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:5px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;margin-bottom:-23px}.card.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}.number-icon[_ngcontent-%COMP%]{margin-bottom:15px}.p-light-big[_ngcontent-%COMP%]{font-size:2.2em}.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}.column.is--associates[_ngcontent-%COMP%]{width:100%;margin-top:35px;padding-left:0;padding-right:0}.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}.card-image-wrap[_ngcontent-%COMP%]{height:400px}.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:none}.footer-link[_ngcontent-%COMP%]{z-index:1;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.logo-link-footer.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.h1-hero.outline-text[_ngcontent-%COMP%]{font-size:75px}.p-hero[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{text-align:left}.card-apply[_ngcontent-%COMP%]{width:100%;padding-top:50px;padding-bottom:75px}.form-heading[_ngcontent-%COMP%]{font-size:2.25em}.checkbox-text[_ngcontent-%COMP%]{text-align:left}.button-off[_ngcontent-%COMP%], .button-on[_ngcontent-%COMP%]{text-align:center;align-self:stretch}.grey-line[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:50px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:0px}.associates-title[_ngcontent-%COMP%]{font-size:1.7em}.text-left[_ngcontent-%COMP%]{padding-right:86px}.job-title[_ngcontent-%COMP%]{line-height:1.3}.job-title-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.full-part-time[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:8px;margin-left:0}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-contact[_ngcontent-%COMP%]{width:100%;min-height:auto;text-align:center;padding-top:56px;padding-bottom:56px}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:0}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{position:absolute;inset:16px 130px auto auto}}@media screen and (max-width: 767px){h2[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2.5em}h3[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2em}p[_ngcontent-%COMP%]{font-size:1.2em}.logo-link.w--current[_ngcontent-%COMP%]{padding-left:0}.nav-menu[_ngcontent-%COMP%]{min-height:100vh}.section.is-hero[_ngcontent-%COMP%]{height:340px}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:15px;font-size:16px}.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}.container.is--pre-footer[_ngcontent-%COMP%]{padding-top:96px;padding-bottom:96px}.container.is--hero[_ngcontent-%COMP%]{margin-top:53px}.label[_ngcontent-%COMP%]{font-size:1.2em}.button[_ngcontent-%COMP%]{justify-content:center;display:flex}.card-details[_ngcontent-%COMP%]{padding-bottom:40px;padding-left:40px;padding-right:40px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.label-text[_ngcontent-%COMP%]{font-size:1.7em}.card-image-wrap[_ngcontent-%COMP%]{height:55vw}.card-text[_ngcontent-%COMP%]{align-items:stretch}.card-text.is--centred[_ngcontent-%COMP%]{align-items:flex-start}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:6px;font-size:55px}.p-hero[_ngcontent-%COMP%]{max-width:380px;font-size:16px}.subtitile[_ngcontent-%COMP%]{font-size:1.4em}.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.lightbox-link[_ngcontent-%COMP%]{height:42vw}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.form-heading[_ngcontent-%COMP%]{font-size:1.9em}.button-on[_ngcontent-%COMP%]{justify-content:center}.text-left[_ngcontent-%COMP%]{padding-right:40px}.open-role-list[_ngcontent-%COMP%]{grid-row-gap:30px}.card-contact[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){h2[_ngcontent-%COMP%]{letter-spacing:2px;font-size:2em;line-height:1.1}.nav-container[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.logo-link[_ngcontent-%COMP%]{margin-left:20px}.logotype[_ngcontent-%COMP%]{width:140px}.burger-icon[_ngcontent-%COMP%]{width:60px;margin-left:20px}.section[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.section.is-hero-home[_ngcontent-%COMP%]{height:87vh}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:2vw;font-size:5vw}.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:56px}.label[_ngcontent-%COMP%]{font-size:1.2em}.title[_ngcontent-%COMP%]{font-size:1.7em}.button[_ngcontent-%COMP%]{text-align:center}.card-grid[_ngcontent-%COMP%]{margin-bottom:0}.card-details[_ngcontent-%COMP%]{padding-bottom:30px;padding-left:25px;padding-right:25px}.number-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:-31px;margin-bottom:12px}.number[_ngcontent-%COMP%]{font-size:25px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.p-light-big[_ngcontent-%COMP%]{font-size:1.7em;font-weight:400}.column.is--padding[_ngcontent-%COMP%]{padding:25px}.column.is--image[_ngcontent-%COMP%]{height:300px}.column.is--about[_ngcontent-%COMP%]{padding:25px}.black-label[_ngcontent-%COMP%]{margin-left:-25px;margin-right:-25px;padding:15px 25px}.label-text[_ngcontent-%COMP%]{letter-spacing:3px;font-size:1.4em;line-height:1.3}.card-image-wrap[_ngcontent-%COMP%]{height:62vw}.card-shadow[_ngcontent-%COMP%]{margin-bottom:20px}.p-pre-footer[_ngcontent-%COMP%]{font-size:1.2em}.footer-links[_ngcontent-%COMP%], .copyright-wrap[_ngcontent-%COMP%]{flex-direction:column}.separator[_ngcontent-%COMP%]{display:none}.discover-rotate[_ngcontent-%COMP%]{margin-bottom:49px}.discover-text[_ngcontent-%COMP%]{font-size:.8em}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:11vw}.p-hero[_ngcontent-%COMP%]{font-size:14px}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:20px;grid-row-gap:20px}.card-simple[_ngcontent-%COMP%]{padding:38px 20px 40px}.card-title[_ngcontent-%COMP%]{font-size:1.7em}.heading[_ngcontent-%COMP%]{letter-spacing:2px;font-size:1.8em}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.lightbox-link[_ngcontent-%COMP%]{height:80vw}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.card-apply[_ngcontent-%COMP%]{padding:38px 20px 40px}.form-heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:1.7em}.checkbox-text[_ngcontent-%COMP%]{margin-left:20px}.button-on[_ngcontent-%COMP%]{text-align:center}}#w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-375681b7[_ngcontent-%COMP%], #w-node-_4dbb65f5-dbff-7360-6381-24730cf4d5e5-375681b7[_ngcontent-%COMP%], #w-node-_49f4a6c9-ea6b-6d9e-523c-9fcfe16a6b0c-375681b7[_ngcontent-%COMP%], #w-node-d157a120-74ba-936e-35b8-7f77ccc5ada3-375681b7[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-375681b7[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-375681b7[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-375681b7[_ngcontent-%COMP%], #w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-70b41220[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-70b41220[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-70b41220[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}@media screen and (max-width: 991px){#w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-375681b7[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-375681b7[_ngcontent-%COMP%], #w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-70b41220[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}}',`@media screen and (min-width: 992px) {
                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .black-label[_ngcontent-%COMP%] {
                        margin-right: -134px;
                        margin-left: -14px;
                        padding-right: 0px;
                        padding-left: 14px;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card.is--double[_ngcontent-%COMP%] {
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: reverse;
                        -webkit-flex-direction: row-reverse;
                        -ms-flex-direction: row-reverse;
                        flex-direction: row-reverse;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card-text[_ngcontent-%COMP%] {
                        -webkit-box-align: stretch;
                        -webkit-align-items: stretch;
                        -ms-flex-align: stretch;
                        align-items: stretch;
                    }
                }`]});let x=g;return x})();var _2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-portafolio03"]],standalone:!0,features:[pn],decls:150,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"text-container"],[1,"section","is--featured-projects"],[1,"container","w-container"],[1,"w-embed"],[1,"w-dyn-list"],["role","list",1,"w-dyn-items"],["role","listitem",1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"card","is--double"],[1,"column","is--image"],["src","../../../../assets/img/iglesia03.JPG","loading","lazy","alt","\u03A0\u03BF\u03BB\u03C5\u03C4\u03B5\u03BB\u03AE\u03C2 \u03C0\u03B1\u03C1\u03B1\u03B8\u03B1\u03BB\u03AC\u03C3\u03C3\u03B9\u03B1 \u03C0\u03BF\u03BB\u03C5\u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03C3\u03C4\u03B7\u03BD \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1 \u0395\u03BB\u03BB\u03AC\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"column","is--padding"],[1,"card-text","is--featured"],[1,"black-label"],[1,"label-text"],[1,"details-wrap"],[1,"label","is--dark"],[1,"details-wrap","is--no-padding"],["src","../../../../assets/img/iglesia02.JPG","loading","lazy","alt","Bioclimatic house","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia05.jpg","loading","lazy","alt","\u0394\u03B9\u03B1\u03BC\u03B5\u03C1\u03AF\u03C3\u03BC\u03B1\u03C4\u03B1 \u03BC\u03B5 \u03B8\u03AD\u03B1 \u0391\u03BA\u03C1\u03CC\u03C0\u03BF\u03BB\u03B7 \u03C3\u03C4\u03BF\u03BD \u039A\u03B5\u03C1\u03B1\u03BC\u03B5\u03B9\u03BA\u03CC.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia04.jpg","loading","lazy","alt","K\u03B5\u03BD\u03C4\u03C1\u03B9\u03BA\u03AE \u03A0\u03CD\u03BB\u03B7 401 \u0393\u03A3\u039D\u0391","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia01.jpg","loading","lazy","alt","\u039C\u03BF\u03BD\u03C4\u03AD\u03C1\u03BD\u03B1 \u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03BC\u03AD\u03C3\u03B1 \u03C3\u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC \u03C4\u03B7\u03C2 \u03C0\u03CC\u03BB\u03B7\u03C2, \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"see-more-wrap"],[1,"p-light-big"],["href","/portfolio",1,"button","w-button"]],template:function(M,r){M&1&&(re(0,"html",0)(1,"head"),_t(2,"meta",1)(3,"meta",2),re(4,"title"),_e(5,"Triangle"),se(),re(6,"title"),_e(7,"Blackbox Architectonics | A Collaborative Studio"),se()(),re(8,"body")(9,"header")(10,"div",3)(11,"h1"),_e(12,"Casas"),se(),re(13,"span"),_e(14,"Tecno Dry Wall - Carlos Roby"),se()()(),re(15,"section",4)(16,"div",5),_t(17,"div",6),re(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10)(22,"div",11)(23,"div",12),_t(24,"img",13),se(),re(25,"div",14)(26,"div",15)(27,"div",16)(28,"h3",17),_e(29,"Sea-View Apartments"),se()(),re(30,"div",18)(31,"div",19),_e(32,"Location"),se(),re(33,"p"),_e(34,"Chalkida, Greece"),se()(),re(35,"div",18)(36,"div",19),_e(37,"Status"),se(),re(38,"p"),_e(39,"Completed in 2008"),se()(),re(40,"div",20)(41,"div",19),_e(42,"Description"),se(),re(43,"p"),_e(44,"This apartment building is situated in a very privileged sea-view plot in the center of Chalkida. Being both next to the sea and to a neo-classical house has to adopt a double character. The combination of luxury and simplicity connects to the sea and the surroundings."),se()()()()()()(),re(45,"div",9)(46,"div",10)(47,"div",11)(48,"div",12),_t(49,"img",21),se(),re(50,"div",14)(51,"div",15)(52,"div",16)(53,"h3",17),_e(54,"bioclimatic-building"),se()(),re(55,"div",18)(56,"div",19),_e(57,"Location"),se(),re(58,"p"),_e(59,"Drafi, Greece"),se()(),re(60,"div",18)(61,"div",19),_e(62,"Status"),se(),re(63,"p"),_e(64,"Under construction"),se()(),re(65,"div",20)(66,"div",19),_e(67,"Description"),se(),re(68,"p"),_e(69,"This house is located in a rocky ridge with abrupt slopes.The need to create the minimum imprint in the surroundings along with creating a green ,energy-efficient building, led to the decision to drill the slope, instead of arranging a set of spaces at different levels."),se()()()()()()(),re(70,"div",9)(71,"div",10)(72,"div",11)(73,"div",12),_t(74,"img",22),se(),re(75,"div",14)(76,"div",15)(77,"div",16)(78,"h3",17),_e(79,"Acropolis-View Flats"),se()(),re(80,"div",18)(81,"div",19),_e(82,"Location"),se(),re(83,"p"),_e(84,"Athens, Greece"),se()(),re(85,"div",18)(86,"div",19),_e(87,"Status"),se(),re(88,"p"),_e(89,"Under Construction"),se()(),re(90,"div",20)(91,"div",19),_e(92,"Description"),se(),re(93,"p"),_e(94,"This contemporary building is located in Kerameikos, Athens near Acropolis. Apartments are designed primarily as functional. This functionalism though, has its own aesthetic quality leading to innovate, smart flats."),se()()()()()()(),re(95,"div",9)(96,"div",10)(97,"div",11)(98,"div",12),_t(99,"img",23),se(),re(100,"div",14)(101,"div",15)(102,"div",16)(103,"h3",17),_e(104,"401 Hospital Gate"),se()(),re(105,"div",18)(106,"div",19),_e(107,"Location"),se(),re(108,"p"),_e(109,"Athens, Greece"),se()(),re(110,"div",18)(111,"div",19),_e(112,"Status"),se(),re(113,"p"),_e(114,"Completed in 2021"),se()(),re(115,"div",20)(116,"div",19),_e(117,"Description"),se(),re(118,"p"),_e(119,"Iakovos Tsounis\u2019 endowment allowed to the famous military hospital to renovate its entrance gate. A key consideration is the adaptation of parts \u2013existing and new- to the whole, an appearance in unison with the rest of the hospital units and an appropriate use of ornament. All the above along with the practical needs such as the protection of the sun lead to a plain rigid form aligned to the military character of the hospital."),se()()()()()()(),re(120,"div",9)(121,"div",10)(122,"div",11)(123,"div",12),_t(124,"img",24),se(),re(125,"div",14)(126,"div",15)(127,"div",16)(128,"h3",17),_e(129,"Private Residence"),se()(),re(130,"div",18)(131,"div",19),_e(132,"Location"),se(),re(133,"p"),_e(134,"Chalkida, Greece"),se()(),re(135,"div",18)(136,"div",19),_e(137,"Status"),se(),re(138,"p"),_e(139,"Completed in 2007"),se()(),re(140,"div",20)(141,"div",19),_e(142,"Description"),se(),re(143,"p"),_e(144,"This residential project is for an urban double family house located in the city of Chalkida. The main idea is to unite the two residences into one discriminated whole so that they are both parts of one concrete volume. Selected parts of the volume are partitioned to establish an indoor-outdoor connection. The different parts of the synthesis are cladded with different materials. "),se()()()()()()()()(),re(145,"div",25)(146,"p",26),_e(147,"Like to see more projects?"),se(),re(148,"a",27),_e(149,"View our Portfolio"),se()()()()()())},styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#fff}header[_ngcontent-%COMP%]{width:100vw;height:55vh;background:linear-gradient(to right,#240909cc,#110606cc),url("./media/portada3-IZJHBW2N.webp");background-size:cover;background-position:center center;background-attachment:fixed;clip-path:polygon(0 0,100% 0,100% 80%,60% 100%,0 80%);position:relative}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:block;width:100%;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;text-align:center;color:#fff;text-shadow:0 0 10px rgba(0,0,0,5)}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,Helvetica,Arial,Lucida,sans-serif;font-weight:800;font-size:40px}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff4500;font-family:tdr;font-size:23px}','element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.12993,1.12993,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}div[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 767px){.label[_ngcontent-%COMP%]{font-size:1.2em}}p[_ngcontent-%COMP%]{font-size:1.2em}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}@media screen and (max-width: 991px){.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (min-width: 992px){.card-item[_ngcontent-%COMP%]:nth-child(2n)   .black-label[_ngcontent-%COMP%]{margin-right:-134px;margin-left:-14px;padding-right:0;padding-left:14px}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card.is--double[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card-text[_ngcontent-%COMP%]{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}}element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.10065,1.10065,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:block;font-size:1.17em;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;font-weight:700}div[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%], *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:before, *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.card[_ngcontent-%COMP%]{flex-direction:row}.card[_ngcontent-%COMP%]   .column.is--image[_ngcontent-%COMP%]{flex:2}.card[_ngcontent-%COMP%]   .column.is--padding[_ngcontent-%COMP%]{flex:1}}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block}html[_ngcontent-%COMP%]{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}body[_ngcontent-%COMP%]{margin:0}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], main[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%]{display:block}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline;display:inline-block}audio[_ngcontent-%COMP%]:not([controls]){height:0;display:none}[hidden][_ngcontent-%COMP%], template[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{background-color:#0000}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}abbr[title][_ngcontent-%COMP%]{border-bottom:1px dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700}dfn[_ngcontent-%COMP%]{font-style:italic}h1[_ngcontent-%COMP%]{margin:.67em 0;font-size:2em}mark[_ngcontent-%COMP%]{color:#000;background:#ff0}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sup[_ngcontent-%COMP%]{top:-.5em}sub[_ngcontent-%COMP%]{bottom:-.25em}img[_ngcontent-%COMP%]{border:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}figure[_ngcontent-%COMP%]{margin:1em 40px}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0}pre[_ngcontent-%COMP%]{overflow:auto}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace;font-size:1em}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:inherit;font:inherit;margin:0}button[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{-webkit-appearance:button;cursor:pointer}button[disabled][_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default}button[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}input[_ngcontent-%COMP%]{line-height:normal}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}input[type=search][_ngcontent-%COMP%]{-webkit-appearance:none}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}fieldset[_ngcontent-%COMP%]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[_ngcontent-%COMP%]{border:0;padding:0}textarea[_ngcontent-%COMP%]{overflow:auto}optgroup[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0}@font-face{font-family:webflow-icons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBiUAAAC8AAAAYGNtYXDpP+a4AAABHAAAAFxnYXNwAAAAEAAAAXgAAAAIZ2x5ZmhS2XEAAAGAAAADHGhlYWQTFw3HAAAEnAAAADZoaGVhCXYFgQAABNQAAAAkaG10eCe4A1oAAAT4AAAAMGxvY2EDtALGAAAFKAAAABptYXhwABAAPgAABUQAAAAgbmFtZSoCsMsAAAVkAAABznBvc3QAAwAAAAAHNAAAACAAAwP4AZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAQAAAAAwACAACAAQAAQAg5gPpA//9//8AAAAAACDmAOkA//3//wAB/+MaBBcIAAMAAQAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEBIAAAAyADgAAFAAAJAQcJARcDIP5AQAGA/oBAAcABwED+gP6AQAABAOAAAALgA4AABQAAEwEXCQEH4AHAQP6AAYBAAcABwED+gP6AQAAAAwDAAOADQALAAA8AHwAvAAABISIGHQEUFjMhMjY9ATQmByEiBh0BFBYzITI2PQE0JgchIgYdARQWMyEyNj0BNCYDIP3ADRMTDQJADRMTDf3ADRMTDQJADRMTDf3ADRMTDQJADRMTAsATDSANExMNIA0TwBMNIA0TEw0gDRPAEw0gDRMTDSANEwAAAAABAJ0AtAOBApUABQAACQIHCQEDJP7r/upcAXEBcgKU/usBFVz+fAGEAAAAAAL//f+9BAMDwwAEAAkAABcBJwEXAwE3AQdpA5ps/GZsbAOabPxmbEMDmmz8ZmwDmvxmbAOabAAAAgAA/8AEAAPAAB0AOwAABSInLgEnJjU0Nz4BNzYzMTIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjMSIHDgEHBhUUFx4BFxYzAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpVSktvICEhIG9LSlVVSktvICEhIG9LSlVAKCiLXl1qal1eiygoKCiLXl1qal1eiygoZiEgb0tKVVVKS28gISEgb0tKVVVKS28gIQABAAABwAIAA8AAEgAAEzQ3PgE3NjMxFSIHDgEHBhUxIwAoKIteXWpVSktvICFmAcBqXV6LKChmISBvS0pVAAAAAgAA/8AFtgPAADIAOgAAARYXHgEXFhUUBw4BBwYHIxUhIicuAScmNTQ3PgE3NjMxOAExNDc+ATc2MzIXHgEXFhcVATMJATMVMzUEjD83NlAXFxYXTjU1PQL8kz01Nk8XFxcXTzY1PSIjd1BQWlJJSXInJw3+mdv+2/7c25MCUQYcHFg5OUA/ODlXHBwIAhcXTzY1PTw1Nk8XF1tQUHcjIhwcYUNDTgL+3QFt/pOTkwABAAAAAQAAmM7nP18PPPUACwQAAAAAANciZKUAAAAA1yJkpf/9/70FtgPDAAAACAACAAAAAAAAAAEAAAPA/8AAAAW3//3//QW2AAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAgAAAAQAASAEAADgBAAAwAQAAJ0EAP/9BAAAAAQAAAAFtwAAAAAAAAAKABQAHgAyAEYAjACiAL4BFgE2AY4AAAABAAAADAA8AAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADQAAAAEAAAAAAAIABwCWAAEAAAAAAAMADQBIAAEAAAAAAAQADQCrAAEAAAAAAAUACwAnAAEAAAAAAAYADQBvAAEAAAAAAAoAGgDSAAMAAQQJAAEAGgANAAMAAQQJAAIADgCdAAMAAQQJAAMAGgBVAAMAAQQJAAQAGgC4AAMAAQQJAAUAFgAyAAMAAQQJAAYAGgB8AAMAAQQJAAoANADsd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype");font-weight:400;font-style:normal}[class^=w-icon-][_ngcontent-%COMP%], [class*=" w-icon-"][_ngcontent-%COMP%]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:webflow-icons!important}.w-icon-slider-right[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\20ac"}.w-icon-slider-left[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\81"}.w-icon-nav-menu[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\201a"}.w-icon-arrow-down[_ngcontent-%COMP%]:before, .w-icon-dropdown-toggle[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\192"}.w-icon-file-upload-remove[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\20ac"}.w-icon-file-upload-icon[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\192"}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{min-height:100%;color:#333;background-color:#fff;margin:0;font-family:Arial,sans-serif;font-size:14px;line-height:20px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}html.w-mod-touch[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-attachment:scroll!important}.w-block[_ngcontent-%COMP%]{display:block}.w-inline-block[_ngcontent-%COMP%]{max-width:100%;display:inline-block}.w-clearfix[_ngcontent-%COMP%]:before, .w-clearfix[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-clearfix[_ngcontent-%COMP%]:after{clear:both}.w-hidden[_ngcontent-%COMP%]{display:none}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}input.w-button[_ngcontent-%COMP%]{-webkit-appearance:button}html[data-w-dynpage][_ngcontent-%COMP%]   [data-w-cloak][_ngcontent-%COMP%]{color:#0000!important}.w-webflow-badge[_ngcontent-%COMP%], .w-webflow-badge[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{z-index:auto;visibility:visible;box-sizing:border-box;width:auto;height:auto;max-height:none;max-width:none;min-height:0;min-width:0;float:none;clear:none;box-shadow:none;opacity:1;direction:ltr;font-family:inherit;font-weight:inherit;color:inherit;font-size:inherit;line-height:inherit;font-style:inherit;font-variant:inherit;text-align:inherit;letter-spacing:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;text-indent:0;text-transform:inherit;text-shadow:none;font-smoothing:auto;vertical-align:baseline;cursor:inherit;white-space:inherit;word-break:normal;word-spacing:normal;word-wrap:normal;background:none;border:0 rgba(0,0,0,0);border-radius:0;margin:0;padding:0;list-style-type:disc;transition:none;display:block;position:static;inset:auto;overflow:visible;transform:none}.w-webflow-badge[_ngcontent-%COMP%]{white-space:nowrap;cursor:pointer;box-shadow:0 0 0 1px #0000001a,0 1px 3px #0000001a;visibility:visible!important;z-index:2147483647!important;color:#aaadb0!important;opacity:1!important;width:auto!important;height:auto!important;background-color:#fff!important;border-radius:3px!important;margin:0!important;padding:6px 8px 6px 6px!important;font-size:12px!important;line-height:14px!important;text-decoration:none!important;display:inline-block!important;position:fixed!important;inset:auto 12px 12px auto!important;overflow:visible!important;transform:none!important}.w-webflow-badge[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;vertical-align:middle!important;display:inline-block!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:38px;line-height:44px}h2[_ngcontent-%COMP%]{margin-top:20px;font-size:32px;line-height:36px}h3[_ngcontent-%COMP%]{margin-top:20px;font-size:24px;line-height:30px}h4[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:24px}h5[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;line-height:20px}h6[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;line-height:18px}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}blockquote[_ngcontent-%COMP%]{border-left:5px solid #e2e2e2;margin:0 0 10px;padding:10px 20px;font-size:18px;line-height:22px}figure[_ngcontent-%COMP%]{margin:0 0 10px}figcaption[_ngcontent-%COMP%]{text-align:center;margin-top:5px}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.w-list-unstyled[_ngcontent-%COMP%]{padding-left:0;list-style:none}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:after{clear:both}.w-video[_ngcontent-%COMP%]{width:100%;padding:0;position:relative}.w-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   object[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{width:100%;height:100%;border:none;position:absolute;top:0;left:0}fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:button;border:0}.w-form[_ngcontent-%COMP%]{margin:0 0 15px}.w-form-done[_ngcontent-%COMP%]{text-align:center;background-color:#ddd;padding:20px;display:none}.w-form-fail[_ngcontent-%COMP%]{background-color:#ffdede;margin-top:10px;padding:10px;display:none}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}.w-input[_ngcontent-%COMP%], .w-select[_ngcontent-%COMP%]{width:100%;height:38px;color:#333;vertical-align:middle;background-color:#fff;border:1px solid #ccc;margin-bottom:10px;padding:8px 12px;font-size:14px;line-height:1.42857;display:block}.w-input[_ngcontent-%COMP%]:-moz-placeholder, .w-select[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-moz-placeholder, .w-select[_ngcontent-%COMP%]::-moz-placeholder{color:#999;opacity:1}.w-input[_ngcontent-%COMP%]:-ms-input-placeholder, .w-select[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-webkit-input-placeholder, .w-select[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]:focus, .w-select[_ngcontent-%COMP%]:focus{border-color:#3898ec;outline:0}.w-input[disabled][_ngcontent-%COMP%], .w-select[disabled][_ngcontent-%COMP%], .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-select[_ngcontent-%COMP%]{cursor:not-allowed}.w-input[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-select[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-select[_ngcontent-%COMP%]{background-color:#eee}textarea.w-input[_ngcontent-%COMP%], textarea.w-select[_ngcontent-%COMP%]{height:auto}.w-select[_ngcontent-%COMP%]{background-color:#f3f3f3}.w-select[multiple][_ngcontent-%COMP%]{height:auto}.w-form-label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:0;font-weight:400;display:inline-block}.w-radio[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-radio[_ngcontent-%COMP%]:before, .w-radio[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-radio[_ngcontent-%COMP%]:after{clear:both}.w-radio-input[_ngcontent-%COMP%]{margin:4px 0 0;margin-top:1px \\	;float:left;margin-top:3px;margin-left:-20px;line-height:normal}.w-file-upload[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.w-file-upload-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;z-index:-100;position:absolute;overflow:hidden}.w-file-upload-default[_ngcontent-%COMP%], .w-file-upload-uploading[_ngcontent-%COMP%], .w-file-upload-success[_ngcontent-%COMP%]{color:#333;display:inline-block}.w-file-upload-error[_ngcontent-%COMP%]{margin-top:10px;display:block}.w-file-upload-default.w-hidden[_ngcontent-%COMP%], .w-file-upload-uploading.w-hidden[_ngcontent-%COMP%], .w-file-upload-error.w-hidden[_ngcontent-%COMP%], .w-file-upload-success.w-hidden[_ngcontent-%COMP%]{display:none}.w-file-upload-uploading-btn[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:flex}.w-file-upload-file[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #ccc;flex-grow:1;justify-content:space-between;margin:0;padding:8px 9px 8px 11px;display:flex}.w-file-upload-file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:block}.w-file-remove-link[_ngcontent-%COMP%]{width:auto;height:auto;cursor:pointer;margin-top:3px;margin-left:10px;padding:3px;display:block}.w-icon-file-upload-remove[_ngcontent-%COMP%]{margin:auto;font-size:10px}.w-file-upload-error-msg[_ngcontent-%COMP%]{color:#ea384c;padding:2px 0;display:inline-block}.w-file-upload-info[_ngcontent-%COMP%]{padding:0 12px;line-height:38px;display:inline-block}.w-file-upload-label[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:inline-block}.w-icon-file-upload-icon[_ngcontent-%COMP%], .w-icon-file-upload-uploading[_ngcontent-%COMP%]{width:20px;margin-right:8px;display:inline-block}.w-icon-file-upload-uploading[_ngcontent-%COMP%]{height:20px}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.w-row[_ngcontent-%COMP%]:before, .w-row[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-row[_ngcontent-%COMP%]:after{clear:both}.w-row[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{float:left;width:100%;min-height:1px;padding-left:10px;padding-right:10px;position:relative}.w-col[_ngcontent-%COMP%]   .w-col[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.w-col-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-3[_ngcontent-%COMP%]{width:25%}.w-col-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-6[_ngcontent-%COMP%]{width:50%}.w-col-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-9[_ngcontent-%COMP%]{width:75%}.w-col-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-12[_ngcontent-%COMP%]{width:100%}.w-hidden-main[_ngcontent-%COMP%]{display:none!important}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}.w-hidden-main[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-medium[_ngcontent-%COMP%]{display:none!important}.w-col-medium-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-medium-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-medium-3[_ngcontent-%COMP%]{width:25%}.w-col-medium-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-medium-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-medium-6[_ngcontent-%COMP%]{width:50%}.w-col-medium-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-medium-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-medium-9[_ngcontent-%COMP%]{width:75%}.w-col-medium-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-medium-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-medium-12[_ngcontent-%COMP%]{width:100%}.w-col-stack[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}}@media screen and (max-width: 767px){.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-small[_ngcontent-%COMP%]{display:none!important}.w-row[_ngcontent-%COMP%], .w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}.w-col-small-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-small-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-small-3[_ngcontent-%COMP%]{width:25%}.w-col-small-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-small-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-small-6[_ngcontent-%COMP%]{width:50%}.w-col-small-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-small-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-small-9[_ngcontent-%COMP%]{width:75%}.w-col-small-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-small-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-small-12[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 479px){.w-container[_ngcontent-%COMP%]{max-width:none}.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%], .w-hidden-small[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-tiny[_ngcontent-%COMP%]{display:none!important}.w-col[_ngcontent-%COMP%]{width:100%}.w-col-tiny-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-tiny-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-tiny-3[_ngcontent-%COMP%]{width:25%}.w-col-tiny-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-tiny-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-tiny-6[_ngcontent-%COMP%]{width:50%}.w-col-tiny-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-tiny-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-tiny-9[_ngcontent-%COMP%]{width:75%}.w-col-tiny-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-tiny-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-tiny-12[_ngcontent-%COMP%]{width:100%}}.w-widget[_ngcontent-%COMP%]{position:relative}.w-widget-map[_ngcontent-%COMP%]{width:100%;height:400px}.w-widget-map[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto;display:inline}.w-widget-map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:inherit}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%]{text-align:center}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:none!important}.w-widget-twitter[_ngcontent-%COMP%]{overflow:hidden}.w-widget-twitter-count-shim[_ngcontent-%COMP%]{vertical-align:top;width:28px;height:20px;text-align:center;background:#fff;border:1px solid #758696;border-radius:3px;display:inline-block;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{text-align:center;color:#999;font-family:serif;font-size:15px;line-height:12px;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-clear[_ngcontent-%COMP%]{display:block;position:relative}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]{width:36px;height:28px}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical){margin-left:5px;margin-right:8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large{margin-left:6px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before, .w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:50%;left:0}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before{border-width:4px;border-color:rgba(117,134,150,0) #5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-top:-4px;margin-left:-9px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:before{border-width:5px;margin-top:-5px;margin-left:-10px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{border-width:4px;border-color:rgba(255,255,255,0) #fff rgba(255,255,255,0) rgba(255,255,255,0);margin-top:-4px;margin-left:-8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:after{border-width:5px;margin-top:-5px;margin-left:-9px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]{width:61px;height:33px;margin-bottom:8px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before, .w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:100%;left:50%}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before{border-width:5px;border-color:#5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-left:-5px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{border-width:4px;border-color:#fff rgba(255,255,255,0) rgba(255,255,255,0);margin-left:-4px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:22px}.w-widget-twitter-count-shim.w--vertical.w--large[_ngcontent-%COMP%]{width:76px}.w-background-video[_ngcontent-%COMP%]{height:500px;color:#fff;position:relative;overflow:hidden}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;z-index:-100;background-position:50%;background-size:cover;margin:auto;position:absolute;inset:-100%}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button{-webkit-appearance:none;display:none!important}.w-background-video--control[_ngcontent-%COMP%]{background-color:#0000;padding:0;position:absolute;bottom:1em;right:1em}.w-background-video--control[_ngcontent-%COMP%] > [hidden][_ngcontent-%COMP%]{display:none!important}.w-slider[_ngcontent-%COMP%]{height:300px;text-align:center;clear:both;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);background:#ddd;position:relative}.w-slider-mask[_ngcontent-%COMP%]{z-index:1;height:100%;white-space:nowrap;display:block;position:relative;left:0;right:0;overflow:hidden}.w-slide[_ngcontent-%COMP%]{vertical-align:top;width:100%;height:100%;white-space:normal;text-align:left;display:inline-block;position:relative}.w-slider-nav[_ngcontent-%COMP%]{z-index:2;height:40px;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);margin:auto;padding-top:10px;position:absolute;inset:auto 0 0}.w-slider-nav.w-round[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%}.w-slider-nav.w-num[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:auto;height:auto;font-size:inherit;line-height:inherit;padding:.2em .5em}.w-slider-nav.w-shadow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-shadow:0 0 3px #3336}.w-slider-nav-invert[_ngcontent-%COMP%]{color:#fff}.w-slider-nav-invert[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#2226}.w-slider-nav-invert[_ngcontent-%COMP%] > div.w-active[_ngcontent-%COMP%]{background-color:#222}.w-slider-dot[_ngcontent-%COMP%]{width:1em;height:1em;cursor:pointer;background-color:#fff6;margin:0 3px .5em;transition:background-color .1s,color .1s;display:inline-block;position:relative}.w-slider-dot.w-active[_ngcontent-%COMP%]{background-color:#fff}.w-slider-dot[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff}.w-slider-dot[_ngcontent-%COMP%]:focus.w-active{box-shadow:none}.w-slider-arrow-left[_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]{width:80px;cursor:pointer;color:#fff;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:auto;font-size:40px;position:absolute;inset:0;overflow:hidden}.w-slider-arrow-left[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-left[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%]{position:absolute}.w-slider-arrow-left[_ngcontent-%COMP%]:focus, .w-slider-arrow-right[_ngcontent-%COMP%]:focus{outline:0}.w-slider-arrow-left[_ngcontent-%COMP%]{z-index:3;right:auto}.w-slider-arrow-right[_ngcontent-%COMP%]{z-index:4;left:auto}.w-icon-slider-left[_ngcontent-%COMP%], .w-icon-slider-right[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto;inset:0}.w-slider-aria-label[_ngcontent-%COMP%]{clip:rect(0 0 0 0);height:1px;width:1px;border:0;margin:-1px;padding:0;position:absolute;overflow:hidden}.w-slider-force-show[_ngcontent-%COMP%]{display:block!important}.w-dropdown[_ngcontent-%COMP%]{text-align:left;z-index:900;margin-left:auto;margin-right:auto;display:inline-block;position:relative}.w-dropdown-btn[_ngcontent-%COMP%], .w-dropdown-toggle[_ngcontent-%COMP%], .w-dropdown-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;white-space:nowrap;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;position:relative}.w-dropdown-toggle[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;padding-right:40px;display:inline-block}.w-dropdown-toggle[_ngcontent-%COMP%]:focus{outline:0}.w-icon-dropdown-toggle[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto 20px auto auto;position:absolute;top:0;bottom:0;right:0}.w-dropdown-list[_ngcontent-%COMP%]{min-width:100%;background:#ddd;display:none;position:absolute}.w-dropdown-list.w--open[_ngcontent-%COMP%]{display:block}.w-dropdown-link[_ngcontent-%COMP%]{color:#222;padding:10px 20px;display:block}.w-dropdown-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-dropdown-link[_ngcontent-%COMP%]:focus{outline:0}@media screen and (max-width: 767px){.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}.w-lightbox-backdrop[_ngcontent-%COMP%]{cursor:auto;letter-spacing:normal;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;color:#fff;text-align:center;z-index:2000;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:transparent;background:#000000e6;outline:0;font-family:Helvetica Neue,Helvetica,Ubuntu,Segoe UI,Verdana,sans-serif;font-size:17px;font-style:normal;font-weight:300;line-height:1.2;list-style:disc;position:fixed;inset:0;-webkit-transform:translate(0)}.w-lightbox-backdrop[_ngcontent-%COMP%], .w-lightbox-container[_ngcontent-%COMP%]{height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.w-lightbox-content[_ngcontent-%COMP%]{height:100vh;position:relative;overflow:hidden}.w-lightbox-view[_ngcontent-%COMP%]{width:100vw;height:100vh;opacity:0;position:absolute}.w-lightbox-view[_ngcontent-%COMP%]:before{content:"";height:100vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:86vh}.w-lightbox-frame[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{vertical-align:middle;display:inline-block}.w-lightbox-figure[_ngcontent-%COMP%]{margin:0;position:relative}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-figure[_ngcontent-%COMP%]{cursor:pointer}.w-lightbox-img[_ngcontent-%COMP%]{width:auto;height:auto;max-width:none}.w-lightbox-image[_ngcontent-%COMP%]{float:none;max-width:100vw;max-height:100vh;display:block}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-height:86vh}.w-lightbox-caption[_ngcontent-%COMP%]{text-align:left;text-overflow:ellipsis;white-space:nowrap;background:#0006;padding:.5em 1em;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.w-lightbox-embed[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;inset:0}.w-lightbox-control[_ngcontent-%COMP%]{width:4em;cursor:pointer;background-position:center;background-repeat:no-repeat;background-size:24px;transition:all .3s;position:absolute;top:0}.w-lightbox-left[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAwIDI0IDQwIiB3aWR0aD0iMjQiIGhlaWdodD0iNDAiPjxnIHRyYW5zZm9ybT0icm90YXRlKDQ1KSI+PHBhdGggZD0ibTAgMGg1djIzaDIzdjVoLTI4eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDN2MjNoMjN2M2gtMjZ6IiBmaWxsPSIjZmZmIi8+PC9nPjwvc3ZnPg==);display:none;bottom:0;left:0}.w-lightbox-right[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMjQgNDAiIHdpZHRoPSIyNCIgaGVpZ2h0PSI0MCI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMC0waDI4djI4aC01di0yM2gtMjN6IiBvcGFjaXR5PSIuNCIvPjxwYXRoIGQ9Im0xIDFoMjZ2MjZoLTN2LTIzaC0yM3oiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+);display:none;bottom:0;right:0}.w-lightbox-close[_ngcontent-%COMP%]{height:2.6em;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMTggMTciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxNyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMCAwaDd2LTdoNXY3aDd2NWgtN3Y3aC01di03aC03eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDd2LTdoM3Y3aDd2M2gtN3Y3aC0zdi03aC03eiIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4=);background-size:18px;right:0}.w-lightbox-strip[_ngcontent-%COMP%]{white-space:nowrap;padding:0 1vh;line-height:0;position:absolute;bottom:0;left:0;right:0;overflow-x:auto;overflow-y:hidden}.w-lightbox-item[_ngcontent-%COMP%]{width:10vh;box-sizing:content-box;cursor:pointer;padding:2vh 1vh;display:inline-block;-webkit-transform:translate3d(0,0,0)}.w-lightbox-active[_ngcontent-%COMP%]{opacity:.3}.w-lightbox-thumbnail[_ngcontent-%COMP%]{height:10vh;background:#222;position:relative;overflow:hidden}.w-lightbox-thumbnail-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-tall[_ngcontent-%COMP%]{width:100%;top:50%;transform:translateY(-50%)}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-wide[_ngcontent-%COMP%]{height:100%;left:50%;transform:translate(-50%)}.w-lightbox-spinner[_ngcontent-%COMP%]{box-sizing:border-box;width:40px;height:40px;border:5px solid rgba(0,0,0,.4);border-radius:50%;margin-top:-20px;margin-left:-20px;animation:.8s linear infinite _ngcontent-%COMP%_spin;position:absolute;top:50%;left:50%}.w-lightbox-spinner[_ngcontent-%COMP%]:after{content:"";border:3px solid rgba(0,0,0,0);border-bottom-color:#fff;border-radius:50%;position:absolute;inset:-4px}.w-lightbox-hide[_ngcontent-%COMP%]{display:none}.w-lightbox-noscroll[_ngcontent-%COMP%]{overflow:hidden}@media (min-width: 768px){.w-lightbox-content[_ngcontent-%COMP%]{height:96vh;margin-top:2vh}.w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{height:96vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:84vh}.w-lightbox-image[_ngcontent-%COMP%]{max-width:96vw;max-height:96vh}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-width:82.3vw;max-height:84vh}.w-lightbox-left[_ngcontent-%COMP%], .w-lightbox-right[_ngcontent-%COMP%]{opacity:.5;display:block}.w-lightbox-close[_ngcontent-%COMP%]{opacity:.8}.w-lightbox-control[_ngcontent-%COMP%]:hover{opacity:1}}.w-lightbox-inactive[_ngcontent-%COMP%], .w-lightbox-inactive[_ngcontent-%COMP%]:hover{opacity:0}.w-richtext[_ngcontent-%COMP%]:before, .w-richtext[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-richtext[_ngcontent-%COMP%]:after{clear:both}.w-richtext[contenteditable=true][_ngcontent-%COMP%]:before, .w-richtext[contenteditable=true][_ngcontent-%COMP%]:after{white-space:initial}.w-richtext[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{overflow:hidden}.w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-video[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=video][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=image][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{outline:2px solid #2895f7}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;inset:0}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{max-width:60%;position:relative}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{cursor:default!important}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption.w-richtext-figcaption-placeholder[_ngcontent-%COMP%]{opacity:.6}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#0000;font-size:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%]{display:table}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{caption-side:bottom;display:table-caption}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]{width:60%;height:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[_ngcontent-%COMP%]{clear:both;margin-left:auto;margin-right:auto}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-normal[_ngcontent-%COMP%]{clear:both}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%]{width:100%;max-width:100%;text-align:center;clear:both;margin-left:auto;margin-right:auto;display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:inherit;display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatleft[_ngcontent-%COMP%]{float:left;clear:none;margin-right:15px}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatright[_ngcontent-%COMP%]{float:right;clear:none;margin-left:15px}.w-nav[_ngcontent-%COMP%]{z-index:1000;background:#ddd;position:relative}.w-nav[_ngcontent-%COMP%]:before, .w-nav[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-nav[_ngcontent-%COMP%]:after{clear:both}.w-nav-brand[_ngcontent-%COMP%]{float:left;color:#333;text-decoration:none;position:relative}.w-nav-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;display:inline-block;position:relative}.w-nav-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-nav-menu[_ngcontent-%COMP%]{float:right;position:relative}[data-nav-menu-open][_ngcontent-%COMP%]{text-align:center;min-width:200px;background:#c8c8c8;position:absolute;top:100%;left:0;right:0;overflow:visible;display:block!important}.w--nav-link-open[_ngcontent-%COMP%]{display:block;position:relative}.w-nav-overlay[_ngcontent-%COMP%]{width:100%;display:none;position:absolute;top:100%;left:0;right:0;overflow:hidden}.w-nav-overlay[_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{top:0}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-left][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;right:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-right][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;left:auto}.w-nav-button[_ngcontent-%COMP%]{float:right;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;padding:18px;font-size:24px;display:none;position:relative}.w-nav-button[_ngcontent-%COMP%]:focus{outline:0}.w-nav-button.w--open[_ngcontent-%COMP%]{color:#fff;background-color:#c8c8c8}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%], .w--nav-dropdown-open[_ngcontent-%COMP%], .w--nav-dropdown-toggle-open[_ngcontent-%COMP%]{display:block}.w--nav-dropdown-list-open[_ngcontent-%COMP%]{position:static}@media screen and (max-width: 991px){.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}@media screen and (max-width: 767px){.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}@media screen and (max-width: 479px){.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}.w-tabs[_ngcontent-%COMP%]{position:relative}.w-tabs[_ngcontent-%COMP%]:before, .w-tabs[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-tabs[_ngcontent-%COMP%]:after{clear:both}.w-tab-menu[_ngcontent-%COMP%]{position:relative}.w-tab-link[_ngcontent-%COMP%]{vertical-align:top;text-align:left;cursor:pointer;color:#222;background-color:#ddd;padding:9px 30px;text-decoration:none;display:inline-block;position:relative}.w-tab-link.w--current[_ngcontent-%COMP%]{background-color:#c8c8c8}.w-tab-link[_ngcontent-%COMP%]:focus{outline:0}.w-tab-content[_ngcontent-%COMP%]{display:block;position:relative;overflow:hidden}.w-tab-pane[_ngcontent-%COMP%]{display:none;position:relative}.w--tab-active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 479px){.w-tab-link[_ngcontent-%COMP%]{display:block}}.w-ix-emptyfix[_ngcontent-%COMP%]:after{content:""}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.w-dyn-empty[_ngcontent-%COMP%]{background-color:#ddd;padding:10px}.w-dyn-hide[_ngcontent-%COMP%], .w-dyn-bind-empty[_ngcontent-%COMP%], .w-condition-invisible[_ngcontent-%COMP%]{display:none!important}.wf-layout-layout[_ngcontent-%COMP%]{display:grid}.w-layout-grid[_ngcontent-%COMP%]{grid-row-gap:16px;grid-column-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.w-pagination-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;display:flex}.w-pagination-previous[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-previous-icon[_ngcontent-%COMP%]{margin-right:4px}.w-pagination-next[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-next-icon[_ngcontent-%COMP%]{margin-left:4px}.w-checkbox[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-checkbox[_ngcontent-%COMP%]:before{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox[_ngcontent-%COMP%]:after{content:" ";clear:both;grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox-input[_ngcontent-%COMP%]{float:left;margin:4px 0 0 -20px;line-height:normal}.w-checkbox-input--inputType-custom[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid #ccc;border-radius:2px}.w-checkbox-input--inputType-custom.w--redirected-checked[_ngcontent-%COMP%]{background-color:#3898ec;background-image:url(https://d3e54v103j8qbb.cloudfront.net/static/custom-checkbox-checkmark.589d534424.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;border-color:#3898ec}.w-checkbox-input--inputType-custom.w--redirected-focus[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px #3898ec}body[_ngcontent-%COMP%]{color:#000;font-family:Montserrat,sans-serif;font-size:12px;font-weight:400;line-height:1}h1[_ngcontent-%COMP%]{letter-spacing:7px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:9.58333em;font-weight:700;line-height:1}h2[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.91667em;font-weight:700;line-height:1}h3[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.25em;font-weight:700;line-height:1}h4[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;font-size:18px;font-weight:600;line-height:24px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.nav-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:relative}.navbar[_ngcontent-%COMP%]{z-index:999;height:72px;color:#fff;background-color:#000000f2;position:fixed;inset:0% 0% auto}.logo-link[_ngcontent-%COMP%]{height:100%;align-items:center;margin-left:30px;padding-left:0;transition:opacity .2s;display:flex;position:absolute;inset:0% auto auto 0%}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.nav-menu[_ngcontent-%COMP%]{width:100%;height:100%;max-width:690px;justify-content:space-between;align-items:center;margin-left:206px;margin-right:206px;display:flex}.nav-link[_ngcontent-%COMP%]{height:100%;opacity:.4;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding-left:0;padding-right:0;font-size:1em;font-weight:600;transition:opacity .2s;display:flex}.nav-link[_ngcontent-%COMP%]:hover{opacity:1}.nav-link[_ngcontent-%COMP%]:active{opacity:.75}.nav-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.nav-link.w--current[_ngcontent-%COMP%]:active{opacity:.75}.logotype[_ngcontent-%COMP%]{width:169px}.nav-social[_ngcontent-%COMP%]{height:100%;align-items:center;margin-right:30px;display:flex;position:absolute;inset:0% 0% auto auto}.nav-social.is-mobile[_ngcontent-%COMP%]{display:none}.collection-list[_ngcontent-%COMP%]{display:flex}.social-link[_ngcontent-%COMP%]{transition:opacity .2s}.social-link[_ngcontent-%COMP%]:hover{opacity:.7}.social-link[_ngcontent-%COMP%]:active{opacity:.5}.empty-tap-area[_ngcontent-%COMP%]{display:none}.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.section.is-hero-home[_ngcontent-%COMP%]{z-index:0;height:100vh;background-color:#000;padding-left:0;padding-right:0}.section.is-dark[_ngcontent-%COMP%]{color:#fff;background-color:#000}.section.is--welcome[_ngcontent-%COMP%]{z-index:1;background-color:#eee;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-repeat:no-repeat;background-size:cover}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df84c6fccb1bdc2d62_tile-texture.jpg);background-size:auto}.section.is--pre-footer[_ngcontent-%COMP%]{color:#fff;background-color:#333;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b288771c7edd54b4f2ae35_dark-geometric-pattern.jpg);background-position:50% 100%;background-repeat:no-repeat;background-size:cover}.section.is-hero[_ngcontent-%COMP%]{height:560px;background-image:linear-gradient(to right,#000,#7c7c7c);padding-left:0;padding-right:0}.section.is--services[_ngcontent-%COMP%]{background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df0e0fd836392a0c89_light-geometric-pattern.jpg);background-position:0 0;background-repeat:no-repeat;background-size:cover}.image-cover[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-cover.is--associates[_ngcontent-%COMP%]{object-position:50% 35%}.image-cover.is--home[_ngcontent-%COMP%]{object-position:50% 0%}.hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative}.black-overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0%}.home-hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.h1-home-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:25px;margin-top:10px;font-size:32px;font-weight:600}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;display:flex}.container.is--footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:70px;padding-bottom:35px;display:flex}.container.is--pre-footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.container.is--hero[_ngcontent-%COMP%]{height:100%;flex-direction:column;justify-content:center;align-items:flex-start;margin-top:40px;padding-top:0;padding-bottom:0;display:flex}.container.is--associates[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.label[_ngcontent-%COMP%]{color:#646464;margin-bottom:10px;font-size:1.33333em;line-height:1.5}.label.is--dark[_ngcontent-%COMP%]{color:#000;letter-spacing:1px;text-transform:uppercase;margin-bottom:14px;font-size:1em;font-weight:700}.text-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.text-wrap.is--no-margin[_ngcontent-%COMP%]{margin-bottom:0}.title[_ngcontent-%COMP%]{margin-bottom:35px;font-size:1.83333em;font-weight:600;line-height:1.4}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:15px}.p-bigger[_ngcontent-%COMP%]{font-size:1.5em}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}.button[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button[_ngcontent-%COMP%]:active{background-color:#0009}.card-grid[_ngcontent-%COMP%]{grid-column-gap:29px;grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr;margin-bottom:-52px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021}.card.is--double[_ngcontent-%COMP%]{width:100%;display:flex}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-details[_ngcontent-%COMP%]{z-index:2;width:100%;flex-direction:column;align-items:center;padding-bottom:50px;padding-left:50px;padding-right:50px;display:flex;position:relative}.number-icon[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#f0f0f0;border:7px solid #fff;border-radius:50%;justify-content:center;align-items:center;margin-top:-33px;margin-bottom:20px;display:flex}.number[_ngcontent-%COMP%]{font-size:33px;font-weight:600}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center}.p-light-big[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:35px;font-size:2.5em;font-weight:300}.slogan-wrapper[_ngcontent-%COMP%]{max-width:768px;margin-top:-10px;margin-left:auto;margin-right:auto}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.column.is--padding[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:75px}.column.is--image[_ngcontent-%COMP%]{background-color:#2c2c2c;overflow:hidden}.column.is--image.rounded[_ngcontent-%COMP%]{min-height:auto;border-radius:8px}.column.is--associates[_ngcontent-%COMP%]{min-height:auto;flex-direction:column;align-items:flex-start;padding-left:75px;padding-right:75px}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:75px;display:flex}.black-label[_ngcontent-%COMP%]{color:#fff;background-color:#000;margin-bottom:40px;margin-left:-134px;margin-right:-75px;padding:9px 14px 9px 134px}.label-text[_ngcontent-%COMP%]{font-size:2.08333em}.details-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.details-wrap.is--no-padding[_ngcontent-%COMP%]{margin-bottom:0}.card-image-wrap[_ngcontent-%COMP%]{width:100%;height:230px;object-fit:cover;background-color:#afafaf;overflow:hidden}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}.card-text.is--centred[_ngcontent-%COMP%]{height:100%;justify-content:center}.see-more-wrap[_ngcontent-%COMP%]{max-width:768px;flex-direction:column;align-items:center;margin-left:auto;margin-right:auto;display:flex}.card-text-wrap[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:190px;font-size:1.16667em}.footer[_ngcontent-%COMP%]{z-index:1;color:#fff;background-color:#141414;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.p-pre-footer[_ngcontent-%COMP%]{color:#d3d3d3;margin-top:10px;margin-bottom:35px;font-size:1.5em;font-weight:300}.p-pre-footer.is--associates[_ngcontent-%COMP%]{margin-bottom:0}.footer-link[_ngcontent-%COMP%]{height:100%;opacity:1;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding:19px;font-size:1em;font-weight:500;text-decoration:none;transition:opacity .2s;display:flex}.footer-link[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link[_ngcontent-%COMP%]:active{opacity:.5}.footer-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.footer-link.w--current[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link.w--current[_ngcontent-%COMP%]:active{opacity:.5}.footer-links[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:30px;margin-bottom:30px;display:flex}.logo-link-footer[_ngcontent-%COMP%]{height:100%;align-items:center;padding:10px;transition:opacity .2s;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.footer-social[_ngcontent-%COMP%]{height:100%;align-items:center;display:flex;position:static;inset:0% 0% auto auto}.copyright-wrap[_ngcontent-%COMP%]{color:#818181;letter-spacing:2px;text-transform:uppercase;align-items:center;margin-top:60px;font-size:.833333em;display:flex}.separator[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.link[_ngcontent-%COMP%]{color:#fff;border-bottom:1.5px solid rgba(255,255,255,0);padding-top:3px;padding-bottom:3px;font-weight:600;text-decoration:none;transition:border-color .2s;display:inline-block}.link[_ngcontent-%COMP%]:hover{border-bottom-color:#fff}.discover-div[_ngcontent-%COMP%]{z-index:3;color:#fff;justify-content:center;align-items:flex-end;display:flex;position:absolute;inset:auto 0% 0%}.discover-rotate[_ngcontent-%COMP%]{align-items:center;margin-bottom:65px;display:flex;transform:rotate(90deg)}.discover-line[_ngcontent-%COMP%]{width:60px;height:1px;background-color:#fff;margin-left:15px}.discover-text[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;font-size:1.08333em;font-weight:500}.black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#000000e6 20%,#0000004d);position:absolute;inset:0%}.hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:absolute;inset:0%}.h1-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:10px;font-size:115px}.p-hero[_ngcontent-%COMP%]{max-width:510px;color:#fff;margin-top:20px;font-size:22px;font-weight:300}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}.subtitile[_ngcontent-%COMP%]{color:#505050;margin-top:5px;font-size:1.5em}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:46px 40px 40px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.icon[_ngcontent-%COMP%]{width:96px}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}.p-card[_ngcontent-%COMP%]{font-size:1.2em}.collection-item[_ngcontent-%COMP%]{display:flex}.collection-list-3[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.lightbox-link[_ngcontent-%COMP%]{width:100%;height:30vw;max-height:368.094px;background-color:#eee;position:relative;overflow:hidden}.thumb-overlay[_ngcontent-%COMP%]{opacity:0;background-color:#00000080;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.logomark-white[_ngcontent-%COMP%]{width:40px}.p-bold[_ngcontent-%COMP%]{max-width:780px;color:#000;letter-spacing:0;text-transform:none;font-size:1.83333em;font-weight:600;line-height:1.5}.form-apply-grid[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.field-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:5px;display:flex}.field-label[_ngcontent-%COMP%]{margin-bottom:10px}.field-box[_ngcontent-%COMP%]{width:100%;color:#505050}.text-area[_ngcontent-%COMP%]{width:100%;min-height:140px}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:72px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.form-apply[_ngcontent-%COMP%]{margin-bottom:0}.success-text[_ngcontent-%COMP%]{padding:10px 33px 23px;font-size:14px;font-weight:600}.success-message[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:90px 0}.form-heading[_ngcontent-%COMP%]{letter-spacing:2px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]{color:#a12e30;background-color:#0000;margin-top:20px;padding:0;font-weight:500}.checkbox-field[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px;display:flex}.checkbox-text[_ngcontent-%COMP%]{color:#505050;margin-bottom:0;margin-left:15px;line-height:1.5}.consent-checkbox[_ngcontent-%COMP%]{flex:none;margin-top:0}.button-off[_ngcontent-%COMP%]{color:#fff;letter-spacing:2px;text-transform:uppercase;cursor:not-allowed;background-color:#e6e6e6;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;display:none}.button-on[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button-on[_ngcontent-%COMP%]:active{background-color:#0009}.field-para[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.1em}.grey-link[_ngcontent-%COMP%]{color:#505050}.button-off-text[_ngcontent-%COMP%]{cursor:not-allowed}.grey-line[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin-top:60px;margin-bottom:60px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.associates-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4;list-style-type:decimal}.text-left[_ngcontent-%COMP%]{max-width:440px}.associates-list[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-weight:600;line-height:1.4}.dont-see-profession[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:20px;font-weight:600}.job-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;font-size:1.7em;font-weight:600}.job-title-wrap[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;display:flex}.full-part-time[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:4px;margin-left:15px;padding:9px 10px;font-size:11px;font-weight:600}.lottie-animation[_ngcontent-%COMP%]{width:190px;margin-top:-10px;margin-left:auto;margin-right:auto}.open-role-list[_ngcontent-%COMP%]{grid-column-gap:0px;grid-row-gap:50px;grid-template-rows:auto auto;grid-template-columns:1fr;grid-auto-columns:1fr;display:grid}.grid-2[_ngcontent-%COMP%]{grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr}.card-contact[_ngcontent-%COMP%]{min-height:290px;color:#000;text-align:center;background-color:#fff;border-radius:8px;flex-direction:column;align-items:center;padding-top:42px;padding-bottom:42px;text-decoration:none;display:flex;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.contact-label[_ngcontent-%COMP%]{color:#969696;letter-spacing:2px;text-transform:uppercase;margin-top:30px;margin-bottom:20px;font-weight:600}.contact-link[_ngcontent-%COMP%]{color:#000;margin-bottom:10px;font-size:20px;font-weight:600;text-decoration:none;display:block}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:20px}.contact-card-wrap[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;display:flex}.p-address[_ngcontent-%COMP%]{max-width:240px;margin-bottom:20px}.link-wrap[_ngcontent-%COMP%]{margin-bottom:-10px}.documentation-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{letter-spacing:3px;text-transform:uppercase;margin-top:70px;margin-bottom:40px;font-size:50px}.documentation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:30px;font-size:16px}.documentation-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:50px;margin-bottom:30px;font-size:30px}.documentation-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#505050;margin-bottom:30px;font-size:16px;line-height:2}.documentation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:40px;margin-bottom:30px;font-size:23px}.documentation-list[_ngcontent-%COMP%]{display:flex}.open-graph-hide[_ngcontent-%COMP%]{display:none}.open-graph-image[_ngcontent-%COMP%]{width:1200px;height:630px;margin-bottom:20px}.wg-element-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;position:relative}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{margin-left:auto;position:absolute;inset:17px 30px auto auto}.wg-dropdown-1[_ngcontent-%COMP%]{width:auto;text-transform:uppercase;flex-direction:column;align-items:stretch;font-weight:700}.wg-dd-1-togle[_ngcontent-%COMP%]{z-index:1;width:100%;background-color:#272727;flex-direction:column;padding:10px 15px}.wg-dd-1-togle[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.wg-selector-text-wrapper[_ngcontent-%COMP%]{width:100%;align-items:center;display:flex}.wg-flag-ico[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;object-fit:cover}.wg-dd-1-list[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;box-shadow:0 -13px 50px 3px #11179c12}.wg-flag[_ngcontent-%COMP%]{width:20px;height:16px;justify-content:center;align-items:center;display:flex}.wg-dropdown-1-link[_ngcontent-%COMP%]{color:#000;background-color:#262626;padding:10px 15px;text-decoration:none;transition:background-color .1s}.wg-dropdown-1-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.div-block[_ngcontent-%COMP%]{width:1px;height:25px;opacity:.3;background-color:#fff;margin-left:10px;margin-right:72px}.pagination[_ngcontent-%COMP%]{margin-top:30px}@media screen and (max-width: 991px){.nav-container[_ngcontent-%COMP%]{justify-content:flex-start}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.logo-link.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.nav-menu[_ngcontent-%COMP%]{height:auto;max-width:none;background-color:#000000f2;justify-content:center;margin-left:0;margin-right:0;padding-top:30px;display:flex}.nav-link[_ngcontent-%COMP%]{z-index:1;padding-top:30px;padding-bottom:30px;font-size:1.4em;display:flex}.nav-social[_ngcontent-%COMP%]{display:none}.nav-social.is-mobile[_ngcontent-%COMP%]{z-index:1;justify-content:center;margin-right:0;padding-top:60px;padding-bottom:60px;display:flex;position:relative}.mobile-link[_ngcontent-%COMP%]{margin-left:auto;padding:9px 0}.mobile-link[_ngcontent-%COMP%]:hover{opacity:.75}.mobile-link[_ngcontent-%COMP%]:active{opacity:.5}.mobile-link.w--open[_ngcontent-%COMP%]{background-color:#0000}.burger-icon[_ngcontent-%COMP%]{width:80px}.empty-tap-area[_ngcontent-%COMP%]{height:100vh;display:block;position:absolute;inset:0%}.section.is--welcome[_ngcontent-%COMP%]{background-image:linear-gradient(#f3f3f3b0,#f3f3f3b0),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b3c56515595b50015a3c80_white-pattern.png),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-position:0 0,0 0,0 0;background-repeat:repeat,repeat,repeat;background-size:auto,auto,auto}.section.is-hero[_ngcontent-%COMP%]{height:410px}.h1-home-hero-small[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:75px}.container.is--gallery[_ngcontent-%COMP%]{max-width:none}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:5px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;margin-bottom:-23px}.card.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}.number-icon[_ngcontent-%COMP%]{margin-bottom:15px}.p-light-big[_ngcontent-%COMP%]{font-size:2.2em}.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}.column.is--associates[_ngcontent-%COMP%]{width:100%;margin-top:35px;padding-left:0;padding-right:0}.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}.card-image-wrap[_ngcontent-%COMP%]{height:400px}.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:none}.footer-link[_ngcontent-%COMP%]{z-index:1;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.logo-link-footer.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.h1-hero.outline-text[_ngcontent-%COMP%]{font-size:75px}.p-hero[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{text-align:left}.card-apply[_ngcontent-%COMP%]{width:100%;padding-top:50px;padding-bottom:75px}.form-heading[_ngcontent-%COMP%]{font-size:2.25em}.checkbox-text[_ngcontent-%COMP%]{text-align:left}.button-off[_ngcontent-%COMP%], .button-on[_ngcontent-%COMP%]{text-align:center;align-self:stretch}.grey-line[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:50px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:0px}.associates-title[_ngcontent-%COMP%]{font-size:1.7em}.text-left[_ngcontent-%COMP%]{padding-right:86px}.job-title[_ngcontent-%COMP%]{line-height:1.3}.job-title-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.full-part-time[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:8px;margin-left:0}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-contact[_ngcontent-%COMP%]{width:100%;min-height:auto;text-align:center;padding-top:56px;padding-bottom:56px}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:0}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{position:absolute;inset:16px 130px auto auto}}@media screen and (max-width: 767px){h2[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2.5em}h3[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2em}p[_ngcontent-%COMP%]{font-size:1.2em}.logo-link.w--current[_ngcontent-%COMP%]{padding-left:0}.nav-menu[_ngcontent-%COMP%]{min-height:100vh}.section.is-hero[_ngcontent-%COMP%]{height:340px}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:15px;font-size:16px}.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}.container.is--pre-footer[_ngcontent-%COMP%]{padding-top:96px;padding-bottom:96px}.container.is--hero[_ngcontent-%COMP%]{margin-top:53px}.label[_ngcontent-%COMP%]{font-size:1.2em}.button[_ngcontent-%COMP%]{justify-content:center;display:flex}.card-details[_ngcontent-%COMP%]{padding-bottom:40px;padding-left:40px;padding-right:40px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.label-text[_ngcontent-%COMP%]{font-size:1.7em}.card-image-wrap[_ngcontent-%COMP%]{height:55vw}.card-text[_ngcontent-%COMP%]{align-items:stretch}.card-text.is--centred[_ngcontent-%COMP%]{align-items:flex-start}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:6px;font-size:55px}.p-hero[_ngcontent-%COMP%]{max-width:380px;font-size:16px}.subtitile[_ngcontent-%COMP%]{font-size:1.4em}.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.lightbox-link[_ngcontent-%COMP%]{height:42vw}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.form-heading[_ngcontent-%COMP%]{font-size:1.9em}.button-on[_ngcontent-%COMP%]{justify-content:center}.text-left[_ngcontent-%COMP%]{padding-right:40px}.open-role-list[_ngcontent-%COMP%]{grid-row-gap:30px}.card-contact[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){h2[_ngcontent-%COMP%]{letter-spacing:2px;font-size:2em;line-height:1.1}.nav-container[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.logo-link[_ngcontent-%COMP%]{margin-left:20px}.logotype[_ngcontent-%COMP%]{width:140px}.burger-icon[_ngcontent-%COMP%]{width:60px;margin-left:20px}.section[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.section.is-hero-home[_ngcontent-%COMP%]{height:87vh}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:2vw;font-size:5vw}.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:56px}.label[_ngcontent-%COMP%]{font-size:1.2em}.title[_ngcontent-%COMP%]{font-size:1.7em}.button[_ngcontent-%COMP%]{text-align:center}.card-grid[_ngcontent-%COMP%]{margin-bottom:0}.card-details[_ngcontent-%COMP%]{padding-bottom:30px;padding-left:25px;padding-right:25px}.number-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:-31px;margin-bottom:12px}.number[_ngcontent-%COMP%]{font-size:25px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.p-light-big[_ngcontent-%COMP%]{font-size:1.7em;font-weight:400}.column.is--padding[_ngcontent-%COMP%]{padding:25px}.column.is--image[_ngcontent-%COMP%]{height:300px}.column.is--about[_ngcontent-%COMP%]{padding:25px}.black-label[_ngcontent-%COMP%]{margin-left:-25px;margin-right:-25px;padding:15px 25px}.label-text[_ngcontent-%COMP%]{letter-spacing:3px;font-size:1.4em;line-height:1.3}.card-image-wrap[_ngcontent-%COMP%]{height:62vw}.card-shadow[_ngcontent-%COMP%]{margin-bottom:20px}.p-pre-footer[_ngcontent-%COMP%]{font-size:1.2em}.footer-links[_ngcontent-%COMP%], .copyright-wrap[_ngcontent-%COMP%]{flex-direction:column}.separator[_ngcontent-%COMP%]{display:none}.discover-rotate[_ngcontent-%COMP%]{margin-bottom:49px}.discover-text[_ngcontent-%COMP%]{font-size:.8em}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:11vw}.p-hero[_ngcontent-%COMP%]{font-size:14px}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:20px;grid-row-gap:20px}.card-simple[_ngcontent-%COMP%]{padding:38px 20px 40px}.card-title[_ngcontent-%COMP%]{font-size:1.7em}.heading[_ngcontent-%COMP%]{letter-spacing:2px;font-size:1.8em}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.lightbox-link[_ngcontent-%COMP%]{height:80vw}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.card-apply[_ngcontent-%COMP%]{padding:38px 20px 40px}.form-heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:1.7em}.checkbox-text[_ngcontent-%COMP%]{margin-left:20px}.button-on[_ngcontent-%COMP%]{text-align:center}}#w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-375681b7[_ngcontent-%COMP%], #w-node-_4dbb65f5-dbff-7360-6381-24730cf4d5e5-375681b7[_ngcontent-%COMP%], #w-node-_49f4a6c9-ea6b-6d9e-523c-9fcfe16a6b0c-375681b7[_ngcontent-%COMP%], #w-node-d157a120-74ba-936e-35b8-7f77ccc5ada3-375681b7[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-375681b7[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-375681b7[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-375681b7[_ngcontent-%COMP%], #w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-70b41220[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-70b41220[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-70b41220[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}@media screen and (max-width: 991px){#w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-375681b7[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-375681b7[_ngcontent-%COMP%], #w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-70b41220[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}}',`@media screen and (min-width: 992px) {
                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .black-label[_ngcontent-%COMP%] {
                        margin-right: -134px;
                        margin-left: -14px;
                        padding-right: 0px;
                        padding-left: 14px;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card.is--double[_ngcontent-%COMP%] {
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: reverse;
                        -webkit-flex-direction: row-reverse;
                        -ms-flex-direction: row-reverse;
                        flex-direction: row-reverse;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card-text[_ngcontent-%COMP%] {
                        -webkit-box-align: stretch;
                        -webkit-align-items: stretch;
                        -ms-flex-align: stretch;
                        align-items: stretch;
                    }
                }`]});let x=g;return x})();var eI=["carousel"];function tI(x,g){if(x&1&&(re(0,"a",3)(1,"div",4),_t(2,"img",5),se()()),x&2){let P=ur().$implicit;ln(2),_i("src",P.url,Ys)}}function nI(x,g){x&1&&Pr(0,tI,3,1,"ng-template",2)}var y2=(()=>{let g=class g{constructor(){this.URL="./assets/tdr",this.images=[{url:`${this.URL}/3b.jpg`},{url:`${this.URL}/2b.jpg`},{url:`${this.URL}/1b.jpg`},{url:`${this.URL}/4b.jpg`},{url:`${this.URL}/5b.jpg`}],this.paused=!1,this.unpauseOnArrow=!1,this.pauseOnIndicator=!1,this.pauseOnHover=!0,this.pauseOnFocus=!0}togglePaused(){this.paused?this.carousel.cycle():this.carousel.pause(),this.paused=!this.paused}onSlide(v){this.unpauseOnArrow&&v.paused&&(v.source===ua.ARROW_LEFT||v.source===ua.ARROW_RIGHT)&&this.togglePaused(),this.pauseOnIndicator&&!v.paused&&v.source===ua.INDICATOR&&this.togglePaused()}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-main-carrusel"]],viewQuery:function(M,r){if(M&1&&Qs(eI,7),M&2){let j;ra(j=aa())&&(r.carousel=j.first)}},standalone:!0,features:[pn],decls:4,vars:4,consts:[["carousel",""],[2,"padding-top","90px",3,"slide","ngClass","interval","pauseOnHover","pauseOnFocus"],["ngbSlide",""],["target","_blank","rel","nofollow noopener noreferrer"],[1,"k"],[1,"carousel-img",3,"src"]],template:function(M,r){if(M&1){let j=Xs();re(0,"ngb-carousel",1,0),Xi("slide",function(we){return hs(j),ps(r.onSlide(we))}),Nr(2,nI,1,0,null,2,Fl),se()}M&2&&(_i("ngClass","carousel-dark")("interval",3e3)("pauseOnHover",r.pauseOnHover)("pauseOnFocus",r.pauseOnFocus),ln(2),Vr(r.images))},dependencies:[yi,hm,Zm,Wm,kf,Ym],styles:[".k[_ngcontent-%COMP%]{display:flex;justify-content:center}.carousel-img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;margin:0 auto}@media screen and (max-width: 767px){.carousel-img[_ngcontent-%COMP%]{width:100%}}.carousel-caption[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;-webkit-text-stroke:1px black;text-align:center}.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:5vw;text-shadow:2px 2px 4px rgba(0,0,0,1);font-family:tdr}@media screen and (max-width: 767px){.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px}}@media screen and (max-width: 479px){.carousel-caption[_ngcontent-%COMP%]{top:45%}.carousel-caption[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{-webkit-text-stroke:initial;font-size:29px}}"],changeDetection:0});let x=g;return x})();var x2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-portafolio04"]],standalone:!0,features:[pn],decls:150,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"text-container"],[1,"section","is--featured-projects"],[1,"container","w-container"],[1,"w-embed"],[1,"w-dyn-list"],["role","list",1,"w-dyn-items"],["role","listitem",1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"card","is--double"],[1,"column","is--image"],[1,"column","is--padding"],[1,"card-text","is--featured"],[1,"black-label"],[1,"label-text"],[1,"details-wrap"],[1,"label","is--dark"],[1,"details-wrap","is--no-padding"],["src","../../../../assets/img/iglesia02.JPG","loading","lazy","alt","Bioclimatic house","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia05.jpg","loading","lazy","alt","\u0394\u03B9\u03B1\u03BC\u03B5\u03C1\u03AF\u03C3\u03BC\u03B1\u03C4\u03B1 \u03BC\u03B5 \u03B8\u03AD\u03B1 \u0391\u03BA\u03C1\u03CC\u03C0\u03BF\u03BB\u03B7 \u03C3\u03C4\u03BF\u03BD \u039A\u03B5\u03C1\u03B1\u03BC\u03B5\u03B9\u03BA\u03CC.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia04.jpg","loading","lazy","alt","K\u03B5\u03BD\u03C4\u03C1\u03B9\u03BA\u03AE \u03A0\u03CD\u03BB\u03B7 401 \u0393\u03A3\u039D\u0391","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],["src","../../../../assets/img/iglesia01.jpg","loading","lazy","alt","\u039C\u03BF\u03BD\u03C4\u03AD\u03C1\u03BD\u03B1 \u03BA\u03B1\u03C4\u03BF\u03B9\u03BA\u03AF\u03B1 \u03BC\u03AD\u03C3\u03B1 \u03C3\u03C4\u03BF\u03BD \u03B9\u03C3\u03C4\u03CC \u03C4\u03B7\u03C2 \u03C0\u03CC\u03BB\u03B7\u03C2, \u03A7\u03B1\u03BB\u03BA\u03AF\u03B4\u03B1.","sizes","(max-width: 479px) 92vw, (max-width: 767px) 88vw, (max-width: 991px) 600px, 48vw",1,"card-image"],[1,"see-more-wrap"],[1,"p-light-big"],["href","/portfolio",1,"button","w-button"]],template:function(M,r){M&1&&(re(0,"html",0)(1,"head"),_t(2,"meta",1)(3,"meta",2),re(4,"title"),_e(5,"Triangle"),se(),re(6,"title"),_e(7,"Blackbox Architectonics | A Collaborative Studio"),se()(),re(8,"body")(9,"header")(10,"div",3)(11,"h1"),_e(12,"Interiores"),se(),re(13,"span"),_e(14,"Tecno Dry Wall - Carlos Roby"),se()()(),re(15,"section",4)(16,"div",5),_t(17,"div",6),re(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",10)(22,"div",11)(23,"div",12),_t(24,"app-main-carrusel"),se(),re(25,"div",13)(26,"div",14)(27,"div",15)(28,"h3",16),_e(29,"Sea-View Apartments"),se()(),re(30,"div",17)(31,"div",18),_e(32,"Location"),se(),re(33,"p"),_e(34,"Chalkida, Greece"),se()(),re(35,"div",17)(36,"div",18),_e(37,"Status"),se(),re(38,"p"),_e(39,"Completed in 2008"),se()(),re(40,"div",19)(41,"div",18),_e(42,"Description"),se(),re(43,"p"),_e(44,"This apartment building is situated in a very privileged sea-view plot in the center of Chalkida. Being both next to the sea and to a neo-classical house has to adopt a double character. The combination of luxury and simplicity connects to the sea and the surroundings."),se()()()()()()(),re(45,"div",9)(46,"div",10)(47,"div",11)(48,"div",12),_t(49,"img",20),se(),re(50,"div",13)(51,"div",14)(52,"div",15)(53,"h3",16),_e(54,"bioclimatic-building"),se()(),re(55,"div",17)(56,"div",18),_e(57,"Location"),se(),re(58,"p"),_e(59,"Drafi, Greece"),se()(),re(60,"div",17)(61,"div",18),_e(62,"Status"),se(),re(63,"p"),_e(64,"Under construction"),se()(),re(65,"div",19)(66,"div",18),_e(67,"Description"),se(),re(68,"p"),_e(69,"This house is located in a rocky ridge with abrupt slopes.The need to create the minimum imprint in the surroundings along with creating a green ,energy-efficient building, led to the decision to drill the slope, instead of arranging a set of spaces at different levels."),se()()()()()()(),re(70,"div",9)(71,"div",10)(72,"div",11)(73,"div",12),_t(74,"img",21),se(),re(75,"div",13)(76,"div",14)(77,"div",15)(78,"h3",16),_e(79,"Acropolis-View Flats"),se()(),re(80,"div",17)(81,"div",18),_e(82,"Location"),se(),re(83,"p"),_e(84,"Athens, Greece"),se()(),re(85,"div",17)(86,"div",18),_e(87,"Status"),se(),re(88,"p"),_e(89,"Under Construction"),se()(),re(90,"div",19)(91,"div",18),_e(92,"Description"),se(),re(93,"p"),_e(94,"This contemporary building is located in Kerameikos, Athens near Acropolis. Apartments are designed primarily as functional. This functionalism though, has its own aesthetic quality leading to innovate, smart flats."),se()()()()()()(),re(95,"div",9)(96,"div",10)(97,"div",11)(98,"div",12),_t(99,"img",22),se(),re(100,"div",13)(101,"div",14)(102,"div",15)(103,"h3",16),_e(104,"401 Hospital Gate"),se()(),re(105,"div",17)(106,"div",18),_e(107,"Location"),se(),re(108,"p"),_e(109,"Athens, Greece"),se()(),re(110,"div",17)(111,"div",18),_e(112,"Status"),se(),re(113,"p"),_e(114,"Completed in 2021"),se()(),re(115,"div",19)(116,"div",18),_e(117,"Description"),se(),re(118,"p"),_e(119,"Iakovos Tsounis\u2019 endowment allowed to the famous military hospital to renovate its entrance gate. A key consideration is the adaptation of parts \u2013existing and new- to the whole, an appearance in unison with the rest of the hospital units and an appropriate use of ornament. All the above along with the practical needs such as the protection of the sun lead to a plain rigid form aligned to the military character of the hospital."),se()()()()()()(),re(120,"div",9)(121,"div",10)(122,"div",11)(123,"div",12),_t(124,"img",23),se(),re(125,"div",13)(126,"div",14)(127,"div",15)(128,"h3",16),_e(129,"Private Residence"),se()(),re(130,"div",17)(131,"div",18),_e(132,"Location"),se(),re(133,"p"),_e(134,"Chalkida, Greece"),se()(),re(135,"div",17)(136,"div",18),_e(137,"Status"),se(),re(138,"p"),_e(139,"Completed in 2007"),se()(),re(140,"div",19)(141,"div",18),_e(142,"Description"),se(),re(143,"p"),_e(144,"This residential project is for an urban double family house located in the city of Chalkida. The main idea is to unite the two residences into one discriminated whole so that they are both parts of one concrete volume. Selected parts of the volume are partitioned to establish an indoor-outdoor connection. The different parts of the synthesis are cladded with different materials. "),se()()()()()()()()(),re(145,"div",24)(146,"p",25),_e(147,"Like to see more projects?"),se(),re(148,"a",26),_e(149,"View our Portfolio"),se()()()()()())},dependencies:[y2],styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#fff}header[_ngcontent-%COMP%]{width:100vw;height:55vh;background:linear-gradient(to right,#240909cc,#110606cc),url("./media/portada3-IZJHBW2N.webp");background-size:cover;background-position:center center;background-attachment:fixed;clip-path:polygon(0 0,100% 0,100% 80%,60% 100%,0 80%);position:relative}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:block;width:100%;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;text-align:center;color:#fff;text-shadow:0 0 10px rgba(0,0,0,5)}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,Helvetica,Arial,Lucida,sans-serif;font-weight:800;font-size:40px}header[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff4500;font-family:tdr;font-size:23px}','element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.12993,1.12993,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}img[_ngcontent-%COMP%]{overflow-clip-margin:content-box;overflow:clip}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}div[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 767px){.label[_ngcontent-%COMP%]{font-size:1.2em}}p[_ngcontent-%COMP%]{font-size:1.2em}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}@media screen and (max-width: 991px){.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}@media screen and (min-width: 992px){.card-item[_ngcontent-%COMP%]:nth-child(2n)   .black-label[_ngcontent-%COMP%]{margin-right:-134px;margin-left:-14px;padding-right:0;padding-left:14px}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card.is--double[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.card-item[_ngcontent-%COMP%]:nth-child(2n)   .card-text[_ngcontent-%COMP%]{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch}}element.style[_ngcontent-%COMP%]{will-change:transform;transform:translateZ(0) scale3d(1.10065,1.10065,1) rotateX(0) rotateY(0) rotate(0) skew(0);transform-style:preserve-3d}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:block;font-size:1.17em;margin-block-start:1em;margin-block-end:1em;margin-inline-start:0px;margin-inline-end:0px;font-weight:700}div[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{display:block}@media screen and (max-width: 767px){*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]{box-sizing:border-box}*[_ngcontent-ng-c1262040765][_ngcontent-%COMP%], *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:before, *[_ngcontent-ng-c1262040765][_ngcontent-%COMP%]:after{padding:0;margin:0;box-sizing:border-box}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b\\2026/60b282d\\2026_tile-texture.jpg);background-size:auto}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:block}@media (min-width: 768px){.card[_ngcontent-%COMP%]{flex-direction:row}.card[_ngcontent-%COMP%]   .column.is--image[_ngcontent-%COMP%]{flex:2}.card[_ngcontent-%COMP%]   .column.is--padding[_ngcontent-%COMP%]{flex:1}}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block}html[_ngcontent-%COMP%]{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-family:sans-serif}body[_ngcontent-%COMP%]{margin:0}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], main[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%]{display:block}audio[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], progress[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{vertical-align:baseline;display:inline-block}audio[_ngcontent-%COMP%]:not([controls]){height:0;display:none}[hidden][_ngcontent-%COMP%], template[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{background-color:#0000}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}abbr[title][_ngcontent-%COMP%]{border-bottom:1px dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700}dfn[_ngcontent-%COMP%]{font-style:italic}h1[_ngcontent-%COMP%]{margin:.67em 0;font-size:2em}mark[_ngcontent-%COMP%]{color:#000;background:#ff0}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sup[_ngcontent-%COMP%]{top:-.5em}sub[_ngcontent-%COMP%]{bottom:-.25em}img[_ngcontent-%COMP%]{border:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}figure[_ngcontent-%COMP%]{margin:1em 40px}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0}pre[_ngcontent-%COMP%]{overflow:auto}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace;font-size:1em}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:inherit;font:inherit;margin:0}button[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{-webkit-appearance:button;cursor:pointer}button[disabled][_ngcontent-%COMP%], html[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default}button[_ngcontent-%COMP%]::-moz-focus-inner, input[_ngcontent-%COMP%]::-moz-focus-inner{border:0;padding:0}input[_ngcontent-%COMP%]{line-height:normal}input[type=checkbox][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}input[type=search][_ngcontent-%COMP%]{-webkit-appearance:none}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}fieldset[_ngcontent-%COMP%]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[_ngcontent-%COMP%]{border:0;padding:0}textarea[_ngcontent-%COMP%]{overflow:auto}optgroup[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0}@font-face{font-family:webflow-icons;src:url(data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBiUAAAC8AAAAYGNtYXDpP+a4AAABHAAAAFxnYXNwAAAAEAAAAXgAAAAIZ2x5ZmhS2XEAAAGAAAADHGhlYWQTFw3HAAAEnAAAADZoaGVhCXYFgQAABNQAAAAkaG10eCe4A1oAAAT4AAAAMGxvY2EDtALGAAAFKAAAABptYXhwABAAPgAABUQAAAAgbmFtZSoCsMsAAAVkAAABznBvc3QAAwAAAAAHNAAAACAAAwP4AZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAwPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAQAAAAAwACAACAAQAAQAg5gPpA//9//8AAAAAACDmAOkA//3//wAB/+MaBBcIAAMAAQAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEBIAAAAyADgAAFAAAJAQcJARcDIP5AQAGA/oBAAcABwED+gP6AQAABAOAAAALgA4AABQAAEwEXCQEH4AHAQP6AAYBAAcABwED+gP6AQAAAAwDAAOADQALAAA8AHwAvAAABISIGHQEUFjMhMjY9ATQmByEiBh0BFBYzITI2PQE0JgchIgYdARQWMyEyNj0BNCYDIP3ADRMTDQJADRMTDf3ADRMTDQJADRMTDf3ADRMTDQJADRMTAsATDSANExMNIA0TwBMNIA0TEw0gDRPAEw0gDRMTDSANEwAAAAABAJ0AtAOBApUABQAACQIHCQEDJP7r/upcAXEBcgKU/usBFVz+fAGEAAAAAAL//f+9BAMDwwAEAAkAABcBJwEXAwE3AQdpA5ps/GZsbAOabPxmbEMDmmz8ZmwDmvxmbAOabAAAAgAA/8AEAAPAAB0AOwAABSInLgEnJjU0Nz4BNzYzMTIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjMSIHDgEHBhUUFx4BFxYzAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpVSktvICEhIG9LSlVVSktvICEhIG9LSlVAKCiLXl1qal1eiygoKCiLXl1qal1eiygoZiEgb0tKVVVKS28gISEgb0tKVVVKS28gIQABAAABwAIAA8AAEgAAEzQ3PgE3NjMxFSIHDgEHBhUxIwAoKIteXWpVSktvICFmAcBqXV6LKChmISBvS0pVAAAAAgAA/8AFtgPAADIAOgAAARYXHgEXFhUUBw4BBwYHIxUhIicuAScmNTQ3PgE3NjMxOAExNDc+ATc2MzIXHgEXFhcVATMJATMVMzUEjD83NlAXFxYXTjU1PQL8kz01Nk8XFxcXTzY1PSIjd1BQWlJJSXInJw3+mdv+2/7c25MCUQYcHFg5OUA/ODlXHBwIAhcXTzY1PTw1Nk8XF1tQUHcjIhwcYUNDTgL+3QFt/pOTkwABAAAAAQAAmM7nP18PPPUACwQAAAAAANciZKUAAAAA1yJkpf/9/70FtgPDAAAACAACAAAAAAAAAAEAAAPA/8AAAAW3//3//QW2AAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAgAAAAQAASAEAADgBAAAwAQAAJ0EAP/9BAAAAAQAAAAFtwAAAAAAAAAKABQAHgAyAEYAjACiAL4BFgE2AY4AAAABAAAADAA8AAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADQAAAAEAAAAAAAIABwCWAAEAAAAAAAMADQBIAAEAAAAAAAQADQCrAAEAAAAAAAUACwAnAAEAAAAAAAYADQBvAAEAAAAAAAoAGgDSAAMAAQQJAAEAGgANAAMAAQQJAAIADgCdAAMAAQQJAAMAGgBVAAMAAQQJAAQAGgC4AAMAAQQJAAUAFgAyAAMAAQQJAAYAGgB8AAMAAQQJAAoANADsd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByd2ViZmxvdy1pY29ucwB3AGUAYgBmAGwAbwB3AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format("truetype");font-weight:400;font-style:normal}[class^=w-icon-][_ngcontent-%COMP%], [class*=" w-icon-"][_ngcontent-%COMP%]{speak:none;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;line-height:1;font-family:webflow-icons!important}.w-icon-slider-right[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\20ac"}.w-icon-slider-left[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\81"}.w-icon-nav-menu[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\201a"}.w-icon-arrow-down[_ngcontent-%COMP%]:before, .w-icon-dropdown-toggle[_ngcontent-%COMP%]:before{content:"\\ee\\2dc\\192"}.w-icon-file-upload-remove[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\20ac"}.w-icon-file-upload-icon[_ngcontent-%COMP%]:before{content:"\\ee\\a4\\192"}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{min-height:100%;color:#333;background-color:#fff;margin:0;font-family:Arial,sans-serif;font-size:14px;line-height:20px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}html.w-mod-touch[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{background-attachment:scroll!important}.w-block[_ngcontent-%COMP%]{display:block}.w-inline-block[_ngcontent-%COMP%]{max-width:100%;display:inline-block}.w-clearfix[_ngcontent-%COMP%]:before, .w-clearfix[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-clearfix[_ngcontent-%COMP%]:after{clear:both}.w-hidden[_ngcontent-%COMP%]{display:none}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}input.w-button[_ngcontent-%COMP%]{-webkit-appearance:button}html[data-w-dynpage][_ngcontent-%COMP%]   [data-w-cloak][_ngcontent-%COMP%]{color:#0000!important}.w-webflow-badge[_ngcontent-%COMP%], .w-webflow-badge[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{z-index:auto;visibility:visible;box-sizing:border-box;width:auto;height:auto;max-height:none;max-width:none;min-height:0;min-width:0;float:none;clear:none;box-shadow:none;opacity:1;direction:ltr;font-family:inherit;font-weight:inherit;color:inherit;font-size:inherit;line-height:inherit;font-style:inherit;font-variant:inherit;text-align:inherit;letter-spacing:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;text-indent:0;text-transform:inherit;text-shadow:none;font-smoothing:auto;vertical-align:baseline;cursor:inherit;white-space:inherit;word-break:normal;word-spacing:normal;word-wrap:normal;background:none;border:0 rgba(0,0,0,0);border-radius:0;margin:0;padding:0;list-style-type:disc;transition:none;display:block;position:static;inset:auto;overflow:visible;transform:none}.w-webflow-badge[_ngcontent-%COMP%]{white-space:nowrap;cursor:pointer;box-shadow:0 0 0 1px #0000001a,0 1px 3px #0000001a;visibility:visible!important;z-index:2147483647!important;color:#aaadb0!important;opacity:1!important;width:auto!important;height:auto!important;background-color:#fff!important;border-radius:3px!important;margin:0!important;padding:6px 8px 6px 6px!important;font-size:12px!important;line-height:14px!important;text-decoration:none!important;display:inline-block!important;position:fixed!important;inset:auto 12px 12px auto!important;overflow:visible!important;transform:none!important}.w-webflow-badge[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{visibility:visible!important;opacity:1!important;vertical-align:middle!important;display:inline-block!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:38px;line-height:44px}h2[_ngcontent-%COMP%]{margin-top:20px;font-size:32px;line-height:36px}h3[_ngcontent-%COMP%]{margin-top:20px;font-size:24px;line-height:30px}h4[_ngcontent-%COMP%]{margin-top:10px;font-size:18px;line-height:24px}h5[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;line-height:20px}h6[_ngcontent-%COMP%]{margin-top:10px;font-size:12px;line-height:18px}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px}blockquote[_ngcontent-%COMP%]{border-left:5px solid #e2e2e2;margin:0 0 10px;padding:10px 20px;font-size:18px;line-height:22px}figure[_ngcontent-%COMP%]{margin:0 0 10px}figcaption[_ngcontent-%COMP%]{text-align:center;margin-top:5px}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.w-list-unstyled[_ngcontent-%COMP%]{padding-left:0;list-style:none}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:after{clear:both}.w-video[_ngcontent-%COMP%]{width:100%;padding:0;position:relative}.w-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   object[_ngcontent-%COMP%], .w-video[_ngcontent-%COMP%]   embed[_ngcontent-%COMP%]{width:100%;height:100%;border:none;position:absolute;top:0;left:0}fieldset[_ngcontent-%COMP%]{border:0;margin:0;padding:0}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%]{cursor:pointer;-webkit-appearance:button;border:0}.w-form[_ngcontent-%COMP%]{margin:0 0 15px}.w-form-done[_ngcontent-%COMP%]{text-align:center;background-color:#ddd;padding:20px;display:none}.w-form-fail[_ngcontent-%COMP%]{background-color:#ffdede;margin-top:10px;padding:10px;display:none}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}.w-input[_ngcontent-%COMP%], .w-select[_ngcontent-%COMP%]{width:100%;height:38px;color:#333;vertical-align:middle;background-color:#fff;border:1px solid #ccc;margin-bottom:10px;padding:8px 12px;font-size:14px;line-height:1.42857;display:block}.w-input[_ngcontent-%COMP%]:-moz-placeholder, .w-select[_ngcontent-%COMP%]:-moz-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-moz-placeholder, .w-select[_ngcontent-%COMP%]::-moz-placeholder{color:#999;opacity:1}.w-input[_ngcontent-%COMP%]:-ms-input-placeholder, .w-select[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]::-webkit-input-placeholder, .w-select[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}.w-input[_ngcontent-%COMP%]:focus, .w-select[_ngcontent-%COMP%]:focus{border-color:#3898ec;outline:0}.w-input[disabled][_ngcontent-%COMP%], .w-select[disabled][_ngcontent-%COMP%], .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]   .w-select[_ngcontent-%COMP%]{cursor:not-allowed}.w-input[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-select[disabled][_ngcontent-%COMP%]:not(.w-input-disabled), .w-input[readonly][_ngcontent-%COMP%], .w-select[readonly][_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-input[_ngcontent-%COMP%], fieldset[disabled][_ngcontent-%COMP%]:not(.w-input-disabled)   .w-select[_ngcontent-%COMP%]{background-color:#eee}textarea.w-input[_ngcontent-%COMP%], textarea.w-select[_ngcontent-%COMP%]{height:auto}.w-select[_ngcontent-%COMP%]{background-color:#f3f3f3}.w-select[multiple][_ngcontent-%COMP%]{height:auto}.w-form-label[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:0;font-weight:400;display:inline-block}.w-radio[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-radio[_ngcontent-%COMP%]:before, .w-radio[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-radio[_ngcontent-%COMP%]:after{clear:both}.w-radio-input[_ngcontent-%COMP%]{margin:4px 0 0;margin-top:1px \\	;float:left;margin-top:3px;margin-left:-20px;line-height:normal}.w-file-upload[_ngcontent-%COMP%]{margin-bottom:10px;display:block}.w-file-upload-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;z-index:-100;position:absolute;overflow:hidden}.w-file-upload-default[_ngcontent-%COMP%], .w-file-upload-uploading[_ngcontent-%COMP%], .w-file-upload-success[_ngcontent-%COMP%]{color:#333;display:inline-block}.w-file-upload-error[_ngcontent-%COMP%]{margin-top:10px;display:block}.w-file-upload-default.w-hidden[_ngcontent-%COMP%], .w-file-upload-uploading.w-hidden[_ngcontent-%COMP%], .w-file-upload-error.w-hidden[_ngcontent-%COMP%], .w-file-upload-success.w-hidden[_ngcontent-%COMP%]{display:none}.w-file-upload-uploading-btn[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:flex}.w-file-upload-file[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #ccc;flex-grow:1;justify-content:space-between;margin:0;padding:8px 9px 8px 11px;display:flex}.w-file-upload-file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:400;display:block}.w-file-remove-link[_ngcontent-%COMP%]{width:auto;height:auto;cursor:pointer;margin-top:3px;margin-left:10px;padding:3px;display:block}.w-icon-file-upload-remove[_ngcontent-%COMP%]{margin:auto;font-size:10px}.w-file-upload-error-msg[_ngcontent-%COMP%]{color:#ea384c;padding:2px 0;display:inline-block}.w-file-upload-info[_ngcontent-%COMP%]{padding:0 12px;line-height:38px;display:inline-block}.w-file-upload-label[_ngcontent-%COMP%]{cursor:pointer;background-color:#fafafa;border:1px solid #ccc;margin:0;padding:8px 12px;font-size:14px;font-weight:400;display:inline-block}.w-icon-file-upload-icon[_ngcontent-%COMP%], .w-icon-file-upload-uploading[_ngcontent-%COMP%]{width:20px;margin-right:8px;display:inline-block}.w-icon-file-upload-uploading[_ngcontent-%COMP%]{height:20px}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.w-row[_ngcontent-%COMP%]:before, .w-row[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-row[_ngcontent-%COMP%]:after{clear:both}.w-row[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{float:left;width:100%;min-height:1px;padding-left:10px;padding-right:10px;position:relative}.w-col[_ngcontent-%COMP%]   .w-col[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.w-col-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-3[_ngcontent-%COMP%]{width:25%}.w-col-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-6[_ngcontent-%COMP%]{width:50%}.w-col-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-9[_ngcontent-%COMP%]{width:75%}.w-col-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-12[_ngcontent-%COMP%]{width:100%}.w-hidden-main[_ngcontent-%COMP%]{display:none!important}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}.w-hidden-main[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-medium[_ngcontent-%COMP%]{display:none!important}.w-col-medium-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-medium-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-medium-3[_ngcontent-%COMP%]{width:25%}.w-col-medium-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-medium-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-medium-6[_ngcontent-%COMP%]{width:50%}.w-col-medium-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-medium-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-medium-9[_ngcontent-%COMP%]{width:75%}.w-col-medium-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-medium-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-medium-12[_ngcontent-%COMP%]{width:100%}.w-col-stack[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}}@media screen and (max-width: 767px){.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-small[_ngcontent-%COMP%]{display:none!important}.w-row[_ngcontent-%COMP%], .w-container[_ngcontent-%COMP%]   .w-row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.w-col[_ngcontent-%COMP%]{width:100%;left:auto;right:auto}.w-col-small-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-small-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-small-3[_ngcontent-%COMP%]{width:25%}.w-col-small-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-small-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-small-6[_ngcontent-%COMP%]{width:50%}.w-col-small-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-small-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-small-9[_ngcontent-%COMP%]{width:75%}.w-col-small-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-small-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-small-12[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 479px){.w-container[_ngcontent-%COMP%]{max-width:none}.w-hidden-main[_ngcontent-%COMP%], .w-hidden-medium[_ngcontent-%COMP%], .w-hidden-small[_ngcontent-%COMP%]{display:inherit!important}.w-hidden-tiny[_ngcontent-%COMP%]{display:none!important}.w-col[_ngcontent-%COMP%]{width:100%}.w-col-tiny-1[_ngcontent-%COMP%]{width:8.33333%}.w-col-tiny-2[_ngcontent-%COMP%]{width:16.6667%}.w-col-tiny-3[_ngcontent-%COMP%]{width:25%}.w-col-tiny-4[_ngcontent-%COMP%]{width:33.3333%}.w-col-tiny-5[_ngcontent-%COMP%]{width:41.6667%}.w-col-tiny-6[_ngcontent-%COMP%]{width:50%}.w-col-tiny-7[_ngcontent-%COMP%]{width:58.3333%}.w-col-tiny-8[_ngcontent-%COMP%]{width:66.6667%}.w-col-tiny-9[_ngcontent-%COMP%]{width:75%}.w-col-tiny-10[_ngcontent-%COMP%]{width:83.3333%}.w-col-tiny-11[_ngcontent-%COMP%]{width:91.6667%}.w-col-tiny-12[_ngcontent-%COMP%]{width:100%}}.w-widget[_ngcontent-%COMP%]{position:relative}.w-widget-map[_ngcontent-%COMP%]{width:100%;height:400px}.w-widget-map[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto;display:inline}.w-widget-map[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:inherit}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%]{text-align:center}.w-widget-map[_ngcontent-%COMP%]   .gm-style-iw[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{display:none!important}.w-widget-twitter[_ngcontent-%COMP%]{overflow:hidden}.w-widget-twitter-count-shim[_ngcontent-%COMP%]{vertical-align:top;width:28px;height:20px;text-align:center;background:#fff;border:1px solid #758696;border-radius:3px;display:inline-block;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{text-align:center;color:#999;font-family:serif;font-size:15px;line-height:12px;position:relative}.w-widget-twitter-count-shim[_ngcontent-%COMP%]   .w-widget-twitter-count-clear[_ngcontent-%COMP%]{display:block;position:relative}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]{width:36px;height:28px}.w-widget-twitter-count-shim.w--large[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:18px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical){margin-left:5px;margin-right:8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large{margin-left:6px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before, .w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:50%;left:0}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):before{border-width:4px;border-color:rgba(117,134,150,0) #5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-top:-4px;margin-left:-9px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:before{border-width:5px;margin-top:-5px;margin-left:-10px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical):after{border-width:4px;border-color:rgba(255,255,255,0) #fff rgba(255,255,255,0) rgba(255,255,255,0);margin-top:-4px;margin-left:-8px}.w-widget-twitter-count-shim[_ngcontent-%COMP%]:not(.w--vertical).w--large:after{border-width:5px;margin-top:-5px;margin-left:-9px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]{width:61px;height:33px;margin-bottom:8px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before, .w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{content:" ";height:0;width:0;pointer-events:none;border:solid rgba(0,0,0,0);position:absolute;top:100%;left:50%}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:before{border-width:5px;border-color:#5d6c7b rgba(117,134,150,0) rgba(117,134,150,0);margin-left:-5px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]:after{border-width:4px;border-color:#fff rgba(255,255,255,0) rgba(255,255,255,0);margin-left:-4px}.w-widget-twitter-count-shim.w--vertical[_ngcontent-%COMP%]   .w-widget-twitter-count-inner[_ngcontent-%COMP%]{font-size:18px;line-height:22px}.w-widget-twitter-count-shim.w--vertical.w--large[_ngcontent-%COMP%]{width:76px}.w-background-video[_ngcontent-%COMP%]{height:500px;color:#fff;position:relative;overflow:hidden}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;z-index:-100;background-position:50%;background-size:cover;margin:auto;position:absolute;inset:-100%}.w-background-video[_ngcontent-%COMP%] > video[_ngcontent-%COMP%]::-webkit-media-controls-start-playback-button{-webkit-appearance:none;display:none!important}.w-background-video--control[_ngcontent-%COMP%]{background-color:#0000;padding:0;position:absolute;bottom:1em;right:1em}.w-background-video--control[_ngcontent-%COMP%] > [hidden][_ngcontent-%COMP%]{display:none!important}.w-slider[_ngcontent-%COMP%]{height:300px;text-align:center;clear:both;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);background:#ddd;position:relative}.w-slider-mask[_ngcontent-%COMP%]{z-index:1;height:100%;white-space:nowrap;display:block;position:relative;left:0;right:0;overflow:hidden}.w-slide[_ngcontent-%COMP%]{vertical-align:top;width:100%;height:100%;white-space:normal;text-align:left;display:inline-block;position:relative}.w-slider-nav[_ngcontent-%COMP%]{z-index:2;height:40px;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);margin:auto;padding-top:10px;position:absolute;inset:auto 0 0}.w-slider-nav.w-round[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%}.w-slider-nav.w-num[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:auto;height:auto;font-size:inherit;line-height:inherit;padding:.2em .5em}.w-slider-nav.w-shadow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-shadow:0 0 3px #3336}.w-slider-nav-invert[_ngcontent-%COMP%]{color:#fff}.w-slider-nav-invert[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#2226}.w-slider-nav-invert[_ngcontent-%COMP%] > div.w-active[_ngcontent-%COMP%]{background-color:#222}.w-slider-dot[_ngcontent-%COMP%]{width:1em;height:1em;cursor:pointer;background-color:#fff6;margin:0 3px .5em;transition:background-color .1s,color .1s;display:inline-block;position:relative}.w-slider-dot.w-active[_ngcontent-%COMP%]{background-color:#fff}.w-slider-dot[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff}.w-slider-dot[_ngcontent-%COMP%]:focus.w-active{box-shadow:none}.w-slider-arrow-left[_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]{width:80px;cursor:pointer;color:#fff;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:auto;font-size:40px;position:absolute;inset:0;overflow:hidden}.w-slider-arrow-left[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class^=w-icon-][_ngcontent-%COMP%], .w-slider-arrow-left[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%], .w-slider-arrow-right[_ngcontent-%COMP%]   [class*=" w-icon-"][_ngcontent-%COMP%]{position:absolute}.w-slider-arrow-left[_ngcontent-%COMP%]:focus, .w-slider-arrow-right[_ngcontent-%COMP%]:focus{outline:0}.w-slider-arrow-left[_ngcontent-%COMP%]{z-index:3;right:auto}.w-slider-arrow-right[_ngcontent-%COMP%]{z-index:4;left:auto}.w-icon-slider-left[_ngcontent-%COMP%], .w-icon-slider-right[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto;inset:0}.w-slider-aria-label[_ngcontent-%COMP%]{clip:rect(0 0 0 0);height:1px;width:1px;border:0;margin:-1px;padding:0;position:absolute;overflow:hidden}.w-slider-force-show[_ngcontent-%COMP%]{display:block!important}.w-dropdown[_ngcontent-%COMP%]{text-align:left;z-index:900;margin-left:auto;margin-right:auto;display:inline-block;position:relative}.w-dropdown-btn[_ngcontent-%COMP%], .w-dropdown-toggle[_ngcontent-%COMP%], .w-dropdown-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;white-space:nowrap;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;position:relative}.w-dropdown-toggle[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;padding-right:40px;display:inline-block}.w-dropdown-toggle[_ngcontent-%COMP%]:focus{outline:0}.w-icon-dropdown-toggle[_ngcontent-%COMP%]{width:1em;height:1em;margin:auto 20px auto auto;position:absolute;top:0;bottom:0;right:0}.w-dropdown-list[_ngcontent-%COMP%]{min-width:100%;background:#ddd;display:none;position:absolute}.w-dropdown-list.w--open[_ngcontent-%COMP%]{display:block}.w-dropdown-link[_ngcontent-%COMP%]{color:#222;padding:10px 20px;display:block}.w-dropdown-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-dropdown-link[_ngcontent-%COMP%]:focus{outline:0}@media screen and (max-width: 767px){.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}.w-lightbox-backdrop[_ngcontent-%COMP%]{cursor:auto;letter-spacing:normal;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;color:#fff;text-align:center;z-index:2000;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-tap-highlight-color:transparent;background:#000000e6;outline:0;font-family:Helvetica Neue,Helvetica,Ubuntu,Segoe UI,Verdana,sans-serif;font-size:17px;font-style:normal;font-weight:300;line-height:1.2;list-style:disc;position:fixed;inset:0;-webkit-transform:translate(0)}.w-lightbox-backdrop[_ngcontent-%COMP%], .w-lightbox-container[_ngcontent-%COMP%]{height:100%;-webkit-overflow-scrolling:touch;overflow:auto}.w-lightbox-content[_ngcontent-%COMP%]{height:100vh;position:relative;overflow:hidden}.w-lightbox-view[_ngcontent-%COMP%]{width:100vw;height:100vh;opacity:0;position:absolute}.w-lightbox-view[_ngcontent-%COMP%]:before{content:"";height:100vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:86vh}.w-lightbox-frame[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{vertical-align:middle;display:inline-block}.w-lightbox-figure[_ngcontent-%COMP%]{margin:0;position:relative}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-figure[_ngcontent-%COMP%]{cursor:pointer}.w-lightbox-img[_ngcontent-%COMP%]{width:auto;height:auto;max-width:none}.w-lightbox-image[_ngcontent-%COMP%]{float:none;max-width:100vw;max-height:100vh;display:block}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-height:86vh}.w-lightbox-caption[_ngcontent-%COMP%]{text-align:left;text-overflow:ellipsis;white-space:nowrap;background:#0006;padding:.5em 1em;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.w-lightbox-embed[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;inset:0}.w-lightbox-control[_ngcontent-%COMP%]{width:4em;cursor:pointer;background-position:center;background-repeat:no-repeat;background-size:24px;transition:all .3s;position:absolute;top:0}.w-lightbox-left[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAwIDI0IDQwIiB3aWR0aD0iMjQiIGhlaWdodD0iNDAiPjxnIHRyYW5zZm9ybT0icm90YXRlKDQ1KSI+PHBhdGggZD0ibTAgMGg1djIzaDIzdjVoLTI4eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDN2MjNoMjN2M2gtMjZ6IiBmaWxsPSIjZmZmIi8+PC9nPjwvc3ZnPg==);display:none;bottom:0;left:0}.w-lightbox-right[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMjQgNDAiIHdpZHRoPSIyNCIgaGVpZ2h0PSI0MCI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMC0waDI4djI4aC01di0yM2gtMjN6IiBvcGFjaXR5PSIuNCIvPjxwYXRoIGQ9Im0xIDFoMjZ2MjZoLTN2LTIzaC0yM3oiIGZpbGw9IiNmZmYiLz48L2c+PC9zdmc+);display:none;bottom:0;right:0}.w-lightbox-close[_ngcontent-%COMP%]{height:2.6em;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii00IDAgMTggMTciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxNyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIj48cGF0aCBkPSJtMCAwaDd2LTdoNXY3aDd2NWgtN3Y3aC01di03aC03eiIgb3BhY2l0eT0iLjQiLz48cGF0aCBkPSJtMSAxaDd2LTdoM3Y3aDd2M2gtN3Y3aC0zdi03aC03eiIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4=);background-size:18px;right:0}.w-lightbox-strip[_ngcontent-%COMP%]{white-space:nowrap;padding:0 1vh;line-height:0;position:absolute;bottom:0;left:0;right:0;overflow-x:auto;overflow-y:hidden}.w-lightbox-item[_ngcontent-%COMP%]{width:10vh;box-sizing:content-box;cursor:pointer;padding:2vh 1vh;display:inline-block;-webkit-transform:translate3d(0,0,0)}.w-lightbox-active[_ngcontent-%COMP%]{opacity:.3}.w-lightbox-thumbnail[_ngcontent-%COMP%]{height:10vh;background:#222;position:relative;overflow:hidden}.w-lightbox-thumbnail-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-tall[_ngcontent-%COMP%]{width:100%;top:50%;transform:translateY(-50%)}.w-lightbox-thumbnail[_ngcontent-%COMP%]   .w-lightbox-wide[_ngcontent-%COMP%]{height:100%;left:50%;transform:translate(-50%)}.w-lightbox-spinner[_ngcontent-%COMP%]{box-sizing:border-box;width:40px;height:40px;border:5px solid rgba(0,0,0,.4);border-radius:50%;margin-top:-20px;margin-left:-20px;animation:.8s linear infinite _ngcontent-%COMP%_spin;position:absolute;top:50%;left:50%}.w-lightbox-spinner[_ngcontent-%COMP%]:after{content:"";border:3px solid rgba(0,0,0,0);border-bottom-color:#fff;border-radius:50%;position:absolute;inset:-4px}.w-lightbox-hide[_ngcontent-%COMP%]{display:none}.w-lightbox-noscroll[_ngcontent-%COMP%]{overflow:hidden}@media (min-width: 768px){.w-lightbox-content[_ngcontent-%COMP%]{height:96vh;margin-top:2vh}.w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-view[_ngcontent-%COMP%]:before{height:96vh}.w-lightbox-group[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%], .w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-view[_ngcontent-%COMP%]:before{height:84vh}.w-lightbox-image[_ngcontent-%COMP%]{max-width:96vw;max-height:96vh}.w-lightbox-group[_ngcontent-%COMP%]   .w-lightbox-image[_ngcontent-%COMP%]{max-width:82.3vw;max-height:84vh}.w-lightbox-left[_ngcontent-%COMP%], .w-lightbox-right[_ngcontent-%COMP%]{opacity:.5;display:block}.w-lightbox-close[_ngcontent-%COMP%]{opacity:.8}.w-lightbox-control[_ngcontent-%COMP%]:hover{opacity:1}}.w-lightbox-inactive[_ngcontent-%COMP%], .w-lightbox-inactive[_ngcontent-%COMP%]:hover{opacity:0}.w-richtext[_ngcontent-%COMP%]:before, .w-richtext[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-richtext[_ngcontent-%COMP%]:after{clear:both}.w-richtext[contenteditable=true][_ngcontent-%COMP%]:before, .w-richtext[contenteditable=true][_ngcontent-%COMP%]:after{white-space:initial}.w-richtext[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{overflow:hidden}.w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-video[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=video][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected.w-richtext-figure-type-image[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   .w-richtext-figure-selected[data-rt-type=image][_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{outline:2px solid #2895f7}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after, .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";display:none;position:absolute;inset:0}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{max-width:60%;position:relative}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{cursor:default!important}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   figcaption.w-richtext-figcaption-placeholder[_ngcontent-%COMP%]{opacity:.6}.w-richtext[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#0000;font-size:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%]{display:table}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-image[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=image][_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{caption-side:bottom;display:table-caption}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]{width:60%;height:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-figure-type-video[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure[data-rt-type=video][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[_ngcontent-%COMP%]{clear:both;margin-left:auto;margin-right:auto}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center.w-richtext-figure-type-image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-center[data-rt-type=image][_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-width:100%}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-normal[_ngcontent-%COMP%]{clear:both}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%]{width:100%;max-width:100%;text-align:center;clear:both;margin-left:auto;margin-right:auto;display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:inherit;display:inline-block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-fullwidth[_ngcontent-%COMP%] > figcaption[_ngcontent-%COMP%]{display:block}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatleft[_ngcontent-%COMP%]{float:left;clear:none;margin-right:15px}.w-richtext[_ngcontent-%COMP%]   figure.w-richtext-align-floatright[_ngcontent-%COMP%]{float:right;clear:none;margin-left:15px}.w-nav[_ngcontent-%COMP%]{z-index:1000;background:#ddd;position:relative}.w-nav[_ngcontent-%COMP%]:before, .w-nav[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-nav[_ngcontent-%COMP%]:after{clear:both}.w-nav-brand[_ngcontent-%COMP%]{float:left;color:#333;text-decoration:none;position:relative}.w-nav-link[_ngcontent-%COMP%]{vertical-align:top;color:#222;text-align:left;margin-left:auto;margin-right:auto;padding:20px;text-decoration:none;display:inline-block;position:relative}.w-nav-link.w--current[_ngcontent-%COMP%]{color:#0082f3}.w-nav-menu[_ngcontent-%COMP%]{float:right;position:relative}[data-nav-menu-open][_ngcontent-%COMP%]{text-align:center;min-width:200px;background:#c8c8c8;position:absolute;top:100%;left:0;right:0;overflow:visible;display:block!important}.w--nav-link-open[_ngcontent-%COMP%]{display:block;position:relative}.w-nav-overlay[_ngcontent-%COMP%]{width:100%;display:none;position:absolute;top:100%;left:0;right:0;overflow:hidden}.w-nav-overlay[_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{top:0}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-left][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-left][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;right:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%]{width:auto}.w-nav[data-animation=over-right][_ngcontent-%COMP%]   .w-nav-overlay[_ngcontent-%COMP%], .w-nav[data-animation=over-right][_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{z-index:1;top:0;left:auto}.w-nav-button[_ngcontent-%COMP%]{float:right;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-ms-user-select:none;user-select:none;padding:18px;font-size:24px;display:none;position:relative}.w-nav-button[_ngcontent-%COMP%]:focus{outline:0}.w-nav-button.w--open[_ngcontent-%COMP%]{color:#fff;background-color:#c8c8c8}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=all][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%], .w--nav-dropdown-open[_ngcontent-%COMP%], .w--nav-dropdown-toggle-open[_ngcontent-%COMP%]{display:block}.w--nav-dropdown-list-open[_ngcontent-%COMP%]{position:static}@media screen and (max-width: 991px){.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=medium][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}@media screen and (max-width: 767px){.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=small][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}.w-nav-brand[_ngcontent-%COMP%]{padding-left:10px}}@media screen and (max-width: 479px){.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-menu[_ngcontent-%COMP%]{display:none}.w-nav[data-collapse=tiny][_ngcontent-%COMP%]   .w-nav-button[_ngcontent-%COMP%]{display:block}}.w-tabs[_ngcontent-%COMP%]{position:relative}.w-tabs[_ngcontent-%COMP%]:before, .w-tabs[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-tabs[_ngcontent-%COMP%]:after{clear:both}.w-tab-menu[_ngcontent-%COMP%]{position:relative}.w-tab-link[_ngcontent-%COMP%]{vertical-align:top;text-align:left;cursor:pointer;color:#222;background-color:#ddd;padding:9px 30px;text-decoration:none;display:inline-block;position:relative}.w-tab-link.w--current[_ngcontent-%COMP%]{background-color:#c8c8c8}.w-tab-link[_ngcontent-%COMP%]:focus{outline:0}.w-tab-content[_ngcontent-%COMP%]{display:block;position:relative;overflow:hidden}.w-tab-pane[_ngcontent-%COMP%]{display:none;position:relative}.w--tab-active[_ngcontent-%COMP%]{display:block}@media screen and (max-width: 479px){.w-tab-link[_ngcontent-%COMP%]{display:block}}.w-ix-emptyfix[_ngcontent-%COMP%]:after{content:""}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.w-dyn-empty[_ngcontent-%COMP%]{background-color:#ddd;padding:10px}.w-dyn-hide[_ngcontent-%COMP%], .w-dyn-bind-empty[_ngcontent-%COMP%], .w-condition-invisible[_ngcontent-%COMP%]{display:none!important}.wf-layout-layout[_ngcontent-%COMP%]{display:grid}.w-layout-grid[_ngcontent-%COMP%]{grid-row-gap:16px;grid-column-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.w-pagination-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;display:flex}.w-pagination-previous[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-previous-icon[_ngcontent-%COMP%]{margin-right:4px}.w-pagination-next[_ngcontent-%COMP%]{color:#333;background-color:#fafafa;border:1px solid #ccc;border-radius:2px;margin-left:10px;margin-right:10px;padding:9px 20px;font-size:14px;display:block}.w-pagination-next-icon[_ngcontent-%COMP%]{margin-left:4px}.w-checkbox[_ngcontent-%COMP%]{margin-bottom:5px;padding-left:20px;display:block}.w-checkbox[_ngcontent-%COMP%]:before{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox[_ngcontent-%COMP%]:after{content:" ";clear:both;grid-area:1 / 1 / 2 / 2;display:table}.w-checkbox-input[_ngcontent-%COMP%]{float:left;margin:4px 0 0 -20px;line-height:normal}.w-checkbox-input--inputType-custom[_ngcontent-%COMP%]{width:12px;height:12px;border:1px solid #ccc;border-radius:2px}.w-checkbox-input--inputType-custom.w--redirected-checked[_ngcontent-%COMP%]{background-color:#3898ec;background-image:url(https://d3e54v103j8qbb.cloudfront.net/static/custom-checkbox-checkmark.589d534424.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;border-color:#3898ec}.w-checkbox-input--inputType-custom.w--redirected-focus[_ngcontent-%COMP%]{box-shadow:0 0 3px 1px #3898ec}body[_ngcontent-%COMP%]{color:#000;font-family:Montserrat,sans-serif;font-size:12px;font-weight:400;line-height:1}h1[_ngcontent-%COMP%]{letter-spacing:7px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:9.58333em;font-weight:700;line-height:1}h2[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.91667em;font-weight:700;line-height:1}h3[_ngcontent-%COMP%]{letter-spacing:4px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.25em;font-weight:700;line-height:1}h4[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;font-size:18px;font-weight:600;line-height:24px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}ul[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;padding-left:40px}.nav-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:relative}.navbar[_ngcontent-%COMP%]{z-index:999;height:72px;color:#fff;background-color:#000000f2;position:fixed;inset:0% 0% auto}.logo-link[_ngcontent-%COMP%]{height:100%;align-items:center;margin-left:30px;padding-left:0;transition:opacity .2s;display:flex;position:absolute;inset:0% auto auto 0%}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.nav-menu[_ngcontent-%COMP%]{width:100%;height:100%;max-width:690px;justify-content:space-between;align-items:center;margin-left:206px;margin-right:206px;display:flex}.nav-link[_ngcontent-%COMP%]{height:100%;opacity:.4;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding-left:0;padding-right:0;font-size:1em;font-weight:600;transition:opacity .2s;display:flex}.nav-link[_ngcontent-%COMP%]:hover{opacity:1}.nav-link[_ngcontent-%COMP%]:active{opacity:.75}.nav-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.nav-link.w--current[_ngcontent-%COMP%]:active{opacity:.75}.logotype[_ngcontent-%COMP%]{width:169px}.nav-social[_ngcontent-%COMP%]{height:100%;align-items:center;margin-right:30px;display:flex;position:absolute;inset:0% 0% auto auto}.nav-social.is-mobile[_ngcontent-%COMP%]{display:none}.collection-list[_ngcontent-%COMP%]{display:flex}.social-link[_ngcontent-%COMP%]{transition:opacity .2s}.social-link[_ngcontent-%COMP%]:hover{opacity:.7}.social-link[_ngcontent-%COMP%]:active{opacity:.5}.empty-tap-area[_ngcontent-%COMP%]{display:none}.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.section.is-hero-home[_ngcontent-%COMP%]{z-index:0;height:100vh;background-color:#000;padding-left:0;padding-right:0}.section.is-dark[_ngcontent-%COMP%]{color:#fff;background-color:#000}.section.is--welcome[_ngcontent-%COMP%]{z-index:1;background-color:#eee;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-repeat:no-repeat;background-size:cover}.section.is--featured-projects[_ngcontent-%COMP%]{background-color:#f5f5f5;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df84c6fccb1bdc2d62_tile-texture.jpg);background-size:auto}.section.is--pre-footer[_ngcontent-%COMP%]{color:#fff;background-color:#333;background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b288771c7edd54b4f2ae35_dark-geometric-pattern.jpg);background-position:50% 100%;background-repeat:no-repeat;background-size:cover}.section.is-hero[_ngcontent-%COMP%]{height:560px;background-image:linear-gradient(to right,#000,#7c7c7c);padding-left:0;padding-right:0}.section.is--services[_ngcontent-%COMP%]{background-image:url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282df0e0fd836392a0c89_light-geometric-pattern.jpg);background-position:0 0;background-repeat:no-repeat;background-size:cover}.image-cover[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-cover.is--associates[_ngcontent-%COMP%]{object-position:50% 35%}.image-cover.is--home[_ngcontent-%COMP%]{object-position:50% 0%}.hero-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;position:relative}.black-overlay[_ngcontent-%COMP%]{background-color:#0009;position:absolute;inset:0%}.home-hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.h1-home-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:25px;margin-top:10px;font-size:32px;font-weight:600}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;display:flex}.container.is--footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:70px;padding-bottom:35px;display:flex}.container.is--pre-footer[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.container.is--hero[_ngcontent-%COMP%]{height:100%;flex-direction:column;justify-content:center;align-items:flex-start;margin-top:40px;padding-top:0;padding-bottom:0;display:flex}.container.is--associates[_ngcontent-%COMP%]{text-align:center;flex-direction:column;align-items:center;padding-top:150px;padding-bottom:150px;display:flex}.label[_ngcontent-%COMP%]{color:#646464;margin-bottom:10px;font-size:1.33333em;line-height:1.5}.label.is--dark[_ngcontent-%COMP%]{color:#000;letter-spacing:1px;text-transform:uppercase;margin-bottom:14px;font-size:1em;font-weight:700}.text-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.text-wrap.is--no-margin[_ngcontent-%COMP%]{margin-bottom:0}.title[_ngcontent-%COMP%]{margin-bottom:35px;font-size:1.83333em;font-weight:600;line-height:1.4}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:15px}.p-bigger[_ngcontent-%COMP%]{font-size:1.5em}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}.button[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button[_ngcontent-%COMP%]:active{background-color:#0009}.card-grid[_ngcontent-%COMP%]{grid-column-gap:29px;grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr;margin-bottom:-52px}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021}.card.is--double[_ngcontent-%COMP%]{width:100%;display:flex}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-details[_ngcontent-%COMP%]{z-index:2;width:100%;flex-direction:column;align-items:center;padding-bottom:50px;padding-left:50px;padding-right:50px;display:flex;position:relative}.number-icon[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#f0f0f0;border:7px solid #fff;border-radius:50%;justify-content:center;align-items:center;margin-top:-33px;margin-bottom:20px;display:flex}.number[_ngcontent-%COMP%]{font-size:33px;font-weight:600}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center}.p-light-big[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:35px;font-size:2.5em;font-weight:300}.slogan-wrapper[_ngcontent-%COMP%]{max-width:768px;margin-top:-10px;margin-left:auto;margin-right:auto}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.column.is--padding[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:75px}.column.is--image[_ngcontent-%COMP%]{background-color:#2c2c2c;overflow:hidden}.column.is--image.rounded[_ngcontent-%COMP%]{min-height:auto;border-radius:8px}.column.is--associates[_ngcontent-%COMP%]{min-height:auto;flex-direction:column;align-items:flex-start;padding-left:75px;padding-right:75px}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:75px;display:flex}.black-label[_ngcontent-%COMP%]{color:#fff;background-color:#000;margin-bottom:40px;margin-left:-134px;margin-right:-75px;padding:9px 14px 9px 134px}.label-text[_ngcontent-%COMP%]{font-size:2.08333em}.details-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.details-wrap.is--no-padding[_ngcontent-%COMP%]{margin-bottom:0}.card-image-wrap[_ngcontent-%COMP%]{width:100%;height:230px;object-fit:cover;background-color:#afafaf;overflow:hidden}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}.card-text.is--centred[_ngcontent-%COMP%]{height:100%;justify-content:center}.see-more-wrap[_ngcontent-%COMP%]{max-width:768px;flex-direction:column;align-items:center;margin-left:auto;margin-right:auto;display:flex}.card-text-wrap[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:190px;font-size:1.16667em}.footer[_ngcontent-%COMP%]{z-index:1;color:#fff;background-color:#141414;padding-left:30px;padding-right:30px;position:relative;overflow:hidden}.p-pre-footer[_ngcontent-%COMP%]{color:#d3d3d3;margin-top:10px;margin-bottom:35px;font-size:1.5em;font-weight:300}.p-pre-footer.is--associates[_ngcontent-%COMP%]{margin-bottom:0}.footer-link[_ngcontent-%COMP%]{height:100%;opacity:1;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding:19px;font-size:1em;font-weight:500;text-decoration:none;transition:opacity .2s;display:flex}.footer-link[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link[_ngcontent-%COMP%]:active{opacity:.5}.footer-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}.footer-link.w--current[_ngcontent-%COMP%]:hover{opacity:.75}.footer-link.w--current[_ngcontent-%COMP%]:active{opacity:.5}.footer-links[_ngcontent-%COMP%]{justify-content:center;align-items:center;margin-top:30px;margin-bottom:30px;display:flex}.logo-link-footer[_ngcontent-%COMP%]{height:100%;align-items:center;padding:10px;transition:opacity .2s;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.footer-social[_ngcontent-%COMP%]{height:100%;align-items:center;display:flex;position:static;inset:0% 0% auto auto}.copyright-wrap[_ngcontent-%COMP%]{color:#818181;letter-spacing:2px;text-transform:uppercase;align-items:center;margin-top:60px;font-size:.833333em;display:flex}.separator[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.link[_ngcontent-%COMP%]{color:#fff;border-bottom:1.5px solid rgba(255,255,255,0);padding-top:3px;padding-bottom:3px;font-weight:600;text-decoration:none;transition:border-color .2s;display:inline-block}.link[_ngcontent-%COMP%]:hover{border-bottom-color:#fff}.discover-div[_ngcontent-%COMP%]{z-index:3;color:#fff;justify-content:center;align-items:flex-end;display:flex;position:absolute;inset:auto 0% 0%}.discover-rotate[_ngcontent-%COMP%]{align-items:center;margin-bottom:65px;display:flex;transform:rotate(90deg)}.discover-line[_ngcontent-%COMP%]{width:60px;height:1px;background-color:#fff;margin-left:15px}.discover-text[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;font-size:1.08333em;font-weight:500}.black-gradient[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#000000e6 20%,#0000004d);position:absolute;inset:0%}.hero-content[_ngcontent-%COMP%]{z-index:1;color:#fff;flex-direction:column;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:absolute;inset:0%}.h1-hero[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:13.5vw;line-height:1}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:10px;font-size:115px}.p-hero[_ngcontent-%COMP%]{max-width:510px;color:#fff;margin-top:20px;font-size:22px;font-weight:300}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}.subtitile[_ngcontent-%COMP%]{color:#505050;margin-top:5px;font-size:1.5em}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:46px 40px 40px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.icon[_ngcontent-%COMP%]{width:96px}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}.p-card[_ngcontent-%COMP%]{font-size:1.2em}.collection-item[_ngcontent-%COMP%]{display:flex}.collection-list-3[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr 1fr;grid-auto-columns:1fr;display:grid}.lightbox-link[_ngcontent-%COMP%]{width:100%;height:30vw;max-height:368.094px;background-color:#eee;position:relative;overflow:hidden}.thumb-overlay[_ngcontent-%COMP%]{opacity:0;background-color:#00000080;justify-content:center;align-items:center;display:flex;position:absolute;inset:0%}.logomark-white[_ngcontent-%COMP%]{width:40px}.p-bold[_ngcontent-%COMP%]{max-width:780px;color:#000;letter-spacing:0;text-transform:none;font-size:1.83333em;font-weight:600;line-height:1.5}.form-apply-grid[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.field-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:5px;display:flex}.field-label[_ngcontent-%COMP%]{margin-bottom:10px}.field-box[_ngcontent-%COMP%]{width:100%;color:#505050}.text-area[_ngcontent-%COMP%]{width:100%;min-height:140px}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:72px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.form-apply[_ngcontent-%COMP%]{margin-bottom:0}.success-text[_ngcontent-%COMP%]{padding:10px 33px 23px;font-size:14px;font-weight:600}.success-message[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:90px 0}.form-heading[_ngcontent-%COMP%]{letter-spacing:2px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]{color:#a12e30;background-color:#0000;margin-top:20px;padding:0;font-weight:500}.checkbox-field[_ngcontent-%COMP%]{align-items:center;margin-bottom:20px;display:flex}.checkbox-text[_ngcontent-%COMP%]{color:#505050;margin-bottom:0;margin-left:15px;line-height:1.5}.consent-checkbox[_ngcontent-%COMP%]{flex:none;margin-top:0}.button-off[_ngcontent-%COMP%]{color:#fff;letter-spacing:2px;text-transform:uppercase;cursor:not-allowed;background-color:#e6e6e6;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;display:none}.button-on[_ngcontent-%COMP%]:hover{letter-spacing:3px;background-color:#000c}.button-on[_ngcontent-%COMP%]:active{background-color:#0009}.field-para[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.1em}.grey-link[_ngcontent-%COMP%]{color:#505050}.button-off-text[_ngcontent-%COMP%]{cursor:not-allowed}.grey-line[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin-top:60px;margin-bottom:60px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.associates-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4;list-style-type:decimal}.text-left[_ngcontent-%COMP%]{max-width:440px}.associates-list[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-bottom:20px;font-weight:600;line-height:1.4}.dont-see-profession[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:20px;font-weight:600}.job-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;font-size:1.7em;font-weight:600}.job-title-wrap[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;display:flex}.full-part-time[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:4px;margin-left:15px;padding:9px 10px;font-size:11px;font-weight:600}.lottie-animation[_ngcontent-%COMP%]{width:190px;margin-top:-10px;margin-left:auto;margin-right:auto}.open-role-list[_ngcontent-%COMP%]{grid-column-gap:0px;grid-row-gap:50px;grid-template-rows:auto auto;grid-template-columns:1fr;grid-auto-columns:1fr;display:grid}.grid-2[_ngcontent-%COMP%]{grid-template-rows:auto;grid-template-columns:1fr 1fr 1fr}.card-contact[_ngcontent-%COMP%]{min-height:290px;color:#000;text-align:center;background-color:#fff;border-radius:8px;flex-direction:column;align-items:center;padding-top:42px;padding-bottom:42px;text-decoration:none;display:flex;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}.contact-label[_ngcontent-%COMP%]{color:#969696;letter-spacing:2px;text-transform:uppercase;margin-top:30px;margin-bottom:20px;font-weight:600}.contact-link[_ngcontent-%COMP%]{color:#000;margin-bottom:10px;font-size:20px;font-weight:600;text-decoration:none;display:block}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:20px}.contact-card-wrap[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;display:flex}.p-address[_ngcontent-%COMP%]{max-width:240px;margin-bottom:20px}.link-wrap[_ngcontent-%COMP%]{margin-bottom:-10px}.documentation-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{letter-spacing:3px;text-transform:uppercase;margin-top:70px;margin-bottom:40px;font-size:50px}.documentation-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:30px;font-size:16px}.documentation-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:50px;margin-bottom:30px;font-size:30px}.documentation-text[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#505050;margin-bottom:30px;font-size:16px;line-height:2}.documentation-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:40px;margin-bottom:30px;font-size:23px}.documentation-list[_ngcontent-%COMP%]{display:flex}.open-graph-hide[_ngcontent-%COMP%]{display:none}.open-graph-image[_ngcontent-%COMP%]{width:1200px;height:630px;margin-bottom:20px}.wg-element-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;position:relative}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{margin-left:auto;position:absolute;inset:17px 30px auto auto}.wg-dropdown-1[_ngcontent-%COMP%]{width:auto;text-transform:uppercase;flex-direction:column;align-items:stretch;font-weight:700}.wg-dd-1-togle[_ngcontent-%COMP%]{z-index:1;width:100%;background-color:#272727;flex-direction:column;padding:10px 15px}.wg-dd-1-togle[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.wg-selector-text-wrapper[_ngcontent-%COMP%]{width:100%;align-items:center;display:flex}.wg-flag-ico[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;object-fit:cover}.wg-dd-1-list[_ngcontent-%COMP%]{background-color:#fff;overflow:hidden;box-shadow:0 -13px 50px 3px #11179c12}.wg-flag[_ngcontent-%COMP%]{width:20px;height:16px;justify-content:center;align-items:center;display:flex}.wg-dropdown-1-link[_ngcontent-%COMP%]{color:#000;background-color:#262626;padding:10px 15px;text-decoration:none;transition:background-color .1s}.wg-dropdown-1-link[_ngcontent-%COMP%]:hover{color:#fff;background-color:#505050}.div-block[_ngcontent-%COMP%]{width:1px;height:25px;opacity:.3;background-color:#fff;margin-left:10px;margin-right:72px}.pagination[_ngcontent-%COMP%]{margin-top:30px}@media screen and (max-width: 991px){.nav-container[_ngcontent-%COMP%]{justify-content:flex-start}.logo-link[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link[_ngcontent-%COMP%]:active{opacity:.5}.logo-link.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.nav-menu[_ngcontent-%COMP%]{height:auto;max-width:none;background-color:#000000f2;justify-content:center;margin-left:0;margin-right:0;padding-top:30px;display:flex}.nav-link[_ngcontent-%COMP%]{z-index:1;padding-top:30px;padding-bottom:30px;font-size:1.4em;display:flex}.nav-social[_ngcontent-%COMP%]{display:none}.nav-social.is-mobile[_ngcontent-%COMP%]{z-index:1;justify-content:center;margin-right:0;padding-top:60px;padding-bottom:60px;display:flex;position:relative}.mobile-link[_ngcontent-%COMP%]{margin-left:auto;padding:9px 0}.mobile-link[_ngcontent-%COMP%]:hover{opacity:.75}.mobile-link[_ngcontent-%COMP%]:active{opacity:.5}.mobile-link.w--open[_ngcontent-%COMP%]{background-color:#0000}.burger-icon[_ngcontent-%COMP%]{width:80px}.empty-tap-area[_ngcontent-%COMP%]{height:100vh;display:block;position:absolute;inset:0%}.section.is--welcome[_ngcontent-%COMP%]{background-image:linear-gradient(#f3f3f3b0,#f3f3f3b0),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b3c56515595b50015a3c80_white-pattern.png),url(https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282e0556ad28c933f5b88_texture.jpg);background-position:0 0,0 0,0 0;background-repeat:repeat,repeat,repeat;background-size:auto,auto,auto}.section.is-hero[_ngcontent-%COMP%]{height:410px}.h1-home-hero-small[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:75px}.container.is--gallery[_ngcontent-%COMP%]{max-width:none}.title.less--padding[_ngcontent-%COMP%]{margin-bottom:5px}.card-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;margin-bottom:-23px}.card.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}.number-icon[_ngcontent-%COMP%]{margin-bottom:15px}.p-light-big[_ngcontent-%COMP%]{font-size:2.2em}.column.is--padding[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}.column.is--associates[_ngcontent-%COMP%]{width:100%;margin-top:35px;padding-left:0;padding-right:0}.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}.black-label[_ngcontent-%COMP%]{margin-top:-73px;margin-left:-50px;margin-right:0;padding-left:50px}.card-image-wrap[_ngcontent-%COMP%]{height:400px}.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}.p-smaller[_ngcontent-%COMP%]{max-width:none}.footer-link[_ngcontent-%COMP%]{z-index:1;display:flex}.logo-link-footer[_ngcontent-%COMP%]:hover{opacity:.75}.logo-link-footer[_ngcontent-%COMP%]:active{opacity:.5}.logo-link-footer.w--current[_ngcontent-%COMP%]{margin-left:0;position:static}.h1-hero.outline-text[_ngcontent-%COMP%]{font-size:75px}.p-hero[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{text-align:left}.card-apply[_ngcontent-%COMP%]{width:100%;padding-top:50px;padding-bottom:75px}.form-heading[_ngcontent-%COMP%]{font-size:2.25em}.checkbox-text[_ngcontent-%COMP%]{text-align:left}.button-off[_ngcontent-%COMP%], .button-on[_ngcontent-%COMP%]{text-align:center;align-self:stretch}.grey-line[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:50px}.associates-wrap[_ngcontent-%COMP%]{grid-column-gap:0px}.associates-title[_ngcontent-%COMP%]{font-size:1.7em}.text-left[_ngcontent-%COMP%]{padding-right:86px}.job-title[_ngcontent-%COMP%]{line-height:1.3}.job-title-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.full-part-time[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:8px;margin-left:0}.grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-contact[_ngcontent-%COMP%]{width:100%;min-height:auto;text-align:center;padding-top:56px;padding-bottom:56px}.contact-link.is--email[_ngcontent-%COMP%]{margin-top:0}.wg-element-wrapper.sw6[_ngcontent-%COMP%]{position:absolute;inset:16px 130px auto auto}}@media screen and (max-width: 767px){h2[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2.5em}h3[_ngcontent-%COMP%]{letter-spacing:3px;font-size:2em}p[_ngcontent-%COMP%]{font-size:1.2em}.logo-link.w--current[_ngcontent-%COMP%]{padding-left:0}.nav-menu[_ngcontent-%COMP%]{min-height:100vh}.section.is-hero[_ngcontent-%COMP%]{height:340px}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:15px;font-size:16px}.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}.container.is--pre-footer[_ngcontent-%COMP%]{padding-top:96px;padding-bottom:96px}.container.is--hero[_ngcontent-%COMP%]{margin-top:53px}.label[_ngcontent-%COMP%]{font-size:1.2em}.button[_ngcontent-%COMP%]{justify-content:center;display:flex}.card-details[_ngcontent-%COMP%]{padding-bottom:40px;padding-left:40px;padding-right:40px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}.black-label[_ngcontent-%COMP%]{margin-top:-36px;margin-left:-35px;margin-right:-35px;padding:20px 35px}.label-text[_ngcontent-%COMP%]{font-size:1.7em}.card-image-wrap[_ngcontent-%COMP%]{height:55vw}.card-text[_ngcontent-%COMP%]{align-items:stretch}.card-text.is--centred[_ngcontent-%COMP%]{align-items:flex-start}.card-text.is--featured[_ngcontent-%COMP%]{align-items:stretch}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:6px;font-size:55px}.p-hero[_ngcontent-%COMP%]{max-width:380px;font-size:16px}.subtitile[_ngcontent-%COMP%]{font-size:1.4em}.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.lightbox-link[_ngcontent-%COMP%]{height:42vw}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.card-apply[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}.form-heading[_ngcontent-%COMP%]{font-size:1.9em}.button-on[_ngcontent-%COMP%]{justify-content:center}.text-left[_ngcontent-%COMP%]{padding-right:40px}.open-role-list[_ngcontent-%COMP%]{grid-row-gap:30px}.card-contact[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){h2[_ngcontent-%COMP%]{letter-spacing:2px;font-size:2em;line-height:1.1}.nav-container[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.logo-link[_ngcontent-%COMP%]{margin-left:20px}.logotype[_ngcontent-%COMP%]{width:140px}.burger-icon[_ngcontent-%COMP%]{width:60px;margin-left:20px}.section[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.section.is-hero-home[_ngcontent-%COMP%]{height:87vh}.h1-home-hero-small[_ngcontent-%COMP%]{letter-spacing:2vw;font-size:5vw}.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}.container.is--center-text[_ngcontent-%COMP%]{padding-bottom:56px}.label[_ngcontent-%COMP%]{font-size:1.2em}.title[_ngcontent-%COMP%]{font-size:1.7em}.button[_ngcontent-%COMP%]{text-align:center}.card-grid[_ngcontent-%COMP%]{margin-bottom:0}.card-details[_ngcontent-%COMP%]{padding-bottom:30px;padding-left:25px;padding-right:25px}.number-icon[_ngcontent-%COMP%]{width:70px;height:70px;margin-top:-31px;margin-bottom:12px}.number[_ngcontent-%COMP%]{font-size:25px}.heading-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.p-light-big[_ngcontent-%COMP%]{font-size:1.7em;font-weight:400}.column.is--padding[_ngcontent-%COMP%]{padding:25px}.column.is--image[_ngcontent-%COMP%]{height:300px}.column.is--about[_ngcontent-%COMP%]{padding:25px}.black-label[_ngcontent-%COMP%]{margin-left:-25px;margin-right:-25px;padding:15px 25px}.label-text[_ngcontent-%COMP%]{letter-spacing:3px;font-size:1.4em;line-height:1.3}.card-image-wrap[_ngcontent-%COMP%]{height:62vw}.card-shadow[_ngcontent-%COMP%]{margin-bottom:20px}.p-pre-footer[_ngcontent-%COMP%]{font-size:1.2em}.footer-links[_ngcontent-%COMP%], .copyright-wrap[_ngcontent-%COMP%]{flex-direction:column}.separator[_ngcontent-%COMP%]{display:none}.discover-rotate[_ngcontent-%COMP%]{margin-bottom:49px}.discover-text[_ngcontent-%COMP%]{font-size:.8em}.h1-hero.outline-text[_ngcontent-%COMP%]{letter-spacing:1vw;font-size:11vw}.p-hero[_ngcontent-%COMP%]{font-size:14px}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:20px;grid-row-gap:20px}.card-simple[_ngcontent-%COMP%]{padding:38px 20px 40px}.card-title[_ngcontent-%COMP%]{font-size:1.7em}.heading[_ngcontent-%COMP%]{letter-spacing:2px;font-size:1.8em}.collection-list-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.lightbox-link[_ngcontent-%COMP%]{height:80vw}.p-bold[_ngcontent-%COMP%]{font-size:1.7em}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:30px}.card-apply[_ngcontent-%COMP%]{padding:38px 20px 40px}.form-heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:1.7em}.checkbox-text[_ngcontent-%COMP%]{margin-left:20px}.button-on[_ngcontent-%COMP%]{text-align:center}}#w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-375681b7[_ngcontent-%COMP%], #w-node-_4dbb65f5-dbff-7360-6381-24730cf4d5e5-375681b7[_ngcontent-%COMP%], #w-node-_49f4a6c9-ea6b-6d9e-523c-9fcfe16a6b0c-375681b7[_ngcontent-%COMP%], #w-node-d157a120-74ba-936e-35b8-7f77ccc5ada3-375681b7[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-375681b7[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-375681b7[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-375681b7[_ngcontent-%COMP%], #w-node-_652e63de-0578-0502-7cb6-9dc3f8c6dda0-70b41220[_ngcontent-%COMP%], #w-node-_4799f135-f02b-baec-6394-cbed8bd04625-70b41220[_ngcontent-%COMP%], #w-node-aea96940-1726-7840-2736-2113b9e84d51-70b41220[_ngcontent-%COMP%], #w-node-bd6c37c0-3554-0412-b95d-142eabbbef46-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}@media screen and (max-width: 991px){#w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-375681b7[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-375681b7[_ngcontent-%COMP%], #w-node-c7e251ef-2a91-4f26-d984-2a80e0e08c04-70b41220[_ngcontent-%COMP%], #w-node-eb0b92aa-5aab-c734-5409-162cfe0a52fa-70b41220[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}}',`@media screen and (min-width: 992px) {
                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .black-label[_ngcontent-%COMP%] {
                        margin-right: -134px;
                        margin-left: -14px;
                        padding-right: 0px;
                        padding-left: 14px;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card.is--double[_ngcontent-%COMP%] {
                        -webkit-box-orient: horizontal;
                        -webkit-box-direction: reverse;
                        -webkit-flex-direction: row-reverse;
                        -ms-flex-direction: row-reverse;
                        flex-direction: row-reverse;
                    }

                    .card-item[_ngcontent-%COMP%]:nth-child(even)   .card-text[_ngcontent-%COMP%] {
                        -webkit-box-align: stretch;
                        -webkit-align-items: stretch;
                        -ms-flex-align: stretch;
                        align-items: stretch;
                    }
                }`]});let x=g;return x})();function iI(x,g){if(x&1&&(re(0,"p")(1,"span"),_e(2),se(),_e(3),se()),x&2){let P=g.$implicit;ln(2),Zo(" ",P.title,": "),ln(),Zo(" ",P.description,"")}}function oI(x,g){if(x&1&&(re(0,"div",2)(1,"div",3),_t(2,"img",4),se(),re(3,"div",5)(4,"div",6)(5,"h3",7),_e(6),se(),re(7,"div",8),Nr(8,iI,4,2,"p",null,Jp),se(),re(10,"a",9),_e(11," cotizar "),se()()()()),x&2){let P=ur();ln(2),_i("src",P.image,Ys),ln(4),Zo(" ",P.title," "),ln(2),Vr(P.descriptions)}}function rI(x,g){if(x&1&&(re(0,"p")(1,"span"),_e(2),se(),_e(3),se()),x&2){let P=g.$implicit;ln(2),Zo(" ",P.title,": "),ln(),Zo(" ",P.description,"")}}function aI(x,g){if(x&1&&(re(0,"div",10)(1,"div",3),_t(2,"img",4),se(),re(3,"div",5)(4,"div",6)(5,"h3",7),_e(6),se(),re(7,"div",8),Nr(8,rI,4,2,"p",null,Jp),se(),re(10,"a",9),_e(11," cotizar "),se()()()()),x&2){let P=ur();ln(2),_i("src",P.image,Ys),ln(4),Zo(" ",P.title," "),ln(2),Vr(P.descriptions)}}var v2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-card-item"]],inputs:{even:"even",title:"title",image:"image",descriptions:"descriptions"},standalone:!0,features:[pn],decls:4,vars:1,consts:[[1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"carda","is--double","doublev"],[1,"column","is--image"],[1,"card-image",3,"src"],[1,"column","is--about"],[1,"card-text"],[1,"heading"],[1,"about-wrap"],["routerLink","/contact",1,"button","w-button"],[1,"carda","is--double"]],template:function(M,r){M&1&&(re(0,"div",0)(1,"div",1),Pr(2,oI,12,2,"div",2)(3,aI,12,2),se()()),M&2&&(ln(2),gh(2,r.even?3:2))},dependencies:[yi,nl,tl],styles:['@media screen and (min-width: 992px){.doublev[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}@media screen and (max-width: 991px){.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}}.carda[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021;font-family:tdr}.carda[_ngcontent-%COMP%], .column.is--image.rounded[_ngcontent-%COMP%]{-webkit-mask-image:-webkit-radial-gradient(white,black)}.carda.is--double[_ngcontent-%COMP%]{width:100%;display:flex}@media screen and (max-width: 991px){.carda.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.column.is--image[_ngcontent-%COMP%]{background-color:#2c2c2c;overflow:hidden}@media screen and (max-width: 991px){.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}}@media screen and (max-width: 479px){.column.is--image[_ngcontent-%COMP%]{height:300px}}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:75px;display:flex}@media screen and (max-width: 991px){.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}@media screen and (max-width: 767px){.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}}@media screen and (max-width: 479px){.column.is--about[_ngcontent-%COMP%]{padding:25px}}h3[_ngcontent-%COMP%]{letter-spacing:1px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.5em;font-weight:700;line-height:1}span[_ngcontent-%COMP%]{color:#000;font-size:1.4em}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}@media screen and (max-width: 767px){.button[_ngcontent-%COMP%]{justify-content:center;display:flex}}@media screen and (max-width: 479px){.button[_ngcontent-%COMP%]{text-align:center}}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 479px){.heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:2.2em}}.par[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}'],changeDetection:0});let x=g;return x})();function sI(x,g){if(x&1&&_t(0,"app-card-item",4),x&2){let P=g.$implicit,v=g.$index;_i("even",v%2===0)("title",P.title)("descriptions",P.descriptions)("image",P.image)}}var b2=(()=>{let g=class g{constructor(){this.services=[{title:"ESTUCOS",descriptions:[{title:"Tradicional",description:"T\xE9cnica cl\xE1sica que utiliza cal, arena y agua para crear una superficie duradera y elegante."},{title:"Pl\xE1sticos",description:"Alternativa moderna al estuco tradicional, utiliza resinas sint\xE9ticas para una aplicaci\xF3n f\xE1cil y resistencia al agua."},{title:" Venecianos",description:"T\xE9cnica decorativa de origen veneciano, emplea capas delgadas de yeso para un acabado brillante y sofisticado."}],image:"./assets/tdr/services/12.JPG"},{title:"PINTURA",descriptions:[{title:"Vinilo",description:"Tipo de pintura vers\xE1til y resistente, ideal para aplicaciones en interiores y exteriores. Ofrece una amplia gama de colores y un acabado duradero."},{title:"Epoxica",description:"Pintura de alta resistencia que utiliza resinas epoxi para crear una superficie dura y duradera. Es ideal para suelos y superficies expuestas a condiciones severas."},{title:"Trafijo",description:"Pintura especializada dise\xF1ada para se\xF1alizaci\xF3n vial y marcado de carreteras. Proporciona una alta visibilidad y resistencia a la abrasi\xF3n, garantizando la seguridad vial."},{title:"Se\xF1alizaci\xF3n",description:"Pintura utilizada para se\xF1alizaci\xF3n en interiores y exteriores, como marcas en pisos, paredes y equipos. Ofrece una excelente adherencia y visibilidad para comunicar mensajes importantes."}],image:"./assets/tdr/services/1.jpg"},{title:"PAREDES",descriptions:[{title:"Panel de Yeso",description:"Pintura dise\xF1ada espec\xEDficamente para aplicarse en paredes de panel de yeso o drywall. Proporciona una cobertura uniforme y un acabado suave en superficies interiores."},{title:"Fibrocemento",description:"Pintura especialmente formulada para paredes de fibrocemento, un material duradero y resistente al agua. Ofrece una protecci\xF3n efectiva contra la humedad y los elementos exteriores."}],image:"./assets/tdr/services/5.jpg"},{title:"SISTEMA DE REVOQUE",descriptions:[{title:"Seco",description:"Pintura dise\xF1ada para aplicarse en sistemas de revoque en seco, como el sistema de construcci\xF3n en seco o drywall. Proporciona una capa protectora y decorativa sobre la superficie del revoque."},{title:"Estampillado",description:"Pintura especialmente formulada para aplicarse en sistemas de revoque estampillado. Ofrece una amplia variedad de colores y acabados para crear efectos decorativos \xFAnicos en las paredes."}],image:"./assets/tdr/services/8.jpg"},{title:"CIELO RASO",descriptions:[{title:"Panel de Yeso",description:"Pintura especialmente dise\xF1ada para aplicarse en cielos rasos de panel de yeso o drywall. Proporciona una cobertura uniforme y un acabado suave en superficies interiores."},{title:"Fibrocemento",description:"Pintura formulada para cielos rasos de fibrocemento, un material resistente y duradero. Ofrece protecci\xF3n contra la humedad y los elementos exteriores, manteniendo una apariencia est\xE9tica."},{title:"PVC",description:"Pintura adecuada para cielos rasos de PVC, un material ligero y f\xE1cil de limpiar. Proporciona una capa protectora y decorativa que resalta la apariencia del cielo raso y ofrece resistencia a la humedad."}],image:"./assets/tdr/services/2.jpg"},{title:"MUROS",descriptions:[{title:"Panel de Yeso",description:"Pintura dise\xF1ada espec\xEDficamente para aplicarse en muros de panel de yeso o drywall. Proporciona una cobertura uniforme y un acabado suave en superficies interiores, ideal para proyectos de construcci\xF3n en interiores."},{title:"Fibrocemento",description:"Pintura formulada para muros de fibrocemento, un material resistente y duradero. Ofrece protecci\xF3n contra la humedad y los elementos exteriores, manteniendo una apariencia est\xE9tica en aplicaciones tanto interiores como exteriores."}],image:"./assets/tdr/services/4.jpg"},{title:"ENTREPISOS",descriptions:[{title:"Fibrocemento",description:"Pintura especialmente formulada para aplicarse en entrepisos de fibrocemento. Este tipo de pintura proporciona una capa protectora y decorativa para los entrepisos, ofreciendo resistencia a la humedad y durabilidad para mantener un aspecto est\xE9tico en el tiempo."}],image:"./assets/tdr/services/9.JPG"},{title:"AISLAMIENTO",descriptions:[{title:"Aislamiento Ac\xFAstico",description:"El aislamiento ac\xFAstico es un material dise\xF1ado para reducir la transmisi\xF3n de sonido entre espacios. Puede ser utilizado en paredes, techos y pisos para minimizar el ruido y mejorar la privacidad en interiores. Este tipo de aislamiento absorbe, bloquea o refleja el sonido, contribuyendo a crear ambientes m\xE1s tranquilos y confortables."},{title:"Aislamiento T\xE9rmico",description:"El aislamiento t\xE9rmico es un material que ayuda a controlar la transferencia de calor entre el interior y el exterior de un edificio. Se utiliza para mantener una temperatura confortable en el interior, reduciendo la p\xE9rdida de calor en invierno y el ingreso de calor en verano. Este tipo de aislamiento puede instalarse en paredes, techos, pisos y ventanas para mejorar la eficiencia energ\xE9tica y reducir los costos de calefacci\xF3n y refrigeraci\xF3n."}],image:"./assets/tdr/services/7.jpg"},{title:"TEXTURAS",descriptions:[{title:"Graniplast",description:"Graniplast es un revestimiento texturizado utilizado para crear efectos decorativos en superficies interiores y exteriores. Est\xE1 compuesto por part\xEDculas de m\xE1rmol y cuarzo que proporcionan una textura \xFAnica y resistente. Graniplast se aplica con una llana o esp\xE1tula y luego se puede texturizar con diferentes t\xE9cnicas para lograr el efecto deseado, como el estucado, el lijado o el cepillado. Este material es duradero, resistente a la intemperie y f\xE1cil de mantener, lo que lo hace ideal para proyectos de decoraci\xF3n y renovaci\xF3n."}],image:"./assets/tdr/services/3.jpg"},{title:"TRABAJOS EN ALTURAS",descriptions:[{title:"\xBFQue implica?",description:"cualquier actividad realizada a una altura considerable sobre el suelo, como en andamios, plataformas elevadas, escaleras, techos o estructuras elevadas. Este tipo de trabajo puede incluir tareas de construcci\xF3n, mantenimiento, reparaci\xF3n o instalaci\xF3n que requieren acceso a \xE1reas elevadas. Es crucial seguir estrictas medidas de seguridad, como el uso de arneses de seguridad, barandillas, redes de protecci\xF3n y capacitaci\xF3n adecuada para prevenir ca\xEDdas y minimizar los riesgos para la salud y la seguridad de los trabajadores."}],image:"./assets/tdr/services/6.jpg"}]}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-service-page"]],standalone:!0,features:[pn],decls:6,vars:0,consts:[[1,"section",2,"padding-top","90px"],[1,"container","w-container"],[1,"w-dyn-list"],[1,"w-dyn-items"],[3,"even","title","descriptions","image"]],template:function(M,r){M&1&&(re(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Nr(4,sI,1,4,"app-card-item",4,Fl),se()()()()),M&2&&(ln(4),Vr(r.services))},dependencies:[yi,v2],styles:['.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden;background-image:url(/assets/backgrounds/b2.jpg)}@media screen and (max-width: 479px){.section[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 767px){.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}}@media screen and (max-width: 479px){.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}'],changeDetection:0});let x=g;return x})();var Xm=B0(py());var lI=["map"],C2=(()=>{let g=class g{constructor(){this.lngLat=[-77.2925053806278,1.203764103582767]}ngAfterViewInit(){if(!this.divMap?.nativeElement)throw"Map Div not found";if(!this.lngLat)throw"LngLat can't be null";if(this.map=new Xm.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/outdoors-v12",center:this.lngLat,zoom:17.5,interactive:!1}),this.marker=new Xm.Marker().setLngLat(this.lngLat).addTo(this.map),this.marker&&this.marker.getElement()){let v=this.marker.getElement();v.style.position="absolute",v.style.top="10%",v.style.left="1%",v.style.transform="translate(-50%, -50%)"}}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-map-component"]],viewQuery:function(M,r){if(M&1&&Qs(lI,5),M&2){let j;ra(j=aa())&&(r.divMap=j.first)}},standalone:!0,features:[pn],decls:2,vars:0,consts:[["map",""]],template:function(M,r){M&1&&_t(0,"div",null,0)},dependencies:[yi],styles:["div[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0});let x=g;return x})();var Fa=class{constructor(g=0,P="Network Error"){this.status=g,this.text=P}};var M2=()=>{if(!(typeof localStorage>"u"))return{get:x=>Promise.resolve(localStorage.getItem(x)),set:(x,g)=>Promise.resolve(localStorage.setItem(x,g)),remove:x=>Promise.resolve(localStorage.removeItem(x))}};var _o={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:M2()};var Dh=x=>x?typeof x=="string"?{publicKey:x}:x.toString()==="[object Object]"?x:{}:{};var A2=(x,g="https://api.emailjs.com")=>{if(!x)return;let P=Dh(x);_o.publicKey=P.publicKey,_o.blockHeadless=P.blockHeadless,_o.storageProvider=P.storageProvider,_o.blockList=P.blockList,_o.limitRate=P.limitRate,_o.origin=P.origin||g};var Qm=(v,M,...r)=>Rl(void 0,[v,M,...r],function*(x,g,P={}){let j=yield fetch(_o.origin+x,{method:"POST",headers:P,body:g}),ce=yield j.text(),we=new Fa(j.status,ce);if(j.ok)return we;throw we});var Km=(x,g,P)=>{if(!x||typeof x!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!g||typeof g!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!P||typeof P!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"};var P2=x=>{if(x&&x.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"};var Jm=x=>x.webdriver||!x.languages||x.languages.length===0;var e_=()=>new Fa(451,"Unavailable For Headless Browser");var O2=(x,g)=>{if(!Array.isArray(x))throw"The BlockList list has to be an array";if(typeof g!="string")throw"The BlockList watchVariable has to be a string"};var cI=x=>!x.list?.length||!x.watchVariable,uI=(x,g)=>x instanceof FormData?x.get(g):x[g],t_=(x,g)=>{if(cI(x))return!1;O2(x.list,x.watchVariable);let P=uI(g,x.watchVariable);return typeof P!="string"?!1:x.list.includes(P)};var n_=()=>new Fa(403,"Forbidden");var T2=(x,g)=>{if(typeof x!="number"||x<0)throw"The LimitRate throttle has to be a positive number";if(g&&typeof g!="string")throw"The LimitRate ID has to be a string"};var dI=(x,g,P)=>Rl(void 0,null,function*(){let v=Number((yield P.get(x))||0);return g-Date.now()+v}),i_=(x,g,P)=>Rl(void 0,null,function*(){if(!g.throttle||!P)return!1;T2(g.throttle,g.id);let v=g.id||x;return(yield dI(v,g.throttle,P))>0?!0:(yield P.set(v,Date.now().toString()),!1)});var o_=()=>new Fa(429,"Too Many Requests");var S2=(x,g,P,v)=>Rl(void 0,null,function*(){let M=Dh(v),r=M.publicKey||_o.publicKey,j=M.blockHeadless||_o.blockHeadless,ce=_o.storageProvider||M.storageProvider,we=Et(Et({},_o.blockList),M.blockList),Oe=Et(Et({},_o.limitRate),M.limitRate);return j&&Jm(navigator)?Promise.reject(e_()):(Km(r,x,g),P2(P),P&&t_(we,P)?Promise.reject(n_()):(yield i_(location.pathname,Oe,ce))?Promise.reject(o_()):Qm("/api/v1.0/email/send",JSON.stringify({lib_version:"4.3.3",user_id:r,service_id:x,template_id:g,template_params:P}),{"Content-type":"application/json"}))});var E2=x=>{if(!x||x.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"};var hI=x=>typeof x=="string"?document.querySelector(x):x,I2=(x,g,P,v)=>Rl(void 0,null,function*(){let M=Dh(v),r=M.publicKey||_o.publicKey,j=M.blockHeadless||_o.blockHeadless,ce=_o.storageProvider||M.storageProvider,we=Et(Et({},_o.blockList),M.blockList),Oe=Et(Et({},_o.limitRate),M.limitRate);if(j&&Jm(navigator))return Promise.reject(e_());let Qe=hI(P);Km(r,x,g),E2(Qe);let zt=new FormData(Qe);return t_(we,zt)?Promise.reject(n_()):(yield i_(location.pathname,Oe,ce))?Promise.reject(o_()):(zt.append("lib_version","4.3.3"),zt.append("service_id",x),zt.append("template_id",g),zt.append("user_id",r),Qm("/api/v1.0/email/send-form",zt))});var D2={init:A2,send:S2,sendForm:I2,EmailJSResponseStatus:Fa};var R2=B0(k2());function pI(x,g){if(x&1){let P=Xs();re(0,"div",17)(1,"input",24),Xi("click",function(){hs(P);let M=ur();return ps(M.sendEmail())}),se()()}}function fI(x,g){x&1&&(re(0,"div",25)(1,"div",26),_e(2," Enviar "),se()())}var z2=(()=>{let g=class g{constructor(){this.email="carlosroby2013@hotmail.com",this.fb=Wt(YM),this.myForm=this.fb.group({name:["",sd.required],lastName:["",sd.required],info:["",sd.required],message:["",sd.required]})}sendEmail(){R2.default.fire({position:"center",icon:"success",title:"Mensaje enviado con exito",showConfirmButton:!1,timer:1200}),D2.send("service_29z7wxj","template_n1pw1s8",{from_name:this.myForm.value.name,from_lastName:this.myForm.value.lastName,message:this.myForm.value.message,info:this.myForm.value.info},{publicKey:"oEjFwyPAiEXF4g5lm"}).then(v=>{console.log("SUCCESS!",v.status,v.text)},v=>{console.log("FAILED...",v)}),this.myForm.setValue({name:"",lastName:"",info:"",message:""})}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-card-item"]],standalone:!0,features:[pn],decls:46,vars:3,consts:[[1,"card-item","w-dyn-item"],[1,"card-shadow"],[1,"carda","is--double"],[1,"column","is--image"],[1,"card-container"],[1,"collection-list-2"],[1,"collection-item"],[1,"card-simple"],["src","	https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282de0df5e9f7bf224714_telephone-icon.svg",1,"icon"],[1,"contact-label"],[1,"contact-link"],["src","https://uploads-ssl.webflow.com/60b280b08e7b7a3f70e3e16d/60b282def05f03e30aeae617_email-icon.svg",1,"icon"],[1,"column","is--about"],[1,"form-h-wrap"],[1,"form-heading"],[1,"label"],[1,"form-apply-grid",3,"formGroup"],[1,"field-wrap"],[1,"field-label"],["formControlName","name",1,"field-box","w-input"],["formControlName","lastName",1,"field-box","w-input"],[1,"field-wrap","em"],["formControlName","info",1,"field-box","w-input"],["formControlName","message",1,"text-area","w-input"],["type","submit","value","Enviar",1,"button-on","w-button",3,"click"],[1,"button-off"],[1,"button-off-text"]],template:function(M,r){M&1&&(re(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),_t(8,"img",8),re(9,"div",9),_e(10," Telefono "),se(),re(11,"a",10),_e(12," 316 539 3147 "),se()()(),re(13,"div",6)(14,"div",7),_t(15,"img",11),re(16,"div",9),_e(17," Email "),se(),re(18,"a",10),_e(19),se()()()()()(),re(20,"div",12)(21,"div",13)(22,"h2",14),_e(23,"ENVIAME UN MAIL"),se(),re(24,"div",15),_e(25,"Te respondo lo mas rapido posible!"),se()(),re(26,"div")(27,"form",16)(28,"div",17)(29,"label",18),_e(30,"Nombre"),se(),_t(31,"input",19),se(),re(32,"div",17)(33,"label",18),_e(34,"Apellido"),se(),_t(35,"input",20),se(),re(36,"div",21)(37,"label",18),_e(38,"Email o numero de telefono "),se(),_t(39,"input",22),se(),re(40,"div",21)(41,"label",18),_e(42,"Mensaje"),se(),_t(43,"input",23),se(),Pr(44,pI,2,0,"div",17)(45,fI,3,0),se()()()()()()),M&2&&(ln(19),Zo(" ",r.email," "),ln(8),_i("formGroup",r.myForm),ln(17),gh(44,r.myForm.valid?44:45))},dependencies:[yi,XM,ZM,Gm,jM,UM,ry,ay],styles:['@media screen and (min-width: 992px){.doublev[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}}.card-shadow[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;margin-bottom:40px;text-decoration:none;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021}@media screen and (max-width: 991px){.card-shadow[_ngcontent-%COMP%]{margin-bottom:35px}}.map[_ngcontent-%COMP%]{width:100%}.carda[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:25px 25px 76px 8px #00000021;font-family:tdr}.carda.isn--double[_ngcontent-%COMP%]{width:100%;display:flex;height:400px}.carda[_ngcontent-%COMP%], .column.is--image.rounded[_ngcontent-%COMP%]{-webkit-mask-image:-webkit-radial-gradient(white,black)}.carda.is--double[_ngcontent-%COMP%]{width:100%;display:flex}@media screen and (max-width: 991px){.carda.is--double[_ngcontent-%COMP%]{border-radius:0;flex-direction:column}}.column[_ngcontent-%COMP%]{width:50%;min-height:565px;position:relative}.card-container[_ngcontent-%COMP%]{width:100%}.column.is--image[_ngcontent-%COMP%]{background-color:#c8c8c8;overflow:hidden;grid-row-gap:30px;background:linear-gradient(#000000b3,#000000b3),url(/assets/backgrounds/b1.jpg);display:flex;justify-content:center;align-items:center}@media screen and (max-width: 991px){.column.is--image[_ngcontent-%COMP%]{width:100%;height:400px;min-height:auto}}@media screen and (max-width: 479px){.column.is--image[_ngcontent-%COMP%]{height:300px}}.card-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.column.is--about[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:flex-start;padding:50px;display:flex}.form-h-wrap[_ngcontent-%COMP%]{margin-bottom:40px}.form-heading[_ngcontent-%COMP%]{letter-spacing:2px;margin-bottom:10px}.label[_ngcontent-%COMP%]{color:#646464;margin-bottom:10px;font-size:1.5em;line-height:1.5}.form-apply-grid[_ngcontent-%COMP%]{grid-column-gap:16px;grid-row-gap:16px;grid-template-rows:auto auto;grid-template-columns:1fr 1fr;grid-auto-columns:1fr;display:grid}.field-wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;margin-bottom:5px;display:flex;font-size:1.4em}.field-label[_ngcontent-%COMP%]{margin-bottom:10px}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}.w-input[_ngcontent-%COMP%], .w-select[_ngcontent-%COMP%]{width:100%;height:38px;color:#333;vertical-align:middle;background-color:#fff;border:1px solid #ccc;margin-bottom:10px;padding:8px 12px;font-size:21px;line-height:1.42857;display:block}.field-box[_ngcontent-%COMP%]{width:100%;color:#505050}.em[_ngcontent-%COMP%]{grid-area:span 1 / span 2 / span 1 / span 2}.text-area[_ngcontent-%COMP%]{width:100%;min-height:140px}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;display:none}textarea.w-input[_ngcontent-%COMP%], textarea.w-select[_ngcontent-%COMP%]{height:auto}@media screen and (max-width: 991px){.column.is--about[_ngcontent-%COMP%]{width:100%;min-height:auto;padding:50px}}@media screen and (max-width: 767px){.column.is--padding[_ngcontent-%COMP%], .column.is--about[_ngcontent-%COMP%]{padding:35px}}@media screen and (max-width: 479px){.column.is--about[_ngcontent-%COMP%]{padding:25px}}h3[_ngcontent-%COMP%]{letter-spacing:1px;text-transform:uppercase;margin-top:0;margin-bottom:0;font-size:2.5em;font-weight:700;line-height:1}span[_ngcontent-%COMP%]{color:#000;font-size:1.4em}.about-wrap[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:45px}p[_ngcontent-%COMP%]{color:#505050;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}.button[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.card-text[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;display:flex}@media screen and (max-width: 767px){.card-text[_ngcontent-%COMP%]{align-items:stretch}}@media screen and (max-width: 479px){.heading[_ngcontent-%COMP%]{letter-spacing:1px;font-size:2.2em}}.par[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.collection-item[_ngcontent-%COMP%]{width:75%}.card-simple[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-radius:8px;padding:34px 63px;text-decoration:none;position:relative;overflow:hidden;box-shadow:25px 25px 76px 8px #00000021;display:flex;flex-direction:column;align-items:center}.contact-link[_ngcontent-%COMP%]{color:#000;margin-bottom:10px;font-size:1.8em;font-weight:600;text-decoration:none;display:block}.contact-label[_ngcontent-%COMP%]{color:#969696;letter-spacing:2px;text-transform:uppercase;margin-top:30px;margin-bottom:20px;font-weight:600;font-size:1.8em}@media screen and (max-width: 991px){.card-simple[_ngcontent-%COMP%]{width:100%;text-align:center;padding-top:50px;padding-bottom:75px}}@media screen and (max-width: 767px){.card-simple[_ngcontent-%COMP%]{padding-left:45px;padding-right:45px}}@media screen and (max-width: 479px){.card-simple[_ngcontent-%COMP%]{padding:0 21px 15px}.contact-label[_ngcontent-%COMP%]{margin-bottom:11px}}.black-line[_ngcontent-%COMP%]{height:6px;background-color:#000;position:absolute;inset:0% 0% auto}.w-button[_ngcontent-%COMP%]{color:#fff;line-height:inherit;cursor:pointer;background-color:#3898ec;border:0;border-radius:0;padding:9px 15px;text-decoration:none;display:inline-block}.button-on[_ngcontent-%COMP%]{letter-spacing:2px;text-transform:uppercase;background-color:#000;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700;transition:all .2s;width:100%}.button-off[_ngcontent-%COMP%]{color:#fff;letter-spacing:2px;text-transform:uppercase;cursor:not-allowed;background-color:#e6e6e6;border-radius:4px;padding:23px 33px;font-size:1em;font-weight:700}.button-off-text[_ngcontent-%COMP%]{cursor:not-allowed}@media screen and (max-width: 767px){.button[_ngcontent-%COMP%]{justify-content:center;display:flex}}@media screen and (max-width: 479px){.button[_ngcontent-%COMP%]{text-align:center}}.card-title[_ngcontent-%COMP%]{letter-spacing:0;text-transform:none;margin-top:30px;margin-bottom:20px;font-size:1.83333em;font-weight:600;line-height:1.4}@media screen and (max-width: 479px){.card-title[_ngcontent-%COMP%]{font-size:1.7em}}p[_ngcontent-%COMP%]{color:#000;letter-spacing:-.2px;margin-bottom:0;font-size:1.33333em;line-height:1.5}@media screen and (max-width: 767px){p[_ngcontent-%COMP%]{font-size:1.2em}}.p-card[_ngcontent-%COMP%]{font-size:1.2em}@media screen and (max-width: 991px){.p-card[_ngcontent-%COMP%]{max-width:420px;margin-left:auto;margin-right:auto}}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.heading-wrap.is--centred[_ngcontent-%COMP%]{text-align:center;color:#fff}h2[_ngcontent-%COMP%]{font-size:2.6em;color:#000;letter-spacing:2px}img[_ngcontent-%COMP%]{max-width:100%;vertical-align:middle;display:inline-block}.icon[_ngcontent-%COMP%]{width:96px}.collection-list-2[_ngcontent-%COMP%]{grid-column-gap:30px;grid-row-gap:30px;display:flex;padding-top:30px;padding-bottom:30px;flex-direction:column;align-items:center}@media screen and (max-width: 991px){.collection-list-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media screen and (max-width: 479px){.collection-list-2[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:stretch}.collection-item[_ngcontent-%COMP%]{width:39%}.contact-link[_ngcontent-%COMP%]{font-size:1.4em;word-wrap:break-word;max-width:130%}}@media screen and (max-width: 767px){.collection-list-2[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:stretch}.collection-item[_ngcontent-%COMP%]{width:39%}.contact-link[_ngcontent-%COMP%]{font-size:1.4em}}'],changeDetection:0});let x=g;return x})();var B2=B0(py());B2.default.accessToken="pk.eyJ1IjoibG9wZXpyOCIsImEiOiJjbHRmMml3NDkwNXhwMmlwbGd6NGdycWdkIn0.7iS4r3AIPhwDW4ryrASayg";var F2=(()=>{let g=class g{};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-contact-page"]],standalone:!0,features:[pn],decls:9,vars:0,consts:[[1,"section",2,"padding-top","90px"],[1,"container","w-container"],[1,"w-dyn-list"],[1,"w-dyn-items"],[1,"map-container"],[1,"card-overlay"]],template:function(M,r){M&1&&(re(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),_t(4,"app-card-item"),se()(),re(5,"div",4),_t(6,"app-map-component"),re(7,"div",5),_e(8," Transversal 23 b 6 sur 14 - Cerca al cai de tamasagra (Pasto - Nari\xF1o) "),se()()()())},dependencies:[yi,z2,C2],styles:['.section[_ngcontent-%COMP%]{z-index:1;padding-left:30px;padding-right:30px;position:relative;overflow:hidden;background-image:url(/assets/backgrounds/b2.jpg)}@media screen and (max-width: 479px){.section[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}.w-container[_ngcontent-%COMP%]{max-width:940px;margin-left:auto;margin-right:auto}.map-container[_ngcontent-%COMP%]{width:100%;height:400px;position:relative}.card-overlay[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 4px #0000001a;font-family:tdr;font-size:1.3em}@media screen and (max-width: 991px){.w-container[_ngcontent-%COMP%]{max-width:728px}}.container[_ngcontent-%COMP%]{width:100%;max-width:1168px;padding-top:110px;padding-bottom:110px}@media screen and (max-width: 991px){.container[_ngcontent-%COMP%]{max-width:600px;padding-top:110px;padding-bottom:110px}}@media screen and (max-width: 767px){.container[_ngcontent-%COMP%]{padding-top:95px;padding-bottom:95px}}@media screen and (max-width: 479px){.container[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:80px}}.heading-wrap[_ngcontent-%COMP%]{margin-top:-30px;margin-bottom:40px}.w-container[_ngcontent-%COMP%]:after{clear:both}.w-container[_ngcontent-%COMP%]:before, .w-container[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}.w-embed[_ngcontent-%COMP%]:before, .w-embed[_ngcontent-%COMP%]:after{content:" ";grid-area:1 / 1 / 2 / 2;display:table}'],changeDetection:0});let x=g;return x})();var L2=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:p2},{path:"portafolio",component:f2},{path:"services",component:b2},{path:"portafolio01",component:g2},{path:"portafolio02",component:m2},{path:"portafolio03",component:_2},{path:"portafolio04",component:x2},{path:"contact",component:F2}];var N2={providers:[uM(L2,gM())]};var gI=["header"],V2=(()=>{let g=class g{constructor(){this.cssAnimated=J0("")}mouseOver(){this.cssAnimated.set("animate__animated animate__pulse"),this.header.nativeElement.addEventListener("animationend",()=>{console.log("paso"),this.cssAnimated.set("")})}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-tdr"]],viewQuery:function(M,r){if(M&1&&Qs(gI,5),M&2){let j;ra(j=aa())&&(r.header=j.first)}},standalone:!0,features:[pn],decls:10,vars:0,consts:[[1,"colored-text"]],template:function(M,r){M&1&&(re(0,"h1")(1,"span",0),_e(2,"T"),se(),_e(3,"ecno "),re(4,"span",0),_e(5,"D"),se(),_e(6,"ry "),re(7,"span",0),_e(8,"W"),se(),_e(9,"all "),se())},dependencies:[yi],styles:['@font-face{font-family:tdr;src:url("./media/tdr-XVZ5GGB6.otf") format("opentype")}h1[_ngcontent-%COMP%]{font-family:tdr;font-size:3em;cursor:pointer;padding-top:9px}h1[_ngcontent-%COMP%]:hover{0%{transform:translate(0)}15%{transform:translate(-25%) rotate(-5deg)}30%{transform:translate(20%) rotate(3deg)}45%{transform:translate(-15%) rotate(-3deg)}60%{transform:translate(10%) rotate(2deg)}75%{transform:translate(-5%) rotate(-1deg)}100%{transform:translate(0)}}.colored-text[_ngcontent-%COMP%]{color:red}.black[_ngcontent-%COMP%]{color:#000}.colored-text[_ngcontent-%COMP%]:first-letter{color:red}.title[_ngcontent-%COMP%]{transition:all .5s}.title[_ngcontent-%COMP%]:hover{-webkit-animation-name:_ngcontent-%COMP%_wobble;animation-name:_ngcontent-%COMP%_wobble}@-webkit-keyframes _ngcontent-%COMP%_wobble{0%{-webkit-transform:translateX(0%)}15%{-webkit-transform:translateX(-25%) rotate(-5deg)}30%{-webkit-transform:translateX(20%) rotate(3deg)}45%{-webkit-transform:translateX(-15%) rotate(-3deg)}60%{-webkit-transform:translateX(10%) rotate(2deg)}75%{-webkit-transform:translateX(-5%) rotate(-1deg)}to{-webkit-transform:translateX(0%)}}@keyframes _ngcontent-%COMP%_wobble{0%{transform:translate(0)}15%{transform:translate(-25%) rotate(-5deg)}30%{transform:translate(20%) rotate(3deg)}45%{transform:translate(-15%) rotate(-3deg)}60%{transform:translate(10%) rotate(2deg)}75%{transform:translate(-5%) rotate(-1deg)}to{transform:translate(0)}}'],changeDetection:0});let x=g;return x})();var j2=(()=>{let g=class g{constructor(){this.isMenuCollapsed=!0}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-navbarb"]],standalone:!0,features:[pn],decls:23,vars:1,consts:[[1,"navbar","navbar-expand-lg","mb-3"],[1,"container-fluid"],["type","button",1,"navbar-toggler",2,"color","white",3,"click"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"nav-menu","xd"],["routerLink","./home","routerLinkActive","select",1,"nav-link",3,"click"],["routerLink","./services","routerLinkActive","select",1,"nav-link",3,"click"],["routerLink","./portafolio","routerLinkActive","select",1,"nav-link",3,"click"],["routerLink","./contact","routerLinkActive","select",1,"nav-link",3,"click"],[1,"nav-social","is-mobile"],[1,"collection-list"],["href","https://wa.link/ilp1wv",1,"space","social-link","w-inline-block"],[1,"social-icon","pi","pi-whatsapp",2,"font-size","2rem"],["href","https://www.facebook.com/people/construciones-livianas-sistema-dry-wall-arte-final/100049820202777",1,"space","social-link","w-inline-block"],[1,"social-icon","pi","pi-facebook",2,"font-size","2rem"],["href","mailto:carlosroby2013@hotmail.com",1,"social-link","w-inline-block"],[1,"social-icon","pi","pi-envelope",2,"font-size","2rem"]],template:function(M,r){M&1&&(re(0,"nav",0)(1,"div",1),_t(2,"app-tdr"),re(3,"button",2),Xi("click",function(){return r.isMenuCollapsed=!r.isMenuCollapsed}),_e(4,"\u2630"),se(),re(5,"div",3)(6,"nav",4)(7,"a",5),Xi("click",function(){return r.isMenuCollapsed=!0}),_e(8,"Home"),se(),re(9,"a",6),Xi("click",function(){return r.isMenuCollapsed=!0}),_e(10,"Servicios"),se(),re(11,"a",7),Xi("click",function(){return r.isMenuCollapsed=!0}),_e(12,"Portafolio"),se(),re(13,"a",8),Xi("click",function(){return r.isMenuCollapsed=!0}),_e(14,"Contacto"),se(),re(15,"div",9)(16,"div",10)(17,"a",11),_t(18,"i",12),se(),re(19,"a",13),_t(20,"i",14),se(),re(21,"a",15),_t(22,"i",16),se()()()()()()()),M&2&&(ln(5),_i("ngbCollapse",r.isMenuCollapsed))},dependencies:[yi,V2,n2,e2,nl,tl,lM],styles:[".navbar[_ngcontent-%COMP%]{z-index:999;height:90px;color:#fff;position:fixed;inset:2% 0% auto;background:linear-gradient(#000000b3,#000000b3),url(/assets/backgrounds/b1.jpg)}.nav-container[_ngcontent-%COMP%]{width:100%;height:100%;max-width:none;justify-content:center;align-items:center;padding-left:30px;padding-right:30px;display:flex;position:relative}.logo-link[_ngcontent-%COMP%]{height:100%;align-items:center;margin-left:30px;padding-left:0;transition:opacity .2s;display:flex;position:absolute;inset:0% auto auto 0%}.nav-menu[_ngcontent-%COMP%]{width:100%;height:100%;max-width:690px;justify-content:space-between;align-items:center;margin-left:206px;margin-right:206px;display:flex}.w-nav-menu[_ngcontent-%COMP%]{float:right;position:relative}@media screen and (max-width: 991px){.nav-menu[_ngcontent-%COMP%]{height:auto;max-width:none;background-color:#000000f2;justify-content:center;margin-left:0;margin-right:0;padding-top:30px;display:flex}}@media screen and (max-width: 767px){.nav-menu[_ngcontent-%COMP%]{min-height:100vh}}.w-nav-overlay[_ngcontent-%COMP%]   [data-nav-menu-open][_ngcontent-%COMP%]{top:0}.nav-social[_ngcontent-%COMP%]{height:100%;align-items:center;margin-right:30px;display:flex;position:absolute;inset:0% 0% auto auto}.nav-link[_ngcontent-%COMP%]{height:100%;opacity:.4;color:#fff;letter-spacing:2px;text-transform:uppercase;justify-content:center;align-items:center;padding-left:0;padding-right:0;font-size:1.1em;font-weight:600;transition:opacity .2s;display:flex}.w-nav-brand[_ngcontent-%COMP%]{float:left;color:#333;text-decoration:none;position:relative}.nav-link.w--current[_ngcontent-%COMP%]{opacity:1;color:#fff}@media screen and (max-width: 991px){.nav-link[_ngcontent-%COMP%]{z-index:1;padding-top:30px;padding-bottom:30px;font-size:1.4em;display:flex}}@media screen and (max-width: 992px){.xd[_ngcontent-%COMP%]{text-align:center;min-width:200px;background:linear-gradient(#000000b3,#000000b3),url(/assets/backgrounds/b1.jpg);position:absolute;top:100%;left:0;right:0;overflow:visible;display:block!important}}@media screen and (max-width: 767px){.xd[_ngcontent-%COMP%]{min-height:100vh}}@media screen and (max-width: 991px){.nav-social.is-mobile[_ngcontent-%COMP%]{z-index:1;justify-content:center;margin-right:0;padding-top:60px;padding-bottom:60px;display:flex;position:relative}}a[_ngcontent-%COMP%]{font-family:tdr;background-color:#0000;cursor:pointer}i[_ngcontent-%COMP%]{color:#fff}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{outline:0}.nav-link[_ngcontent-%COMP%]:hover, .select[_ngcontent-%COMP%]{opacity:1}.collection-list[_ngcontent-%COMP%]{display:flex}.social-link[_ngcontent-%COMP%]{transition:opacity .2s}.social-link[_ngcontent-%COMP%]:hover{opacity:.7}.social-link[_ngcontent-%COMP%]:active{opacity:.5}.w-inline-block[_ngcontent-%COMP%]{max-width:100%;display:inline-block}.space[_ngcontent-%COMP%]{margin-right:12px}.w-nav-overlay[_ngcontent-%COMP%]{width:100%;display:none;position:absolute;top:100%;left:0;right:0;overflow:hidden}"],changeDetection:0});let x=g;return x})();var U2=(()=>{let g=class g{constructor(){this.email="carlosroby2013@hotmail.com"}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-header"]],standalone:!0,features:[pn],decls:11,vars:1,consts:[[1,"header"],[1,"container"],[1,"pi","pi-phone"],[1,"info-phone"],["href","mailto:carlosroby2013@hotmail.com",2,"text-decoration","none","color","black"],[1,"pi","pi-envelope"],[1,"info-email"],[1,"info"]],template:function(M,r){M&1&&(re(0,"div",0)(1,"div",1)(2,"a"),_t(3,"i",2),re(4,"span",3),_e(5," 316 539 3147 "),se()(),re(6,"a",4),_t(7,"i",5),re(8,"span",6),_e(9),se()(),_t(10,"div",7),se()()),M&2&&(ln(9),Zo(" ",r.email," "))},dependencies:[yi],styles:[".header[_ngcontent-%COMP%]{background-color:#fff;top:0;left:0;right:0;z-index:1000;position:fixed;font-size:1.1em;color:#000;height:31px;background-image:url(/assets/backgrounds/b2.jpg)}.container[_ngcontent-%COMP%]{font-weight:600;text-align:left;position:relative;width:80%;max-width:1080px;padding-left:0;margin-left:20px}@media screen and (max-width: 479px){.container[_ngcontent-%COMP%]{width:81%}}.info[_ngcontent-%COMP%]{text-align:left;display:block;float:none;justify-content:flex-start}.info-phone[_ngcontent-%COMP%]   .info-email[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]{font-family:tdr;margin-right:12px}"],changeDetection:0});let x=g;return x})();var G2=(()=>{let g=class g{constructor(){this.title="TDWF"}};g.\u0275fac=function(M){return new(M||g)},g.\u0275cmp=sn({type:g,selectors:[["app-root"]],standalone:!0,features:[pn],decls:3,vars:0,template:function(M,r){M&1&&_t(0,"app-header")(1,"app-navbarb")(2,"router-outlet")},dependencies:[$1,j2,U2]});let x=g;return x})();vC(G2,N2).catch(x=>console.error(x));
